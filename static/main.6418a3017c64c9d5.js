(self.webpackChunknamastox_web=self.webpackChunknamastox_web||[]).push([[792],{2571:(It,ke)=>{"use strict";ke.J=void 0;var R=/^([^\w]*)(javascript|data|vbscript)/im,U=/&#(\w+)(^\w|;)?/g,q=/&(newline|tab);/gi,te=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,re=/^.+(:|&colon;)/gim,A=[".","/"];ke.J=function x(k){var I=function ne(k){return k.replace(U,function(I,S){return String.fromCharCode(S)})}(k||"").replace(q,"").replace(te,"").trim();if(!I)return"about:blank";if(function F(k){return A.indexOf(k[0])>-1}(I))return I;var S=I.match(re);return S&&R.test(S[0])?"about:blank":I}},5752:(It,ke,O)=>{"use strict";O(467);let q=null,re=1;const A=Symbol("SIGNAL");function F(t){const n=q;return q=t,n}function ee(t){if((!Te(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==re)){if(!t.producerMustRecompute(t)&&!ie(t))return t.dirty=!1,void(t.lastCleanEpoch=re);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=re}}function ie(t){tt(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(ee(e),i!==e.version))return!0}return!1}function fe(t,n){if(function Ze(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),tt(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)fe(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];tt(r),r.producerIndexOfThis[i]=n}}function Te(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function tt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Tt=null;function ei(t){return"function"==typeof t}function jt(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const pn=jt(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function ln(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Fn{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(ei(i))try{i()}catch(o){n=o instanceof pn?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Gt(o)}catch(l){n=n??[],l instanceof pn?n=[...n,...l.errors]:n.push(l)}}if(n)throw new pn(n)}}add(n){var e;if(n&&n!==this)if(this.closed)Gt(n);else{if(n instanceof Fn){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&ln(e,n)}remove(n){const{_finalizers:e}=this;e&&ln(e,n),n instanceof Fn&&n._removeParent(this)}}Fn.EMPTY=(()=>{const t=new Fn;return t.closed=!0,t})();const Ci=Fn.EMPTY;function xi(t){return t instanceof Fn||t&&"closed"in t&&ei(t.remove)&&ei(t.add)&&ei(t.unsubscribe)}function Gt(t){ei(t)?t():t.unsubscribe()}const At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Bt={setTimeout(t,n,...e){const{delegate:i}=Bt;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Bt;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yn(t){Bt.setTimeout(()=>{const{onUnhandledError:n}=At;if(!n)throw t;n(t)})}function Ln(){}const zt=ti("C",void 0,void 0);function ti(t,n,e){return{kind:t,value:n,error:e}}let ai=null;function ns(t){if(At.useDeprecatedSynchronousErrorHandling){const n=!ai;if(n&&(ai={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=ai;if(ai=null,e)throw i}}else t()}class ao extends Fn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,xi(n)&&n.add(this)):this.destination=$a}static create(n,e,i){return new Us(n,e,i)}next(n){this.isStopped?Js(function mn(t){return ti("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Js(function nn(t){return ti("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Js(zt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Co=Function.prototype.bind;function Do(t,n){return Co.call(t,n)}class Rs{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){ea(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){ea(i)}else ea(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){ea(e)}}}class Us extends ao{constructor(n,e,i){let r;if(super(),ei(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&At.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&Do(n.next,o),error:n.error&&Do(n.error,o),complete:n.complete&&Do(n.complete,o)}):r=n}this.destination=new Rs(r)}}function ea(t){At.useDeprecatedSynchronousErrorHandling?function oo(t){At.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=t)}(t):yn(t)}function Js(t,n){const{onStoppedNotification:e}=At;e&&Bt.setTimeout(()=>e(t,n))}const $a={closed:!0,next:Ln,error:function jo(t){throw t},complete:Ln},Xl="function"==typeof Symbol&&Symbol.observable||"@@observable";function wa(t){return t}let Zr=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const o=function hc(t){return t&&t instanceof ao||function sl(t){return t&&ei(t.next)&&ei(t.error)&&ei(t.complete)}(t)&&xi(t)}(e)?e:new Us(e,i,r);return ns(()=>{const{operator:l,source:h}=this;o.add(l?l.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=yl(i))((r,o)=>{const l=new Us({next:h=>{try{e(h)}catch(g){o(g),l.unsubscribe()}},error:o,complete:r});this.subscribe(l)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Xl](){return this}pipe(...e){return function Ca(t){return 0===t.length?wa:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=yl(e))((i,r)=>{let o;this.subscribe(l=>o=l,l=>r(l),()=>i(o))})}}return t.create=n=>new t(n),t})();function yl(t){var n;return null!==(n=t??At.Promise)&&void 0!==n?n:Promise}const fc=jt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ir=(()=>{class t extends Zr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new hn(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new fc}next(e){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){ns(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Ci:(this.currentObservers=null,o.push(e),new Fn(()=>{this.currentObservers=null,ln(o,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){const e=new Zr;return e.source=this,e}}return t.create=(n,e)=>new hn(n,e),t})();class hn extends Ir{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Ci}}class Gn extends Ir{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function Ne(t){return n=>{if(function dr(t){return ei(t?.lift)}(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function li(t,n,e,i,r){return new Ki(t,n,e,i,r)}class Ki extends ao{constructor(n,e,i,r,o,l){super(n),this.onFinalize=o,this.shouldUnsubscribe=l,this._next=e?function(h){try{e(h)}catch(g){n.error(g)}}:super._next,this._error=r?function(h){try{r(h)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Xi(t,n){return Ne((e,i)=>{let r=0;e.subscribe(li(i,o=>{i.next(t.call(n,o,r++))}))})}const oi="https://g.co/ng/security#xss";class Yt extends Error{constructor(n,e){super(function To(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Hr(t){return{toString:t}.toString()}const Uo="__parameters__";function $o(t,n,e){return Hr(()=>{const i=function Di(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;const l=new r(...o);return h.annotation=l,h;function h(g,b,E){const B=g.hasOwnProperty(Uo)?g[Uo]:Object.defineProperty(g,Uo,{value:[]})[Uo];for(;B.length<=E;)B.push(null);return(B[E]=B[E]||[]).push(l),g}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const Yr=globalThis;function Pr(t){for(let n in t)if(t[n]===Pr)return n;throw Error("Could not find renamed property on target object.")}function gs(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function ms(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ms).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function ql(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const _s=Pr({__forward_ref__:Pr});function cr(t){return t.__forward_ref__=cr,t.toString=function(){return ms(this())},t}function Ui(t){return xa(t)?t():t}function xa(t){return"function"==typeof t&&t.hasOwnProperty(_s)&&t.__forward_ref__===cr}function Un(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fr(t){return{providers:t.providers||[],imports:t.imports||[]}}function pc(t){return Uu(t,gu)||Uu(t,Yc)}function Uu(t,n){return t.hasOwnProperty(n)?t[n]:null}function Nc(t){return t&&(t.hasOwnProperty(zu)||t.hasOwnProperty(Xc))?t[zu]:null}const gu=Pr({\u0275prov:Pr}),zu=Pr({\u0275inj:Pr}),Yc=Pr({ngInjectableDef:Pr}),Xc=Pr({ngInjectorDef:Pr});class yi{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Un({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Go(t){return t&&!!t.\u0275providers}const Ys=Pr({\u0275cmp:Pr}),Xs=Pr({\u0275dir:Pr}),_u=Pr({\u0275pipe:Pr}),zo=Pr({\u0275mod:Pr}),wl=Pr({\u0275fac:Pr}),la=Pr({__NG_ELEMENT_ID__:Pr}),Ea=Pr({__NG_ENV_ID__:Pr});function Dr(t){return"string"==typeof t?t:null==t?"":String(t)}function kf(t,n){throw new Yt(-201,!1)}var ks=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ks||{});let Oh;function Rp(){return Oh}function Ps(t){const n=Oh;return Oh=t,n}function cd(t,n,e){const i=pc(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&ks.Optional?null:void 0!==n?n:void kf()}const Kc={},ud="__NG_DI_FLAG__",yu="ngTempTokenPath",La=/\n/gm,Mf="__source";let Rc;function Pc(t){const n=Rc;return Rc=t,n}function Pp(t,n=ks.Default){if(void 0===Rc)throw new Yt(-203,!1);return null===Rc?cd(t,void 0,n):Rc.get(t,n&ks.Optional?null:void 0,n)}function Ii(t,n=ks.Default){return(Rp()||Pp)(Ui(t),n)}function $t(t,n=ks.Default){return Ii(t,Lh(n))}function Lh(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vu(t){const n=[];for(let e=0;e<t.length;e++){const i=Ui(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Yt(900,!1);let r,o=ks.Default;for(let l=0;l<i.length;l++){const h=i[l],g=Hu(h);"number"==typeof g?-1===g?r=h.token:o|=g:r=h}n.push(Ii(r,o))}else n.push(Ii(i))}return n}function dd(t,n){return t[ud]=n,t.prototype[ud]=n,t}function Hu(t){return t[ud]}const Zc=dd($o("Optional"),8),Hd=dd($o("SkipSelf"),4);function Qc(t,n){return t.hasOwnProperty(wl)?t[wl]:null}function Kl(t,n){t.forEach(e=>Array.isArray(e)?Kl(e,n):n(e))}function Bh(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function bu(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Tl(t,n,e){let i=pd(t,n);return i>=0?t[1|i]=e:(i=~i,function hd(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function fd(t,n){const e=pd(t,n);if(e>=0)return t[1|e]}function pd(t,n){return function Nf(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const o=i+(r-i>>1),l=t[o<<e];if(n===l)return o<<e;l>n?r=o:i=o+1}return~(r<<e)}(t,n,1)}const Zl={},zs=[],wu=new yi(""),Fc=new yi("",-1),Cu=new yi("");class Gd{get(n,e=Kc){if(e===Kc){const i=new Error(`NullInjectorError: No provider for ${ms(n)}!`);throw i.name="NullInjectorError",i}return e}}var Of=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Of||{}),Ql=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ql||{}),uo=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(uo||{});function Rf(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}function Pf(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const o=e[i++],l=e[i++],h=e[i++];t.setAttribute(n,l,h,o)}else{const o=r,l=e[++i];Yd(o)?t.setProperty(n,o,l):t.setAttribute(n,o,l),i++}}return i}function Ff(t){return 3===t||4===t||6===t}function Yd(t){return 64===t.charCodeAt(0)}function Lc(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Xd(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Xd(t,n,e,i,r){let o=0,l=t.length;if(-1===n)l=-1;else for(;o<t.length;){const h=t[o++];if("number"==typeof h){if(h===n){l=-1;break}if(h>n){l=o-1;break}}}for(;o<t.length;){const h=t[o];if("number"==typeof h)break;if(h===e){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==l&&(t.splice(l,0,n),o=l+1),t.splice(o++,0,e),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Bp="ng-template";function Tu(t,n,e,i){let r=0;if(i){for(;r<n.length&&"string"==typeof n[r];r+=2)if("class"===n[r]&&-1!==Rf(n[r+1].toLowerCase(),e,0))return!0}else if($u(t))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&"string"==typeof(o=n[r]);)if(o.toLowerCase()===e)return!0}return!1}function $u(t){return 4===t.type&&t.value!==Bp}function Vh(t,n,e){return n===(4!==t.type||e?t.value:Bp)}function Vp(t,n,e){let i=4;const r=t.attrs,o=null!==r?function Up(t){for(let n=0;n<t.length;n++)if(Ff(t[n]))return n;return t.length}(r):0;let l=!1;for(let h=0;h<n.length;h++){const g=n[h];if("number"!=typeof g){if(!l)if(4&i){if(i=2|1&i,""!==g&&!Vh(t,g,e)||""===g&&1===n.length){if(xl(i))return!1;l=!0}}else if(8&i){if(null===r||!Tu(t,r,g,e)){if(xl(i))return!1;l=!0}}else{const b=n[++h],E=Lf(g,r,$u(t),e);if(-1===E){if(xl(i))return!1;l=!0;continue}if(""!==b){let B;if(B=E>o?"":r[E+1].toLowerCase(),2&i&&b!==B){if(xl(i))return!1;l=!0}}}}else{if(!l&&!xl(i)&&!xl(g))return!1;if(l&&xl(g))continue;l=!1,i=g|1&i}}return xl(i)||l}function xl(t){return!(1&t)}function Lf(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){const l=n[r];if(l===t)return r;if(3===l||6===l)o=!0;else{if(1===l||2===l){let h=n[++r];for(;"string"==typeof h;)h=n[++r];continue}if(4===l)break;if(0===l){r+=4;continue}}r+=o?1:2}return-1}return function Ng(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function Uh(t,n,e=!1){for(let i=0;i<n.length;i++)if(Vp(t,n[i],e))return!0;return!1}function Og(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function Vf(t,n){return t?":not("+n.trim()+")":n}function Uf(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let l=t[e];if("string"==typeof l)if(2&i){const h=t[++e];r+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else 8&i?r+="."+l:4&i&&(r+=" "+l);else""!==r&&!xl(l)&&(n+=Vf(o,r),r=""),i=l,o=o||!xl(i);e++}return""!==r&&(n+=Vf(o,r)),n}function bs(t){return Hr(()=>{const n=zf(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Of.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ql.Emulated,styles:t.styles||zs,_:null,schemas:t.schemas||null,tView:null,id:""};Gi(e);const i=t.dependencies;return e.directiveDefs=Wu(i,!1),e.pipeDefs=Wu(i,!0),e.id=function Fl(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of e)n=Math.imul(31,n)+r.charCodeAt(0)|0;return n+=2147483648,"c"+n}(e),e})}function El(t){return Jr(t)||Xo(t)}function gd(t){return null!==t}function Fs(t){return Hr(()=>({type:t.type,bootstrap:t.bootstrap||zs,declarations:t.declarations||zs,imports:t.imports||zs,exports:t.exports||zs,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Hp(t,n){if(null==t)return Zl;const e={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];let o,l,h=uo.None;Array.isArray(r)?(h=r[0],o=r[1],l=r[2]??o):(o=r,l=r),n?(e[o]=h!==uo.None?[i,h]:i,n[o]=l):e[o]=i}return e}function vi(t){return Hr(()=>{const n=zf(t);return Gi(n),n})}function Yo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jr(t){return t[Ys]||null}function Xo(t){return t[Xs]||null}function ca(t){return t[_u]||null}function zf(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Zl,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||zs,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Hp(t.inputs,n),outputs:Hp(t.outputs),debugInfo:null}}function Gi(t){t.features?.forEach(n=>n(t))}function Wu(t,n){if(!t)return null;const e=n?ca:El;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(gd)}function xu(t){return{\u0275providers:t}}function md(...t){return{\u0275providers:qd(0,t),\u0275fromNgModule:!0}}function qd(t,...n){const e=[],i=new Set;let r;const o=l=>{e.push(l)};return Kl(n,l=>{const h=l;Gu(h,o,[],i)&&(r||=[],r.push(h))}),void 0!==r&&qo(r,o),e}function qo(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:r}=t[e];ll(r,o=>{n(o,i)})}}function Gu(t,n,e,i){if(!(t=Ui(t)))return!1;let r=null,o=Nc(t);const l=!o&&Jr(t);if(o||l){if(l&&!l.standalone)return!1;r=t}else{const g=t.ngModule;if(o=Nc(g),!o)return!1;r=g}const h=i.has(r);if(l){if(h)return!1;if(i.add(r),l.dependencies){const g="function"==typeof l.dependencies?l.dependencies():l.dependencies;for(const b of g)Gu(b,n,e,i)}}else{if(!o)return!1;{if(null!=o.imports&&!h){let b;i.add(r);try{Kl(o.imports,E=>{Gu(E,n,e,i)&&(b||=[],b.push(E))})}finally{}void 0!==b&&qo(b,n)}if(!h){const b=Qc(r)||(()=>new r);n({provide:r,useFactory:b,deps:zs},r),n({provide:Cu,useValue:r,multi:!0},r),n({provide:wu,useValue:()=>Ii(r),multi:!0},r)}const g=o.providers;if(null!=g&&!h){const b=t;ll(g,E=>{n(E,b)})}}}return r!==t&&void 0!==t.providers}function ll(t,n){for(let e of t)Go(e)&&(e=e.\u0275providers),Array.isArray(e)?ll(e,n):n(e)}const $p=Pr({provide:String,useValue:Pr});function Hh(t){return null!==t&&"object"==typeof t&&$p in t}function Jc(t){return"function"==typeof t}const jh=new yi(""),_d={},Pg={};let eu;function Ll(){return void 0===eu&&(eu=new Gd),eu}class Sl{}class Yu extends Sl{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qd(n,l=>this.processProvider(l)),this.records.set(Fc,yd(void 0,this)),r.has("environment")&&this.records.set(Sl,yd(void 0,this));const o=this.records.get(jh);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Cu,zs,ks.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=F(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=Pc(this),i=Ps(void 0);try{return n()}finally{Pc(e),Ps(i)}}get(n,e=Kc,i=ks.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ea))return n[Ea](this);i=Lh(i);const o=Pc(this),l=Ps(void 0);try{if(!(i&ks.SkipSelf)){let g=this.records.get(n);if(void 0===g){const b=function Xu(t){return"function"==typeof t||"object"==typeof t&&t instanceof yi}(n)&&pc(n);g=b&&this.injectableDefInScope(b)?yd(_c(n),_d):null,this.records.set(n,g)}if(null!=g)return this.hydrate(n,g)}return(i&ks.Self?Ll():this.parent).get(n,e=i&ks.Optional&&e===Kc?null:e)}catch(h){if("NullInjectorError"===h.name){if((h[yu]=h[yu]||[]).unshift(ms(n)),o)throw h;return function Fp(t,n,e,i){const r=t[yu];throw n[Mf]&&r.unshift(n[Mf]),t.message=function zd(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ms(n);if(Array.isArray(n))r=n.map(ms).join(" -> ");else if("object"==typeof n){let o=[];for(let l in n)if(n.hasOwnProperty(l)){let h=n[l];o.push(l+":"+("string"==typeof h?JSON.stringify(h):ms(h)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(La,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[yu]=null,t}(h,n,"R3InjectorError",this.source)}throw h}finally{Ps(l),Pc(o)}}resolveInjectorInitializers(){const n=F(null),e=Pc(this),i=Ps(void 0);try{const o=this.get(wu,zs,ks.Self);for(const l of o)l()}finally{Pc(e),Ps(i),F(n)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(ms(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Yt(205,!1)}processProvider(n){let e=Jc(n=Ui(n))?n:Ui(n&&n.provide);const i=function Zd(t){return Hh(t)?yd(void 0,t.useValue):yd(Gp(t),_d)}(n);if(!Jc(n)&&!0===n.multi){let r=this.records.get(e);r||(r=yd(void 0,_d,!0),r.factory=()=>vu(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){const i=F(null);try{return e.value===_d&&(e.value=Pg,e.value=e.factory()),"object"==typeof e.value&&e.value&&function jf(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{F(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ui(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function _c(t){const n=pc(t),e=null!==n?n.factory:Qc(t);if(null!==e)return e;if(t instanceof yi)throw new Yt(204,!1);if(t instanceof Function)return function Wp(t){if(t.length>0)throw new Yt(204,!1);const e=function bl(t){return t&&(t[gu]||t[Yc])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Yt(204,!1)}function Gp(t,n,e){let i;if(Jc(t)){const r=Ui(t);return Qc(r)||_c(r)}if(Hh(t))i=()=>Ui(t.useValue);else if(function Hf(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...vu(t.deps||[]));else if(function Kd(t){return!(!t||!t.useExisting)}(t))i=()=>Ii(Ui(t.useExisting));else{const r=Ui(t&&(t.useClass||t.provide));if(!function Fg(t){return!!t.deps}(t))return Qc(r)||_c(r);i=()=>new r(...vu(t.deps))}return i}function yd(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Qd(t,n){for(const e of t)Array.isArray(e)?Qd(e,n):e&&Go(e)?Qd(e.\u0275providers,n):n(e)}const no=0,Xn=1,hr=2,ua=3,qa=4,Al=5,vc=6,Ka=7,io=8,Za=9,Bl=10,Lr=11,vd=12,Yp=13,Vl=14,Po=15,bd=16,Bc=17,Sa=18,Ba=19,bc=20,Ul=21,$f=22,Jd=23,Mr=25,Br=1,Fo=7,qu=9,go=10;var Ku=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ku||{});function Aa(t){return Array.isArray(t)&&"object"==typeof t[Br]}function zl(t){return Array.isArray(t)&&!0===t[Br]}function Wf(t){return!!(4&t.flags)}function kl(t){return t.componentOffset>-1}function eh(t){return!(1&~t.flags)}function wc(t){return!!t.template}function ut(t){return!!(512&t[hr])}class jg{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function $g(t,n,e,i){null!==n?n.applyValueToInputSignal(n,i):t[e]=i}function cl(){return _1}function _1(t){return t.type.prototype.ngOnChanges&&(t.setInput=y1),q0}function q0(){const t=qp(this),n=t?.current;if(n){const e=t.previous;if(e===Zl)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function y1(t,n,e,i,r){const o=this.declaredInputs[i],l=qp(t)||function K0(t,n){return t[nu]=n}(t,{previous:Zl,current:null}),h=l.current||(l.current={}),g=l.previous,b=g[o];h[o]=new jg(b&&b.currentValue,e,g===Zl),$g(t,n,r,e)}cl.ngInherit=!0;const nu="__ngSimpleChanges__";function qp(t){return t[nu]||null}const Hl=function(t,n,e){};let da=!1;function se(t){for(;Array.isArray(t);)t=t[no];return t}function je(t,n){return se(n[t])}function Je(t,n){return se(n[t.index])}function et(t,n){return t.data[n]}function Mt(t,n){return t[n]}function Nt(t,n){const e=n[t];return Aa(e)?e:e[no]}function zn(t){return!(128&~t[hr])}function In(t,n){return null==n?null:t[n]}function Li(t){t[Bc]=0}function ji(t){1024&t[hr]||(t[hr]|=1024,zn(t)&&Es(t))}function ls(t){return!!(9216&t[hr]||t[Jd]?.dirty)}function cs(t){t[Bl].changeDetectionScheduler?.notify(1),ls(t)?Es(t):64&t[hr]&&(function Z0(){return da}()?(t[hr]|=1024,Es(t)):t[Bl].changeDetectionScheduler?.notify())}function Es(t){t[Bl].changeDetectionScheduler?.notify();let n=Da(t);for(;null!==n&&!(8192&n[hr])&&(n[hr]|=8192,zn(n));)n=Da(n)}function na(t,n){if(!(256&~t[hr]))throw new Yt(911,!1);null===t[Ul]&&(t[Ul]=[]),t[Ul].push(n)}function Da(t){const n=t[ua];return zl(n)?n[ua]:n}const ri={lFrame:Dl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wo(){return ri.bindingsEnabled}function ss(){return null!==ri.skipHydrationRootTNode}function tn(){return ri.lFrame.lView}function ar(){return ri.lFrame.tView}function on(t){return ri.lFrame.contextLView=t,t[io]}function rn(t){return ri.lFrame.contextLView=null,t}function Ms(){let t=sh();for(;null!==t&&64===t.type;)t=t.parent;return t}function sh(){return ri.lFrame.currentTNode}function tc(t,n){const e=ri.lFrame;e.currentTNode=t,e.isParent=n}function oh(){return ri.lFrame.isParent}function Ua(){ri.lFrame.isParent=!1}function Cc(){const t=ri.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function iu(){return ri.lFrame.bindingIndex}function Eu(){return ri.lFrame.bindingIndex++}function $h(t){const n=ri.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function sy(t,n){const e=ri.lFrame;e.bindingIndex=e.bindingRootIndex=t,Wh(n)}function Wh(t){ri.lFrame.currentDirectiveIndex=t}function oy(t){const n=ri.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Yg(){return ri.lFrame.currentQueryIndex}function Kf(t){ri.lFrame.currentQueryIndex=t}function ay(t){const n=t[Xn];return 2===n.type?n.declTNode:1===n.type?t[Al]:null}function Xg(t,n,e){if(e&ks.SkipSelf){let r=n,o=t;for(;!(r=r.parent,null!==r||e&ks.Host||(r=ay(o),null===r||(o=o[Vl],10&r.type))););if(null===r)return!1;n=r,t=o}const i=ri.lFrame=Su();return i.currentTNode=n,i.lView=t,!0}function za(t){const n=Su(),e=t[Xn];ri.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Su(){const t=ri.lFrame,n=null===t?null:t.child;return null===n?Dl(t):n}function Dl(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function qg(){const t=ri.lFrame;return ri.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Kg=qg;function Zu(){const t=qg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nc(){return ri.lFrame.selectedIndex}function Zf(t){ri.lFrame.selectedIndex=t}function Ko(){const t=ri.lFrame;return et(t.tView,t.selectedIndex)}let Gh=!0;function Zp(){return Gh}function ru(t){Gh=t}function tm(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:b,ngOnDestroy:E}=o;l&&(t.contentHooks??=[]).push(-e,l),h&&((t.contentHooks??=[]).push(e,h),(t.contentCheckHooks??=[]).push(e,h)),g&&(t.viewHooks??=[]).push(-e,g),b&&((t.viewHooks??=[]).push(e,b),(t.viewCheckHooks??=[]).push(e,b)),null!=E&&(t.destroyHooks??=[]).push(e,E)}}function ah(t,n,e){Tc(t,n,3,e)}function Vc(t,n,e,i){(3&t[hr])===e&&Tc(t,n,e,i)}function Cd(t,n){let e=t[hr];(3&e)===n&&(e&=16383,e+=1,t[hr]=e)}function Tc(t,n,e,i){const o=i??-1,l=n.length-1;let h=0;for(let g=void 0!==i?65535&t[Bc]:0;g<l;g++)if("number"==typeof n[g+1]){if(h=n[g],null!=i&&h>=i)break}else n[g]<0&&(t[Bc]+=65536),(h<o||-1==o)&&(lh(t,e,n,g),t[Bc]=(4294901760&t[Bc])+g+2),g++}function Qu(t,n){Hl(4,t,n);const e=F(null);try{n.call(t)}finally{F(e),Hl(5,t,n)}}function lh(t,n,e,i){const r=e[i]<0,o=e[i+1],h=t[r?-e[i]:e[i]];r?t[hr]>>14<t[Bc]>>16&&(3&t[hr])===n&&(t[hr]+=16384,Qu(h,o)):Qu(h,o)}const ch=-1;class Qp{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function dy(t){return t!==ch}function Au(t){return 32767&t}function Jp(t,n){let e=function ZC(t){return t>>16}(t),i=n;for(;e>0;)i=i[Vl],e--;return i}let hy=!0;function v1(t){const n=hy;return hy=t,n}const fy=255,nm=5;let b1=0;const Uc={};function Qg(t,n){const e=py(t,n);if(-1!==e)return e;const i=n[Xn];i.firstCreatePass&&(t.injectorIndex=n.length,Ja(i.data,t),Ja(n,null),Ja(i.blueprint,null));const r=Jg(t,n),o=t.injectorIndex;if(dy(r)){const l=Au(r),h=Jp(r,n),g=h[Xn].data;for(let b=0;b<8;b++)n[o+b]=h[l+b]|g[l+b]}return n[o+8]=r,o}function Ja(t,n){t.push(0,0,0,0,0,0,0,0,n)}function py(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Jg(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=yy(r),null===i)return ch;if(e++,r=r[Vl],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return ch}function ro(t,n,e){!function Ob(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(la)&&(i=e[la]),null==i&&(i=e[la]=b1++);const r=i&fy;n.data[t+(r>>nm)]|=1<<r}(t,n,e)}function eg(t,n,e){if(e&ks.Optional||void 0!==t)return t;kf()}function tg(t,n,e,i){if(e&ks.Optional&&void 0===i&&(i=null),!(e&(ks.Self|ks.Host))){const r=t[Za],o=Ps(void 0);try{return r?r.get(n,i,e&ks.Optional):cd(n,i,e&ks.Optional)}finally{Ps(o)}}return eg(i,0,e)}function gy(t,n,e,i=ks.Default,r){if(null!==t){if(2048&n[hr]&&!(i&ks.Self)){const l=function Bb(t,n,e,i,r){let o=t,l=n;for(;null!==o&&null!==l&&2048&l[hr]&&!(512&l[hr]);){const h=my(o,l,e,i|ks.Self,Uc);if(h!==Uc)return h;let g=o.parent;if(!g){const b=l[bc];if(b){const E=b.get(e,Uc,i);if(E!==Uc)return E}g=yy(l),l=l[Vl]}o=g}return r}(t,n,e,i,Uc);if(l!==Uc)return l}const o=my(t,n,e,i,Uc);if(o!==Uc)return o}return tg(n,e,i,r)}function my(t,n,e,i,r){const o=function Pb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(la)?t[la]:void 0;return"number"==typeof n?n>=0?n&fy:Lb:n}(e);if("function"==typeof o){if(!Xg(n,t,i))return i&ks.Host?eg(r,0,i):tg(n,e,i,r);try{let l;if(l=o(i),null!=l||i&ks.Optional)return l;kf()}finally{Kg()}}else if("number"==typeof o){let l=null,h=py(t,n),g=ch,b=i&ks.Host?n[Po][Al]:null;for((-1===h||i&ks.SkipSelf)&&(g=-1===h?Jg(t,n):n[h+8],g!==ch&&Fb(i,!1)?(l=n[Xn],h=Au(g),n=Jp(g,n)):h=-1);-1!==h;){const E=n[Xn];if(_y(o,h,E.data)){const B=Xh(h,n,e,l,i,b);if(B!==Uc)return B}g=n[h+8],g!==ch&&Fb(i,n[Xn].data[h+8]===b)&&_y(o,h,n)?(l=E,h=Au(g),n=Jp(g,n)):h=-1}}return r}function Xh(t,n,e,i,r,o){const l=n[Xn],h=l.data[t+8],E=w1(h,l,e,null==i?kl(h)&&hy:i!=l&&!!(3&h.type),r&ks.Host&&o===h);return null!==E?ng(n,l,E,h):Uc}function w1(t,n,e,i,r){const o=t.providerIndexes,l=n.data,h=1048575&o,g=t.directiveStart,E=o>>20,ce=r?h+E:t.directiveEnd;for(let de=i?h:h+E;de<ce;de++){const De=l[de];if(de<g&&e===De||de>=g&&De.type===e)return de}if(r){const de=l[g];if(de&&wc(de)&&de.type===e)return g}return null}function ng(t,n,e,i){let r=t[e];const o=n.data;if(function cy(t){return t instanceof Qp}(r)){const l=r;l.resolving&&function Af(t,n){throw n&&n.join(" > "),new Yt(-200,t)}(function vs(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Dr(t)}(o[e]));const h=v1(l.canSeeViewProviders);l.resolving=!0;const b=l.injectImpl?Ps(l.injectImpl):null;Xg(t,i,ks.Default);try{r=t[e]=l.factory(void 0,o,t,i),n.firstCreatePass&&e>=i.directiveStart&&function em(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){const l=_1(n);(e.preOrderHooks??=[]).push(t,l),(e.preOrderCheckHooks??=[]).push(t,l)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}(e,o[e],n)}finally{null!==b&&Ps(b),v1(h),l.resolving=!1,Kg()}}return r}function _y(t,n,e){return!!(e[n+(t>>nm)]&1<<t)}function Fb(t,n){return!(t&ks.Self||t&ks.Host&&n)}class Ha{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return gy(this._tNode,this._lView,n,Lh(i),e)}}function Lb(){return new Ha(Ms(),tn())}function Zo(t){return Hr(()=>{const n=t.prototype.constructor,e=n[wl]||C1(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[wl]||C1(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function C1(t){return xa(t)?()=>{const n=C1(Ui(t));return n&&n()}:Qc(t)}function yy(t){const n=t[Xn],e=n.type;return 2===e?n.declTNode:1===e?t[Al]:null}function rm(t,n=null,e=null,i){const r=sm(t,n,e,i);return r.resolveInjectorInitializers(),r}function sm(t,n=null,e=null,i,r=new Set){const o=[e||zs,md(t)];return i=i||("object"==typeof t?void 0:ms(t)),new Yu(o,n||Ll(),i||null,r)}let fa=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Kc;static#t=this.NULL=new Gd;static create(e,i){if(Array.isArray(e))return rm({name:""},i,e,"");{const r=e.name??"";return rm({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Un({token:t,providedIn:"any",factory:()=>Ii(Fc)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function om(t){return t.ngOriginalError}class ed{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&om(n);for(;e&&om(e);)e=om(e);return e||null}}const su=new yi("",{providedIn:"root",factory:()=>$t(ed).handleError.bind(void 0)});let ku=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Hb;static#t=this.__NG_ENV_ID__=e=>e}return t})();class zb extends ku{constructor(n){super(),this._lView=n}onDestroy(n){return na(this._lView,n),()=>function ha(t,n){if(null===t[Ul])return;const e=t[Ul].indexOf(n);-1!==e&&t[Ul].splice(e,1)}(this._lView,n)}}function Hb(){return new zb(tn())}function Wb(){return Kh(Ms(),tn())}function Kh(t,n){return new Ks(Je(t,n))}let Ks=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=Wb}return t})();function Ma(t){return t instanceof Ks?t.nativeElement:t}function lm(t){return n=>{setTimeout(t,void 0,n)}}const mr=class am extends Ir{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,function Jl(){return void 0!==Rp()||null!=function Ud(){return Rc}()}()&&(this.destroyRef=$t(ku,{optional:!0})??void 0)}emit(n){const e=F(null);try{super.next(n)}finally{F(e)}}subscribe(n,e,i){let r=n,o=e||(()=>null),l=i;if(n&&"object"==typeof n){const g=n;r=g.next?.bind(g),o=g.error?.bind(g),l=g.complete?.bind(g)}this.__isAsync&&(o=lm(o),r&&(r=lm(r)),l&&(l=lm(l)));const h=super.subscribe({next:r,error:o,complete:l});return n instanceof Fn&&n.add(h),h}};function n0(){return this._results[Symbol.iterator]()}class A1{static#e=Symbol.iterator;get changes(){return this._changes??=new mr}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=A1.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=n0)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;const i=function ta(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function jd(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function r0(t){return!(128&~t.flags)}const s0=new Map;let Gb=0;const I1="__ngContext__";function ic(t,n){Aa(n)?(t[I1]=n[Ba],function Xb(t){s0.set(t[Ba],t)}(n)):t[I1]=n}function O1(t){return hm(t[vd])}function np(t){return hm(t[qa])}function hm(t){for(;null!==t&&!zl(t);)t=t[qa];return t}let P1;function Zh(){if(void 0!==P1)return P1;if(typeof document<"u")return document;throw new Yt(210,!1)}const F1=new yi("",{providedIn:"root",factory:()=>t2}),t2="ng",L1=new yi(""),hh=new yi("",{providedIn:"platform",factory:()=>"unknown"}),n2=new yi(""),Ia=new yi("",{providedIn:"root",factory:()=>Zh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let l0=()=>null;function tf(t,n,e=!1){return l0(t,n,e)}const Ly=new yi("",{providedIn:"root",factory:()=>!1});let fh,h0;function d0(t){return function Cm(){if(void 0===fh&&(fh=null,Yr.trustedTypes))try{fh=Yr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fh}()?.createHTML(t)||t}function Uy(t){return function H1(){if(void 0===h0&&(h0=null,Yr.trustedTypes))try{h0=Yr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return h0}()?.createHTML(t)||t}class m{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oi})`}}class T extends m{getTypeName(){return"HTML"}}class N extends m{getTypeName(){return"Style"}}class oe extends m{getTypeName(){return"Script"}}class ue extends m{getTypeName(){return"URL"}}class he extends m{getTypeName(){return"ResourceURL"}}function ve(t){return t instanceof m?t.changingThisBreaksApplicationSecurity:t}function ze(t,n){const e=function Be(t){return t instanceof m&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${oi})`)}return e===n}class Nn{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(d0(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class un{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=d0(n),e}}const $n=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gi(t){return(t=String(t)).match($n)?t:"unsafe:"+t}function di(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Zn(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const Vr=di("area,br,col,hr,img,wbr"),os=di("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mo=di("rp,rt"),ci=Zn(Vr,Zn(os,di("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(mo,di("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn(mo,os)),Dt=di("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ni=Zn(Dt,di("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),di("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ji=di("script,style,template");class Vi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0,r=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)r.push(e),e=qr(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=Tr(e);if(o){e=o;break}e=r.pop()}return this.buf.join("")}startElement(n){const e=el(n).toLowerCase();if(!ci.hasOwnProperty(e))return this.sanitizedSomething=!0,!Ji.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),l=o.name,h=l.toLowerCase();if(!ni.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;Dt[h]&&(g=gi(g)),this.buf.push(" ",l,'="',fo(g),'"')}return this.buf.push(">"),!0}endElement(n){const e=el(n).toLowerCase();ci.hasOwnProperty(e)&&!Vr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(fo(n))}}function Tr(t){const n=t.nextSibling;if(n&&t!==n.previousSibling)throw Oo(n);return n}function qr(t){const n=t.firstChild;if(n&&function ur(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,n))throw Oo(n);return n}function el(t){const n=t.nodeName;return"string"==typeof n?n:"FORM"}function Oo(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const Lo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dl=/([^\#-~ |!])/g;function fo(t){return t.replace(/&/g,"&amp;").replace(Lo,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(dl,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _o;function Oi(t,n){let e=null;try{_o=_o||function pr(t){const n=new un(t);return function pi(){try{return!!(new window.DOMParser).parseFromString(d0(""),"text/html")}catch{return!1}}()?new Nn(n):n}(t);let i=n?String(n):"";e=_o.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=_o.getInertBodyElement(i)}while(i!==o);return d0((new Vi).sanitizeChildren(br(e)||e))}finally{if(e){const i=br(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function br(t){return"content"in t&&function Ls(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var vn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(vn||{});function po(t){const n=j1();return n?Uy(n.sanitize(vn.HTML,t)||""):ze(t,"HTML")?Uy(ve(t)):Oi(Zh(),Dr(t))}function ra(t){const n=j1();return n?n.sanitize(vn.URL,t)||"":ze(t,"URL")?ve(t):gi(Dr(t))}function j1(){const t=tn();return t&&t[Bl].sanitizer}const cT=/^>|^->|<!--|-->|--!>|<!-$/g,o3=/(<|>)/g,l2="\u200b$1\u200b";function $y(t){return t.ownerDocument}var up=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(up||{});let Wy;function Gy(t,n){return Wy(t,n)}function _0(t,n,e,i,r){if(null!=i){let o,l=!1;zl(i)?o=i:Aa(i)&&(l=!0,i=i[no]);const h=se(i);0===t&&null!==e?null==r?b2(n,e,h):y0(n,e,h,r||null,!0):1===t&&null!==e?y0(n,e,h,r||null,!0):2===t?function xm(t,n,e){const i=Y1(t,n);i&&function ET(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,h,l):3===t&&n.destroyNode(h),null!=o&&function g3(t,n,e,i,r){const o=e[Fo];o!==se(e)&&_0(n,t,i,o,r);for(let h=go;h<e.length;h++){const g=e[h];q1(g[Xn],g,t,n,i,o)}}(n,t,o,e,r)}}function y2(t,n){return t.createComment(function Hy(t){return t.replace(cT,n=>n.replace(o3,l2))}(n))}function ug(t,n,e){return t.createElement(n,e)}function v2(t,n){n[Bl].changeDetectionScheduler?.notify(1),q1(t,n,n[Lr],2,null,null)}function CT(t,n){const e=t[qu],i=e.indexOf(n);e.splice(i,1)}function G1(t,n){if(t.length<=go)return;const e=go+n,i=t[e];if(i){const r=i[bd];null!==r&&r!==t&&CT(r,i),n>0&&(t[e-1][qa]=i[qa]);const o=bu(t,go+n);!function _T(t,n){v2(t,n),n[no]=null,n[Al]=null}(i[Xn],i);const l=o[Sa];null!==l&&l.detachView(o[Xn]),i[ua]=null,i[qa]=null,i[hr]&=-129}return i}function Xy(t,n){if(!(256&n[hr])){const e=n[Lr];e.destroyNode&&q1(t,n,e,3,null,null),function vT(t){let n=t[vd];if(!n)return qy(t[Xn],t);for(;n;){let e=null;if(Aa(n))e=n[vd];else{const i=n[go];i&&(e=i)}if(!e){for(;n&&!n[qa]&&n!==t;)Aa(n)&&qy(n[Xn],n),n=n[ua];null===n&&(n=t),Aa(n)&&qy(n[Xn],n),e=n&&n[qa]}n=e}}(n)}}function qy(t,n){if(256&n[hr])return;const e=F(null);try{n[hr]&=-129,n[hr]|=256,n[Jd]&&function ge(t){if(tt(t),Te(t))for(let n=0;n<t.producerNode.length;n++)fe(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(n[Jd]),function xT(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Qp)){const o=e[i+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){const h=r[o[l]],g=o[l+1];Hl(4,h,g);try{g.call(h)}finally{Hl(5,h,g)}}else{Hl(4,r,o);try{o.call(r)}finally{Hl(5,r,o)}}}}}(t,n),function TT(t,n){const e=t.cleanup,i=n[Ka];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const l=e[o+3];l>=0?i[l]():i[-l].unsubscribe(),o+=2}else e[o].call(i[e[o+1]]);null!==i&&(n[Ka]=null);const r=n[Ul];if(null!==r){n[Ul]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,n),1===n[Xn].type&&n[Lr].destroy();const i=n[bd];if(null!==i&&zl(n[ua])){i!==n[ua]&&CT(i,n);const r=n[Sa];null!==r&&r.detachView(t)}!function qb(t){s0.delete(t[Ba])}(n)}finally{F(e)}}function Ky(t,n,e){return function mh(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[no];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===Ql.None||o===Ql.Emulated)return null}return Je(i,e)}}(t,n.parent,e)}function y0(t,n,e,i,r){t.insertBefore(n,e,i,r)}function b2(t,n,e){t.appendChild(n,e)}function w2(t,n,e,i,r){null!==i?y0(t,n,e,i,r):b2(t,n,e)}function Y1(t,n){return t.parentNode(n)}function C2(t,n,e){return x2(t,n,e)}let Zy,x2=function T2(t,n,e){return 40&t.type?Je(t,e):null};function Qy(t,n,e,i){const r=Ky(t,i,n),o=n[Lr],h=C2(i.parent||n[Al],i,n);if(null!=r)if(Array.isArray(e))for(let g=0;g<e.length;g++)w2(o,r,e[g],h,!1);else w2(o,r,e,h,!1);void 0!==Zy&&Zy(o,i,n,e,r)}function X1(t,n){if(null!==n){const e=n.type;if(3&e)return Je(n,t);if(4&e)return S2(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return X1(t,i);{const r=t[n.index];return zl(r)?S2(-1,r):se(r)}}if(32&e)return Gy(n,t)()||se(t[n.index]);{const i=rf(t,n);return null!==i?Array.isArray(i)?i[0]:X1(Da(t[Po]),i):X1(t,n.next)}}return null}function rf(t,n){return null!==n?t[Po][Al].projection[n.projection]:null}function S2(t,n){const e=go+t+1;if(e<n.length){const i=n[e],r=i[Xn].firstChild;if(null!==r)return X1(i,r)}return n[Fo]}function Jy(t,n,e,i,r,o,l){for(;null!=e;){const h=i[e.index],g=e.type;if(l&&0===n&&(h&&ic(se(h),i),e.flags|=2),32&~e.flags)if(8&g)Jy(t,n,e.child,i,r,o,!1),_0(n,t,r,h,o);else if(32&g){const b=Gy(e,i);let E;for(;E=b();)_0(n,t,r,E,o);_0(n,t,r,h,o)}else 16&g?p3(t,n,i,e,r,o):_0(n,t,r,h,o);e=l?e.projectionNext:e.next}}function q1(t,n,e,i,r,o){Jy(e,i,t.firstChild,n,r,o,!1)}function p3(t,n,e,i,r,o){const l=e[Po],g=l[Al].projection[i.projection];if(Array.isArray(g))for(let b=0;b<g.length;b++)_0(n,t,r,g[b],o);else{let b=g;const E=l[ua];r0(i)&&(b.flags|=128),Jy(t,n,b,E,r,o,!0)}}function A2(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function k2(t,n,e){const{mergedAttrs:i,classes:r,styles:o}=e;null!==i&&Pf(t,n,i),null!==r&&A2(t,n,r),null!==o&&function m3(t,n,e){t.setAttribute(n,"style",e)}(t,n,o)}const Cs={};function ye(t=1){ev(ar(),tn(),nc()+t,!1)}function ev(t,n,e,i){if(!i)if(3&~n[hr]){const o=t.preOrderHooks;null!==o&&Vc(n,o,0,e)}else{const o=t.preOrderCheckHooks;null!==o&&ah(n,o,e)}Zf(e)}function St(t,n=ks.Default){const e=tn();return null===e?Ii(t,n):gy(Ms(),e,Ui(t),n)}function DT(t,n,e,i,r,o){const l=F(null);try{let h=null;r&uo.SignalBased&&(h=n[i][A]),null!==h&&void 0!==h.transformFn&&(o=h.transformFn(o)),r&uo.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(n,o)),null!==t.setInput?t.setInput(n,h,o,e,i):$g(n,h,i,o)}finally{F(l)}}function Em(t,n,e,i,r,o,l,h,g,b,E){const B=n.blueprint.slice();return B[no]=r,B[hr]=204|i,(null!==b||t&&2048&t[hr])&&(B[hr]|=2048),Li(B),B[ua]=B[Vl]=t,B[io]=e,B[Bl]=l||t&&t[Bl],B[Lr]=h||t&&t[Lr],B[Za]=g||t&&t[Za]||null,B[Al]=o,B[Ba]=function Yb(){return Gb++}(),B[vc]=E,B[bc]=b,B[Po]=2==n.type?t[Po]:B,B}function dg(t,n,e,i,r){let o=t.data[n];if(null===o)o=function K1(t,n,e,i,r){const o=sh(),l=oh(),g=t.data[n]=function w3(t,n,e,i,r,o){let l=n?n.injectorIndex:-1,h=0;return ss()&&(h|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,l?o:o&&o.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=g),null!==o&&(l?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g,g.prev=o)),g}(t,n,e,i,r),function J0(){return ri.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const l=function ec(){const t=ri.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();o.injectorIndex=null===l?-1:l.injectorIndex}return tc(o,!0),o}function dp(t,n,e,i){if(0===e)return-1;const r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Sm(t,n,e,i,r){const o=nc(),l=2&i;try{Zf(-1),l&&n.length>Mr&&ev(t,n,Mr,!1),Hl(l?2:0,r),e(i,r)}finally{Zf(o),Hl(l?3:1,r)}}function Z1(t,n,e){if(Wf(n)){const i=F(null);try{const o=n.directiveEnd;for(let l=n.directiveStart;l<o;l++){const h=t.data[l];h.contentQueries&&h.contentQueries(1,e[l],l)}}finally{F(i)}}}function Q1(t,n,e){wo()&&(function k3(t,n,e,i){const r=e.directiveStart,o=e.directiveEnd;kl(e)&&function O2(t,n,e){const i=Je(n,t),r=v0(e);let l=16;e.signals?l=4096:e.onPush&&(l=64);const h=Dm(t,Em(t,r,null,l,i,n,null,t[Bl].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=h}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||Qg(e,n),ic(i,n);const l=e.initialInputs;for(let h=r;h<o;h++){const g=t.data[h],b=ng(n,t,h,e);ic(b,n),null!==l&&rv(0,h-r,b,g,0,l),wc(g)&&(Nt(e.index,n)[io]=ng(n,t,h,e))}}(t,n,e,Je(e,n)),!(64&~e.flags)&&OT(t,n,e))}function Am(t,n,e=Je){const i=n.localNames;if(null!==i){let r=n.index+1;for(let o=0;o<i.length;o+=2){const l=i[o+1],h=-1===l?e(n,t):t[l];t[r++]=h}}}function v0(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=tv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function tv(t,n,e,i,r,o,l,h,g,b,E){const B=Mr+i,ce=B+r,de=function D2(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Cs);return e}(B,ce),De="function"==typeof b?b():b;return de[Xn]={type:t,blueprint:de,template:e,queries:null,viewQuery:h,declTNode:n,data:de.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof l?l():l,firstChild:null,schemas:g,consts:De,incompleteFirstPass:!1,ssrId:E}}let nv=()=>null;function MT(t,n,e,i,r){for(let o in n){if(!n.hasOwnProperty(o))continue;const l=n[o];if(void 0===l)continue;i??={};let h,g=uo.None;Array.isArray(l)?(h=l[0],g=l[1]):h=l;let b=o;if(null!==r){if(!r.hasOwnProperty(o))continue;b=r[o]}0===t?IT(i,e,b,h,g):IT(i,e,b,h)}return i}function IT(t,n,e,i,r){let o;t.hasOwnProperty(e)?(o=t[e]).push(n,i):o=t[e]=[n,i],void 0!==r&&o.push(r)}function Iu(t,n,e,i,r,o,l,h){const g=Je(n,e);let E,b=n.inputs;!h&&null!=b&&(E=b[i])?(ov(t,e,E,i,r),kl(n)&&function x3(t,n){const e=Nt(n,t);16&e[hr]||(e[hr]|=64)}(e,n.index)):3&n.type&&(i=function T3(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=l?l(r,n.value||"",i):r,o.setProperty(g,i,r))}function I2(t,n,e,i){if(wo()){const r=null===i?null:{"":-1},o=function M3(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let o=0;o<e.length;o++){const l=e[o];if(Uh(n,l.selectors,!1))if(i||(i=[]),wc(l))if(null!==l.findHostDirectiveDefs){const h=[];r=r||new Map,l.findHostDirectiveDefs(l,h,r),i.unshift(...h,l),N2(t,n,h.length)}else i.unshift(l),N2(t,n,0);else r=r||new Map,l.findHostDirectiveDefs?.(l,i,r),i.push(l)}return null===i?null:[i,r]}(t,e);let l,h;null===o?l=h=null:[l,h]=o,null!==l&&NT(t,n,e,l,r,h),r&&function I3(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const o=e[n[r+1]];if(null==o)throw new Yt(-301,!1);i.push(n[r],o)}}}(e,i,r)}e.mergedAttrs=Lc(e.mergedAttrs,e.attrs)}function NT(t,n,e,i,r,o){for(let b=0;b<i.length;b++)ro(Qg(e,n),t,i[b].type);!function PT(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let b=0;b<i.length;b++){const E=i[b];E.providersResolver&&E.providersResolver(E)}let l=!1,h=!1,g=dp(t,n,i.length,null);for(let b=0;b<i.length;b++){const E=i[b];e.mergedAttrs=Lc(e.mergedAttrs,E.hostAttrs),N3(t,e,n,g,E),RT(g,E,r),null!==E.contentQueries&&(e.flags|=4),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(e.flags|=64);const B=E.type.prototype;!l&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),l=!0),!h&&(B.ngOnChanges||B.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),h=!0),g++}!function C3(t,n,e){const r=n.directiveEnd,o=t.data,l=n.attrs,h=[];let g=null,b=null;for(let E=n.directiveStart;E<r;E++){const B=o[E],ce=e?e.get(B):null,De=ce?ce.outputs:null;g=MT(0,B.inputs,E,g,ce?ce.inputs:null),b=MT(1,B.outputs,E,b,De);const He=null===g||null===l||$u(n)?null:km(g,E,l);h.push(He)}null!==g&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=h,n.inputs=g,n.outputs=b}(t,e,o)}function OT(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,l=function Mb(){return ri.lFrame.currentDirectiveIndex}();try{Zf(o);for(let h=i;h<r;h++){const g=t.data[h],b=n[h];Wh(h),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&D3(g,b)}}finally{Zf(-1),Wh(l)}}function D3(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function N2(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function RT(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;wc(n)&&(e[""]=t)}}function N3(t,n,e,i,r){t.data[i]=r;const o=r.factory||(r.factory=Qc(r.type)),l=new Qp(o,wc(r),St);t.blueprint[i]=l,e[i]=l,function S3(t,n,e,i,r){const o=r.hostBindings;if(o){let l=t.hostBindingOpCodes;null===l&&(l=t.hostBindingOpCodes=[]);const h=~n.index;(function A3(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(l)!=h&&l.push(h),l.push(e,i,o)}}(t,n,i,dp(t,e,r.hostVars,Cs),r)}function _h(t,n,e,i,r,o){const l=Je(t,n);!function iv(t,n,e,i,r,o,l){if(null==o)t.removeAttribute(n,r,e);else{const h=null==l?Dr(o):l(o,i||"",r);t.setAttribute(n,r,h,e)}}(n[Lr],l,o,t.value,e,i,r)}function rv(t,n,e,i,r,o){const l=o[n];if(null!==l)for(let h=0;h<l.length;)DT(i,e,l[h++],l[h++],l[h++],l[h++])}function km(t,n,e){let i=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const l=t[o];for(let h=0;h<l.length;h+=3)if(l[h]===n){i.push(o,l[h+1],l[h+2],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function FT(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function LT(t,n){const e=t.contentQueries;if(null!==e){const i=F(null);try{for(let r=0;r<e.length;r+=2){const l=e[r+1];if(-1!==l){const h=t.data[l];Kf(e[r]),h.contentQueries(2,n[l],l)}}}finally{F(i)}}}function Dm(t,n){return t[vd]?t[Yp][qa]=n:t[vd]=n,t[Yp]=n,n}function Mm(t,n,e){Kf(0);const i=F(null);try{n(t,e)}finally{F(i)}}function R2(t){return t[Ka]||(t[Ka]=[])}function BT(t){return t.cleanup||(t.cleanup=[])}function b0(t,n,e){return(null===t||wc(t))&&(e=function me(t){for(;Array.isArray(t);){if("object"==typeof t[Br])return t;t=t[no]}return null}(e[n.index])),e[Lr]}function sv(t,n){const e=t[Za],i=e?e.get(ed,null):null;i&&i.handleError(n)}function ov(t,n,e,i,r){for(let o=0;o<e.length;){const l=e[o++],h=e[o++],g=e[o++];DT(t.data[l],n[l],i,h,g,r)}}function hp(t,n,e){const i=je(n,t);!function _2(t,n,e){t.setValue(n,e)}(t[Lr],i,e)}function VT(t,n){const e=Nt(n,t),i=e[Xn];!function O3(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const r=e[no];null!==r&&null===e[vc]&&(e[vc]=tf(r,e[Za])),av(i,e,e[io])}function av(t,n,e){za(n);try{const i=t.viewQuery;null!==i&&Mm(1,i,e);const r=t.template;null!==r&&Sm(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Sa]?.finishViewCreation(t),t.staticContentQueries&&LT(t,n),t.staticViewQueries&&Mm(2,t.viewQuery,e);const o=t.components;null!==o&&function cM(t,n){for(let e=0;e<n.length;e++)VT(t,n[e])}(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[hr]&=-5,Zu()}}function w0(t,n){return!n||null===n.firstChild||r0(t)}function e_(t,n,e,i=!0){const r=n[Xn];if(function bT(t,n,e,i){const r=go+i,o=e.length;i>0&&(e[r-1][qa]=n),i<o-go?(n[qa]=e[r],Bh(e,go+i,n)):(e.push(n),n[qa]=null),n[ua]=e;const l=n[bd];null!==l&&e!==l&&function wT(t,n){const e=t[qu];n[Po]!==n[ua][ua][Po]&&(t[hr]|=Ku.HasTransplantedViews),null===e?t[qu]=[n]:e.push(n)}(l,n);const h=n[Sa];null!==h&&h.insertView(t),cs(n),n[hr]|=128}(r,n,t,e),i){const l=S2(e,t),h=n[Lr],g=Y1(h,t[Fo]);null!==g&&function yT(t,n,e,i,r,o){i[no]=r,i[Al]=n,q1(t,i,e,1,r,o)}(r,t[Al],h,n,g,l)}const o=n[vc];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function uv(t,n,e,i,r=!1){for(;null!==e;){const o=n[e.index];null!==o&&i.push(se(o)),zl(o)&&UT(o,i);const l=e.type;if(8&l)uv(t,n,e.child,i);else if(32&l){const h=Gy(e,n);let g;for(;g=h();)i.push(g)}else if(16&l){const h=rf(n,e);if(Array.isArray(h))i.push(...h);else{const g=Da(n[Po]);uv(g[Xn],g,h,i,!0)}}e=r?e.projectionNext:e.next}return i}function UT(t,n){for(let e=go;e<t.length;e++){const i=t[e],r=i[Xn].firstChild;null!==r&&uv(i[Xn],i,r,n)}t[Fo]!==t[no]&&n.push(t[Fo])}let dv=[];const uM={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Es(t.lView)},consumerOnSignalRead(){this.lView[Jd]=this}},P3=100;function P2(t,n=!0,e=0){const i=t[Bl],r=i.rendererFactory;r.begin?.();try{!function dM(t,n){Im(t,n);let e=0;for(;ls(t);){if(e===P3)throw new Yt(103,!1);e++,Im(t,1)}}(t,e)}catch(l){throw n&&sv(t,l),l}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function fM(t,n,e,i){const r=n[hr];if(!(256&~r))return;n[Bl].inlineEffectRunner?.flush(),za(n);let l=null,h=null;(function F3(t){return 2!==t.type})(t)&&(h=function R3(t){return t[Jd]??function zT(t){const n=dv.pop()??Object.create(uM);return n.lView=t,n}(t)}(n),l=function G(t){return t&&(t.nextProducerIndex=0),F(t)}(h));try{Li(n),function ry(t){return ri.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Sm(t,n,e,2,i);const g=!(3&~r);if(g){const B=t.preOrderCheckHooks;null!==B&&ah(n,B,null)}else{const B=t.preOrderHooks;null!==B&&Vc(n,B,0,null),Cd(n,0)}if(function F2(t){for(let n=O1(t);null!==n;n=np(n)){if(!(n[hr]&Ku.HasTransplantedViews))continue;const e=n[qu];for(let i=0;i<e.length;i++){ji(e[i])}}}(n),jT(n,0),null!==t.contentQueries&&LT(t,n),g){const B=t.contentCheckHooks;null!==B&&ah(n,B)}else{const B=t.contentHooks;null!==B&&Vc(n,B,1),Cd(n,1)}!function sf(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Zf(~r);else{const o=r,l=e[++i],h=e[++i];sy(l,o),h(2,n[o])}}}finally{Zf(-1)}}(t,n);const b=t.components;null!==b&&hv(n,b,0);const E=t.viewQuery;if(null!==E&&Mm(2,E,i),g){const B=t.viewCheckHooks;null!==B&&ah(n,B)}else{const B=t.viewHooks;null!==B&&Vc(n,B,2),Cd(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[$f]){for(const B of n[$f])B();n[$f]=null}n[hr]&=-73}catch(g){throw Es(n),g}finally{null!==h&&(function K(t,n){if(F(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Te(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)fe(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(h,l),function HT(t){t.lView[Jd]!==t&&(t.lView=null,dv.push(t))}(h)),Zu()}}function jT(t,n){for(let e=O1(t);null!==e;e=np(e))for(let i=go;i<e.length;i++)$T(e[i],n)}function L3(t,n,e){$T(Nt(n,t),e)}function $T(t,n){zn(t)&&Im(t,n)}function Im(t,n){const i=t[Xn],r=t[hr],o=t[Jd];let l=!!(0===n&&16&r);if(l||=!!(64&r&&0===n),l||=!!(1024&r),l||=!(!o?.dirty||!ie(o)),o&&(o.dirty=!1),t[hr]&=-9217,l)fM(i,t,i.template,t[io]);else if(8192&r){jT(t,1);const h=i.components;null!==h&&hv(t,h,1)}}function hv(t,n,e){for(let i=0;i<n.length;i++)L3(t,n[i],e)}function fv(t){for(t[Bl].changeDetectionScheduler?.notify();t;){t[hr]|=64;const n=Da(t);if(ut(t)&&!n)return t;t=n}return null}class pv{get rootNodes(){const n=this._lView,e=n[Xn];return uv(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[io]}set context(n){this._lView[io]=n}get destroyed(){return!(256&~this._lView[hr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[ua];if(zl(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(G1(n,i),bu(e,i))}this._attachedToViewContainer=!1}Xy(this._lView[Xn],this._lView)}onDestroy(n){na(this._lView,n)}markForCheck(){fv(this._cdRefInjectingView||this._lView)}detach(){this._lView[hr]&=-129}reattach(){cs(this._lView),this._lView[hr]|=128}detectChanges(){this._lView[hr]|=1024,P2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Yt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,v2(this._lView[Xn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Yt(902,!1);this._appRef=n,cs(this._lView)}}let $l=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=mM}return t})();const pM=$l,gM=class extends pM{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const r=function lv(t,n,e,i){const r=F(null);try{const o=n.tView,g=Em(t,o,e,4096&t[hr]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);g[bd]=t[n.index];const E=t[Sa];return null!==E&&(g[Sa]=E.createEmbeddedView(o)),av(o,g,e),g}finally{F(r)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new pv(r)}};function mM(){return L2(Ms(),tn())}function L2(t,n){return 4&t.type?new gM(n,t,Kh(t,n)):null}class $2{}class X3{}class vv{}class fg{resolveComponentFactory(n){throw function q3(t){const n=Error(`No component factory found for ${ms(t)}.`);return n.ngComponent=t,n}(n)}}let lf=(()=>{class t{static#e=this.NULL=new fg}return t})();class td{}let Ou=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function W2(){const t=tn(),e=Nt(Ms().index,t);return(Aa(e)?e:t)[Lr]}()}return t})(),gp=(()=>{class t{static#e=this.\u0275prov=Un({token:t,providedIn:"root",factory:()=>null})}return t})();const G2={},wv=new Set;function ex(...t){}class Bs{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mr(!1),this.onMicrotaskEmpty=new mr(!1),this.onStable=new mr(!1),this.onError=new mr(!1),typeof Zone>"u")throw new Yt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function fl(){const t="function"==typeof Yr.requestAnimationFrame;let n=Yr[t?"requestAnimationFrame":"setTimeout"],e=Yr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function r_(t){const n=()=>{!function Z3(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Yr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,X2(t),t.isCheckStableRunning=!0,Y2(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),X2(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,l,h)=>{if(function Q3(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(h))return e.invokeTask(r,o,l,h);try{return tx(t),e.invokeTask(r,o,l,h)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),nx(t)}},onInvoke:(e,i,r,o,l,h,g)=>{try{return tx(t),e.invoke(r,o,l,h,g)}finally{t.shouldCoalesceRunChangeDetection&&n(),nx(t)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,X2(t),Y2(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bs.isInAngularZone())throw new Yt(909,!1)}static assertNotInAngularZone(){if(Bs.isInAngularZone())throw new Yt(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+r,n,K3,ex,ex);try{return o.runTask(l,e,i)}finally{o.cancelTask(l)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const K3={};function Y2(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function X2(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function tx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nx(t){t._nesting--,Y2(t)}class ix{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mr,this.onMicrotaskEmpty=new mr,this.onStable=new mr,this.onError=new mr}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Nm=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Un({token:t,providedIn:"root",factory:()=>new t})}return t})();function x0(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(null!==n)for(let l=0;l<n.length;l++){const h=n[l];"number"==typeof h?o=h:1==o?r=ql(r,h):2==o&&(i=ql(i,h+": "+n[++l]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}class ew extends lf{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Jr(n);return new u_(e,this.ngModule)}}function ax(t){const n=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e];void 0!==i&&n.push({propName:Array.isArray(i)?i[0]:i,templateName:e})}return n}class c_{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=Lh(i);const r=this.injector.get(n,G2,i);return r!==G2||e===G2?r:this.parentInjector.get(n,e,i)}}class u_ extends vv{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=ax(n.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return ax(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function zp(t){return t.map(Uf).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){const o=F(null);try{let l=(r=r||this.ngModule)instanceof Sl?r:r?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const h=l?new c_(n,l):n,g=h.get(td,null);if(null===g)throw new Yt(407,!1);const b=h.get(gp,null),ce={rendererFactory:g,sanitizer:b,inlineEffectRunner:null,afterRenderEventManager:h.get(Nm,null),changeDetectionScheduler:h.get($2,null)},de=g.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",He=i?function J1(t,n,e,i){const o=i.get(Ly,!1)||e===Ql.ShadowDom,l=t.selectRootElement(n,o);return function M2(t){nv(t)}(l),l}(de,i,this.componentDef.encapsulation,h):ug(de,De,function lx(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(De));let ot=512;this.componentDef.signals?ot|=4096:this.componentDef.onPush||(ot|=16);let bt=null;null!==He&&(bt=tf(He,h,!0));const yt=tv(0,null,null,1,0,null,null,null,null,null,null),Cn=Em(null,yt,null,ot,null,null,ce,de,h,null,bt);let Mn,si;za(Cn);try{const bi=this.componentDef;let sr,Ur=null;bi.findHostDirectiveDefs?(sr=[],Ur=new Map,bi.findHostDirectiveDefs(bi,sr,Ur),sr.push(bi)):sr=[bi];const Jo=function iA(t,n){const e=t[Xn],i=Mr;return t[i]=n,dg(e,i,2,"#host",null)}(Cn,He),sa=function rA(t,n,e,i,r,o,l){const h=r[Xn];!function Om(t,n,e,i){for(const r of t)n.mergedAttrs=Lc(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(x0(n,n.mergedAttrs,!0),null!==e&&k2(i,e,n))}(i,t,n,l);let g=null;null!==n&&(g=tf(n,r[Za]));const b=o.rendererFactory.createRenderer(n,e);let E=16;e.signals?E=4096:e.onPush&&(E=64);const B=Em(r,v0(e),null,E,r[t.index],t,o,b,null,null,g);return h.firstCreatePass&&N2(h,t,i.length-1),Dm(r,B),r[t.index]=B}(Jo,He,bi,sr,Cn,ce,de);si=et(yt,Mr),He&&function df(t,n,e,i){if(i)Pf(t,e,["ng-version","17.3.6"]);else{const{attrs:r,classes:o}=function mc(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&n.push(o,t[++i]):8===r&&e.push(o);else{if(!xl(r))break;r=o}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&Pf(t,e,r),o&&o.length>0&&A2(t,e,o.join(" "))}}(de,bi,He,i),void 0!==e&&function ux(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const o=e[r];i.push(null!=o?Array.from(o):null)}}(si,this.ngContentSelectors,e),Mn=function cx(t,n,e,i,r,o){const l=Ms(),h=r[Xn],g=Je(l,r);NT(h,r,l,e,null,i);for(let E=0;E<e.length;E++)ic(ng(r,h,l.directiveStart+E,l),r);OT(h,r,l),g&&ic(g,r);const b=ng(r,h,l.directiveStart+l.componentOffset,l);if(t[io]=r[io]=b,null!==o)for(const E of o)E(b,n);return Z1(h,l,r),b}(sa,bi,sr,Ur,Cn,[sA]),av(yt,Cn,null)}finally{Zu()}return new nA(this.componentType,Mn,Kh(si,Cn),Cn,si)}finally{F(o)}}}class nA extends X3{constructor(n,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new pv(r,void 0,!1),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const o=this._rootLView;ov(o[Xn],o,r,n,e),this.previousInputValues.set(n,e),fv(Nt(this._tNode.index,o))}}get injector(){return new Ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function sA(){const t=Ms();tm(tn()[Xn],t)}let ou=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=oA}return t})();function oA(){return nw(Ms(),tn())}const aA=ou,dx=class extends aA{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Kh(this._hostTNode,this._hostLView)}get injector(){return new Ha(this._hostTNode,this._hostLView)}get parentInjector(){const n=Jg(this._hostTNode,this._hostLView);if(dy(n)){const e=Jp(n,this._hostLView),i=Au(n);return new Ha(e[Xn].data[i+8],e)}return new Ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=hx(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-go}createEmbeddedView(n,e,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const h=n.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(h,r,w0(this._hostTNode,null)),h}createComponent(n,e,i,r,o){const l=n&&!function _t(t){return"function"==typeof t}(n);let h;if(l)h=e;else{const De=e||{};h=De.index,i=De.injector,r=De.projectableNodes,o=De.environmentInjector||De.ngModuleRef}const g=l?n:new u_(Jr(n)),b=i||this.parentInjector;if(!o&&null==g.ngModule){const He=(l?b:this.parentInjector).get(Sl,null);He&&(o=He)}Jr(g.componentType??{});const de=g.create(b,r,null,o);return this.insertImpl(de.hostView,h,w0(this._hostTNode,null)),de}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){const r=n._lView;if(function Ai(t){return zl(t[ua])}(r)){const h=this.indexOf(n);if(-1!==h)this.detach(h);else{const g=r[ua],b=new dx(g,g[Al],g[ua]);b.detach(b.indexOf(n))}}const o=this._adjustIndex(e),l=this._lContainer;return e_(l,r,o,i),n.attachToViewContainerRef(),Bh(tw(l),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=hx(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=G1(this._lContainer,e);i&&(bu(tw(this._lContainer),e),Xy(i[Xn],i))}detach(n){const e=this._adjustIndex(n,-1),i=G1(this._lContainer,e);return i&&null!=bu(tw(this._lContainer),e)?new pv(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function hx(t){return t[8]}function tw(t){return t[8]||(t[8]=[])}function nw(t,n){let e;const i=n[t.index];return zl(i)?e=i:(e=FT(i,n,null,t),n[t.index]=e,Dm(n,e)),fx(e,n,t,i),new dx(e,t,n)}let fx=function gx(t,n,e,i){if(t[Fo])return;let r;r=8&e.type?se(i):function lA(t,n){const e=t[Lr],i=e.createComment(""),r=Je(n,t);return y0(e,Y1(e,r),i,function ST(t,n){return t.nextSibling(n)}(e,r),!1),i}(n,e),t[Fo]=r},iw=()=>!1;class Rm{constructor(n){this.queryList=n,this.matches=null}clone(){return new Rm(this.queryList)}setDirty(){this.queryList.setDirty()}}class d_{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){const l=e.getByIndex(o);r.push(this.queries[l.indexInDeclarationView].clone())}return new d_(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==uw(n,e).matches&&this.queries[e].setDirty()}}class mx{constructor(n,e,i=null){this.flags=e,this.read=i,this.predicate="string"==typeof n?function Ev(t){return t.split(",").map(n=>n.trim())}(n):n}}class ma{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,null!==e?e.push(o):e=[o])}return null!==e?new ma(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Vt{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Vt(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(n,e,Qn(e,o)),this.matchTNodeWithReadOption(n,e,w1(e,n,o,!1,!1))}else i===$l?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,w1(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ks||r===ou||r===$l&&4&e.type)this.addMatch(e.index,-2);else{const o=w1(e,n,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function Qn(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function E0(t,n,e,i){return-1===e?function dA(t,n){return 11&t.type?Kh(t,n):4&t.type?L2(t,n):null}(n,t):-2===e?function Pm(t,n,e){return e===Ks?Kh(n,t):e===$l?L2(n,t):e===ou?nw(n,t):void 0}(t,n,i):ng(t,t[Xn],e,n)}function Tv(t,n,e,i){const r=n[Sa].queries[i];if(null===r.matches){const o=t.data,l=e.matches,h=[];for(let g=0;null!==l&&g<l.length;g+=2){const b=l[g];h.push(b<0?null:E0(n,o[b],l[g+1],e.metadata.read))}r.matches=h}return r.matches}function sw(t,n,e,i){const r=t.queries.getByIndex(e),o=r.matches;if(null!==o){const l=Tv(t,n,r,e);for(let h=0;h<o.length;h+=2){const g=o[h];if(g>0)i.push(l[h/2]);else{const b=o[h+1],E=n[-g];for(let B=go;B<E.length;B++){const ce=E[B];ce[bd]===ce[ua]&&sw(ce[Xn],ce,b,i)}if(null!==E[qu]){const B=E[qu];for(let ce=0;ce<B.length;ce++){const de=B[ce];sw(de[Xn],de,b,i)}}}}}return i}function aw(t,n,e){const i=ar();return i.firstCreatePass&&(function cw(t,n,e){null===t.queries&&(t.queries=new ma),t.queries.track(new Vt(n,e))}(i,new mx(t,n,e),-1),!(2&~n)&&(i.staticViewQueries=!0)),function xv(t,n,e){const i=new A1(!(4&~e));return function b3(t,n,e,i){const r=R2(n);r.push(e),t.firstCreatePass&&BT(t).push(i,r.length-1)}(t,n,i,i.destroy),(n[Sa]??=new d_).queries.push(new Rm(i))-1}(i,tn(),n)}function uw(t,n){return t.queries.getByIndex(n)}function _x(t,n){const e=t[Xn],i=uw(e,n);return i.crossesNgTemplate?sw(e,t,n,[]):Tv(e,t,i,n)}function dw(t){return function yx(t){return"function"==typeof t&&void 0!==t[A]}(t)&&"function"==typeof t.set}function yo(t){let n=function Ov(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(wc(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Yt(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const l=t;l.inputs=Rv(t.inputs),l.inputTransforms=Rv(t.inputTransforms),l.declaredInputs=Rv(t.declaredInputs),l.outputs=Rv(t.outputs);const h=r.hostBindings;h&&SA(t,h);const g=r.viewQuery,b=r.contentQueries;if(g&&kx(t,g),b&&vw(t,b),xA(t,r),gs(t.outputs,r.outputs),wc(r)&&r.data.animation){const E=t.data;E.animation=(E.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let l=0;l<o.length;l++){const h=o[l];h&&h.ngInherit&&h(t),h===yo&&(e=!1)}}n=Object.getPrototypeOf(n)}!function EA(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Lc(r.hostAttrs,e=Lc(e,r.hostAttrs))}}(i)}function xA(t,n){for(const e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;const i=n.inputs[e];if(void 0!==i&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e],null!==n.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=n.inputTransforms[r]}}}function Rv(t){return t===Zl?{}:t===zs?[]:t}function kx(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function vw(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,o)=>{n(i,r,o),e(i,r,o)}:n}function SA(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}class vp{}class MA{}class Nx extends vp{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ew(this);const r=function Xa(t,n){const e=t[zo]||null;if(!e&&!0===n)throw new Error(`Type ${ms(t)} does not have '\u0275mod' property.`);return e}(n);this._bootstrapComponents=function Mu(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=sm(n,e,[{provide:vp,useValue:this},{provide:lf,useValue:this.componentFactoryResolver},...i],ms(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class bw extends MA{constructor(n){super(),this.moduleType=n}create(n){return new Nx(this.moduleType,n,[])}}class Ox extends vp{constructor(n){super(),this.componentFactoryResolver=new ew(this),this.instance=null;const e=new Yu([...n.providers,{provide:vp,useValue:this},{provide:lf,useValue:this.componentFactoryResolver}],n.parent||Ll(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}let pg=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fv(t){return!!function Cw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ff(t,n,e){return t[n]=e}function tl(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function A0(t,n,e,i){const r=tl(t,n,e);return tl(t,n+1,i)||r}function k0(t,n,e,i,r){const o=A0(t,n,e,i);return tl(t,n+2,r)||o}function _n(t,n,e,i,r,o,l,h){const g=tn(),b=ar(),E=t+Mr,B=b.firstCreatePass?function BA(t,n,e,i,r,o,l,h,g){const b=n.consts,E=dg(n,t,4,l||null,In(b,h));I2(n,e,E,In(b,g)),tm(n,E);const B=E.tView=tv(2,E,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,b,null);return null!==n.queries&&(n.queries.template(n,E),B.queries=n.queries.embeddedTView(E)),E}(E,b,g,n,e,i,r,o,l):b.data[E];tc(B,!1);const ce=Px(b,g,B,t);Zp()&&Qy(b,g,ce,B),ic(ce,g);const de=FT(ce,g,ce,B);return g[E]=de,Dm(g,de),function px(t,n,e){return iw(t,n,e)}(de,B,g),eh(B)&&Q1(b,g,B),null!=l&&Am(g,B,h),_n}let Px=function Fx(t,n,e,i){return ru(!0),n[Lr].createComment("")};function Ro(t,n,e,i){const r=tn();return tl(r,Eu(),n)&&(ar(),_h(Ko(),r,t,n,e,i)),Ro}function N0(t,n,e,i){return tl(t,Eu(),e)?n+Dr(e)+i:Cs}function Kv(t,n){return t<<17|n<<2}function pf(t){return t>>17&32767}function Zv(t){return 2|t}function R0(t){return(131068&t)>>2}function Qv(t,n){return-131069&t|n<<2}function Ow(t){return 1|t}function cE(t,n,e,i){const r=t[e+1],o=null===n;let l=i?pf(r):R0(r),h=!1;for(;0!==l&&(!1===h||o);){const b=t[l+1];uE(t[l],n)&&(h=!0,t[l+1]=i?Ow(b):Zv(b)),l=i?pf(b):R0(b)}h&&(t[e+1]=i?Zv(r):Ow(r))}function uE(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&pd(t,n)>=0}const Il={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dE(t){return t.substring(Il.key,Il.keyEnd)}function Pw(t,n){const e=Il.textEnd;return e===n?-1:(n=Il.keyEnd=function fE(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Il.key=n,e),P0(t,n,e))}function P0(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function ht(t,n,e){const i=tn();return tl(i,Eu(),n)&&Iu(ar(),Ko(),i,t,n,i[Lr],e,!1),ht}function Vw(t,n,e,i,r){const l=r?"class":"style";ov(t,e,n.inputs[l],l,i)}function Cp(t,n,e){return kd(t,n,e,!1),Cp}function _r(t,n){return kd(t,n,null,!0),_r}function id(t){!function bh(t,n,e,i){const r=ar(),o=$h(2);r.firstUpdatePass&&Uw(r,null,o,i);const l=tn();if(e!==Cs&&tl(l,o,e)){const h=r.data[nc()];if(v(h,i)&&!mE(r,o)){let g=i?h.classesWithoutHost:h.stylesWithoutHost;null!==g&&(e=ql(g,e||"")),Vw(r,h,l,e,i)}else!function a(t,n,e,i,r,o,l,h){r===Cs&&(r=zs);let g=0,b=0,E=0<r.length?r[0]:null,B=0<o.length?o[0]:null;for(;null!==E||null!==B;){const ce=g<r.length?r[g+1]:void 0,de=b<o.length?o[b+1]:void 0;let He,De=null;E===B?(g+=2,b+=2,ce!==de&&(De=B,He=de)):null===B||null!==E&&E<B?(g+=2,De=E):(b+=2,De=B,He=de),null!==De&&d(t,n,e,i,De,He,l,h),E=g<r.length?r[g]:null,B=b<o.length?o[b]:null}}(r,h,l,l[Lr],l[o+1],l[o+1]=function ck(t,n,e){if(null==e||""===e)return zs;const i=[],r=ve(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,o)}}(s,mf,t,!0)}function mf(t,n){for(let e=function Rw(t){return function hE(t){Il.key=0,Il.keyEnd=0,Il.value=0,Il.valueEnd=0,Il.textEnd=t.length}(t),Pw(t,P0(t,0,Il.textEnd))}(n);e>=0;e=Pw(n,e))Tl(t,dE(n),!0)}function kd(t,n,e,i){const r=tn(),o=ar(),l=$h(2);o.firstUpdatePass&&Uw(o,t,l,i),n!==Cs&&tl(r,l,n)&&d(o,o.data[nc()],r,r[Lr],t,r[l+1]=function y(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ms(ve(t)))),t}(n,e),i,l)}function mE(t,n){return n>=t.expandoStartIndex}function Uw(t,n,e,i){const r=t.data;if(null===r[e+1]){const o=r[nc()],l=mE(t,e);v(o,i)&&null===n&&!l&&(n=!1),n=function ak(t,n,e,i){const r=oy(t);let o=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=A_(e=tb(null,t,n,e,i),n.attrs,i),o=null);else{const l=n.directiveStylingLast;if(-1===l||t[l]!==r)if(e=tb(r,t,n,e,i),null===o){let g=function lk(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==R0(i))return t[pf(i)]}(t,n,i);void 0!==g&&Array.isArray(g)&&(g=tb(null,t,n,g[1],i),g=A_(g,n.attrs,i),function eb(t,n,e,i){t[pf(e?n.classBindings:n.styleBindings)]=i}(t,n,i,g))}else o=function zw(t,n,e){let i;const r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++)i=A_(i,t[o].hostAttrs,e);return A_(i,n.attrs,e)}(t,n,i)}return void 0!==o&&(i?n.residualClasses=o:n.residualStyles=o),e}(r,o,n,i),function rk(t,n,e,i,r,o){let l=o?n.classBindings:n.styleBindings,h=pf(l),g=R0(l);t[i]=e;let E,b=!1;if(Array.isArray(e)?(E=e[1],(null===E||pd(e,E)>0)&&(b=!0)):E=e,r)if(0!==g){const ce=pf(t[h+1]);t[i+1]=Kv(ce,h),0!==ce&&(t[ce+1]=Qv(t[ce+1],i)),t[h+1]=function aE(t,n){return 131071&t|n<<17}(t[h+1],i)}else t[i+1]=Kv(h,0),0!==h&&(t[h+1]=Qv(t[h+1],i)),h=i;else t[i+1]=Kv(g,0),0===h?h=i:t[g+1]=Qv(t[g+1],i),g=i;b&&(t[i+1]=Zv(t[i+1])),cE(t,E,i,!0),cE(t,E,i,!1),function sk(t,n,e,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof n&&pd(o,n)>=0&&(e[i+1]=Ow(e[i+1]))}(n,E,t,i,o),l=Kv(h,g),o?n.classBindings=l:n.styleBindings=l}(r,o,n,e,l,i)}}function tb(t,n,e,i,r){let o=null;const l=e.directiveEnd;let h=e.directiveStylingLast;for(-1===h?h=e.directiveStart:h++;h<l&&(o=n[h],i=A_(i,o.hostAttrs,r),o!==t);)h++;return null!==t&&(e.directiveStylingLast=h),i}function A_(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?r=l:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tl(t,l,!!e||n[++o]))}return void 0===t?null:t}function s(t,n,e){const i=String(n);""!==i&&!i.includes(" ")&&Tl(t,i,e)}function d(t,n,e,i,r,o,l,h){if(!(3&n.type))return;const g=t.data,b=g[h+1],E=function lE(t){return!(1&~t)}(b)?f(g,n,e,r,R0(b),l):void 0;p(E)||(p(o)||function oE(t){return!(2&~t)}(b)&&(o=f(g,null,e,r,h,l)),function kT(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let o=-1===i.indexOf("-")?void 0:up.DashCase;null==r?t.removeStyle(e,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=up.Important),t.setStyle(e,i,r,o))}}(i,l,je(nc(),e),r,o))}function f(t,n,e,i,r,o){const l=null===n;let h;for(;r>0;){const g=t[r],b=Array.isArray(g),E=b?g[1]:g,B=null===E;let ce=e[r+1];ce===Cs&&(ce=B?zs:void 0);let de=B?fd(ce,i):E===i?ce:void 0;if(b&&!p(de)&&(de=fd(g,i)),p(de)&&(h=de,l))return h;const De=t[r+1];r=l?pf(De):R0(De)}if(null!==n){let g=o?n.residualClasses:n.residualStyles;null!=g&&(h=fd(g,i))}return h}function p(t){return void 0!==t}function v(t,n){return!!(t.flags&(n?8:16))}function L(t,n,e,i){const r=tn(),o=ar(),l=Mr+t,h=r[Lr],g=o.firstCreatePass?function Jt(t,n,e,i,r,o){const l=n.consts,g=dg(n,t,2,i,In(l,r));return I2(n,e,g,In(l,o)),null!==g.attrs&&x0(g,g.attrs,!1),null!==g.mergedAttrs&&x0(g,g.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,g),g}(l,o,r,n,e,i):o.data[l],b=Hn(o,r,g,h,n,t);r[l]=b;const E=eh(g);return tc(g,!0),k2(h,b,g),!function g_(t){return!(32&~t.flags)}(g)&&Zp()&&Qy(o,r,b,g),0===function us(){return ri.lFrame.elementDepthCount}()&&ic(b,r),function ds(){ri.lFrame.elementDepthCount++}(),E&&(Q1(o,r,g),Z1(o,g,r)),null!==i&&Am(r,g),L}function P(){let t=Ms();oh()?Ua():(t=t.parent,tc(t,!1));const n=t;(function Rr(t){return ri.skipHydrationRootTNode===t})(n)&&function No(){ri.skipHydrationRootTNode=null}(),function Qa(){ri.lFrame.elementDepthCount--}();const e=ar();return e.firstCreatePass&&(tm(e,t),Wf(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Nb(t){return!!(8&t.flags)}(n)&&Vw(e,n,tn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function uy(t){return!!(16&t.flags)}(n)&&Vw(e,n,tn(),n.stylesWithoutHost,!1),P}function it(t,n,e,i){return L(t,n,e,i),P(),it}let Hn=(t,n,e,i,r,o)=>(ru(!0),ug(i,r,function KC(){return ri.lFrame.currentNamespace}()));function xt(t,n,e){const i=tn(),r=ar(),o=t+Mr,l=r.firstCreatePass?function nr(t,n,e,i,r){const o=n.consts,l=In(o,i),h=dg(n,t,8,"ng-container",l);return null!==l&&x0(h,l,!0),I2(n,e,h,In(o,r)),null!==n.queries&&n.queries.elementStart(n,h),h}(o,r,i,n,e):r.data[o];tc(l,!0);const h=Ht(r,i,l,t);return i[o]=h,Zp()&&Qy(r,i,h,l),ic(h,i),eh(l)&&(Q1(r,i,l),Z1(r,l,i)),null!=e&&Am(i,l),xt}function Tn(){let t=Ms();const n=ar();return oh()?Ua():(t=t.parent,tc(t,!1)),n.firstCreatePass&&(tm(n,t),Wf(t)&&n.queries.elementEnd(t)),Tn}let Ht=(t,n,e,i)=>(ru(!0),y2(n[Lr],""));function ct(){return tn()}function bn(t,n,e){const i=tn();if(tl(i,Eu(),n)){const o=ar(),l=Ko();Iu(o,l,i,t,n,b0(oy(o.data),l,i),e,!0)}return bn}const es="en-US";let jn=es;function Vn(t,n,e,i){const r=tn(),o=ar(),l=Ms();return fk(o,r,r[Lr],l,t,n,i),Vn}function fk(t,n,e,i,r,o,l){const h=eh(i),b=t.firstCreatePass&&BT(t),E=n[io],B=R2(n);let ce=!0;if(3&i.type||l){const He=Je(i,n),ot=l?l(He):He,bt=B.length,yt=l?Mn=>l(se(Mn[i.index])):i.index;let Cn=null;if(!l&&h&&(Cn=function LP(t,n,e,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const l=r[o];if(l===e&&r[o+1]===i){const h=n[Ka],g=r[o+2];return h.length>g?h[g]:null}"string"==typeof l&&(o+=2)}return null}(t,n,r,i.index)),null!==Cn)(Cn.__ngLastListenerFn__||Cn).__ngNextListenerFn__=o,Cn.__ngLastListenerFn__=o,ce=!1;else{o=e5(i,n,E,o,!1);const Mn=e.listen(ot,r,o);B.push(o,Mn),b&&b.push(r,yt,bt,bt+1)}}else o=e5(i,n,E,o,!1);const de=i.outputs;let De;if(ce&&null!==de&&(De=de[r])){const He=De.length;if(He)for(let ot=0;ot<He;ot+=2){const si=n[De[ot]][De[ot+1]].subscribe(o),bi=B.length;B.push(o,si),b&&b.push(r,i.index,bi,-(bi+1))}}}function JM(t,n,e,i){const r=F(null);try{return Hl(6,n,e),!1!==e(i)}catch(o){return sv(t,o),!1}finally{Hl(7,n,e),F(r)}}function e5(t,n,e,i,r){return function o(l){if(l===Function)return i;fv(t.componentOffset>-1?Nt(t.index,n):n);let g=JM(n,e,i,l),b=o.__ngNextListenerFn__;for(;b;)g=JM(n,e,b,l)&&g,b=b.__ngNextListenerFn__;return r&&!1===g&&l.preventDefault(),g}}function at(t=1){return function Ib(t){return(ri.lFrame.contextLView=function rs(t,n){for(;t>0;)n=n[Vl],t--;return n}(t,ri.lFrame.contextLView))[io]}(t)}function BP(t,n){let e=null;const i=function Bf(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const o=n[r];if("*"!==o){if(null===i?Uh(t,o,!0):Og(i,o))return r}else e=r}return e}function Ww(t){const n=tn()[Po][Al];if(!n.projection){const i=n.projection=function $d(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}(t?t.length:1,null),r=i.slice();let o=n.child;for(;null!==o;){const l=t?BP(o,t):0;null!==l&&(r[l]?r[l].projectionNext=o:i[l]=o,r[l]=o),o=o.next}}}function Gw(t,n=0,e){const i=tn(),r=ar(),o=dg(r,Mr+t,16,null,e||null);null===o.projection&&(o.projection=n),Ua(),(!i[vc]||ss())&&32&~o.flags&&function aM(t,n,e){p3(n[Lr],0,n,e,Ky(t,e,n),C2(e.parent||n[Al],e,n))}(r,i,o)}function pk(t,n,e){return Yw(t,"",n,"",e),pk}function Yw(t,n,e,i,r){const o=tn(),l=N0(o,n,e,i);return l!==Cs&&Iu(ar(),Ko(),o,t,l,o[Lr],r,!1),Yw}function xc(t,n,e){aw(t,n,e)}function vo(t){const n=tn(),e=ar(),i=Yg();Kf(i+1);const r=uw(e,i);if(t.dirty&&function cn(t){return!(4&~t[hr])}(n)===!(2&~r.metadata.flags)){if(null===r.matches)t.reset([]);else{const o=_x(n,i);t.reset(o,Ma),t.notifyOnChanges()}return!0}return!1}function bo(){return function ow(t,n){return t[Sa].queries[n].queryList}(tn(),Yg())}function Ec(t){return Mt(function Q0(){return ri.lFrame.contextLView}(),Mr+t)}function _e(t,n=""){const e=tn(),i=ar(),r=t+Mr,o=i.firstCreatePass?dg(i,r,1,n,null):i.data[r],l=y5(i,e,o,n,t);e[r]=l,Zp()&&Qy(i,e,l,o),tc(o,!1)}let y5=(t,n,e,i,r)=>(ru(!0),function Yy(t,n){return t.createText(n)}(n[Lr],i));function Hi(t){return ir("",t,""),Hi}function ir(t,n,e){const i=tn(),r=N0(i,t,n,e);return r!==Cs&&hp(i,nc(),r),ir}function gk(t,n,e,i,r){const o=tn(),l=function w_(t,n,e,i,r,o){const h=A0(t,iu(),e,r);return $h(2),h?n+Dr(e)+i+Dr(r)+o:Cs}(o,t,n,e,i,r);return l!==Cs&&hp(o,nc(),l),gk}function mk(t,n,e,i,r,o,l){const h=tn(),g=function C_(t,n,e,i,r,o,l,h){const b=k0(t,iu(),e,r,l);return $h(3),b?n+Dr(e)+i+Dr(r)+o+Dr(l)+h:Cs}(h,t,n,e,i,r,o,l);return g!==Cs&&hp(h,nc(),g),mk}function fs(t,n,e){dw(n)&&(n=n());const i=tn();return tl(i,Eu(),n)&&Iu(ar(),Ko(),i,t,n,i[Lr],e,!1),fs}function xs(t,n){const e=dw(t);return e&&t.set(n),e}function ps(t,n){const e=tn(),i=ar(),r=Ms();return fk(i,e,e[Lr],r,t,n),ps}function _k(t,n,e,i,r){if(t=Ui(t),Array.isArray(t))for(let o=0;o<t.length;o++)_k(t[o],n,e,i,r);else{const o=ar(),l=tn(),h=Ms();let g=Jc(t)?t:Ui(t.provide);const b=Gp(t),E=1048575&h.providerIndexes,B=h.directiveStart,ce=h.providerIndexes>>20;if(Jc(t)||!t.multi){const de=new Qp(b,r,St),De=vk(g,n,r?E:E+ce,B);-1===De?(ro(Qg(h,l),o,g),yk(o,t,n.length),n.push(g),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),e.push(de),l.push(de)):(e[De]=de,l[De]=de)}else{const de=vk(g,n,E+ce,B),De=vk(g,n,E,E+ce),ot=De>=0&&e[De];if(r&&!ot||!r&&!(de>=0&&e[de])){ro(Qg(h,l),o,g);const bt=function i7(t,n,e,i,r){const o=new Qp(t,e,St);return o.multi=[],o.index=n,o.componentProviders=0,E5(o,r,i&&!e),o}(r?n7:t7,e.length,r,i,b);!r&&ot&&(e[De].providerFactory=bt),yk(o,t,n.length,0),n.push(g),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),e.push(bt),l.push(bt)}else yk(o,t,de>-1?de:De,E5(e[r?De:de],b,!r&&i));!r&&i&&ot&&e[De].componentProviders++}}}function yk(t,n,e,i){const r=Jc(n),o=function Rg(t){return!!t.useClass}(n);if(r||o){const g=(o?Ui(n.useClass):n).prototype.ngOnDestroy;if(g){const b=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const E=b.indexOf(e);-1===E?b.push(e,[i,g]):b[E+1].push(i,g)}else b.push(e,g)}}}function E5(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function vk(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function t7(t,n,e,i){return bk(this.multi,[])}function n7(t,n,e,i){const r=this.multi;let o;if(this.providerFactory){const l=this.providerFactory.componentProviders,h=ng(e,e[Xn],this.providerFactory.index,i);o=h.slice(0,l),bk(r,o);for(let g=l;g<h.length;g++)o.push(h[g])}else o=[],bk(r,o);return o}function bk(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function ya(t,n=[]){return e=>{e.providersResolver=(i,r)=>function e7(t,n,e){const i=ar();if(i.firstCreatePass){const r=wc(t);_k(e,i.data,i.blueprint,r,!0),_k(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}let r7=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=qd(0,e.type),r=i.length>0?function Rx(t,n,e=null){return new Ox({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Un({token:t,providedIn:"environment",factory:()=>new t(Ii(Sl))})}return t})();function Eh(t){(function cf(t){wv.has(t)||(wv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))})("NgStandalone"),t.getStandaloneInjector=n=>n.get(r7).getOrCreateStandaloneInjector(t)}function Xw(t,n){const e=t[n];return e===Cs?void 0:e}function A5(t,n,e,i,r,o){const l=n+e;return tl(t,l,r)?ff(t,l+1,o?i.call(o,r):i(r)):Xw(t,l+1)}function cu(t,n){const e=ar();let i;const r=t+Mr;e.firstCreatePass?(i=function p7(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const o=i.factory||(i.factory=Qc(i.type)),h=Ps(St);try{const g=v1(!1),b=o();return v1(g),function HP(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,tn(),r,b),b}finally{Ps(h)}}function _f(t,n,e){const i=t+Mr,r=tn(),o=Mt(r,i);return Kw(r,i)?A5(r,Cc(),n,o.transform,e,o):o.transform(e)}function N5(t,n,e,i){const r=t+Mr,o=tn(),l=Mt(o,r);return Kw(o,r)?function k5(t,n,e,i,r,o,l){const h=n+e;return A0(t,h,r,o)?ff(t,h+2,l?i.call(l,r,o):i(r,o)):Xw(t,h+2)}(o,Cc(),n,l.transform,e,i,l):l.transform(e,i)}function qw(t,n,e,i,r){const o=t+Mr,l=tn(),h=Mt(l,o);return Kw(l,o)?function D5(t,n,e,i,r,o,l,h){const g=n+e;return k0(t,g,r,o,l)?ff(t,g+3,h?i.call(h,r,o,l):i(r,o,l)):Xw(t,g+3)}(l,Cc(),n,h.transform,e,i,r,h):h.transform(e,i,r)}function Kw(t,n){return t[Xn].data[n].pure}function Nd(t,n){return L2(t,n)}const Q5=new yi(""),kE=new yi("");let Dk,Ak=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Dk||(function uF(t){Dk=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Bs),Ii(kk),Ii(kE))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})(),kk=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Dk?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function DE(t){return!!t&&"function"==typeof t.then}function J5(t){return!!t&&"function"==typeof t.subscribe}const dF=new yi("");let Mk=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=$t(dF,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=r();if(DE(o))e.push(o);else if(J5(o)){const l=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});e.push(l)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const eI=new yi("");function iI(t,n){return Array.isArray(n)?n.reduce(iI,t):{...t,...n}}let bg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$t(su),this.afterRenderEffectManager=$t(Nm),this.externalTestViews=new Set,this.beforeRender=new Ir,this.afterTick=new Ir,this.componentTypes=[],this.components=[],this.isStable=$t(pg).hasPendingTasks.pipe(Xi(e=>!e)),this._injector=$t(Sl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof vv;if(!this._injector.get(Mk).done)throw!r&&function Pl(t){const n=Jr(t)||Xo(t)||ca(t);return null!==n&&n.standalone}(e),new Yt(405,!1);let l;l=r?e:this._injector.get(lf).resolveComponentFactory(e),this.componentTypes.push(l.componentType);const h=function hF(t){return t.isBoundToModule}(l)?void 0:this._injector.get(vp),b=l.create(fa.NULL,[],i||l.selector,h),E=b.location.nativeElement,B=b.injector.get(Q5,null);return B?.registerApplication(E),b.onDestroy(()=>{this.detachView(b.hostView),ME(this.components,b),B?.unregisterApplication(E)}),this._loadComponent(b),b}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new Yt(101,!1);const i=F(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,F(i)}}detectChangesInAttachedViews(e){let i=0;const r=this.afterRenderEffectManager;for(;;){if(i===P3)throw new Yt(103,!1);if(e){const o=0===i;this.beforeRender.next(o);for(let{_lView:l,notifyErrorHandler:h}of this._views)pF(l,o,h)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ik(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ik(o))))break}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;ME(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(eI,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>ME(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Yt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ME(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function pF(t,n,e){!n&&!Ik(t)||function gF(t,n,e){let i;e?(i=0,t[hr]|=1024):i=64&t[hr]?0:1,P2(t,n,i)}(t,e,n)}function Ik(t){return ls(t)}let vF=(()=>{class t{constructor(){this.zone=$t(Bs),this.applicationRef=$t(bg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bF(){const t=$t(Bs),n=$t(ed);return e=>t.runOutsideAngular(()=>n.handleError(e))}let CF=(()=>{class t{constructor(){this.subscription=new Fn,this.initialized=!1,this.zone=$t(Bs),this.pendingTasks=$t(pg)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Bs.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Bs.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wg=new yi("",{providedIn:"root",factory:()=>$t(wg,ks.Optional|ks.SkipSelf)||function TF(){return typeof $localize<"u"&&$localize.locale||es}()}),Nk=new yi("");let aI=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function C0(t="zone.js",n){return"noop"===t?new ix:"zone.js"===t?new Bs(n):t}(i?.ngZone,function oI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function OA(t,n,e){return new Nx(t,n,e)}(e.moduleType,this.injector,function sI(t){return[{provide:Bs,useFactory:t},{provide:wu,multi:!0,useFactory:()=>{const n=$t(vF,{optional:!0});return()=>n.initialize()}},{provide:wu,multi:!0,useFactory:()=>{const n=$t(CF);return()=>{n.initialize()}}},{provide:su,useFactory:bF}]}(()=>r)),l=o.injector.get(ed,null);return r.runOutsideAngular(()=>{const h=r.onError.subscribe({next:g=>{l.handleError(g)}});o.onDestroy(()=>{ME(this._modules,o),h.unsubscribe()})}),function nI(t,n,e){try{const i=e();return DE(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(l,r,()=>{const h=o.injector.get(Mk);return h.runInitializers(),h.donePromise.then(()=>(function Pn(t){"string"==typeof t&&(jn=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(wg,es)||es),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,i=[]){const r=iI({},i);return function yF(t,n,e){const i=new bw(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(bg);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Yt(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Yt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(Nk,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(fa))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Xm=null;const lI=new yi("");function cI(t,n,e=[]){const i=`Platform: ${n}`,r=new yi(i);return(o=[])=>{let l=Ok();if(!l||l.injector.get(lI,!1)){const h=[...e,...o,{provide:r,useValue:!0}];t?t(h):function SF(t){if(Xm&&!Xm.get(lI,!1))throw new Yt(400,!1);(function tI(){!function _i(t){Tt=t}(()=>{throw new Yt(600,!1)})})(),Xm=t;const n=t.get(aI);(function dI(t){t.get(L1,null)?.forEach(e=>e())})(t)}(function uI(t=[],n){return fa.create({name:n,providers:[{provide:jh,useValue:"platform"},{provide:Nk,useValue:new Set([()=>Xm=null])},...t]})}(h,i))}return function AF(t){const n=Ok();if(!n)throw new Yt(401,!1);return n}()}}function Ok(){return Xm?.get(aI)??null}let Cg=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=DF}return t})();function DF(t){return function MF(t,n,e){if(kl(t)&&!e){const i=Nt(t.index,n);return new pv(i,i)}return 47&t.type?new pv(n[Po],n):null}(Ms(),tn(),!(16&~t))}class mI{constructor(){}supports(n){return Fv(n)}create(n){return new PF(n)}}const RF=(t,n)=>n;class PF{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||RF}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){const l=!i||e&&e.currentIndex<yI(i,r,o)?e:i,h=yI(l,r,o),g=l.currentIndex;if(l===i)r--,i=i._nextRemoved;else if(e=e._next,null==l.previousIndex)r++;else{o||(o=[]);const b=h-r,E=g-r;if(b!=E){for(let ce=0;ce<b;ce++){const de=ce<o.length?o[ce]:o[ce]=0,De=de+ce;E<=De&&De<b&&(o[ce]=de+1)}o[l.previousIndex]=E-b}}h!==g&&n(l,h,g)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Fv(n))throw new Yt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,o,l,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let h=0;h<this.length;h++)o=n[h],l=this._trackByFn(h,o),null!==e&&Object.is(e.trackById,l)?(i&&(e=this._verifyReinsertion(e,o,l,h)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,l,h),i=!0),e=e._next}else r=0,function ww(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,h=>{l=this._trackByFn(r,h),null!==e&&Object.is(e.trackById,l)?(i&&(e=this._verifyReinsertion(e,h,l,r)),Object.is(e.item,h)||this._addIdentityChange(e,h)):(e=this._mismatch(e,h,l,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new FF(e,i),o,r),n}_verifyReinsertion(n,e,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,o=n._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new _I),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _I),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class FF{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LF{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class _I{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new LF,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yI(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}function bI(){return new Bk([new mI])}let Bk=(()=>{class t{static#e=this.\u0275prov=Un({token:t,providedIn:"root",factory:bI});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||bI()),deps:[[t,new Hd,new Zc]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Yt(901,!1)}}return t})();const HF=cI(null,"core",[]);let jF=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(bg))};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})();function zk(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function jI(t){const n=F(null);try{return t()}finally{F(n)}}function Hk(t,n){const e=Jr(t),i=n.elementInjector||Ll();return new u_(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}let $I=null;function tC(){return $I}class EL{}const ac=new yi("");function tN(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}const Jk=/\s+/,nN=[];let iN=(()=>{class t{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=nN,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Jk):nN}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Jk):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Jk).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ks),St(Ou))};static#t=this.\u0275dir=vi({type:t,selectors:[["","ngClass",""]],inputs:{klass:[uo.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class c9{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sp=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new c9(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===o?void 0:o);else if(null!==o){const h=i.get(o);i.move(h,l),sN(h,r)}});for(let r=0,o=i.length;r<o;r++){const h=i.get(r).context;h.index=r,h.count=o,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{sN(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(St(ou),St($l),St(Bk))};static#t=this.\u0275dir=vi({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function sN(t,n){t.context.$implicit=n.item}let Od=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new u9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){oN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){oN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(St(ou),St($l))};static#t=this.\u0275dir=vi({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class u9{constructor(){this.$implicit=null,this.ngIf=null}}function oN(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ms(n)}'.`)}function Ap(t,n){return new Yt(2100,!1)}class m9{createSubscription(n,e){return jI(()=>n.subscribe({next:e,error:i=>{throw i}}))}dispose(n){jI(()=>n.unsubscribe())}}class _9{createSubscription(n,e){return n.then(e,i=>{throw i})}dispose(n){}}const y9=new _9,v9=new m9;let lN=(()=>{class t{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(DE(e))return y9;if(J5(e))return v9;throw Ap()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(St(Cg,16))};static#t=this.\u0275pipe=Yo({name:"async",type:t,pure:!1,standalone:!0})}return t})(),ZE=(()=>{class t{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Ap();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=Yo({name:"slice",type:t,pure:!1,standalone:!0})}return t})(),QE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})();const uN="browser";function N_(t){return t===uN}function dN(t){return"server"===t}class hN{}class pB extends EL{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sD extends pB{static makeCurrent(){!function xL(t){$I??=t}(new sD)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function gB(){return oC=oC||document.querySelector("base"),oC?oC.getAttribute("href"):null}();return null==e?null:function mB(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){oC=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return tN(document.cookie,n)}}let oC=null,yB=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const oD=new yi("");let wN=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new Yt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(oD),Ii(Bs))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();class CN{constructor(n){this._doc=n}}const aD="ng-app-id";let TN=(()=>{class t{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dN(o),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${aD}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(aD),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(aD,this.appId),e.appendChild(l),l}}addStyleToHost(e,i){const r=this.getStyleElement(e,i),o=this.styleRef,l=o.get(i)?.elements;l?l.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac),Ii(F1),Ii(Ia,8),Ii(hh))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const lD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cD=/%COMP%/g,CB=new yi("",{providedIn:"root",factory:()=>!0});function EN(t,n){return n.map(e=>e.replace(cD,t))}let uD=(()=>{class t{constructor(e,i,r,o,l,h,g,b=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=g,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=dN(h),this.defaultRenderer=new dD(e,l,g,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ql.ShadowDom&&(i={...i,encapsulation:Ql.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof AN?r.applyToHost(e):r instanceof hD&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const l=this.doc,h=this.ngZone,g=this.eventManager,b=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,B=this.platformIsServer;switch(i.encapsulation){case Ql.Emulated:o=new AN(g,b,i,this.appId,E,l,h,B);break;case Ql.ShadowDom:return new SB(g,b,e,i,l,h,this.nonce,B);default:o=new hD(g,b,i,E,l,h,B)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(wN),Ii(TN),Ii(F1),Ii(CB),Ii(ac),Ii(hh),Ii(Bs),Ii(Ia))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();class dD{constructor(n,e,i,r){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(lD[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(SN(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(SN(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new Yt(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const o=lD[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=lD[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(up.DashCase|up.Important)?n.style.setProperty(e,i,r&up.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&up.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=tC().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function SN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class SB extends dD{constructor(n,e,i,r,o,l,h,g){super(n,o,l,g),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=EN(r.id,r.styles);for(const E of b){const B=document.createElement("style");h&&B.setAttribute("nonce",h),B.textContent=E,this.shadowRoot.appendChild(B)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hD extends dD{constructor(n,e,i,r,o,l,h,g){super(n,o,l,h),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=g?EN(g,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class AN extends hD{constructor(n,e,i,r,o,l,h,g){const b=r+"-"+i.id;super(n,e,i,o,l,h,g,b),this.contentAttr=function TB(t){return"_ngcontent-%COMP%".replace(cD,t)}(b),this.hostAttr=function xB(t){return"_nghost-%COMP%".replace(cD,t)}(b)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let AB=(()=>{class t extends CN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const kN=["alt","control","meta","shift"],kB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let MB=(()=>{class t extends CN{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const o=t.parseEventName(i),l=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tC().onAndCancel(e,o.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=t._normalizeKey(i.pop());let l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),kN.forEach(b=>{const E=i.indexOf(b);E>-1&&(i.splice(E,1),l+=b+".")}),l+=o,0!=i.length||0===o.length)return null;const g={};return g.domEventName=r,g.fullKey=l,g}static matchEventFullKeyCode(e,i){let r=kB[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kN.forEach(l=>{l!==r&&(0,DB[l])(e)&&(o+=l+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const RB=cI(HF,"browser",[{provide:hh,useValue:uN},{provide:L1,useValue:function IB(){sD.makeCurrent()},multi:!0},{provide:ac,useFactory:function OB(){return function e2(t){P1=t}(document),document},deps:[]}]),PB=new yi(""),IN=[{provide:kE,useClass:class _B{addToWindow(n){Yr.getAngularTestability=(i,r=!0)=>{const o=n.findTestabilityInTree(i,r);if(null==o)throw new Yt(5103,!1);return o},Yr.getAllAngularTestabilities=()=>n.getAllTestabilities(),Yr.getAllAngularRootElements=()=>n.getAllRootElements(),Yr.frameworkStabilizers||(Yr.frameworkStabilizers=[]),Yr.frameworkStabilizers.push(i=>{const r=Yr.getAllAngularTestabilities();let o=r.length;const l=function(){o--,0==o&&i()};r.forEach(h=>{h.whenStable(l)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?tC().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Q5,useClass:Ak,deps:[Bs,kk,kE]},{provide:Ak,useClass:Ak,deps:[Bs,kk,kE]}],NN=[{provide:jh,useValue:"root"},{provide:ed,useFactory:function NB(){return new ed},deps:[]},{provide:oD,useClass:AB,multi:!0,deps:[ac,Bs,hh]},{provide:oD,useClass:MB,multi:!0,deps:[ac]},uD,TN,wN,{provide:td,useExisting:uD},{provide:hN,useClass:yB,deps:[]},[]];let ON=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:F1,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(PB,12))};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({providers:[...NN,...IN],imports:[QE,jF]})}return t})(),aC=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:function(i){let r=null;return r=i?new(i||t):Ii(VB),r},providedIn:"root"})}return t})(),VB=(()=>{class t extends aC{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case vn.NONE:return i;case vn.HTML:return ze(i,"HTML")?ve(i):Oi(this._doc,String(i)).toString();case vn.STYLE:return ze(i,"Style")?ve(i):i;case vn.SCRIPT:if(ze(i,"Script"))return ve(i);throw new Yt(5200,!1);case vn.URL:return ze(i,"URL")?ve(i):gi(String(i));case vn.RESOURCE_URL:if(ze(i,"ResourceURL"))return ve(i);throw new Yt(5201,!1);default:throw new Yt(5202,!1)}}bypassSecurityTrustHtml(e){return function nt(t){return new T(t)}(e)}bypassSecurityTrustStyle(e){return function qt(t){return new N(t)}(e)}bypassSecurityTrustScript(e){return function Ot(t){return new oe(t)}(e)}bypassSecurityTrustUrl(e){return function sn(t){return new ue(t)}(e)}bypassSecurityTrustResourceUrl(e){return function Bi(t){return new he(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function LN(t){return t&&ei(t.schedule)}function fD(t){return t[t.length-1]}function pD(t){return ei(fD(t))?t.pop():void 0}function nS(t){return LN(fD(t))?t.pop():void 0}function qm(t){return this instanceof qm?(this.v=t,this):new qm(t)}function zN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function yD(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=t[o]&&function(l){return new Promise(function(h,g){!function r(o,l,h,g){Promise.resolve(g).then(function(b){o({value:b,done:h})},l)}(h,g,(l=t[o](l)).done,l.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const vD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function HN(t){return ei(t?.then)}function jN(t){return ei(t[Xl])}function $N(t){return Symbol.asyncIterator&&ei(t?.[Symbol.asyncIterator])}function WN(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const GN=function lV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function YN(t){return ei(t?.[GN])}function XN(t){return function UN(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),o=[];return r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r;function l(ce){i[ce]&&(r[ce]=function(de){return new Promise(function(De,He){o.push([ce,de,De,He])>1||h(ce,de)})})}function h(ce,de){try{!function g(ce){ce.value instanceof qm?Promise.resolve(ce.value.v).then(b,E):B(o[0][2],ce)}(i[ce](de))}catch(De){B(o[0][3],De)}}function b(ce){h("next",ce)}function E(ce){h("throw",ce)}function B(ce,de){ce(de),o.shift(),o.length&&h(o[0][0],o[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield qm(e.read());if(r)return yield qm(void 0);yield yield qm(i)}}finally{e.releaseLock()}})}function qN(t){return ei(t?.getReader)}function uu(t){if(t instanceof Zr)return t;if(null!=t){if(jN(t))return function cV(t){return new Zr(n=>{const e=t[Xl]();if(ei(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(vD(t))return function uV(t){return new Zr(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(HN(t))return function dV(t){return new Zr(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,yn)})}(t);if($N(t))return KN(t);if(YN(t))return function hV(t){return new Zr(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(qN(t))return function fV(t){return KN(XN(t))}(t)}throw WN(t)}function KN(t){return new Zr(n=>{(function pV(t,n){var e,i,r,o;return function BN(t,n,e,i){return new(e||(e=Promise))(function(o,l){function h(E){try{b(i.next(E))}catch(B){l(B)}}function g(E){try{b(i.throw(E))}catch(B){l(B)}}function b(E){E.done?o(E.value):function r(o){return o instanceof e?o:new e(function(l){l(o)})}(E.value).then(h,g)}b((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=zN(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(l){r={error:l}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Km(t,n,e,i=0,r=!1){const o=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function ZN(t,n=0){return Ne((e,i)=>{e.subscribe(li(i,r=>Km(i,t,()=>i.next(r),n),()=>Km(i,t,()=>i.complete(),n),r=>Km(i,t,()=>i.error(r),n)))})}function QN(t,n=0){return Ne((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function JN(t,n){if(!t)throw new Error("Iterable cannot be null");return new Zr(e=>{Km(e,n,()=>{const i=t[Symbol.asyncIterator]();Km(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function cC(t,n){return n?function bV(t,n){if(null!=t){if(jN(t))return function gV(t,n){return uu(t).pipe(QN(n),ZN(n))}(t,n);if(vD(t))return function _V(t,n){return new Zr(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(HN(t))return function mV(t,n){return uu(t).pipe(QN(n),ZN(n))}(t,n);if($N(t))return JN(t,n);if(YN(t))return function yV(t,n){return new Zr(e=>{let i;return Km(e,n,()=>{i=t[GN](),Km(e,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(l){return void e.error(l)}o?e.complete():e.next(r)},0,!0)}),()=>ei(i?.return)&&i.return()})}(t,n);if(qN(t))return function vV(t,n){return JN(XN(t),n)}(t,n)}throw WN(t)}(t,n):uu(t)}function db(...t){return cC(t,nS(t))}function hb(t,n,e=1/0){return ei(n)?hb((i,r)=>Xi((o,l)=>n(i,o,r,l))(uu(t(i,r))),e):("number"==typeof n&&(e=n),Ne((i,r)=>function wV(t,n,e,i,r,o,l,h){const g=[];let b=0,E=0,B=!1;const ce=()=>{B&&!g.length&&!b&&n.complete()},de=He=>b<i?De(He):g.push(He),De=He=>{o&&n.next(He),b++;let ot=!1;uu(e(He,E++)).subscribe(li(n,bt=>{r?.(bt),o?de(bt):n.next(bt)},()=>{ot=!0},void 0,()=>{if(ot)try{for(b--;g.length&&b<i;){const bt=g.shift();l?Km(n,l,()=>De(bt)):De(bt)}ce()}catch(bt){n.error(bt)}}))};return t.subscribe(li(n,de,()=>{B=!0,ce()})),()=>{h?.()}}(i,r,t,e)))}function bf(t,n){return Ne((e,i)=>{let r=0;e.subscribe(li(i,o=>t.call(n,o,r++)&&i.next(o)))})}function eO(t){return Ne((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function bD(t,n){return Ne((e,i)=>{let r=null,o=0,l=!1;const h=()=>l&&!r&&i.complete();e.subscribe(li(i,g=>{r?.unsubscribe();let b=0;const E=o++;uu(t(g,E)).subscribe(r=li(i,B=>i.next(n?n(g,B,E,b++):B),()=>{r=null,h()}))},()=>{l=!0,h()}))})}class iS{}class rS{}class wf{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),l=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof wf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new wf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof wf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=n.value;if(o){let l=this.headers.get(e);if(!l)return;l=l.filter(h=>-1===o.indexOf(h)),0===l.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,l)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class TV{encodeKey(n){return tO(n)}encodeValue(n){return tO(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const EV=/%(\d[a-f0-9])/gi,SV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tO(t){return encodeURIComponent(t).replace(EV,(n,e)=>SV[e]??n)}function sS(t){return`${t}`}class Zm{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new TV,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xV(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[l,h]=-1==o?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],g=e.get(l)||[];g.push(h),e.set(l,g)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(sS):[sS(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Zm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(sS(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(sS(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class AV{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function nO(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function iO(t){return typeof Blob<"u"&&t instanceof Blob}function rO(t){return typeof FormData<"u"&&t instanceof FormData}class uC{constructor(n,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function kV(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new wf,this.context??=new AV,this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+l}}else this.params=new Zm,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||nO(this.body)||iO(this.body)||rO(this.body)||function DV(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Zm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rO(this.body)?null:iO(this.body)?this.body.type||null:nO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,l=void 0!==n.body?n.body:this.body,h=n.withCredentials??this.withCredentials,g=n.reportProgress??this.reportProgress;let b=n.headers||this.headers,E=n.params||this.params;const B=n.context??this.context;return void 0!==n.setHeaders&&(b=Object.keys(n.setHeaders).reduce((ce,de)=>ce.set(de,n.setHeaders[de]),b)),n.setParams&&(E=Object.keys(n.setParams).reduce((ce,de)=>ce.set(de,n.setParams[de]),E)),new uC(e,i,l,{params:E,headers:b,context:B,reportProgress:g,responseType:r,withCredentials:h,transferCache:o})}}var Qm=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Qm||{});class wD{constructor(n,e=dC.Ok,i="OK"){this.headers=n.headers||new wf,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class oS extends wD{constructor(n={}){super(n),this.type=Qm.ResponseHeader}clone(n={}){return new oS({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class O_ extends wD{constructor(n={}){super(n),this.type=Qm.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new O_({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fb extends wD{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}var dC=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(dC||{});function CD(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let Jm=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof uC)o=e;else{let g,b;g=r.headers instanceof wf?r.headers:new wf(r.headers),r.params&&(b=r.params instanceof Zm?r.params:new Zm({fromObject:r.params})),o=new uC(e,i,void 0!==r.body?r.body:null,{headers:g,context:r.context,params:b,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const l=db(o).pipe(function CV(t,n){return ei(n)?hb(t,n,1):hb(t,1)}(g=>this.handler.handle(g)));if(e instanceof uC||"events"===r.observe)return l;const h=l.pipe(bf(g=>g instanceof O_));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe(Xi(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe(Xi(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe(Xi(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe(Xi(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Zm).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,CD(r,i))}post(e,i,r={}){return this.request("POST",e,CD(r,i))}put(e,i,r={}){return this.request("PUT",e,CD(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(iS))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();function oO(t,n){return n(t)}function RV(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}const FV=new yi(""),hC=new yi(""),aO=new yi(""),lO=new yi("");function LV(){let t=null;return(n,e)=>{null===t&&(t=($t(FV,{optional:!0})??[]).reduceRight(RV,oO));const i=$t(pg),r=i.add();return t(n,e).pipe(eO(()=>i.remove(r)))}}let cO=(()=>{class t extends iS{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=$t(pg);const r=$t(lO,{optional:!0});this.backend=r??e}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(hC),...this.injector.get(aO,[])]));this.chain=r.reduceRight((o,l)=>function PV(t,n,e){return(i,r)=>function yc(t,n){t instanceof Yu&&t.assertNotDestroyed();const i=Pc(t),r=Ps(void 0);try{return n()}finally{Pc(i),Ps(r)}}(e,()=>n(i,o=>t(o,r)))}(o,l,this.injector),oO)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(eO(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(rS),Ii(Sl))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const HV=/^\)\]\}',?\n/;let dO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Yt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?cC(i.\u0275loadImpl()):db(null)).pipe(bD(()=>new Zr(o=>{const l=i.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((He,ot)=>l.setRequestHeader(He,ot.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const He=e.detectContentTypeHeader();null!==He&&l.setRequestHeader("Content-Type",He)}if(e.responseType){const He=e.responseType.toLowerCase();l.responseType="json"!==He?He:"text"}const h=e.serializeBody();let g=null;const b=()=>{if(null!==g)return g;const He=l.statusText||"OK",ot=new wf(l.getAllResponseHeaders()),bt=function jV(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(l)||e.url;return g=new oS({headers:ot,status:l.status,statusText:He,url:bt}),g},E=()=>{let{headers:He,status:ot,statusText:bt,url:yt}=b(),Cn=null;ot!==dC.NoContent&&(Cn=typeof l.response>"u"?l.responseText:l.response),0===ot&&(ot=Cn?dC.Ok:0);let Mn=ot>=200&&ot<300;if("json"===e.responseType&&"string"==typeof Cn){const si=Cn;Cn=Cn.replace(HV,"");try{Cn=""!==Cn?JSON.parse(Cn):null}catch(bi){Cn=si,Mn&&(Mn=!1,Cn={error:bi,text:Cn})}}Mn?(o.next(new O_({body:Cn,headers:He,status:ot,statusText:bt,url:yt||void 0})),o.complete()):o.error(new fb({error:Cn,headers:He,status:ot,statusText:bt,url:yt||void 0}))},B=He=>{const{url:ot}=b(),bt=new fb({error:He,status:l.status||0,statusText:l.statusText||"Unknown Error",url:ot||void 0});o.error(bt)};let ce=!1;const de=He=>{ce||(o.next(b()),ce=!0);let ot={type:Qm.DownloadProgress,loaded:He.loaded};He.lengthComputable&&(ot.total=He.total),"text"===e.responseType&&l.responseText&&(ot.partialText=l.responseText),o.next(ot)},De=He=>{let ot={type:Qm.UploadProgress,loaded:He.loaded};He.lengthComputable&&(ot.total=He.total),o.next(ot)};return l.addEventListener("load",E),l.addEventListener("error",B),l.addEventListener("timeout",B),l.addEventListener("abort",B),e.reportProgress&&(l.addEventListener("progress",de),null!==h&&l.upload&&l.upload.addEventListener("progress",De)),l.send(h),o.next({type:Qm.Sent}),()=>{l.removeEventListener("error",B),l.removeEventListener("abort",B),l.removeEventListener("load",E),l.removeEventListener("timeout",B),e.reportProgress&&(l.removeEventListener("progress",de),null!==h&&l.upload&&l.upload.removeEventListener("progress",De)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(hN))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const ED=new yi(""),hO=new yi("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),fO=new yi("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class pO{}let GV=(()=>{class t{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=tN(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac),Ii(hh),Ii(hO))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();function YV(t,n){const e=t.url.toLowerCase();if(!$t(ED)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=$t(pO).getToken(),r=$t(fO);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var e1=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(e1||{});function XV(...t){const n=[Jm,dO,cO,{provide:iS,useExisting:cO},{provide:rS,useExisting:dO},{provide:hC,useValue:YV,multi:!0},{provide:ED,useValue:!0},{provide:pO,useClass:GV}];for(const e of t)n.push(...e.\u0275providers);return xu(n)}const gO=new yi("");function qV(){return function R_(t,n){return{\u0275kind:t,\u0275providers:n}}(e1.LegacyInterceptors,[{provide:gO,useFactory:LV},{provide:hC,useExisting:gO,multi:!0}])}let KV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({providers:[XV(qV())]})}return t})();function TO(t=1/0){return hb(wa,t)}const fC=new Zr(t=>t.complete());class iU extends Fn{constructor(n,e){super()}schedule(n,e=0){return this}}const lS={setInterval(t,n,...e){const{delegate:i}=lS;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=lS;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},SD={now:()=>(SD.delegate||Date).now(),delegate:void 0};class pC{constructor(n,e=pC.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}pC.now=SD.now;const AD=new class sU extends pC{constructor(n,e=pC.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class rU extends iU{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return lS.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&lS.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ln(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),oU=AD;function kD(t=0,n,e=oU){let i=-1;return null!=n&&(LN(n)?e=n:i=n),new Zr(r=>{let o=function aU(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;o<0&&(o=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function lU(t,n){return t===n}class cU extends Ir{constructor(n=1/0,e=1/0,i=SD){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;e||(i.push(n),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!n.closed;l+=i?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*n;if(n<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=e.now();let h=0;for(let g=1;g<i.length&&i[g]<=l;g+=2)h=g;h&&i.splice(0,h+1)}}}function DD(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new Us({next:()=>{i.unsubscribe(),t()}});return uu(n(...e)).subscribe(i)}function cS(...t){return function hU(){return TO(1)}()(cC(t,nS(t)))}function du(t){return Ne((n,e)=>{uu(t).subscribe(li(e,()=>e.complete(),Ln)),!e.closed&&n.subscribe(e)})}function kp(t){return t<=0?()=>fC:Ne((n,e)=>{let i=0;n.subscribe(li(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}jt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let P_={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const MO=/[&<>"']/,yU=new RegExp(MO.source,"g"),IO=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,vU=new RegExp(IO.source,"g"),bU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},NO=t=>bU[t];function Bu(t,n){if(n){if(MO.test(t))return t.replace(yU,NO)}else if(IO.test(t))return t.replace(vU,NO);return t}const wU=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function OO(t){return t.replace(wU,(n,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const CU=/(^|[^\[])\^/g;function va(t,n){t="string"==typeof t?t:t.source,n=n||"";const e={replace:(i,r)=>(r=(r=r.source||r).replace(CU,"$1"),t=t.replace(i,r),e),getRegex:()=>new RegExp(t,n)};return e}const TU=/[^\w:]/g,xU=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function RO(t,n,e){if(t){let i;try{i=decodeURIComponent(OO(e)).replace(TU,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}n&&!xU.test(e)&&(e=function kU(t,n){uS[" "+t]||(uS[" "+t]=EU.test(t)?t+"/":hS(t,"/",!0));const e=-1===(t=uS[" "+t]).indexOf(":");return"//"===n.substring(0,2)?e?n:t.replace(SU,"$1")+n:"/"===n.charAt(0)?e?n:t.replace(AU,"$1")+n:t+n}(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const uS={},EU=/^[^:]+:\/*[^/]*$/,SU=/^([^:]+:)[\s\S]*$/,AU=/^([^:]+:\/*[^/]*)[\s\S]*$/,dS={exec:function(){}};function PO(t,n){const i=t.replace(/\|/g,(o,l,h)=>{let g=!1,b=l;for(;--b>=0&&"\\"===h[b];)g=!g;return g?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function hS(t,n,e){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const o=t.charAt(i-r-1);if(o!==n||e){if(o===n||!e)break;r++}else r++}return t.slice(0,i-r)}function FO(t,n){if(n<1)return"";let e="";for(;n>1;)1&n&&(e+=t),n>>=1,t+=t;return e+t}function LO(t,n,e,i){const r=n.href,o=n.title?Bu(n.title):null,l=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const h={type:"link",raw:e,href:r,title:o,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,h}return{type:"image",raw:e,href:r,title:o,text:Bu(l)}}class MD{constructor(n){this.options=n||P_}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:hS(i,"\n")}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const i=e[0],r=function IU(t,n){const e=t.match(/^(\s+)(?:```)/);if(null===e)return n;const i=e[1];return n.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[l]=o;return l.length>=i.length?r.slice(i.length):r}).join("\n")}(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:r}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let i=e[2].trim();if(/#$/.test(i)){const r=hS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const i=e[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:o,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let i,r,o,l,h,g,b,E,B,ce,de,De,He=e[1].trim();const ot=He.length>1,bt={type:"list",raw:"",ordered:ot,start:ot?+He.slice(0,-1):"",loose:!1,items:[]};He=ot?`\\d{1,9}\\${He.slice(-1)}`:`\\${He}`,this.options.pedantic&&(He=ot?He:"[*+-]");const yt=new RegExp(`^( {0,3}${He})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;n&&(De=!1,(e=yt.exec(n))&&!this.rules.block.hr.test(n));){if(i=e[0],n=n.substring(i.length),E=e[2].split("\n",1)[0].replace(/^\t+/,Mn=>" ".repeat(3*Mn.length)),B=n.split("\n",1)[0],this.options.pedantic?(l=2,de=E.trimLeft()):(l=e[2].search(/[^ ]/),l=l>4?1:l,de=E.slice(l),l+=e[1].length),g=!1,!E&&/^ *$/.test(B)&&(i+=B+"\n",n=n.substring(B.length+1),De=!0),!De){const Mn=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),si=new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),bi=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),sr=new RegExp(`^ {0,${Math.min(3,l-1)}}#`);for(;n&&(ce=n.split("\n",1)[0],B=ce,this.options.pedantic&&(B=B.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(bi.test(B)||sr.test(B)||Mn.test(B)||si.test(n)));){if(B.search(/[^ ]/)>=l||!B.trim())de+="\n"+B.slice(l);else{if(g||E.search(/[^ ]/)>=4||bi.test(E)||sr.test(E)||si.test(E))break;de+="\n"+B}!g&&!B.trim()&&(g=!0),i+=ce+"\n",n=n.substring(ce.length+1),E=B.slice(l)}}bt.loose||(b?bt.loose=!0:/\n *\n *$/.test(i)&&(b=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(de),r&&(o="[ ] "!==r[0],de=de.replace(/^\[[ xX]\] +/,""))),bt.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:de}),bt.raw+=i}bt.items[bt.items.length-1].raw=i.trimRight(),bt.items[bt.items.length-1].text=de.trimRight(),bt.raw=bt.raw.trimRight();const Cn=bt.items.length;for(h=0;h<Cn;h++)if(this.lexer.state.top=!1,bt.items[h].tokens=this.lexer.blockTokens(bt.items[h].text,[]),!bt.loose){const Mn=bt.items[h].tokens.filter(bi=>"space"===bi.type),si=Mn.length>0&&Mn.some(bi=>/\n.*\n/.test(bi.raw));bt.loose=si}if(bt.loose)for(h=0;h<Cn;h++)bt.items[h].loose=!0;return bt}}html(n){const e=this.rules.block.html.exec(n);if(e){const i={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(e[0]):Bu(e[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(n){const e=this.rules.block.def.exec(n);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:r,title:o}}}table(n){const e=this.rules.block.table.exec(n);if(e){const i={type:"table",header:PO(e[1]).map(r=>({text:r})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=e[0];let o,l,h,g,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=PO(i.rows[o],i.header.length).map(b=>({text:b}));for(r=i.header.length,l=0;l<r;l++)i.header[l].tokens=this.lexer.inline(i.header[l].text);for(r=i.rows.length,l=0;l<r;l++)for(g=i.rows[l],h=0;h<g.length;h++)g[h].tokens=this.lexer.inline(g[h].text);return i}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const i="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:Bu(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Bu(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const l=hS(i.slice(0,-1),"\\");if((i.length-l.length)%2==0)return}else{const l=function DU(t,n){if(-1===t.indexOf(n[1]))return-1;const e=t.length;let i=0,r=0;for(;r<e;r++)if("\\"===t[r])r++;else if(t[r]===n[0])i++;else if(t[r]===n[1]&&(i--,i<0))return r;return-1}(e[2],"()");if(l>-1){const g=(0===e[0].indexOf("!")?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,g).trim(),e[3]=""}}let r=e[2],o="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);l&&(r=l[1],o=l[3])}else o=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),LO(e,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let i;if((i=this.rules.inline.reflink.exec(n))||(i=this.rules.inline.nolink.exec(n))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=e[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return LO(i,r,i[0],this.lexer)}}emStrong(n,e,i=""){let r=this.rules.inline.emStrong.lDelim.exec(n);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const l=r[0].length-1;let h,g,b=l,E=0;const B="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(B.lastIndex=0,e=e.slice(-1*n.length+l);null!=(r=B.exec(e));){if(h=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!h)continue;if(g=h.length,r[3]||r[4]){b+=g;continue}if((r[5]||r[6])&&l%3&&!((l+g)%3)){E+=g;continue}if(b-=g,b>0)continue;g=Math.min(g,g+b+E);const ce=n.slice(0,l+r.index+(r[0].length-h.length)+g);if(Math.min(l,g)%2){const De=ce.slice(1,-1);return{type:"em",raw:ce,text:De,tokens:this.lexer.inlineTokens(De)}}const de=ce.slice(2,-2);return{type:"strong",raw:ce,text:de,tokens:this.lexer.inlineTokens(de)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let i=e[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=Bu(i,!0),{type:"codespan",raw:e[0],text:i}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n,e){const i=this.rules.inline.autolink.exec(n);if(i){let r,o;return"@"===i[2]?(r=Bu(this.options.mangle?e(i[1]):i[1]),o="mailto:"+r):(r=Bu(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(n,e){let i;if(i=this.rules.inline.url.exec(n)){let r,o;if("@"===i[2])r=Bu(this.options.mangle?e(i[0]):i[0]),o="mailto:"+r;else{let l;do{l=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(l!==i[0]);r=Bu(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(n,e){const i=this.rules.inline.text.exec(n);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Bu(i[0]):i[0]:Bu(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Wr={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:dS,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Wr.def=va(Wr.def).replace("label",Wr._label).replace("title",Wr._title).getRegex(),Wr.bullet=/(?:[*+-]|\d{1,9}[.)])/,Wr.listItemStart=va(/^( *)(bull) */).replace("bull",Wr.bullet).getRegex(),Wr.list=va(Wr.list).replace(/bull/g,Wr.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Wr.def.source+")").getRegex(),Wr._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wr._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Wr.html=va(Wr.html,"i").replace("comment",Wr._comment).replace("tag",Wr._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Wr.paragraph=va(Wr._paragraph).replace("hr",Wr.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wr._tag).getRegex(),Wr.blockquote=va(Wr.blockquote).replace("paragraph",Wr.paragraph).getRegex(),Wr.normal={...Wr},Wr.gfm={...Wr.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Wr.gfm.table=va(Wr.gfm.table).replace("hr",Wr.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wr._tag).getRegex(),Wr.gfm.paragraph=va(Wr._paragraph).replace("hr",Wr.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Wr.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wr._tag).getRegex(),Wr.pedantic={...Wr.normal,html:va("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Wr._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:dS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:va(Wr.normal._paragraph).replace("hr",Wr.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Wr.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const rr={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:dS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:dS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function NU(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function BO(t){let e,i,n="";const r=t.length;for(e=0;e<r;e++)i=t.charCodeAt(e),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}rr._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",rr.punctuation=va(rr.punctuation).replace(/punctuation/g,rr._punctuation).getRegex(),rr.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,rr.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,rr._comment=va(Wr._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),rr.emStrong.lDelim=va(rr.emStrong.lDelim).replace(/punct/g,rr._punctuation).getRegex(),rr.emStrong.rDelimAst=va(rr.emStrong.rDelimAst,"g").replace(/punct/g,rr._punctuation).getRegex(),rr.emStrong.rDelimUnd=va(rr.emStrong.rDelimUnd,"g").replace(/punct/g,rr._punctuation).getRegex(),rr._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,rr._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,rr._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,rr.autolink=va(rr.autolink).replace("scheme",rr._scheme).replace("email",rr._email).getRegex(),rr._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,rr.tag=va(rr.tag).replace("comment",rr._comment).replace("attribute",rr._attribute).getRegex(),rr._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,rr._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,rr._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,rr.link=va(rr.link).replace("label",rr._label).replace("href",rr._href).replace("title",rr._title).getRegex(),rr.reflink=va(rr.reflink).replace("label",rr._label).replace("ref",Wr._label).getRegex(),rr.nolink=va(rr.nolink).replace("ref",Wr._label).getRegex(),rr.reflinkSearch=va(rr.reflinkSearch,"g").replace("reflink",rr.reflink).replace("nolink",rr.nolink).getRegex(),rr.normal={...rr},rr.pedantic={...rr.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:va(/^!?\[(label)\]\((.*?)\)/).replace("label",rr._label).getRegex(),reflink:va(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",rr._label).getRegex()},rr.gfm={...rr.normal,escape:va(rr.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},rr.gfm.url=va(rr.gfm.url,"i").replace("email",rr.gfm._extended_email).getRegex(),rr.breaks={...rr.gfm,br:va(rr.br).replace("{2,}","*").getRegex(),text:va(rr.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class t1{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||P_,this.options.tokenizer=this.options.tokenizer||new MD,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Wr.normal,inline:rr.normal};this.options.pedantic?(e.block=Wr.pedantic,e.inline=rr.pedantic):this.options.gfm&&(e.block=Wr.gfm,e.inline=this.options.breaks?rr.breaks:rr.gfm),this.tokenizer.rules=e}static get rules(){return{block:Wr,inline:rr}}static lex(n,e){return new t1(e).lex(n)}static lexInline(n,e){return new t1(e).inlineTokens(n)}lex(n){let e;for(n=n.replace(/\r\n|\r/g,"\n"),this.blockTokens(n,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){let i,r,o,l;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(h,g,b)=>g+"    ".repeat(b.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>!!(i=h.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.space(n)){n=n.substring(i.raw.length),1===i.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(i);continue}if(i=this.tokenizer.code(n)){n=n.substring(i.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?e.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(n)){n=n.substring(i.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(o=n,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const g=n.slice(1);let b;this.options.extensions.startBlock.forEach(function(E){b=E.call({lexer:this},g),"number"==typeof b&&b>=0&&(h=Math.min(h,b))}),h<1/0&&h>=0&&(o=n.substring(0,h+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=e[e.length-1],l&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(i),l=o.length!==n.length,n=n.substring(i.raw.length);continue}if(i=this.tokenizer.text(n)){n=n.substring(i.raw.length),r=e[e.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(i);continue}if(n){const h="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let i,r,o,h,g,b,l=n;if(this.tokens.links){const E=Object.keys(this.tokens.links);if(E.length>0)for(;null!=(h=this.tokenizer.rules.inline.reflinkSearch.exec(l));)E.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,h.index)+"["+FO("a",h[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(h=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,h.index)+"["+FO("a",h[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(h=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,h.index+h[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;n;)if(g||(b=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(E=>!!(i=E.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.escape(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(n)){n=n.substring(i.raw.length),r=e[e.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(i.raw.length),r=e[e.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(n,l,b)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(n,BO)){n=n.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(n,BO))){n=n.substring(i.raw.length),e.push(i);continue}if(o=n,this.options.extensions&&this.options.extensions.startInline){let E=1/0;const B=n.slice(1);let ce;this.options.extensions.startInline.forEach(function(de){ce=de.call({lexer:this},B),"number"==typeof ce&&ce>=0&&(E=Math.min(E,ce))}),E<1/0&&E>=0&&(o=n.substring(0,E+1))}if(i=this.tokenizer.inlineText(o,NU)){n=n.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(b=i.raw.slice(-1)),g=!0,r=e[e.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(n){const E="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(E);break}throw new Error(E)}}return e}}class F_{constructor(n){this.options=n||P_}code(n,e,i){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(n,r);null!=o&&o!==n&&(i=!0,n=o)}return n=n.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+Bu(r)+'">'+(i?n:Bu(n,!0))+"</code></pre>\n":"<pre><code>"+(i?n:Bu(n,!0))+"</code></pre>\n"}blockquote(n){return`<blockquote>\n${n}</blockquote>\n`}html(n){return n}heading(n,e,i,r){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+r.slug(i)}">${n}</h${e}>\n`:`<h${e}>${n}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(n,e,i){const r=e?"ol":"ul";return"<"+r+(e&&1!==i?' start="'+i+'"':"")+">\n"+n+"</"+r+">\n"}listitem(n){return`<li>${n}</li>\n`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return`<p>${n}</p>\n`}table(n,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+n+"</thead>\n"+e+"</table>\n"}tablerow(n){return`<tr>\n${n}</tr>\n`}tablecell(n,e){const i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+n+`</${i}>\n`}strong(n){return`<strong>${n}</strong>`}em(n){return`<em>${n}</em>`}codespan(n){return`<code>${n}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return`<del>${n}</del>`}link(n,e,i){if(null===(n=RO(this.options.sanitize,this.options.baseUrl,n)))return i;let r='<a href="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=">"+i+"</a>",r}image(n,e,i){if(null===(n=RO(this.options.sanitize,this.options.baseUrl,n)))return i;let r=`<img src="${n}" alt="${i}"`;return e&&(r+=` title="${e}"`),r+=this.options.xhtml?"/>":">",r}text(n){return n}}class VO{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,i){return""+i}image(n,e,i){return""+i}br(){return""}}class UO{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let i=n,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[n];do{r++,i=n+"-"+r}while(this.seen.hasOwnProperty(i))}return e||(this.seen[n]=r,this.seen[i]=0),i}slug(n,e={}){const i=this.serialize(n);return this.getNextSafeSlug(i,e.dryrun)}}class n1{constructor(n){this.options=n||P_,this.options.renderer=this.options.renderer||new F_,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new VO,this.slugger=new UO}static parse(n,e){return new n1(e).parse(n)}static parseInline(n,e){return new n1(e).parseInline(n)}parse(n,e=!0){let r,o,l,h,g,b,E,B,ce,de,De,He,ot,bt,yt,Cn,Mn,si,bi,i="";const sr=n.length;for(r=0;r<sr;r++)if(de=n[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[de.type]&&(bi=this.options.extensions.renderers[de.type].call({parser:this},de),!1!==bi||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(de.type)))i+=bi||"";else switch(de.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(de.tokens),de.depth,OO(this.parseInline(de.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(de.text,de.lang,de.escaped);continue;case"table":for(B="",E="",h=de.header.length,o=0;o<h;o++)E+=this.renderer.tablecell(this.parseInline(de.header[o].tokens),{header:!0,align:de.align[o]});for(B+=this.renderer.tablerow(E),ce="",h=de.rows.length,o=0;o<h;o++){for(b=de.rows[o],E="",g=b.length,l=0;l<g;l++)E+=this.renderer.tablecell(this.parseInline(b[l].tokens),{header:!1,align:de.align[l]});ce+=this.renderer.tablerow(E)}i+=this.renderer.table(B,ce);continue;case"blockquote":ce=this.parse(de.tokens),i+=this.renderer.blockquote(ce);continue;case"list":for(De=de.ordered,He=de.start,ot=de.loose,h=de.items.length,ce="",o=0;o<h;o++)yt=de.items[o],Cn=yt.checked,Mn=yt.task,bt="",yt.task&&(si=this.renderer.checkbox(Cn),ot?yt.tokens.length>0&&"paragraph"===yt.tokens[0].type?(yt.tokens[0].text=si+" "+yt.tokens[0].text,yt.tokens[0].tokens&&yt.tokens[0].tokens.length>0&&"text"===yt.tokens[0].tokens[0].type&&(yt.tokens[0].tokens[0].text=si+" "+yt.tokens[0].tokens[0].text)):yt.tokens.unshift({type:"text",text:si}):bt+=si),bt+=this.parse(yt.tokens,ot),ce+=this.renderer.listitem(bt,Mn,Cn);i+=this.renderer.list(ce,De,He);continue;case"html":i+=this.renderer.html(de.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(de.tokens));continue;case"text":for(ce=de.tokens?this.parseInline(de.tokens):de.text;r+1<sr&&"text"===n[r+1].type;)de=n[++r],ce+="\n"+(de.tokens?this.parseInline(de.tokens):de.text);i+=e?this.renderer.paragraph(ce):ce;continue;default:{const Ur='Token with "'+de.type+'" type was not found.';if(this.options.silent)return void console.error(Ur);throw new Error(Ur)}}return i}parseInline(n,e){e=e||this.renderer;let r,o,l,i="";const h=n.length;for(r=0;r<h;r++)if(o=n[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(l=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==l||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=l||"";else switch(o.type){case"escape":case"text":i+=e.text(o.text);break;case"html":i+=e.html(o.text);break;case"link":i+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":i+=e.image(o.href,o.title,o.text);break;case"strong":i+=e.strong(this.parseInline(o.tokens,e));break;case"em":i+=e.em(this.parseInline(o.tokens,e));break;case"codespan":i+=e.codespan(o.text);break;case"br":i+=e.br();break;case"del":i+=e.del(this.parseInline(o.tokens,e));break;default:{const g='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(g);throw new Error(g)}}return i}}class ID{constructor(n){this.options=n||P_}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(n){return n}postprocess(n){return n}}function zO(t,n){return(e,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},l=function OU(t,n,e){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+Bu(i.message+"",!0)+"</pre>";return n?Promise.resolve(r):e?void e(null,r):r}if(n)return Promise.reject(i);if(!e)throw i;e(i)}}((i={...Gr.defaults,...o}).silent,i.async,r);if(typeof e>"u"||null===e)return l(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(function MU(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const h=i.highlight;let g;try{i.hooks&&(e=i.hooks.preprocess(e)),g=t(e,i)}catch(B){return l(B)}const b=function(B){let ce;if(!B)try{i.walkTokens&&Gr.walkTokens(g,i.walkTokens),ce=n(g,i),i.hooks&&(ce=i.hooks.postprocess(ce))}catch(de){B=de}return i.highlight=h,B?l(B):r(null,ce)};if(!h||h.length<3||(delete i.highlight,!g.length))return b();let E=0;return Gr.walkTokens(g,function(B){"code"===B.type&&(E++,setTimeout(()=>{h(B.text,B.lang,function(ce,de){if(ce)return b(ce);null!=de&&de!==B.text&&(B.text=de,B.escaped=!0),E--,0===E&&b()})},0))}),void(0===E&&b())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(e):e).then(h=>t(h,i)).then(h=>i.walkTokens?Promise.all(Gr.walkTokens(h,i.walkTokens)).then(()=>h):h).then(h=>n(h,i)).then(h=>i.hooks?i.hooks.postprocess(h):h).catch(l);try{i.hooks&&(e=i.hooks.preprocess(e));const h=t(e,i);i.walkTokens&&Gr.walkTokens(h,i.walkTokens);let g=n(h,i);return i.hooks&&(g=i.hooks.postprocess(g)),g}catch(h){return l(h)}}}function Gr(t,n,e){return zO(t1.lex,n1.parse)(t,n,e)}Gr.options=Gr.setOptions=function(t){return function _U(t){P_=t}(Gr.defaults={...Gr.defaults,...t}),Gr},Gr.getDefaults=function DO(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Gr.defaults=P_,Gr.use=function(...t){const n=Gr.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(e=>{const i={...e};if(i.async=Gr.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=n.renderers[r.name];n.renderers[r.name]=o?function(...l){let h=r.renderer.apply(this,l);return!1===h&&(h=o.apply(this,l)),h}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");n[r.level]?n[r.level].unshift(r.tokenizer):n[r.level]=[r.tokenizer],r.start&&("block"===r.level?n.startBlock?n.startBlock.push(r.start):n.startBlock=[r.start]:"inline"===r.level&&(n.startInline?n.startInline.push(r.start):n.startInline=[r.start]))}r.childTokens&&(n.childTokens[r.name]=r.childTokens)}),i.extensions=n),e.renderer){const r=Gr.defaults.renderer||new F_;for(const o in e.renderer){const l=r[o];r[o]=(...h)=>{let g=e.renderer[o].apply(r,h);return!1===g&&(g=l.apply(r,h)),g}}i.renderer=r}if(e.tokenizer){const r=Gr.defaults.tokenizer||new MD;for(const o in e.tokenizer){const l=r[o];r[o]=(...h)=>{let g=e.tokenizer[o].apply(r,h);return!1===g&&(g=l.apply(r,h)),g}}i.tokenizer=r}if(e.hooks){const r=Gr.defaults.hooks||new ID;for(const o in e.hooks){const l=r[o];r[o]=ID.passThroughHooks.has(o)?h=>{if(Gr.defaults.async)return Promise.resolve(e.hooks[o].call(r,h)).then(b=>l.call(r,b));const g=e.hooks[o].call(r,h);return l.call(r,g)}:(...h)=>{let g=e.hooks[o].apply(r,h);return!1===g&&(g=l.apply(r,h)),g}}i.hooks=r}if(e.walkTokens){const r=Gr.defaults.walkTokens;i.walkTokens=function(o){let l=[];return l.push(e.walkTokens.call(this,o)),r&&(l=l.concat(r.call(this,o))),l}}Gr.setOptions(i)})},Gr.walkTokens=function(t,n){let e=[];for(const i of t)switch(e=e.concat(n.call(Gr,i)),i.type){case"table":for(const r of i.header)e=e.concat(Gr.walkTokens(r.tokens,n));for(const r of i.rows)for(const o of r)e=e.concat(Gr.walkTokens(o.tokens,n));break;case"list":e=e.concat(Gr.walkTokens(i.items,n));break;default:Gr.defaults.extensions&&Gr.defaults.extensions.childTokens&&Gr.defaults.extensions.childTokens[i.type]?Gr.defaults.extensions.childTokens[i.type].forEach(function(r){e=e.concat(Gr.walkTokens(i[r],n))}):i.tokens&&(e=e.concat(Gr.walkTokens(i.tokens,n)))}return e},Gr.parseInline=zO(t1.lexInline,n1.parseInline),Gr.Parser=n1,Gr.parser=n1.parse,Gr.Renderer=F_,Gr.TextRenderer=VO,Gr.Lexer=t1,Gr.lexer=t1.lex,Gr.Tokenizer=MD,Gr.Slugger=UO,Gr.Hooks=ID,Gr.parse=Gr;let HO=(()=>{class t{constructor(){this._buttonClick$=new Ir,this.copied$=this._buttonClick$.pipe(bD(()=>function xO(...t){const n=nS(t),e=function UB(t,n){return"number"==typeof fD(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?uu(i[0]):TO(e)(cC(i,n)):fC}(db(!0),kD(3e3).pipe(function EO(t){return Xi(()=>t)}(!1)))),function SO(t,n=wa){return t=t??lU,Ne((e,i)=>{let r,o=!0;e.subscribe(li(i,l=>{const h=n(l);(o||!t(r,h))&&(o=!1,r=h,i.next(l))}))})}(),function dU(t,n,e){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:e}=t):i=t??1/0,function uU(t={}){const{connector:n=(()=>new Ir),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let l,h,g,b=0,E=!1,B=!1;const ce=()=>{h?.unsubscribe(),h=void 0},de=()=>{ce(),l=g=void 0,E=B=!1},De=()=>{const He=l;de(),He?.unsubscribe()};return Ne((He,ot)=>{b++,!B&&!E&&ce();const bt=g=g??n();ot.add(()=>{b--,0===b&&!B&&!E&&(h=DD(De,r))}),bt.subscribe(ot),!l&&b>0&&(l=new Us({next:yt=>bt.next(yt),error:yt=>{B=!0,ce(),h=DD(de,e,yt),bt.error(yt)},complete:()=>{E=!0,ce(),h=DD(de,i),bt.complete()}}),uu(He).subscribe(l))})(o)}}({connector:()=>new cU(i,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1)),this.copiedText$=this.copied$.pipe(function AO(...t){const n=nS(t);return Ne((e,i)=>{(n?cS(t,e,n):cS(t,e)).subscribe(i)})}(!1),Xi(e=>e?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=bs({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(L(0,"button",0),cu(1,"async"),Vn("click",function(){return r.onCopyToClipboardClick()}),_e(2),cu(3,"async"),P()),2&i&&(_r("copied",_f(1,3,r.copied$)),ye(2),Hi(_f(3,5,r.copiedText$)))},dependencies:[lN],encapsulation:2,changeDetection:0})}return t})();class LU{}class jO{}const $O=new yi("SECURITY_CONTEXT");let OD=(()=>{class t{get options(){return this._options}set options(e){this._options={...this.DEFAULT_MARKED_OPTIONS,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(e,i,r,o,l,h){this.platform=e,this.securityContext=i,this.http=r,this.clipboardOptions=o,this.sanitizer=h,this.DEFAULT_MARKED_OPTIONS={renderer:new F_},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ir,this.reload$=this._reload$.asObservable(),this.options=l}parse(e,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:o,emoji:l,mermaid:h,disableSanitizer:g}=i,b={...this.options,...i.markedOptions};h&&(this.renderer=this.extendRenderer(b.renderer||new F_));const E=this.trimIndentation(e),B=r?this.decodeHtml(E):E,ce=l?this.parseEmoji(B):B,de=this.parseMarked(ce,b,o);return(g?de:this.sanitizer.sanitize(this.securityContext,de))||""}render(e,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:o,clipboardOptions:l,katex:h,katexOptions:g,mermaid:b,mermaidOptions:E}=i;o&&this.renderClipboard(e,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...l}),h&&this.renderKatex(e,{...this.DEFAULT_KATEX_OPTIONS,...g}),b&&this.renderMermaid(e,{...this.DEFAULT_MERMAID_OPTIONS,...E}),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(Xi(i=>this.handleExtension(e,i)))}highlight(e){if(!N_(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);const i=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!N_(this.platform))return e;const i=document.createElement("textarea");return i.innerHTML=e,i.value}extendRenderer(e){const i=e;if(!0===i.\u0275NgxMarkdownRendererExtended)return e;const r=e.code;return e.code=function(o,l,h){return"mermaid"===l?`<div class="mermaid">${o}</div>`:r.call(this,o,l,h)},i.\u0275NgxMarkdownRendererExtended=!0,e}handleExtension(e,i){const r=e.lastIndexOf("://"),o=r>-1?e.substring(r+4):e,l=o.lastIndexOf("/"),h=l>-1?o.substring(l+1).split("?")[0]:"",g=h.lastIndexOf("."),b=g>-1?h.substring(g+1):"";return b&&"md"!==b?"```"+b+"\n"+i+"\n```":i}parseMarked(e,i,r=!1){return r?Gr.parseInline(e,i):Gr.parse(e,i)}parseEmoji(e){if(!N_(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}renderKatex(e,i){if(N_(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,i)}}renderClipboard(e,i,r){if(!N_(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:l}=r,h=e.querySelectorAll("pre");for(let g=0;g<h.length;g++){const b=h.item(g),E=document.createElement("div");E.style.position="relative",b.parentNode.insertBefore(E,b),E.appendChild(b);const B=document.createElement("div");let ce,de;B.style.position="absolute",B.style.top=".5em",B.style.right=".5em",B.style.opacity="0",B.style.transition="opacity 250ms ease-out",E.insertAdjacentElement("beforeend",B),b.onmouseover=()=>B.style.opacity="1",b.onmouseout=()=>B.style.opacity="0",ce=o?i.createComponent(o).hostView:l?i.createEmbeddedView(l):i.createComponent(HO).hostView,ce.rootNodes.forEach(De=>{De.onmouseover=()=>B.style.opacity="1",B.appendChild(De),de=new ClipboardJS(De,{text:()=>b.innerText})}),ce.onDestroy(()=>de.destroy())}}renderMermaid(e,i=this.DEFAULT_MERMAID_OPTIONS){if(!N_(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=e.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.init(r))}trimIndentation(e){if(!e)return"";let i;return e.split("\n").map(r=>{let o=i;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(i)&&(i=o),o?r.substring(o):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(hh),Ii($O),Ii(Jm,8),Ii(LU,8),Ii(jO,8),Ii(aC))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})(),WU=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[OD,e&&e.loader||[],e&&e.clipboardOptions||[],e&&e.markedOptions||[],{provide:$O,useValue:e&&null!=e.sanitize?e.sanitize:vn.HTML}]}}static forChild(){return{ngModule:t}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({imports:[QE]})}return t})();var WO;!function(t){let n;var r;let e,i;(r=n=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(e=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(WO||(WO={}));const{isArray:GU}=Array,{getPrototypeOf:YU,prototype:XU,keys:qU}=Object;const{isArray:QU}=Array;function GO(t){return Xi(n=>function JU(t,n){return QU(n)?t(...n):t(n)}(t,n))}function ez(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function YO(...t){const n=pD(t),{args:e,keys:i}=function KU(t){if(1===t.length){const n=t[0];if(GU(n))return{args:n,keys:null};if(function ZU(t){return t&&"object"==typeof t&&YU(t)===XU}(n)){const e=qU(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}(t),r=new Zr(o=>{const{length:l}=e;if(!l)return void o.complete();const h=new Array(l);let g=l,b=l;for(let E=0;E<l;E++){let B=!1;uu(e[E]).subscribe(li(o,ce=>{B||(B=!0,b--),h[E]=ce},()=>g--,void 0,()=>{(!g||!B)&&(b||o.next(i?ez(i,h):h),o.complete())}))}});return n?r.pipe(GO(n)):r}let XO=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ou),St(Ks))};static#t=this.\u0275dir=vi({type:t})}return t})(),L_=(()=>{class t extends XO{static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,features:[yo]})}return t})();const Cf=new yi(""),tz={provide:Cf,useExisting:cr(()=>fS),multi:!0};let fS=(()=>{class t extends L_{writeValue(e){this.setProperty("checked",e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&Vn("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[ya([tz]),yo]})}return t})();const nz={provide:Cf,useExisting:cr(()=>i1),multi:!0},rz=new yi("");let i1=(()=>{class t extends XO{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function iz(){const t=tC()?tC().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ou),St(Ks),St(rz,8))};static#t=this.\u0275dir=vi({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Vn("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[ya([nz]),yo]})}return t})();function r1(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const hu=new yi(""),s1=new yi("");function QO(t){return r1(t.value)?{required:!0}:null}function pS(t){return null}function r6(t){return null!=t}function s6(t){return DE(t)?cC(t):t}function o6(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function a6(t,n){return n.map(e=>e(t))}function l6(t){return t.map(n=>function oz(t){return!t.validate}(n)?n:e=>n.validate(e))}function RD(t){return null!=t?function c6(t){if(!t)return null;const n=t.filter(r6);return 0==n.length?null:function(e){return o6(a6(e,n))}}(l6(t)):null}function PD(t){return null!=t?function u6(t){if(!t)return null;const n=t.filter(r6);return 0==n.length?null:function(e){return YO(a6(e,n).map(s6)).pipe(Xi(o6))}}(l6(t)):null}function d6(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function FD(t){return t?Array.isArray(t)?t:[t]:[]}function gS(t,n){return Array.isArray(t)?t.includes(n):t===n}function p6(t,n){const e=FD(n);return FD(t).forEach(r=>{gS(e,r)||e.push(r)}),e}function g6(t,n){return FD(n).filter(e=>!gS(t,e))}class m6{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=RD(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=PD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class od extends m6{get formDirective(){return null}get path(){return null}}class o1 extends m6{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _6{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let z0=(()=>{class t extends _6{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(St(o1,2))};static#t=this.\u0275dir=vi({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&_r("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[yo]})}return t})(),gC=(()=>{class t extends _6{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(St(od,10))};static#t=this.\u0275dir=vi({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&_r("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[yo]})}return t})();const mC="VALID",_S="INVALID",pb="PENDING",_C="DISABLED";function VD(t){return(yS(t)?t.validators:t)||null}function UD(t,n){return(yS(n)?n.asyncValidators:t)||null}function yS(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class zD{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===mC}get invalid(){return this.status===_S}get pending(){return this.status==pb}get disabled(){return this.status===_C}get enabled(){return this.status!==_C}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(p6(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(p6(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(g6(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(g6(n,this._rawAsyncValidators))}hasValidator(n){return gS(this._rawValidators,n)}hasAsyncValidator(n){return gS(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=pb,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=_C,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=mC,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mC||this.status===pb)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_C:mC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=pb,this._hasOwnPendingAsyncValidator=!0;const e=s6(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new mr,this.statusChanges=new mr}_calculateStatus(){return this._allControlsDisabled()?_C:this.errors?_S:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pb)?pb:this._anyControlsHaveStatus(_S)?_S:mC}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){yS(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function uz(t){return Array.isArray(t)?RD(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function dz(t){return Array.isArray(t)?PD(t):t||null}(this._rawAsyncValidators)}}class B_ extends zD{constructor(n,e,i){super(VD(e),UD(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function b6(t,n,e){t._forEachChild((i,r)=>{if(void 0===e[r])throw new Yt(1002,"")})})(this,0,n),Object.keys(n).forEach(i=>{(function v6(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new Yt(1e3,"");if(!i[e])throw new Yt(1001,"")})(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const V_=new yi("CallSetDisabledState",{providedIn:"root",factory:()=>yC}),yC="always";function vC(t,n,e=yC){HD(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function pz(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&w6(t,n)})}(t,n),function mz(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function gz(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&w6(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function fz(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function wS(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function HD(t,n){const e=function h6(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(d6(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=function f6(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(d6(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();wS(n._rawValidators,r),wS(n._rawAsyncValidators,r)}function w6(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const wz={provide:od,useExisting:cr(()=>U_)},bC=Promise.resolve();let U_=(()=>{class t extends od{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new mr,this.form=new B_({},RD(e),PD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){bC.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),vC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){bC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){bC.then(()=>{const i=this._findContainer(e.path),r=new B_({});(function C6(t,n){HD(t,n)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){bC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){bC.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function T6(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(St(hu,10),St(s1,10),St(V_,8))};static#t=this.\u0275dir=vi({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Vn("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:[uo.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ya([wz]),yo]})}return t})();function x6(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function E6(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const S6=class extends zD{constructor(n=null,e,i){super(VD(e),UD(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=E6(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){x6(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){x6(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){E6(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},xz={provide:o1,useExisting:cr(()=>Tg)},D6=Promise.resolve();let Tg=(()=>{class t extends o1{constructor(e,i,r,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new S6,this._registered=!1,this.name="",this.update=new mr,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function WD(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(o=>{o.constructor===i1?e=o:function vz(t){return Object.getPrototypeOf(t.constructor)===L_}(o)?i=o:r=o}),r||i||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function $D(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){D6.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&zk(i);D6.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function vS(t,n){return[...n.path,t]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||t)(St(od,9),St(hu,10),St(s1,10),St(Cf,10),St(Cg,8),St(V_,8))};static#t=this.\u0275dir=vi({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[uo.None,"disabled","isDisabled"],model:[uo.None,"ngModel","model"],options:[uo.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ya([xz]),yo,cl]})}return t})(),wC=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=vi({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const Ez={provide:Cf,useExisting:cr(()=>GD),multi:!0};let GD=(()=>{class t extends L_{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&Vn("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[ya([Ez]),yo]})}return t})();const Sz={provide:Cf,useExisting:cr(()=>YD),multi:!0};let Az=(()=>{class t{constructor(){this._accessors=[]}add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e)return void this._accessors.splice(i,1)}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return!!e[0].control&&e[0]._parent===i._control._parent&&e[1].name===i.name}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YD=(()=>{class t extends L_{constructor(e,i,r,o){super(e,i),this._registry=r,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=$t(V_,{optional:!0})??yC}ngOnInit(){this._control=this._injector.get(o1),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ou),St(Ks),St(Az),St(fa))};static#t=this.\u0275dir=vi({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){1&i&&Vn("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ya([Sz]),yo]})}return t})();const XD=new yi(""),Rz={provide:Cf,useExisting:cr(()=>z_),multi:!0};function R6(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let z_=(()=>{class t extends L_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=R6(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Pz(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&Vn("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ya([Rz]),yo]})}return t})(),CC=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(R6(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ks),St(Ou),St(z_,9))};static#t=this.\u0275dir=vi({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();const Fz={provide:Cf,useExisting:cr(()=>QD),multi:!0};function P6(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let QD=(()=>{class t extends L_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(o=>this._getOptionId(o));i=(o,l)=>{o._setSelected(r.indexOf(l.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const l=o;for(let h=0;h<l.length;h++){const b=this._getOptionValue(l[h].value);r.push(b)}}else{const l=i.options;for(let h=0;h<l.length;h++){const g=l[h];if(g.selected){const b=this._getOptionValue(g.value);r.push(b)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function Lz(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&Vn("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ya([Fz]),yo]})}return t})(),TC=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(P6(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(P6(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||t)(St(Ks),St(Ou),St(QD,9))};static#t=this.\u0275dir=vi({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();function L6(t){return"number"==typeof t?t:parseFloat(t)}let H_=(()=>{class t{constructor(){this._validator=pS}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):pS,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=vi({type:t,features:[cl]})}return t})();const Bz={provide:hu,useExisting:cr(()=>JD),multi:!0};let JD=(()=>{class t extends H_{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>L6(e),this.createValidator=e=>function ZO(t){return n=>{if(r1(n.value)||r1(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&Ro("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[ya([Bz]),yo]})}return t})();const Vz={provide:hu,useExisting:cr(()=>e4),multi:!0};let e4=(()=>{class t extends H_{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>L6(e),this.createValidator=e=>function KO(t){return n=>{if(r1(n.value)||r1(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(e)}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&Ro("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[ya([Vz]),yo]})}return t})();const Uz={provide:hu,useExisting:cr(()=>gb),multi:!0};let gb=(()=>{class t extends H_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=zk,this.createValidator=e=>QO}enabled(e){return e}static#e=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Zo(t)))(r||t)}})();static#t=this.\u0275dir=vi({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Ro("required",r._enabled?"":null)},inputs:{required:"required"},features:[ya([Uz]),yo]})}return t})(),j6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),Yz=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:V_,useValue:e.callSetDisabledState??yC}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({imports:[j6]})}return t})(),$6=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:XD,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:V_,useValue:e.callSetDisabledState??yC}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({imports:[j6]})}return t})();!function(){function t(n,e,i){this.el=n,this.vcr=e,this.renderer=i,this.dtOptions={}}t.prototype.ngOnInit=function(){var n=this;this.dtTrigger?this.dtTrigger.subscribe(function(e){n.displayTable(e)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(n){var e=this;n&&(this.dtOptions=n),this.dtInstance=new Promise(function(i,r){Promise.resolve(e.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",e.el.nativeElement).length?r("Both the table and dtOptions cannot be empty"):setTimeout(function(){var h={rowCallback:function(g,b,E){if(o.columns){var B=o.columns;e.applyNgPipeTransform(g,B),e.applyNgRefTemplate(g,B,b)}o.rowCallback&&o.rowCallback(g,b,E)}};h=Object.assign({},o,h),e.dt=$(e.el.nativeElement).DataTable(h),i(e.dt)})})})},t.prototype.applyNgPipeTransform=function(n,e){e.filter(function(r){return r.ngPipeInstance&&!r.ngTemplateRef}).forEach(function(r){var o=r.ngPipeInstance,l=r.ngPipeArgs||[],h=e.findIndex(function(B){return B.data===r.data}),g=n.childNodes.item(h),b=$(g).text(),E=o.transform.apply(o,function(t,n,e){if(e||2===arguments.length)for(var o,i=0,r=n.length;i<r;i++)(o||!(i in n))&&(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return t.concat(o||Array.prototype.slice.call(n))}([b],l,!1));$(g).text(E)})},t.prototype.applyNgRefTemplate=function(n,e,i){var r=this;e.filter(function(l){return l.ngTemplateRef&&!l.ngPipeInstance}).forEach(function(l){var h=l.ngTemplateRef,g=h.ref,b=h.context,E=e.findIndex(function(De){return De.data===l.data}),B=n.childNodes.item(E);$(B).html("");var ce=Object.assign({},b,b?.userData,{adtData:i}),de=r.vcr.createEmbeddedView(g,ce);r.renderer.appendChild(B,de.rootNodes[0])})},t.\u0275fac=function(e){return new(e||t)(St(Ks),St(ou),St(Ou))},t.\u0275dir=vi({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}})}();var qz=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fs({type:t}),t.\u0275inj=Fr({imports:[QE]}),t}();const Zz=["gutterEls"],Qz=["*"];function Jz(t,n){if(1&t){const e=ct();L(0,"div",3,0),Vn("keydown",function(r){on(e);const o=at().index;return rn(at().startKeyboardDrag(r,2*o+1,o+1))})("mousedown",function(r){on(e);const o=at().index;return rn(at().startMouseDrag(r,2*o+1,o+1))})("touchstart",function(r){on(e);const o=at().index;return rn(at().startMouseDrag(r,2*o+1,o+1))})("mouseup",function(r){on(e);const o=at().index;return rn(at().clickGutter(r,o+1))})("touchend",function(r){on(e);const o=at().index;return rn(at().clickGutter(r,o+1))}),it(2,"div",4),P()}if(2&t){const e=at(),i=e.$implicit,r=e.index,o=at();Cp("flex-basis",o.gutterSize,"px")("order",2*r+1),Ro("aria-label",o.gutterAriaLabel)("aria-orientation",o.direction)("aria-valuemin",i.minSize)("aria-valuemax",i.maxSize)("aria-valuenow",i.size)("aria-valuetext",o.getAriaAreaSizeText(i.size))}}function eH(t,n){1&t&&_n(0,Jz,3,10,"div",2),2&t&&ht("ngIf",!1===n.last)}function xC(t){if(void 0!==t.changedTouches&&t.changedTouches.length>0)return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};if(void 0!==t.clientX&&void 0!==t.clientY)return{x:t.clientX,y:t.clientY};if(void 0!==t.currentTarget){const n=t.currentTarget;return{x:n.offsetLeft,y:n.offsetTop}}return null}function W6(t,n,e){return Math.abs(t.x-n.x)<=e&&Math.abs(t.y-n.y)<=e}function G6(t,n){const e=t.nativeElement.getBoundingClientRect();return"horizontal"===n?e.width:e.height}function EC(t){return"boolean"==typeof t?t:"false"!==t}function a1(t,n){return null==t?n:(t=Number(t),!isNaN(t)&&t>=0?t:n)}function Y6(t,n){if("percent"===t){const e=n.reduce((i,r)=>null!==r?i+r:i,0);return n.every(i=>null!==i)&&e>99.9&&e<100.1}if("pixel"===t)return 1===n.filter(e=>null===e).length}function TS(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.minSize?null:t.component.minSize>t.size?t.size:t.component.minSize}function xS(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.maxSize?null:t.component.maxSize<t.size?t.size:t.component.maxSize}function mb(t,n,e,i){return n.reduce((r,o)=>{const l=function nH(t,n,e,i){return 0===e?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:n.sizePercentAtStart,pixelRemain:0}:0===n.sizePixelAtStart&&e<0?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:e}:"percent"===t?function iH(t,n,e){const r=(t.sizePixelAtStart+n)/e*100;if(n>0){if(null!==t.area.maxSize&&r>t.area.maxSize){const o=t.area.maxSize/100*e;return{areaSnapshot:t,pixelAbsorb:o,percentAfterAbsorption:t.area.maxSize,pixelRemain:t.sizePixelAtStart+n-o}}return{areaSnapshot:t,pixelAbsorb:n,percentAfterAbsorption:r>100?100:r,pixelRemain:0}}if(n<0){if(null!==t.area.minSize&&r<t.area.minSize){const o=t.area.minSize/100*e;return{areaSnapshot:t,pixelAbsorb:o,percentAfterAbsorption:t.area.minSize,pixelRemain:t.sizePixelAtStart+n-o}}return r<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:n+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:n,percentAfterAbsorption:r,pixelRemain:0}}}(n,e,i):"pixel"===t?function rH(t,n,e){const i=t.sizePixelAtStart+n;return n>0?null!==t.area.maxSize&&i>t.area.maxSize?{areaSnapshot:t,pixelAbsorb:t.area.maxSize-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:i-t.area.maxSize}:{areaSnapshot:t,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:n<0?null!==t.area.minSize&&i<t.area.minSize?{areaSnapshot:t,pixelAbsorb:t.area.minSize+n-i,percentAfterAbsorption:-1,pixelRemain:i-t.area.minSize}:i<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(n,e):void 0}(t,o,r.remain,i);return r.list.push(l),r.remain=l.pixelRemain,r},{remain:e,list:[]})}function X6(t,n){"percent"===t?n.areaSnapshot.area.size=n.percentAfterAbsorption:"pixel"===t&&null!==n.areaSnapshot.area.size&&(n.areaSnapshot.area.size=n.areaSnapshot.sizePixelAtStart+n.pixelAbsorb)}const sH=new yi("angular-split-global-config");let q6=(()=>{class t{constructor(e,i,r,o,l){this.ngZone=e,this.elRef=i,this.cdRef=r,this.renderer=o,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new mr(!1),this.dragEnd=new mr(!1),this.gutterClick=new mr(!1),this.gutterDblClick=new mr(!1),this.dragProgressSubject=new Ir,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=l?Object.assign(this._config,l):this._config,Object.keys(this._config).forEach(h=>{this[h]=this._config[h]})}set direction(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(e){this._gutterSize=a1(e,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(e){this._gutterStep=a1(e,1)}get gutterStep(){return this._gutterStep}set restrictMove(e){this._restrictMove=EC(e)}get restrictMove(){return this._restrictMove}set useTransition(e){this._useTransition=EC(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(e){this._disabled=EC(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(e){this._gutterDblClickDuration=a1(e,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new Zr(e=>this.transitionEndSubscriber=e).pipe(function Kz(t,n=AD){return Ne((e,i)=>{let r=null,o=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const b=o;o=null,i.next(b)}};function g(){const b=l+t,E=n.now();if(E<b)return r=this.schedule(void 0,b-E),void i.add(r);h()}e.subscribe(li(i,b=>{o=b,l=n.now(),r||(r=n.schedule(g,t),i.add(r))},()=>{h(),i.complete()},void 0,()=>{o=r=null}))})}(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(e){const i={component:e,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===e.visible?(this.displayedAreas.push(i),this.build(!0,!0)):this.hiddenAreas.push(i)}removeArea(e){if(this.displayedAreas.some(i=>i.component===e)){const i=this.displayedAreas.find(r=>r.component===e);this.displayedAreas.splice(this.displayedAreas.indexOf(i),1),this.build(!0,!0)}else if(this.hiddenAreas.some(i=>i.component===e)){const i=this.hiddenAreas.find(r=>r.component===e);this.hiddenAreas.splice(this.hiddenAreas.indexOf(i),1)}}updateArea(e,i,r){!0===e.visible&&this.build(i,r)}showArea(e){const i=this.hiddenAreas.find(o=>o.component===e);if(void 0===i)return;const r=this.hiddenAreas.splice(this.hiddenAreas.indexOf(i),1);this.displayedAreas.push(...r),this.build(!0,!0)}hideArea(e){const i=this.displayedAreas.find(o=>o.component===e);if(void 0===i)return;const r=this.displayedAreas.splice(this.displayedAreas.indexOf(i),1);r.forEach(o=>{o.order=0,o.size=0}),this.hiddenAreas.push(...r),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(e=>null===e.size?"*":e.size)}setVisibleAreaSizes(e){if(e.length!==this.displayedAreas.length)return!1;const i=e.map(o=>a1(o,null));return!1!==Y6(this.unit,i)&&(this.displayedAreas.forEach((o,l)=>o.component._size=i[l]),this.build(!1,!0),!0)}build(e,i){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(r=>null!==r.component.order)&&this.displayedAreas.sort((r,o)=>r.component.order-o.component.order),this.displayedAreas.forEach((r,o)=>{r.order=2*o,r.component.setStyleOrder(r.order)})),!0===i){const r=Y6(this.unit,this.displayedAreas.map(o=>o.component.size));switch(this.unit){case"percent":{const o=100/this.displayedAreas.length;this.displayedAreas.forEach(l=>{l.size=r?l.component.size:o,l.minSize=TS(l),l.maxSize=xS(l)});break}case"pixel":if(r)this.displayedAreas.forEach(o=>{o.size=o.component.size,o.minSize=TS(o),o.maxSize=xS(o)});else{const o=this.displayedAreas.filter(l=>null===l.component.size);if(0===o.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((l,h)=>{l.size=0===h?null:l.component.size,l.minSize=0===h?null:TS(l),l.maxSize=0===h?null:xS(l)});else if(o.length>1){let l=!1;this.displayedAreas.forEach(h=>{null===h.component.size?!1===l?(h.size=null,h.minSize=null,h.maxSize=null,l=!0):(h.size=100,h.minSize=null,h.maxSize=null):(h.size=h.component.size,h.minSize=TS(h),h.maxSize=xS(h))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(i=>{i.component.setStyleFlex(0,0,`calc( ${i.size}% - ${i.size/100*e}px )`,null!==i.minSize&&i.minSize===i.size,null!==i.maxSize&&i.maxSize===i.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(e=>{null===e.size?e.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?e.component.setStyleFlex(0,0,"100%",!1,!1):e.component.setStyleFlex(0,0,`${e.size}px`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}clickGutter(e,i){const r=xC(e);this.startPoint&&W6(this.startPoint,r,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",i),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",i),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(e,i,r){if(!0===this.disabled||!0===this.isWaitingClear)return;const o=function tH(t,n){if("horizontal"===n)switch(t.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===n)switch(t.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const e=t.currentTarget,i="PageUp"===t.key||"PageDown"===t.key?500:50;let r=e.offsetLeft,o=e.offsetTop;switch(t.key){case"ArrowLeft":r-=i;break;case"ArrowRight":r+=i;break;case"ArrowUp":o-=i;break;case"ArrowDown":o+=i;break;case"PageUp":"vertical"===n?o-=i:r+=i;break;case"PageDown":"vertical"===n?o+=i:r-=i;break;default:return null}return{x:r,y:o}}(e,this.direction);null!==o&&(this.endPoint=o,this.startPoint=xC(e),e.preventDefault(),e.stopPropagation(),this.setupForDragEvent(i,r),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(e,i,r){e.preventDefault(),e.stopPropagation(),this.startPoint=xC(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(i,r),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(e,i){this.snapshot={gutterNum:i,lastSteppedOffset:0,allAreasSizePixel:G6(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(r=>{const o={area:r,sizePixelAtStart:G6(r.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?r.size:-1};r.order<e?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[o]:this.snapshot.areasBeforeGutter.unshift(o):r.order>e&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[o]):this.snapshot.areasAfterGutter.push(o))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((r,o)=>r+o.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(e=>e.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(e){e.preventDefault(),e.stopPropagation();const i=xC(e);null!==this._clickTimeout&&!W6(this.startPoint,i,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=xC(e),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let e="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(e=-e);const i=Math.round(e/this.gutterStep)*this.gutterStep;if(i===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=i;let r=mb(this.unit,this.snapshot.areasBeforeGutter,-i,this.snapshot.allAreasSizePixel),o=mb(this.unit,this.snapshot.areasAfterGutter,i,this.snapshot.allAreasSizePixel);if(0!==r.remain&&0!==o.remain?Math.abs(r.remain)===Math.abs(o.remain)||(Math.abs(r.remain)>Math.abs(o.remain)?o=mb(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):r=mb(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)):0!==r.remain?o=mb(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(r=mb(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const l=[...r.list,...o.list],h=l.find(g=>0!==g.percentAfterAbsorption&&g.percentAfterAbsorption!==g.areaSnapshot.area.minSize&&g.percentAfterAbsorption!==g.areaSnapshot.area.maxSize);h&&(h.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-l.filter(g=>g!==h).reduce((g,b)=>g+b.percentAfterAbsorption,0))}r.list.forEach(l=>X6(this.unit,l)),o.list.forEach(l=>X6(this.unit,l)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(e){if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(i=>i.component.unlockEvents());this.dragListeners.length>0;){const i=this.dragListeners.pop();i&&i()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(e,i){const r=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:i,sizes:r}):"end"===e?this.dragEnd.emit({gutterNum:i,sizes:r}):"click"===e?this.gutterClick.emit({gutterNum:i,sizes:r}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:i,sizes:r}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(r)):"progress"===e&&this.dragProgressSubject.next({gutterNum:i,sizes:r})}ngOnDestroy(){this.stopDragging()}collapseArea(e,i,r){const o=this.displayedAreas.find(g=>g.component===e);if(void 0===o)return;const l="right"===r?1:-1;o.sizeBeforeCollapse||(o.sizeBeforeCollapse=o.size,o.gutterBeforeCollapse=l),o.size=i;const h=this.gutterEls.find(g=>g.nativeElement.style.order===`${o.order+l}`);h&&this.renderer.addClass(h.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}expandArea(e){const i=this.displayedAreas.find(o=>o.component===e);if(void 0===i||!i.sizeBeforeCollapse)return;i.size=i.sizeBeforeCollapse,i.sizeBeforeCollapse=null;const r=this.gutterEls.find(o=>o.nativeElement.style.order===`${i.order+i.gutterBeforeCollapse}`);r&&this.renderer.removeClass(r.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}getAriaAreaSizeText(e){return null===e?null:e.toFixed(0)+" "+this.unit}}return t.\u0275fac=function(e){return new(e||t)(St(Bs),St(Ks),St(Cg),St(Ou),St(sH,8))},t.\u0275cmp=bs({type:t,selectors:[["as-split"]],viewQuery:function(e,i){if(1&e&&xc(Zz,5),2&e){let r;vo(r=bo())&&(i.gutterEls=r)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:Qz,decls:2,vars:1,consts:[["gutterEls",""],["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],[1,"as-split-gutter-icon"]],template:function(e,i){1&e&&(Ww(),Gw(0),_n(1,eH,1,1,"ng-template",1)),2&e&&(ye(),ht("ngForOf",i.displayedAreas))},dependencies:[Sp,Od],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),t})(),oH=(()=>{class t{constructor(e,i,r,o){this.ngZone=e,this.elRef=i,this.renderer=r,this.split=o,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(e){this._order=a1(e,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(e){this._size=a1(e,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(e){this._minSize=a1(e,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(e){this._maxSize=a1(e,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(e){this._lockSize=EC(e),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(e){this._visible=EC(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",e=>{"flex-basis"===e.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}setStyleFlex(e,i,r,o,l){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",i),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",r),!0===o?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===l?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const e=this.lockListeners.pop();e&&e()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(e=0,i="right"){this.split.collapseArea(this,e,i)}expand(){this.split.expandArea(this)}}return t.\u0275fac=function(e){return new(e||t)(St(Bs),St(Ks),St(Ou),St(q6))},t.\u0275dir=vi({type:t,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),t})(),aH=(()=>{class t{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Fs({type:t}),t.\u0275inj=Fr({imports:[QE]}),t})(),ad=(()=>{class t{constructor(){this.listRA=[],this.ID="",this.name="",this.step=0,this.status="",this.results=void 0,this.pending_tasks=[],this.workflow=void 0,this.notes=[],this.note={}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();class l1{constructor(){this.decisions=[],this.results=[]}}class c1{constructor(){this.decisions=[],this.results=[]}}let u1=(()=>{class t{constructor(){this.interfaceVisible=!1,this.editModeTasks=!1,this.editModeDecisions=!1}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})(),ES=(()=>{class t{constructor(){this.status=!1}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})(),K6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();const so_baseUrl="/namastox/v1/";let Rd=(()=>{class t{constructor(e){this.http=e,this.generateForms=new Ir,this.generateForms$=this.generateForms.asObservable(),this.refreshWorkflow=new Ir,this.refreshWorklfow$=this.refreshWorkflow.asObservable(),this.updateOverviewCanvas=new Gn(!1),this.updateOverviewCanvas$=this.updateOverviewCanvas.asObservable(),this.renderGeneralInfoCanvas=new Ir,this.renderGeneralInfoCanvas$=this.renderGeneralInfoCanvas.asObservable()}AutoGenerateForm(e){this.generateForms.next(e)}updateWorkflow(){this.refreshWorkflow.next(!0)}drawOverviewCanvas(e){this.updateOverviewCanvas.next(e)}drawGeneralInfoCanvas(e){this.renderGeneralInfoCanvas.next(e)}getRaList(){return this.http.get(so_baseUrl+"list")}getSteps(e){return this.http.get(so_baseUrl+"steps/"+e)}getGeneralInfo(e){return this.http.get(so_baseUrl+"general_info/"+e)}getStatus(e){return this.http.get(so_baseUrl+"status/"+e)}getStatusWithStep(e,i){return this.http.get(so_baseUrl+"status/"+e+"/"+i)}getResults(e){return this.http.get(so_baseUrl+"results/"+e)}getTask(e,i){return this.http.get(so_baseUrl+"task/"+e+"/"+i)}getResultsWithStep(e,i){return this.http.get(so_baseUrl+"results/"+e+"/"+i)}getWorkflowByStep(e,i){return this.http.get(so_baseUrl+"workflow/"+e+"/"+i)}getPendingTasks(e){return this.http.get(so_baseUrl+"pending_tasks/"+e)}getPendingTask(e,i){return this.http.get(so_baseUrl+"pending_task/"+e+"/"+i)}getLink(e,i){return this.http.get(so_baseUrl+"link/"+e+"/"+i,{responseType:"blob"})}getWorkflow(e){return this.http.get(so_baseUrl+"workflow/"+e)}getInformBySubstanceName(e){return this.http.get(so_baseUrl+"inform_name/"+e)}getInformByCASRN(e){return this.http.get(so_baseUrl+"inform_casrn/"+e)}getUpstreamTasks(e,i){return this.http.get(so_baseUrl+"upstream_tasks/"+e+"/"+i)}exportToFile(e,i){return this.http.get(so_baseUrl+"report/"+e+"/"+i,"word"==i||"excel"==i?{responseType:"arraybuffer"}:{responseType:"text"})}attachments(e){return this.http.get(so_baseUrl+"attachments/"+e,{responseType:"blob"})}getNotes(e,i){return this.http.get(so_baseUrl+"notes/"+e)}saveNote(e,i,r){const o=new FormData;return o.append("title",i),o.append("text",r),this.http.put(so_baseUrl+"note/"+e,o)}deleteNote(e,i){return this.http.delete(so_baseUrl+"note/"+e+"/"+i)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Jm))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),d1=(()=>{class t{constructor(e,i,r,o){this.ra=e,this.pendingTasks=i,this.results=r,this.commonService=o}refreshRA(){this.clearRA();let e=this.commonService.getGeneralInfo(this.ra.name),i=this.commonService.getPendingTasks(this.ra.name);YO([e,this.commonService.getStatus(this.ra.name),this.commonService.getResults(this.ra.name),this.commonService.getWorkflow(this.ra.name),this.commonService.getNotes(this.ra.name)]).subscribe(b=>{this.ra.general_information=b[0],this.commonService.drawOverviewCanvas(!1),this.ra.status=b[1].ra,this.ra.results=b[2],this.separatePastTasks(),this.ra.workflow=b[3].result,$("#dtNotes").DataTable().destroy(),this.ra.notes=b[4],setTimeout(()=>{$("#dtNotes").DataTable()},200),this.commonService.updateWorkflow(),setTimeout(()=>{this.ra.status.step>0?i.subscribe({next:E=>{this.ra.pending_tasks=E,this.separatePendingTasks(),this.commonService.AutoGenerateForm()},error:E=>{console.log(E)}}):this.commonService.AutoGenerateForm()},500)})}clearRA(){this.ra.pending_tasks=[],this.pendingTasks.results=[],this.pendingTasks.decisions=[],this.results.resultSelected="",this.results.decisionSelected="",this.ra.note={},this.ra?.general_information?.general?.substances&&(this.ra.general_information.general.substances=[])}separatePendingTasks(){this.pendingTasks.results=[],this.pendingTasks.decisions=[];for(const e in this.ra.pending_tasks)"LOGICAL"==this.ra.pending_tasks[e].category?this.pendingTasks.decisions.push(this.ra.pending_tasks[e]):this.pendingTasks.results.push(this.ra.pending_tasks[e])}separatePastTasks(){$("#dtTasks").DataTable().destroy(),$("#dtDecisions").DataTable().destroy(),this.results.results=[],this.results.decisions=[];for(const e of this.ra.results)"values"in e?this.results.results.push(e):this.results.decisions.push(e);setTimeout(()=>{$("#dtTasks").DataTable(),$("#dtDecisions").DataTable()},500)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ad),Ii(c1),Ii(l1),Ii(Rd))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Z6=(()=>{class t{constructor(e){this.http=e}getSessionUser(){return this.http.get(so_baseUrl+"user_info/")}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Jm))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Q6=O(179);const lH=["frameElement"],cH=["panElement"],uH=["zoomElement"],dH=["panzoomOverlay"],hH=["*"];let fH=(()=>{class t{zone;constructor(e){this.zone=e}frameElementRef;panElementRef;zoomElementRef;panzoomOverlayRef;config;base;model;api;contentHeight;contentWidth;frameHeight;frameWidth;lastMouseEventTime;previousPosition;isDragging=!1;panVelocity;animationParams;animationFrameFunc;lastTick=0;isChrome=!1;willChangeNextFrame=!0;animationId;isMobile=!1;scale;isFirstSync=!0;lastClickPoint;zoomLevelIsChanging=!1;dragFinishing=!1;dragMouseButton;maxScale;minScale;minimumAllowedZoomLevel;resizeObserver;ngOnInit(){switch(this.base=this.config.initialZoomToFit?this.calcZoomToFit(this.config.initialZoomToFit):{zoomLevel:this.config.initialZoomLevel,pan:{x:this.config.initialPanX,y:this.config.initialPanY}},this.model={zoomLevel:this.base.zoomLevel,isPanning:!1,pan:{x:this.base.pan.x,y:this.base.pan.y}},this.config.modelChanged.next(this.model),this.api={model:this.model,config:this.config,changeZoomLevel:this.zoomToLevelAndPoint.bind(this),zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),zoomToFit:this.zoomToFit.bind(this),resetView:this.resetView.bind(this),getViewPosition:this.getViewPosition.bind(this),getModelPosition:this.getModelPosition.bind(this),panToPoint:this.panToPoint.bind(this),panDelta:this.panDelta.bind(this),panDeltaPercent:this.panDeltaPercent.bind(this),panDeltaAbsolute:this.panDeltaAbsolute.bind(this),centerContent:this.centerContent.bind(this),centerX:this.centerX.bind(this),centerY:this.centerY.bind(this),centerTopLeft:this.centerTopLeftCorner.bind(this),centerBottomLeft:this.centerBottomLeftCorner.bind(this),centerTopRight:this.centerTopRightCorner.bind(this),centerBottomRight:this.centerBottomRightCorner.bind(this),updateContentDimensions:this.updateContentDimensions.bind(this),detectContentDimensions:this.detectContentDimensions.bind(this)},this.config.api.next(this.api),this.config.freeMouseWheel&&(this.scale=this.getCssScale(this.config.initialZoomLevel),this.maxScale=this.getCssScale(this.config.zoomLevels-1),this.minScale=this.getCssScale(0)),this.minimumAllowedZoomLevel=0,this.config.keepInBounds&&(this.minimumAllowedZoomLevel=this.config.neutralZoomLevel,this.minScale=this.getCssScale(this.config.neutralZoomLevel)),this.zoomElementRef.nativeElement.style.willChange="transform",navigator.userAgent.search("Chrome")>=0&&(this.isChrome=!0,this.zoomElementRef.nativeElement.style.transform="translateZ(0)"),this.config.acceleratePan&&(this.panElementRef.nativeElement.style.willChange="transform",navigator.userAgent.search("Chrome")>=0&&(this.isChrome=!0,this.panElementRef.nativeElement.style.transform="translateZ(0)")),this.animationTick(),this.scale=this.getCssScale(this.base.zoomLevel),this.isFirstSync=!1,this.config.dragMouseButton){case"left":default:this.dragMouseButton=0;break;case"middle":this.dragMouseButton=1,this.zone.runOutsideAngular(()=>this.frameElementRef.nativeElement.addEventListener("auxclick",this.preventDefault));break;case"right":this.zone.runOutsideAngular(()=>document.addEventListener("contextmenu",this.preventDefault)),this.dragMouseButton=2}}ngAfterViewInit(){this.detectContentDimensions();const e=getComputedStyle(this.frameElementRef.nativeElement);this.frameHeight=parseInt(e.getPropertyValue("height").split("px")[0]),this.frameWidth=parseInt(e.getPropertyValue("width").split("px")[0]),this.zone.runOutsideAngular(()=>this.animationFrameFunc=window.requestAnimationFrame),this.config.dynamicContentDimensions&&(window.ResizeObserver?(this.resizeObserver=new window.ResizeObserver(i=>this.onContentDimensionsChangeDetected(i)),this.zone.runOutsideAngular(()=>this.resizeObserver.observe(this.zoomElementRef.nativeElement))):console.error("ResizeObserver API is not supported by this browser.  See https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver for info on browser compatibility.")),this.isMobileDevice()?(this.isMobile=!0,this.zone.runOutsideAngular(()=>this.frameElementRef.nativeElement.addEventListener("touchstart",this.onTouchStart))):this.zone.runOutsideAngular(()=>{this.frameElementRef.nativeElement.addEventListener("mousedown",this.onMousedown),this.frameElementRef.nativeElement.addEventListener("dblclick",this.onDblClick),this.frameElementRef.nativeElement.addEventListener("wheel",i=>this.animationFrameFunc(()=>this.onMouseWheel(i)),{passive:!0})})}ngOnDestroy(){switch(this.isMobile?this.frameElementRef.nativeElement.removeEventListener("touchstart",this.onTouchStart):(this.frameElementRef.nativeElement.removeEventListener("mousedown",this.onMousedown),this.frameElementRef.nativeElement.removeEventListener("wheel",e=>this.animationFrameFunc(()=>this.onMouseWheel(e)),{passive:!0}),this.frameElementRef.nativeElement.removeEventListener("dblclick",this.onDblClick)),this.animationFrameFunc&&this.animationId&&window.cancelAnimationFrame(this.animationId),this.resizeObserver&&this.resizeObserver.disconnect(),this.config.dragMouseButton){case"middle":this.dragMouseButton=1,this.zone.runOutsideAngular(()=>this.frameElementRef.nativeElement.removeEventListener("auxclick",this.preventDefault));break;case"right":this.zone.runOutsideAngular(()=>document.removeEventListener("contextmenu",this.preventDefault)),this.dragMouseButton=2}}onMouseWheel=e=>{if(!(e&&e.pageX&&e.pageY))return;let i=e.deltaY;if(this.config.zoomOnMouseWheel){if(this.animationParams)return;this.config.invertMouseWheel||(i=-i);const r=this.getFrameElementOffset(),o={x:e.pageX-r.left,y:e.pageY-r.top};this.lastClickPoint=o,this.config.freeMouseWheel?this.freeZoom(o,i):i<0?this.zoomInToPoint(o):i>0&&this.zoomOutFromPoint(o)}};isParentElement(e,i){let r=i.parentNode;for(;null!==r;){if(r.classList&&r.classList.contains(e))return!0;r=r.parentNode}return!1}onMousedown=e=>{if(!(this.config.noDragFromElementClass&&this.isParentElement(this.config.noDragFromElementClass,e.srcElement)||e.button!==this.dragMouseButton&&"touchstart"!==e.type))return"touchstart"!==e.type&&e.preventDefault(),this.dragFinishing=!1,this.panVelocity=void 0,this.config.panOnClickDrag&&(this.previousPosition={x:e.pageX,y:e.pageY},this.lastMouseEventTime=e.timeStamp,this.isDragging=!0,this.model.isPanning=!1,this.isMobile?(this.zone.runOutsideAngular(()=>document.addEventListener("touchend",this.onTouchEnd,!1)),this.zone.runOutsideAngular(()=>document.addEventListener("touchmove",this.onTouchMove,{passive:!0,capture:!1}))):(this.zone.runOutsideAngular(()=>document.addEventListener("mousemove",this.onMouseMove,{passive:!0,capture:!1})),this.zone.runOutsideAngular(()=>document.addEventListener("mouseup",this.onMouseUp)))),!1};onTouchStart=e=>{if(1!==e.touches.length){const i=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;this.previousPosition={length:i*i+r*r}}this.onMousedown(e)};onMouseMove=e=>{let i;if(e&&e.pageX&&e.pageY)i=e;else{if("touchmove"!==e.type||!e.touches[0].pageX||!e.touches[0].pageY)return;i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}}const r=e.timeStamp,o=(r-this.lastMouseEventTime)/1e3;this.lastMouseEventTime=r;const l={x:i.pageX-this.previousPosition.x,y:i.pageY-this.previousPosition.y};if(this.config.keepInBounds){const E=this.getViewPosition({x:0,y:0}),B=this.getViewPosition({x:this.contentWidth,y:this.contentHeight});E.x>0&&l.x>0&&(l.x*=Math.min(1,Math.pow(E.x,-this.config.keepInBoundsDragPullback))),E.y>0&&l.y>0&&(l.y*=Math.min(1,Math.pow(E.y,-this.config.keepInBoundsDragPullback))),B.x<this.contentWidth&&l.x<0&&(l.x*=Math.min(1,Math.pow(this.contentWidth-B.x,-this.config.keepInBoundsDragPullback))),B.y<this.contentHeight&&l.y<0&&(l.y*=Math.min(1,Math.pow(this.contentHeight-B.y,-this.config.keepInBoundsDragPullback)))}const h_y=l.y||0;this.model.pan.x+=l.x||0,this.model.pan.y+=h_y,this.syncBaseToModel(),this.animationTick(),this.model.isPanning||(this.panzoomOverlayRef.nativeElement.style.display="block"),this.model.isPanning=!0;const g=l.x/o,b=l.y/o;this.panVelocity={x:Number.isFinite(g)?g:0,y:Number.isFinite(b)?b:0},this.previousPosition={x:i.pageX,y:i.pageY}};onTouchMove=e=>{if(1===e.touches.length)this.onMouseMove(e);else{const i=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,o=i*i+r*r,l=o-this.previousPosition.length;if(Math.abs(l)<100)return;const h=e.touches[1].pageX+i/2,g=e.touches[1].pageY+r/2,b=this.getFrameElementOffset(),E={x:h-b.left,y:g-b.top};this.lastClickPoint=E,this.changeZoomLevel(this.base.zoomLevel+1e-4*l,E),this.previousPosition={length:o}}};onMouseUp=e=>{if(e.button!==this.dragMouseButton&&"touchend"!==e.type)return;"touchend"!==e.type&&e.preventDefault();const r=(e.timeStamp-this.lastMouseEventTime)/1e3;if(!this.panVelocity||0===this.panVelocity.x&&0===this.panVelocity.y)this.panVelocity=void 0,this.dragFinishing=!1,this.model.isPanning=!1,this.config.modelChanged.next(this.model),this.syncBaseToModel();else{const o=Math.max(0,-.2+Math.pow(r+1,-4));this.panVelocity.x*=o,this.panVelocity.y*=o,this.dragFinishing=!0,this.zone.runOutsideAngular(()=>this.animationId=this.animationFrameFunc(this.animationTick))}this.isDragging=!1,this.isMobile?(this.zone.runOutsideAngular(()=>document.removeEventListener("touchend",this.onTouchEnd)),this.zone.runOutsideAngular(()=>document.removeEventListener("touchmove",this.onTouchMove,{passive:!0,capture:!1}))):(this.zone.runOutsideAngular(()=>document.removeEventListener("mousemove",this.onMouseMove,{passive:!0,capture:!1})),this.zone.runOutsideAngular(()=>document.removeEventListener("mouseup",this.onMouseUp,{passive:!0}))),this.panzoomOverlayRef.nativeElement.style.display="none"};onTouchEnd=e=>{this.onMouseUp(e)};onDblClick=e=>{if(e.preventDefault(),!this.config.zoomOnDoubleClick)return;const i=this.getFrameElementOffset(),r={x:e.pageX-i.left,y:e.pageY-i.top};this.lastClickPoint=r,this.zoomInToPoint(r)};preventDefault=e=>{e.preventDefault()};animationTick=(e=performance.now())=>{let i=0;if(0!==this.lastTick&&(i=e-this.lastTick),this.lastTick=e,this.animationParams&&(this.animationParams.progress+=Math.abs(i/this.animationParams.duration),this.animationParams.progress>=1&&(this.animationParams.progress=1,this.updateDOM(),this.animationParams=void 0)),this.panVelocity&&this.dragFinishing)for(i>0&&(i/=1e3);i>0;){const r=Math.min(.02,i);if(i-=r,this.model.pan.x=this.model.pan.x+this.panVelocity.x*r,this.panVelocity.x=this.panVelocity.x*(1-this.config.friction*r),this.model.pan.y=this.model.pan.y+this.panVelocity.y*r,this.panVelocity.y=this.panVelocity.y*(1-this.config.friction*r),this.length(this.panVelocity)<=this.config.haltSpeed){this.panVelocity=void 0,this.dragFinishing=!1;break}}if(this.config.keepInBounds||this.dragFinishing){const r=this.getViewPosition({x:0,y:0}),o=this.getViewPosition({x:this.contentWidth,y:this.contentHeight});r.x>0&&(this.base.pan.x-=this.config.keepInBoundsRestoreForce*r.x),r.y>0&&(this.base.pan.y-=this.config.keepInBoundsRestoreForce*r.y),o.x<this.contentWidth&&(this.base.pan.x-=this.config.keepInBoundsRestoreForce*(o.x-this.contentWidth)),o.y<this.contentHeight&&(this.base.pan.y-=this.config.keepInBoundsRestoreForce*(o.y-this.contentHeight))}if(this.updateDOM(),this.config.modelChanged.next(this.model),this.animationParams||this.panVelocity&&this.dragFinishing)this.isChrome&&this.zoomLevelIsChanging&&(this.zoomElementRef.nativeElement.style.willChange=this.willChangeNextFrame?"auto":"transform",this.willChangeNextFrame=!this.willChangeNextFrame),this.animationFrameFunc(this.animationTick);else{if(this.panVelocity&&!this.dragFinishing)return;this.model.isPanning&&(this.model.isPanning=!1),this.syncBaseToModel(),this.config.modelChanged.next(this.model),this.scale=this.getCssScale(this.base.zoomLevel),this.willChangeNextFrame=!0,this.zoomElementRef.nativeElement.style.willChange="transform",this.zoomLevelIsChanging=!1,this.lastTick=0}};updateDOM(){if(this.animationParams){this.model.zoomLevel=this.base.zoomLevel+this.animationParams.deltaZoomLevel*this.animationParams.progress;const i=this.animationParams.panStepFunc(this.model.zoomLevel);if(this.model.pan.x=this.base.pan.x+i.x,this.model.pan.y=this.base.pan.y+i.y,this.config.keepInBounds){const r=this.getViewPosition({x:0,y:0}),o=this.getViewPosition({x:this.contentWidth,y:this.contentHeight});r.x>0&&(this.model.pan.x=0),r.y>0&&(this.model.pan.y=0),o.x<this.contentWidth&&(this.model.pan.x-=o.x-this.contentWidth),o.y<this.contentHeight&&(this.model.pan.y-=o.y-this.contentHeight)}}if(this.animationParams||this.isFirstSync){const o=`transform-origin: 0 0; transform: scale(${this.getCssScale(this.model.zoomLevel)});`;this.zoomElementRef.nativeElement.setAttribute("style",o)}this.panElementRef.nativeElement.style.transform=`translate3d(${this.model.pan.x}px, ${this.model.pan.y}px, 0)`}freeZoom(e,i){if(this.isDragging)return;this.animationParams&&(this.animationParams=void 0),this.panVelocity&&(this.dragFinishing=!1,this.panVelocity=void 0);const r_x=this.model.pan.x,r_y=this.model.pan.y,o=this.scale;let l=this.scale+i*this.config.freeMouseWheelFactor*this.scale;l=Math.max(this.minScale,Math.min(this.maxScale,l)),this.scale=l;const h={x:e.x-l/o*(e.x-r_x),y:e.y-l/o*(e.y-r_y)};this.panElementRef.nativeElement.style.transform=`translate3d(${h.x}px, ${h.y}px, 0)`;let E=`transform-origin: 0 0; transform: scale(${this.scale});`;this.isChrome&&(E+=this.willChangeNextFrame?" will-change: auto;":" will-change: transform;",this.willChangeNextFrame=!this.willChangeNextFrame),this.zoomElementRef.nativeElement.setAttribute("style",E),this.model.pan.x=h.x,this.model.pan.y=h.y,this.model.zoomLevel=this.getZoomLevel(this.scale),this.config.modelChanged.next(this.model),this.syncBaseToModel()}isMobileDevice(){return typeof window.orientation<"u"||-1!==navigator.userAgent.indexOf("IEMobile")}syncBaseToModel(){this.base.pan.x=this.model.pan.x,this.base.pan.y=this.model.pan.y,this.base.zoomLevel=this.model.zoomLevel}length(e){return Math.sqrt(e.x*e.x+e.y*e.y)}getCentrePoint(){return{x:this.frameElementRef.nativeElement.offsetWidth/2,y:this.frameElementRef.nativeElement.offsetHeight/2}}getCssScale(e){return Math.pow(this.config.scalePerZoomLevel,e-this.config.neutralZoomLevel)}getZoomLevel(e){return Math.log10(e)/Math.log10(this.config.scalePerZoomLevel)+this.config.neutralZoomLevel}calcZoomToFit(e){const i=this.frameElementRef.nativeElement.offsetWidth,r=this.frameElementRef.nativeElement.offsetHeight,o=e.width,l=e.height,h=Math.min(i/o,r/l),b=this.getZoomLevel(h)*this.config.zoomToFitZoomLevelFactor,E=this.getCssScale(b);return{zoomLevel:b,pan:{x:-e.x*E+(i-o*E)/2,y:-e.y*E+(r-l*E)/2}}}zoomToFitModel(e,i=void 0){this.model.isPanning=!0,this.animateToTarget(e,i)}zoomToLevelAndPoint(e,i){this.changeZoomLevel(e,i)}zoomIn(e="lastPoint"){"lastPoint"===e?this.changeZoomLevel(this.base.zoomLevel+this.config.zoomButtonIncrement,this.lastClickPoint):"viewCenter"===e&&this.changeZoomLevel(this.base.zoomLevel+this.config.zoomButtonIncrement,this.getCentrePoint())}zoomOut(e="lastPoint"){"lastPoint"===e?this.changeZoomLevel(this.base.zoomLevel-this.config.zoomButtonIncrement,this.lastClickPoint):"viewCenter"===e&&this.changeZoomLevel(this.base.zoomLevel-this.config.zoomButtonIncrement,this.getCentrePoint())}startAnimation(){this.lastTick=performance.now(),this.zone.runOutsideAngular(()=>this.animationId=this.animationFrameFunc(this.animationTick))}getFrameElementOffset(){const e=this.frameElementRef.nativeElement.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}onContentDimensionsChangeDetected(e){this.contentHeight=e[0].contentRect.height,this.contentWidth=e[0].contentRect.width}getViewPosition(e){let i,r;if(this.animationParams){i=this.getCssScale(this.base.zoomLevel+this.animationParams.deltaZoomLevel*this.animationParams.progress);let o=this.animationParams.panStepFunc(this.model.zoomLevel);r={x:this.base.pan.x+o.x,y:this.base.pan.y+o.y}}else i=this.getCssScale(this.base.zoomLevel),r=this.base.pan;return{x:e.x*i+r.x,y:e.y*i+r.y}}getModelPosition(e){const i=e,r=this.getCssScale(this.base.zoomLevel),o=this.base.pan;return{x:1/r*(i.x-o.x),y:1/r*(i.y-o.y)}}resetView(){this.config.initialZoomToFit?this.zoomToFit(this.config.initialZoomToFit):void 0!==this.config.initialPanX&&void 0!==this.config.initialPanY&&void 0!==this.config.initialZoomLevel?this.zoomToFitModel({zoomLevel:this.config.initialZoomLevel,pan:{x:this.config.initialPanX,y:this.config.initialPanY}}):(console.error("PanZoomComponent: resetView() could not reset view as some vars were not set.  The culprits are either config.initialZoomLevel, config.initialPanX, or config.initialPanY.  Or just set panzoomConfig.initialZoomToFit"),console.log("config.initialZoomLevel: "+this.config.initialZoomLevel),console.log("config.initialPanX: "+this.config.initialPanX),console.log("config.initialPanY: "+this.config.initialPanY))}zoomToFit(e,i){const r=this.calcZoomToFit(e);this.model.isPanning=!0,this.animateToTarget(r,i)}zoomInToPoint(e){this.changeZoomLevel(this.base.zoomLevel+this.config.zoomButtonIncrement,e)}zoomOutFromPoint(e){this.changeZoomLevel(this.base.zoomLevel-this.config.zoomButtonIncrement,e)}panToPoint(e,i){const r={pan:{x:this.frameWidth/2-e.x*this.scale,y:this.frameHeight/2-e.y*this.scale},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(r,i)}panToPointCurrentScale(e,i){const r={pan:{x:this.frameWidth/2-e.x,y:this.frameHeight/2-e.y},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(r,i)}panDelta(e,i){const r={pan:{x:this.base.pan.x-this.scale*e.x,y:this.base.pan.y-this.scale*e.y},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(r,i)}panDeltaAbsolute(e,i){const r={pan:{x:this.base.pan.x-e.x,y:this.base.pan.y-e.y},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(r,i)}panDeltaPercent(e,i){let r=0,o=0;0!==e.x&&(r=this.contentWidth*(e.x/100)*this.scale),0!==e.y&&(o=this.contentHeight*(e.y/100)*this.scale);const l={pan:{x:this.base.pan.x-r,y:this.base.pan.y-o},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(l,i)}centerContent(e){this.panToPoint({x:this.contentWidth/2,y:this.contentHeight/2},e)}centerX(e){const i={pan:{x:this.frameWidth/2-this.contentWidth/2*this.scale,y:this.base.pan.y},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(i,e)}centerY(e){const i={pan:{x:this.base.pan.x,y:this.frameHeight/2-this.contentHeight/2*this.scale},zoomLevel:this.base.zoomLevel};this.model.isPanning=!0,this.animateToTarget(i,e)}centerTopLeftCorner(e){this.panToPoint({x:0,y:0},e)}centerBottomLeftCorner(e){this.panToPoint({x:0,y:this.contentHeight},e)}centerTopRightCorner(e){this.panToPoint({x:this.contentWidth,y:0},e)}centerBottomRightCorner(e){this.panToPoint({x:this.contentWidth,y:this.contentHeight},e)}updateContentDimensions(e,i){void 0!==i&&(this.contentHeight=i),void 0!==e&&(this.contentWidth=e)}detectContentDimensions(){const e=getComputedStyle(this.zoomElementRef.nativeElement);this.contentHeight=parseInt(e.getPropertyValue("height").split("px")[0]),this.contentWidth=parseInt(e.getPropertyValue("width").split("px")[0])}animateToTarget(e,i=void 0){if(this.animationParams)return;this.zoomLevelIsChanging=!1,this.base.zoomLevel!==e.zoomLevel&&(this.zoomLevelIsChanging=!0);const r=e.zoomLevel-this.base.zoomLevel,o_x=this.base.pan.x,o_y=this.base.pan.y;this.model.pan.x=this.base.pan.x,this.model.pan.y=this.base.pan.y,this.animationParams={deltaZoomLevel:r,panStepFunc:h=>({x:-(o_x-e.pan.x)*this.animationParams.progress,y:-(o_y-e.pan.y)*this.animationParams.progress}),duration:i=i?1e3*i:1e3*this.config.zoomStepDuration,progress:0},this.startAnimation()}changeZoomLevel(e,i){if(this.animationParams)return;this.zoomLevelIsChanging=!0,e=Math.max(this.minimumAllowedZoomLevel,e);const r=(e=Math.min(this.config.zoomLevels-1,e))-this.base.zoomLevel;if(!r)return;const o_x=this.base.pan.x,o_y=this.base.pan.y,l=this.scale,h=i||this.getCentrePoint();this.animationParams={deltaZoomLevel:r,panStepFunc:b=>{const E=this.getCssScale(b);return{x:h.x-E/l*(h.x-o_x)-o_x,y:h.y-E/l*(h.y-o_y)-o_y}},duration:1e3*this.config.zoomStepDuration,progress:0},this.startAnimation()}static \u0275fac=function(i){return new(i||t)(St(Bs))};static \u0275cmp=bs({type:t,selectors:[["pan-zoom"]],viewQuery:function(i,r){if(1&i&&(xc(lH,7),xc(cH,7),xc(uH,7),xc(dH,7)),2&i){let o;vo(o=bo())&&(r.frameElementRef=o.first),vo(o=bo())&&(r.panElementRef=o.first),vo(o=bo())&&(r.zoomElementRef=o.first),vo(o=bo())&&(r.panzoomOverlayRef=o.first)}},inputs:{config:"config"},standalone:!0,features:[Eh],ngContentSelectors:hH,decls:9,vars:0,consts:[["frameElement",""],["panElement",""],["zoomElement",""],["panzoomOverlay",""],[1,"pan-zoom-frame"],[1,"pan-element"],[1,"zoom-element"],[1,"pan-zoom-overlay"]],template:function(i,r){1&i&&(Ww(),L(0,"div",4,0)(2,"div",5,1)(4,"div",6,2),Gw(6),P()()(),it(7,"div",7,3))},styles:[".pan-zoom-frame[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}.pan-element[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.pan-zoom-overlay[_ngcontent-%COMP%]{position:absolute;display:none;inset:0;opacity:0;pointer-events:none}"]})}return t})(),pH=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Fs({type:t});static \u0275inj=Fr({})}return t})();class gH{zoomLevels=5;neutralZoomLevel=2;scalePerZoomLevel=2;initialZoomLevel=this.neutralZoomLevel;friction=10;haltSpeed=100;initialPanX=0;initialPanY=0;initialZoomToFit;keepInBounds=!1;keepInBoundsDragPullback=.7;keepInBoundsRestoreForce=.5;panOnClickDrag=!0;dragMouseButton="left";zoomButtonIncrement=1;zoomOnDoubleClick=!0;zoomOnMouseWheel=!0;invertMouseWheel=!1;zoomStepDuration=.2;zoomToFitZoomLevelFactor=.95;freeMouseWheel=!0;freeMouseWheelFactor=.08;noDragFromElementClass;modelChanged=new Gn({isPanning:null,zoomLevel:null,pan:{x:null,y:null}});api=new Gn({model:null,config:null,changeZoomLevel:null,zoomIn:null,zoomOut:null,zoomToFit:null,getViewPosition:null,getModelPosition:null,resetView:null,panToPoint:null,panDelta:null,panDeltaPercent:null,panDeltaAbsolute:null,centerContent:null,centerX:null,centerY:null,centerTopLeft:null,centerTopRight:null,centerBottomLeft:null,centerBottomRight:null,updateContentDimensions:null,detectContentDimensions:null});acceleratePan=!0;dynamicContentDimensions=!1;constructor(n){void 0!==n&&("zoomLevels"in n&&(this.zoomLevels=n.zoomLevels),"neutralZoomLevel"in n&&(this.neutralZoomLevel=n.neutralZoomLevel),"scalePerZoomLevel"in n&&(this.scalePerZoomLevel=n.scalePerZoomLevel),"initialZoomLevel"in n&&(this.initialZoomLevel=n.initialZoomLevel),"friction"in n&&(this.friction=n.friction),"haltSpeed"in n&&(this.haltSpeed=n.haltSpeed),"initialPanX"in n&&(this.initialPanX=n.initialPanX),"initialPanY"in n&&(this.initialPanY=n.initialPanY),"initialZoomToFit"in n&&(this.initialZoomToFit=n.initialZoomToFit),"keepInBounds"in n&&(this.keepInBounds=n.keepInBounds),"keepInBoundsDragPullback"in n&&(this.keepInBoundsDragPullback=n.keepInBoundsDragPullback),"keepInBoundsRestoreForce"in n&&(this.keepInBoundsRestoreForce=n.keepInBoundsRestoreForce),"panOnClickDrag"in n&&(this.panOnClickDrag=n.panOnClickDrag),"dragMouseButton"in n&&(this.dragMouseButton=n.dragMouseButton),"zoomButtonIncrement"in n&&(this.zoomButtonIncrement=n.zoomButtonIncrement),"zoomOnDoubleClick"in n&&(this.zoomOnDoubleClick=n.zoomOnDoubleClick),"zoomOnMouseWheel"in n&&(this.zoomOnMouseWheel=n.zoomOnMouseWheel),"invertMouseWheel"in n&&(this.invertMouseWheel=n.invertMouseWheel),"zoomStepDuration"in n&&(this.zoomStepDuration=n.zoomStepDuration),"zoomToFitZoomLevelFactor"in n&&(this.zoomToFitZoomLevelFactor=n.zoomToFitZoomLevelFactor),"freeMouseWheel"in n&&(this.freeMouseWheel=n.freeMouseWheel),"freeMouseWheelFactor"in n&&(this.freeMouseWheelFactor=n.freeMouseWheelFactor),this.keepInBounds&&0!==this.neutralZoomLevel&&console.warn("You have set keepInBounds to true and neutralZoomLevel to "+this.neutralZoomLevel+". Be aware that the zoom level cannot go below "+this.neutralZoomLevel),"noDragFromElementClass"in n&&(this.noDragFromElementClass=n.noDragFromElementClass),"acceleratePan"in n&&(this.acceleratePan=n.acceleratePan),"dynamicContentDimensions"in n&&(this.dynamicContentDimensions=n.dynamicContentDimensions))}}const mH=["mermaidDiv"];let _H=(()=>{class t{constructor(e,i,r,o,l,h){this.ra=e,this.commonService=i,this.pendingTasks=r,this.results=o,this.elementRef=l,this.renderer=h,this.controlWorkflow=0,this.panZoomConfig=new gH({freeMouseWheelFactor:.001,zoomOnDoubleClick:!1,dynamicContentDimensions:!0,initialZoomLevel:3}),this.getElementsByTableID=g=>{const b={btnTask:document.querySelector("#pastCollapseTasks"),btnSelectTask:document.querySelector("#tableCollapseTasks"),accordionbodySelector:document.querySelector("#flush-collapseOneTasks"),accordionbodyTask:document.querySelector("#flush-collapseTwoTasks")};return"#dtDecisions"===g&&(b.btnTask=document.querySelector("#pastCollapseDecisions"),b.btnSelectTask=document.querySelector("#tableCollapseDecisions"),b.accordionbodySelector=document.querySelector("#flush-collapseOneDecisions"),b.accordionbodyTask=document.querySelector("#flush-collapseTwoDecisions")),b}}flowchartRefresh(){const e=this.mermaidDiv.nativeElement;Q6.o.render("graphDiv",this.ra.workflow,(i,r)=>{e.innerHTML=i,r(e)}),this.panZoomAPI.resetView()}selectTableRowByValue(e,i,r){const{btnTask:o,btnSelectTask:l,accordionbodySelector:h,accordionbodyTask:g}=this.getElementsByTableID(e);h.classList.contains("collapse")&&l.click(),setTimeout(()=>{document.querySelector(e).querySelectorAll("tr").forEach(E=>{const B=E.querySelectorAll("td");null!=B[i]&&B[i].textContent===r&&(E.click(),setTimeout(()=>{g.classList.contains("collapse")&&o.click()},100))})},300)}selectOptionBytaskID(e,i){document.getElementById(e).querySelectorAll("option").forEach(o=>{o.value.trim()===i&&(o.selected=!0,this.commonService.AutoGenerateForm(i))})}selectTask(e,i){this.selectOptionBytaskID("results"===e?"selectPendingResult":"selectPendingDecision",i)}selectPastTask(e,i){i=this.results[e].find(o=>o.id==i),this.selectTableRowByValue("results"===e?"#dtTasks":"#dtDecisions",1,i=i.label)}redirectToTask(e,i,r){"results"==e?($("#pills-tasks-tab").click(),i?($("#pills-pendingtask-tab").click(),this.selectTask(e,r)):($("#pills-pasttasks-tab").click(),this.selectPastTask(e,r))):($("#pills-decisions-tab").click(),i?($("#pills-pendingdecisions-tab").click(),this.selectTask(e,r)):($("#pills-pastdecisions-tab").click(),this.selectPastTask(e,r)))}checkType(e){this.controlWorkflow+=1;const i=this.pendingTasks.results.find(h=>h.id==e),r=this.results.results.find(h=>h.id==e);1==this.controlWorkflow&&r&&this.redirectToTask("results",!1,e),i&&this.redirectToTask("results",!0,e);const o=this.pendingTasks.decisions.find(h=>h.id==e),l=this.results.decisions.find(h=>h.id==e);o&&this.redirectToTask("decisions",!0,e),1==this.controlWorkflow&&l&&this.redirectToTask("decisions",!1,e),2==this.controlWorkflow&&(this.controlWorkflow=0)}zoomIn(){this.panZoomAPI.zoomIn()}zoomOut(){this.panZoomAPI.zoomOut()}reset(){this.panZoomAPI.resetView()}ngAfterViewInit(){this.apiSubscription=this.panZoomConfig.api.subscribe(e=>this.panZoomAPI=e),window.onA=e=>{this.checkType(e)},Q6.o.initialize({securityLevel:"loose",flowchart:{useMaxWidth:!0,htmlLabels:!0}}),this.commonService.refreshWorklfow$.subscribe(()=>{this.flowchartRefresh()})}downloadFile(e,i,r){const o=document.createElement("a");o.download=r,o.href=e,o.type=i,o.click()}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(c1),St(l1),St(Ks),St(Ou))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-workflow"]],viewQuery:function(i,r){if(1&i&&xc(mH,5),2&i){let o;vo(o=bo())&&(r.mermaidDiv=o.first)}},decls:10,vars:1,consts:[["mermaidDiv",""],[3,"config"],[1,"footer-container","d-flex","align-items-baseline"],["type","button",3,"click"],[1,"fa-solid","icon","fa-magnifying-glass-plus"],["id","btnReset",1,"btn",3,"click"],[1,"fa-solid","icon","fa-magnifying-glass-minus"]],template:function(i,r){if(1&i){const o=ct();L(0,"pan-zoom",1),it(1,"div",null,0),P(),L(3,"div",2)(4,"a",3),Vn("click",function(){return on(o),rn(r.zoomIn())}),it(5,"i",4),P(),L(6,"button",5),Vn("click",function(){return on(o),rn(r.reset())}),_e(7,"Reset"),P(),L(8,"a",3),Vn("click",function(){return on(o),rn(r.zoomOut())}),it(9,"i",6),P()()}2&i&&ht("config",r.panZoomConfig)},dependencies:[fH],styles:['@charset "UTF-8";.nav[_ngcontent-%COMP%]{background:linear-gradient(to right,#474286,#de6168)}.nav-link[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.nav-link.active[_ngcontent-%COMP%]{background:none;color:#fff;font-weight:700;font-size:1rem;border-bottom:6px solid #734E81;border-radius:0}img[_ngcontent-%COMP%]{margin-left:auto;max-height:44px}.text[_ngcontent-%COMP%]{color:#734e81;font-size:22px}.footer-container[_ngcontent-%COMP%]{position:fixed;top:40px;right:0;margin:20px;width:90px}.footer-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.icon[_ngcontent-%COMP%]{color:#474286;opacity:.4}.icon[_ngcontent-%COMP%]:hover{opacity:1}#btnReset[_ngcontent-%COMP%]:hover{color:#474286}']})}return t})();var ts=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(ts||{});const H0="*";function yH(t,n){return{type:ts.Trigger,name:t,definitions:n,options:{}}}function J6(t,n=null){return{type:ts.Animate,styles:n,timings:t}}function SC(t){return{type:ts.Style,styles:t,offset:null}}function t4(t,n,e){return{type:ts.State,name:t,styles:n,options:e}}function e8(t,n,e=null){return{type:ts.Transition,expr:t,animation:n,options:e}}class AC{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class t8{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==o&&this._onFinish()}),l.onDestroy(()=>{++i==o&&this._onDestroy()}),l.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const n8=["toast-component",""];function xH(t,n){if(1&t){const e=ct();L(0,"button",5),Vn("click",function(){return on(e),rn(at().remove())}),L(1,"span",6),_e(2,"\xd7"),P()()}}function EH(t,n){if(1&t&&(xt(0),_e(1),Tn()),2&t){const e=at(2);ye(),ir("[",e.duplicatesCount+1,"]")}}function SH(t,n){if(1&t&&(L(0,"div"),_e(1),_n(2,EH,2,1,"ng-container",4),P()),2&t){const e=at();id(e.options.titleClass),Ro("aria-label",e.title),ye(),ir(" ",e.title," "),ye(),ht("ngIf",e.duplicatesCount)}}function AH(t,n){if(1&t&&it(0,"div",7),2&t){const e=at();id(e.options.messageClass),ht("innerHTML",e.message,po)}}function kH(t,n){if(1&t&&(L(0,"div",8),_e(1),P()),2&t){const e=at();id(e.options.messageClass),Ro("aria-label",e.message),ye(),ir(" ",e.message," ")}}function DH(t,n){if(1&t&&(L(0,"div"),it(1,"div",9),P()),2&t){const e=at();ye(),Cp("width",e.width+"%")}}class FH{_attachedHost;component;viewContainerRef;injector;constructor(n,e){this.component=n,this.injector=e}attach(n,e){return this._attachedHost=n,n.attach(this,e)}detach(){const n=this._attachedHost;if(n)return this._attachedHost=void 0,n.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class LH{_attachedPortal;_disposeFn;attach(n,e){return this._attachedPortal=n,this.attachComponentPortal(n,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(n){this._disposeFn=n}}class BH{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Ir;_activate=new Ir;_manualClose=new Ir;_resetTimeout=new Ir;_countDuplicate=new Ir;constructor(n){this._overlayRef=n}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(n,e){n&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class SS{toastId;config;message;title;toastType;toastRef;_onTap=new Ir;_onAction=new Ir;constructor(n,e,i,r,o,l){this.toastId=n,this.config=e,this.message=i,this.title=r,this.toastType=o,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(n){this._onAction.next(n)}onAction(){return this._onAction.asObservable()}}const r8=new yi("ToastConfig");class VH extends LH{_hostDomElement;_componentFactoryResolver;_appRef;constructor(n,e,i){super(),this._hostDomElement=n,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(n,e){const i=this._componentFactoryResolver.resolveComponentFactory(n.component);let r;return r=i.create(n.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let UH=(()=>{class t{_document=$t(ac);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class zH{_portalHost;constructor(n){this._portalHost=n}attach(n,e=!0){return this._portalHost.attach(n,e)}detach(){return this._portalHost.detach()}}let HH=(()=>{class t{_overlayContainer=$t(UH);_componentFactoryResolver=$t(lf);_appRef=$t(bg);_document=$t(ac);_paneElements=new Map;create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new VH(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new zH(this._createPortalHost(e))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h1=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,i,r,o,l){this.overlay=i,this._injector=r,this.sanitizer=o,this.ngZone=l,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,i,r={},o=""){return this._preBuildNotification(o,e,i,this.applyConfig(r))}success(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,i,this.applyConfig(r))}error(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,i,this.applyConfig(r))}info(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,i,this.applyConfig(r))}warning(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,i,this.applyConfig(r))}clear(e){for(const i of this.toasts)if(void 0!==e){if(i.toastId===e)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(e){const i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",i="",r,o){const{includeTitleDuplicates:l}=this.toastrConfig;for(const h of this.toasts)if((!l||l&&h.title===e)&&h.message===i)return h.toastRef.onDuplicate(r,o),h;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,r,o)):this._buildNotification(e,i,r,o)}_buildNotification(e,i,r,o){if(!o.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=i;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let b=i;i&&o.enableHtml&&(b=this.sanitizer.sanitize(vn.HTML,i));const E=new BH(g),B=new SS(this.index,o,b,r,e,E),de=fa.create({providers:[{provide:SS,useValue:B}],parent:this._injector}),De=new FH(o.toastComponent,de),He=g.attach(De,o.newestOnTop);E.componentInstance=He.instance;const ot={toastId:this.index,title:r||"",message:i||"",toastRef:E,onShown:E.afterActivate(),onHidden:E.afterClosed(),onTap:B.onTap(),onAction:B.onAction(),portal:He};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ot.toastRef.activate()})),this.toasts.push(ot),ot}static \u0275fac=function(i){return new(i||t)(Ii(r8),Ii(HH),Ii(fa),Ii(aC),Ii(Bs))};static \u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const jH={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,r){this.toastrService=e,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(i){return new(i||t)(St(h1),St(SS),St(Bs))};static \u0275cmp=bs({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&Vn("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(bn("@flyInOut",r.state),id(r.toastClasses),Cp("display",r.displayStyle))},standalone:!0,features:[Eh],attrs:n8,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&_n(0,xH,3,0,"button",0)(1,SH,3,5,"div",1)(2,AH,1,3,"div",2)(3,kH,2,4,"div",3)(4,DH,2,2,"div",4),2&i&&(ht("ngIf",r.options.closeButton),ye(),ht("ngIf",r.title),ye(),ht("ngIf",r.message&&r.options.enableHtml),ye(),ht("ngIf",r.message&&!r.options.enableHtml),ye(),ht("ngIf",r.options.progressBar))},dependencies:[Od],encapsulation:2,data:{animation:[yH("flyInOut",[t4("inactive",SC({opacity:0})),t4("active",SC({opacity:1})),t4("removed",SC({opacity:0})),e8("inactive => active",J6("{{ easeTime }}ms {{ easing }}")),e8("active => removed",J6("{{ easeTime }}ms {{ easing }}"))])]}})}return t})()},$H=(t={})=>xu([{provide:r8,useValue:{default:jH,config:t}}]);let WH=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[$H(e)]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=Fs({type:t});static \u0275inj=Fr({})}return t})(),GH=(()=>{class t{constructor(e,i,r,o){this.toastr=e,this.ra=i,this.commonService=r,this.func=o,this.title="",this.text=""}ngOnInit(){}resetFields(){this.title="",this.text=""}onSubmit(){this.commonService.saveNote(this.ra.name,this.title,this.text).subscribe({next:e=>{this.toastr.success("Note "+this.title,"SUCCESSFULLY ADDED",{timeOut:5e3,positionClass:"toast-top-right"}),this.resetFields(),setTimeout(()=>{this.commonService.getNotes(this.ra.name).subscribe({next:i=>{this.ra.notes=i,1==this.ra.notes&&$("#dtNotes").DataTable(),this.commonService.getStatus(this.ra.name).subscribe({next:r=>{this.ra.status=r.ra},error:r=>{console.log(r)}})},error:i=>{console.log(i)}})},200)},error:e=>{console.log(e)}})}static#e=this.\u0275fac=function(i){return new(i||t)(St(h1),St(ad),St(Rd),St(d1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-note-form"]],decls:16,vars:3,consts:[["addNoteForm","ngForm"],["id","addNoteForm",1,"container-form","mt-3",3,"ngSubmit"],[1,"row"],[1,"col"],[1,"col-12"],["placeholder","Insert title","type","text","id","title","name","title",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mt-4"],["for","inputPassword3",1,"col-2","col-form-label"],["rows","4","required","","placeholder","Insert your text here","type","text","name","information","id","information",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mt-4","ml-1"],[1,"col","d-flex","justify-content-end"],["type","submit",1,"btn","btn-ets-do","submit-button",3,"disabled"]],template:function(i,r){if(1&i){const o=ct();L(0,"form",1,0),Vn("ngSubmit",function(){return on(o),rn(r.onSubmit())}),L(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"input",5),ps("ngModelChange",function(h){return on(o),xs(r.title,h)||(r.title=h),rn(h)}),P()()()()(),L(7,"div",6),it(8,"label",7),L(9,"div",4)(10,"textarea",8),ps("ngModelChange",function(h){return on(o),xs(r.text,h)||(r.text=h),rn(h)}),_e(11,"      "),P()()(),L(12,"div",9)(13,"div",10)(14,"button",11),_e(15," Add "),P()()()()}if(2&i){const o=Ec(1);ye(6),fs("ngModel",r.title),ye(4),fs("ngModel",r.text),ye(4),ht("disabled",o.invalid)}},dependencies:[wC,i1,z0,gC,gb,Tg,U_],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}label[_ngcontent-%COMP%]{color:#734e81}"]})}return t})();function YH(t,n){if(1&t){const e=ct();L(0,"tr",15),Vn("click",function(){const r=on(e).$implicit;return rn(at().selectNote(r.id))}),L(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),_e(6),cu(7,"slice"),P(),L(8,"td")(9,"a",16),Vn("click",function(){const r=on(e).$implicit;return rn(at().deleteNote(r))}),it(10,"i",17),P()()()}if(2&t){const e=n.$implicit;ye(2),Hi(e.title),ye(2),Hi(e.date),ye(2),ir("",qw(7,3,e.text,0,20),"...")}}let XH=(()=>{class t{constructor(e,i,r){this.toastr=e,this.ra=i,this.commonService=r,this.note={}}selectNote(e){this.ra.note=this.ra.notes.find(i=>i.id===e)}deleteNote(e){this.commonService.deleteNote(this.ra.name,e.id).subscribe({next:i=>{this.toastr.success("Note "+e.title,"SUCCESSFULLY DELETED",{timeOut:5e3,positionClass:"toast-top-right"}),this.ra.note={},this.commonService.getNotes(this.ra.name).subscribe({next:r=>{this.ra.notes=r,this.commonService.getStatus(this.ra.name).subscribe({next:o=>{this.ra.status=o.ra},error:o=>{console.log(o)}})},error:r=>{console.log(r)}})},error:i=>{console.log(i)}})}static#e=this.\u0275fac=function(i){return new(i||t)(St(h1),St(ad),St(Rd))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-notes"]],decls:36,vars:3,consts:[[1,"container"],[1,"col"],[1,"row"],["id","accordionFlushExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","flush-headingOne",1,"accordion-header"],["id","tableCollapse","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed"],["id","flush-collapseOne","aria-labelledby","flush-headingOne","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["id","dtNotes",1,"display","compact"],[3,"click",4,"ngFor","ngForOf"],["id","flush-headingTwo",1,"accordion-header"],["id","pastCollapse","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseTwo","aria-expanded","true","aria-controls","flush-collapseTwo",1,"accordion-button","collapsed"],["id","flush-collapseTwo","aria-labelledby","flush-headingTwo","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"col-auto"],[3,"click"],["role","button",1,"btn","ms-auto",3,"click"],[1,"fa-solid","fa-circle-minus","fa-lg",2,"color","#e01b24"]],template:function(i,r){1&i&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5)(6,"button",6),_e(7," List "),P()(),L(8,"div",7)(9,"div",8)(10,"div",2)(11,"div",1)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),_e(16,"Title"),P(),L(17,"th"),_e(18,"Date"),P(),it(19,"th")(20,"th"),P()(),L(21,"tbody"),_n(22,YH,11,7,"tr",10),P()()()()()()(),L(23,"div",4)(24,"h2",11)(25,"button",12),_e(26),P()(),L(27,"div",13)(28,"div",8)(29,"div",2)(30,"div",14),_e(31),P()()()()()()(),it(32,"hr"),L(33,"div",2)(34,"div",0),it(35,"app-note-form"),P()()()()),2&i&&(ye(22),ht("ngForOf",r.ra.notes),ye(4),ir(" ",r.ra.note.id," "),ye(5),ir(" ",r.ra.note.text," "))},dependencies:[Sp,GH,ZE],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}hr[_ngcontent-%COMP%]{height:3px;background-color:#935277;border:None}.title[_ngcontent-%COMP%]{color:#474286;font-weight:700}#dtNotes[_ngcontent-%COMP%]{padding-top:10px}#dtNotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#474286;color:#fff}#dtNotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:20%!important}#dtNotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%!important}#dtNotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%!important}#dtNotes[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:60%!important}#dtNotes[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;text-align:left;padding:0 10px!important}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#00000020}.accordion-button[_ngcontent-%COMP%]{background-color:#f8f6f6!important;color:#734e81!important;border:none!important;border-color:transparent!important}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:#f8f6f6!important;color:#734e81!important}"]})}return t})();var _b=O(9182);let i4=(()=>{class t{constructor(e){this.sanitizer=e}transform(e){const r=e?.replace(/(https?:\/\/[^\s]+)/g,o=>`<a href="${o}" target="_blank">${o}</a>`);return this.sanitizer.bypassSecurityTrustHtml(r)}static#e=this.\u0275fac=function(i){return new(i||t)(St(aC,16))};static#t=this.\u0275pipe=Yo({name:"autolinkPipe",type:t,pure:!0})}return t})();function qH(t,n){if(1&t&&(L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),it(6,"img",17),P()()),2&t){const e=n.$implicit,i=at();ye(2),Hi(i.ra.general_information.general.substances[e].name),ye(2),Hi(i.ra.general_information.general.substances[e].casrn),ye(2),Yw("id","overviewCanvas",e,"")}}function KH(t,n){if(1&t&&(L(0,"div",18)(1,"div",14),_e(2),P(),it(3,"div",19),cu(4,"autolinkPipe"),P()),2&t){const e=n.$implicit;ye(2),Hi(e.label),ye(),ht("innerHTML",_f(4,2,e.name),po)}}let ZH=(()=>{class t{constructor(e,i,r){this.ra=e,this.commonService=i,this.results=r,this.objectKeys=Object.keys}ngOnInit(){this.commonService.updateOverviewCanvas$.subscribe(e=>{setTimeout(()=>{e||this.drawMol()},300)})}drawMol(){this.ra.general_information.general.substances.forEach((e,i)=>{new _b.SmiDrawer({width:200,height:150},{}).draw(e.smiles,"#overviewCanvas"+i)})}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(l1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-overview"]],decls:73,vars:12,consts:[[1,"container-fluid"],[1,"card-body"],["id","headerOverview",1,"row","border-bottom"],[1,"col"],[1,"row","border-bottom"],[1,"col","text"],[1,"mt-2"],[1,"row","pt-1","pb-1","border-bottom"],[1,"col-3","text"],[1,"containerMols"],[1,"thead"],[4,"ngFor","ngForOf"],[1,"col-3"],[1,"row"],[1,"col-2","text"],[2,"text-align","center"],["class","row mb-1",4,"ngFor","ngForOf"],[3,"id"],[1,"row","mb-1"],[1,"col-10",3,"innerHTML"]],template:function(i,r){1&i&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_e(4),P()(),L(5,"div",4)(6,"div",5)(7,"h6",6),_e(8),P()()(),L(9,"div",7)(10,"div",8),_e(11,"Substances"),P(),L(12,"div",3)(13,"div",9)(14,"table")(15,"thead",10)(16,"tr")(17,"th"),_e(18,"Name"),P(),L(19,"th"),_e(20,"CAS-RN"),P(),L(21,"th"),_e(22,"Structure"),P()()(),L(23,"tbody"),_n(24,qH,7,4,"tr",11),P()()()()(),L(25,"div",7)(26,"div",8),_e(27,"Endpoint"),P(),L(28,"div",12)(29,"div",13),_e(30),P()()(),L(31,"div",7)(32,"div",8),_e(33,"AR"),P(),L(34,"div",3)(35,"div",13),_e(36),P()()(),L(37,"div",7)(38,"div",8),_e(39,"Species"),P(),L(40,"div",3)(41,"div",13),_e(42),P()()(),L(43,"div",7)(44,"div",8),_e(45,"Framework"),P(),L(46,"div",3)(47,"div",13),_e(48),P()()(),L(49,"div",7)(50,"div",8),_e(51,"Summary"),P(),L(52,"div",3)(53,"div",13),_e(54),P()()(),L(55,"div",7)(56,"div",8),_e(57,"Status"),P(),L(58,"div",14)(59,"div",13),_e(60,"Workflow"),P(),L(61,"div",13),_e(62,"Step"),P(),L(63,"div",13),_e(64,"Active nodes"),P()(),L(65,"div",3)(66,"div",13)(67,"span",15),_e(68),P()(),L(69,"div",13)(70,"span",15),_e(71),P()(),_n(72,KH,5,4,"div",16),P()()()()),2&i&&(ye(4),gk("",null==r.ra?null:r.ra.name," (",null==r.ra||null==r.ra.status?null:r.ra.status.ID,")"),ye(4),Hi(null==r.ra||null==r.ra.general_information?null:r.ra.general_information.general.title),ye(16),ht("ngForOf",r.objectKeys(r.ra.general_information.general.substances)),ye(6),ir(" ",null==r.ra||null==r.ra.general_information||null==r.ra.general_information.general?null:r.ra.general_information.general.endpoint," "),ye(6),ir(" ",null==r.ra||null==r.ra.general_information||null==r.ra.general_information.general?null:r.ra.general_information.general.administration_route," "),ye(6),ir(" ",null==r.ra||null==r.ra.general_information||null==r.ra.general_information.general?null:r.ra.general_information.general.species," "),ye(6),ir(" ",null==r.ra||null==r.ra.general_information||null==r.ra.general_information.general?null:r.ra.general_information.general.regulatory_framework," "),ye(6),ir(" ",null==r.ra||null==r.ra.general_information||null==r.ra.general_information.general?null:r.ra.general_information.general.general_description," "),ye(14),Hi(null==r.ra||null==r.ra.status?null:r.ra.status.workflow_name),ye(3),Hi(null==r.ra||null==r.ra.status?null:r.ra.status.step),ye(),ht("ngForOf",r.ra.pending_tasks))},dependencies:[Sp,i4],styles:[".title[_ngcontent-%COMP%]{margin-top:40px;font-size:45px;font-family:Verdana,sans-serif;color:#734e81}#headerOverview[_ngcontent-%COMP%]{background-color:#474286;color:#fff}.card-body[_ngcontent-%COMP%]{border-width:0px;padding:0;margin-bottom:5px}.text[_ngcontent-%COMP%]{color:#734e81}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:20%!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:50%!important}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:150px}.containerMols[_ngcontent-%COMP%]{max-height:300px;overflow:auto;color:#734e81}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:#fff}"]})}return t})(),kC=(()=>{class t{constructor(e){this.http=e}updateGeneralInformation(e,i,r){const o=new FormData;return o.append("general",JSON.stringify(i)),o.append("custom_workflow_file",r),this.http.put(so_baseUrl+"general_info/"+e,o)}importModel(e){const i=new FormData;return i.append("file",e),this.http.post(so_baseUrl+"import_model",i)}updateResult(e,i){const r=new FormData;return r.append("result",JSON.stringify(i)),this.http.put(so_baseUrl+"result/"+e,r)}updateLink(e,i){const r=new FormData;return r.append("file",i),this.http.post(so_baseUrl+"link/"+e,r)}updateTable(e,i){const r=new FormData;return r.append("file",i),this.http.post(so_baseUrl+"table/"+e,r)}uploadSubstances(e){const i=new FormData;return i.append("file",e),this.http.put(so_baseUrl+"substances",i)}updateModelsRepo(e){let i=encodeURI(e);return this.http.get(so_baseUrl+"newrepo/"+i)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Jm))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QH(t,n){if(1&t){const e=ct();L(0,"div",4)(1,"label",5),_e(2,"Workflow custom:"),P(),L(3,"div",6)(4,"input",45),Vn("change",function(r){return on(e),rn(at().uploadCustomWorkflow(r))}),P()()()}if(2&t){const e=at();ye(4),ht("placeholder",e.ra.general_information.placeholders.workflow_custom)}}function JH(t,n){if(1&t){const e=ct();L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),it(6,"img",48),P(),L(7,"td")(8,"div",17)(9,"button",49),Vn("click",function(){const r=on(e).$implicit;return rn(at(2).deleteMol(r))}),_e(10,"Delete"),P(),L(11,"button",50),Vn("click",function(){const r=on(e).$implicit;return rn(at(2).editMol(r))}),_e(12," Edit "),P()()()()}if(2&t){const e=n.$implicit,i=at(2);ye(2),Hi(i.ra.general_information.general.substances[e].name),ye(2),Hi(i.ra.general_information.general.substances[e].casrn),ye(2),Yw("id","canvas",e,"")}}function ej(t,n){if(1&t&&(L(0,"table")(1,"thead",46)(2,"tr")(3,"th"),_e(4,"Name"),P(),L(5,"th"),_e(6,"CAS-RN"),P(),L(7,"th"),_e(8,"Structure"),P(),it(9,"th"),P()(),L(10,"tbody"),_n(11,JH,13,4,"tr",47),P()()),2&t){const e=at();ye(11),ht("ngForOf",e.objectKeys(e.ra.general_information.general.substances))}}let tj=(()=>{class t{constructor(e,i,r,o,l){this.ra=e,this.commonService=i,this.updateService=r,this.func=o,this.toastr=l,this.loadForm=!1,this.substance_name="",this.substance_CASRN="",this.substance_SMILES="",this.substance_id="",this.substance_file=null,this.form=new B_({}),this.complete=!1,this.listMols=[],this.idxMol=-1,this.workflow_custom=null,this.objectKeys=Object.keys,this.generalInformationForm=new B_({})}ngOnInit(){this.commonService.renderGeneralInfoCanvas$.subscribe(e=>{setTimeout(()=>{e&&this.drawMol()},300)}),this.commonService.generateForms$.subscribe(()=>{this.ra.status.step>0?(this.substance_name=this.ra.general_information.general.substances[0]?.name,this.substance_CASRN=this.ra.general_information.general.substances[0]?.casrn,this.substance_id=this.ra.general_information.general.substances[0]?.id,this.substance_SMILES=this.ra.general_information.general.substances[0]?.smiles):(this.substance_name="",this.substance_CASRN="",this.substance_id="",this.substance_SMILES=""),this.drawMol()})}deleteMol(e){this.ra.general_information.general.substances.splice(e,1)}addMolecule(e){var i;i={id:this.substance_id,name:this.substance_name,casrn:this.substance_CASRN,smiles:this.substance_SMILES},e?(this.ra.general_information.general.substances[this.idxMol]=i,this.toastr.success(i.name,"Edited Successfully",{timeOut:3e3})):(this.ra.general_information.general.substances.push(i),this.toastr.success(i.name,"Added Successfully",{timeOut:3e3})),setTimeout(()=>{this.drawMol()},300)}editMol(e){this.substance_SMILES=this.ra.general_information.general.substances[e].smiles,this.substance_id=this.ra.general_information.general.substances[e].id,this.substance_name=this.ra.general_information.general.substances[e].name,this.substance_CASRN=this.ra.general_information.general.substances[e].casrn,this.idxMol=e}uploadSubstance(e){const i=e.target.files[0];i&&(this.substance_file=i,this.updateService.uploadSubstances(this.substance_file).subscribe(r=>{r.success&&(console.log("Substances"),console.log(r.result),this.ra.general_information.general.substances=this.ra.general_information.general.substances.concat(r.result),this.substance_file=null),setTimeout(()=>{this.drawMol()},300)}))}drawMol(){this.ra.general_information.general.substances.forEach((e,i)=>{new _b.SmiDrawer({width:200,height:150},{}).draw(e.smiles,"#canvas"+i)})}uploadCustomWorkflow(e){const i=e.target.files[0];i&&(this.workflow_custom=i,this.ra.general_information.general.workflow_custom=i.name)}isObject(e){return"object"==typeof e}autocomplete(){if(!this.substance_name&&!this.substance_CASRN)return void this.toastr.warning("No input provided","WARNING",{timeOut:5e3,positionClass:"toast-top-right"});let e;e=this.substance_name?this.commonService.getInformBySubstanceName(this.substance_name).toPromise():this.commonService.getInformByCASRN(this.substance_CASRN).toPromise(),e.then(i=>{if(i&&i.length>0){const r=i[0],o=`dtxcid:${r.dtxcid},dtxsid:${r.dtxsid},pubchemcid:${r.pubchemCid}`;this.substance_name?(this.substance_CASRN=r.casrn,this.toastr.success("Name "+this.substance_name,"AUTOCOMPLETE SUCCESSFULLY",{timeOut:3e3,positionClass:"toast-top-right"})):this.toastr.success("CASRN "+this.substance_CASRN,"AUTOCOMPLETE SUCCESSFULLY",{timeOut:3e3,positionClass:"toast-top-right"}),this.substance_id=o,this.substance_SMILES=r.smiles}}).catch(i=>{this.toastr.warning(i.error,"WARNING",{timeOut:5e3,positionClass:"toast-top-right"}),console.log("Error:",i)})}onSubmit(){setTimeout(()=>{this.updateService.updateGeneralInformation(this.ra.name,this.ra.general_information.general,this.workflow_custom).subscribe({next:e=>{e.success&&(this.func.refreshRA(),this.toastr.success("RA "+this.ra.name,"SUCCESSFULLY UPDATED",{timeOut:5e3,positionClass:"toast-top-right"}))},error:e=>{this.toastr.error("Check the console log to see more information","Unexpected ERROR",{timeOut:5e3,positionClass:"toast-top-right"}),console.log(e)},complete:()=>{setTimeout(()=>{this.workflow_custom=null;const e=document.getElementById("workflow_custom");e&&(e.value=null),document.getElementById("pills-overview-tab").click()},100)}}),this.generalInformationForm.reset()},500)}loadSubstances(e){}loadWorkflow(){}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(kC),St(d1),St(h1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-general-information"]],decls:128,vars:28,consts:[["generalInformationForm","ngForm"],[1,"container-fluid"],[1,"container-form","p-3"],["id","generalInformationForm",3,"ngSubmit"],[1,"row","mb-3"],["for","inputPassword3",1,"col-3","col-form-label"],[1,"col"],["name","title","type","text","id","title",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","general_description","type","text","id","general_description",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","background","type","text","id","background",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","endpoint","type","text","id","endpoint",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","administration_route","type","text","id","administration_route",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","regulatory_framework","type","text","id","regulatory_framework",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","species","type","text","id","species",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","uncertainty","type","text","id","uncertainty",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["class","row mb-3",4,"ngIf"],[1,"col","mb-3","d-flex","justify-content-end"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-ets-do"],["type","button",1,"btn","btn-ets-do"],[1,"containerMols"],[4,"ngIf"],["type","submit",1,"btn","btn-ets-do","submit-button"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for","inputPassword3",1,"col-2","col-form-label"],["name","substance_name","type","text","id","substance_name",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","substance_id","type","text","id","substance_id",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","substance_CASRN","type","text","id","substance_CASRN",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","substance_SMILES","id","substance_SMILES","type","text",1,"form-control",3,"ngModelChange","ngModel"],["name","substance_file","placeholder","","type","file","id","substance_file",1,"form-control","text-start",3,"change"],[1,"col","text-end"],["type","button",1,"btn","btn-ets-do",3,"click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-ets-bad"],["id","editMolModal","tabindex","-1","aria-labelledby","editMolModal","aria-hidden","true",1,"modal","fade"],["id","editMolModal",1,"modal-title","fs-5"],["name","substance_name","type","text","id","substance_name",1,"form-control",3,"ngModelChange","ngModel"],["name","substance_CASRN","type","text","id","substance_CASRN",1,"form-control",3,"ngModelChange","ngModel"],["name","substance_SMILES","type","text","id","substance_SMILES",1,"form-control",3,"ngModelChange","ngModel"],["name","workflow_custom","type","file","id","workflow_custom",1,"form-control",3,"change","placeholder"],[1,"thead"],[4,"ngFor","ngForOf"],[3,"id"],["type","button",1,"btn","btn-ets-delete",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#editMolModal",1,"btn","btn-ets-do",3,"click"]],template:function(i,r){if(1&i){const o=ct();L(0,"div",1)(1,"div",2)(2,"form",3,0),Vn("ngSubmit",function(){return on(o),rn(r.onSubmit())}),L(4,"div",4)(5,"label",5),_e(6,"Title:"),P(),L(7,"div",6)(8,"input",7),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.title,h)||(r.ra.general_information.general.title=h),rn(h)}),P()()(),L(9,"div",4)(10,"label",5),_e(11,"General description:"),P(),L(12,"div",6)(13,"input",8),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.general_description,h)||(r.ra.general_information.general.general_description=h),rn(h)}),P()()(),L(14,"div",4)(15,"label",5),_e(16,"Background:"),P(),L(17,"div",6)(18,"input",9),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.background,h)||(r.ra.general_information.general.background=h),rn(h)}),P()()(),L(19,"div",4)(20,"label",5),_e(21,"Endpoint:"),P(),L(22,"div",6)(23,"input",10),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.endpoint,h)||(r.ra.general_information.general.endpoint=h),rn(h)}),P()()(),L(24,"div",4)(25,"label",5),_e(26,"Administration route:"),P(),L(27,"div",6)(28,"input",11),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.administration_route,h)||(r.ra.general_information.general.administration_route=h),rn(h)}),P()()(),L(29,"div",4)(30,"label",5),_e(31,"Regulatory framework:"),P(),L(32,"div",6)(33,"input",12),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.regulatory_framework,h)||(r.ra.general_information.general.regulatory_framework=h),rn(h)}),P()()(),L(34,"div",4)(35,"label",5),_e(36,"Species:"),P(),L(37,"div",6)(38,"input",13),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.species,h)||(r.ra.general_information.general.species=h),rn(h)}),P()()(),L(39,"div",4)(40,"label",5),_e(41,"Uncertainty:"),P(),L(42,"div",6)(43,"input",14),ps("ngModelChange",function(h){return on(o),xs(r.ra.general_information.general.uncertainty,h)||(r.ra.general_information.general.uncertainty=h),rn(h)}),P()()(),_n(44,QH,5,1,"div",15),L(45,"div",16)(46,"div",17)(47,"button",18),_e(48," Add Molecule "),P(),L(49,"button",19),_e(50,"Import Table"),P()()(),L(51,"div",20),_n(52,ej,12,1,"table",21),P(),L(53,"button",22),_e(54," Submit "),P()()()(),L(55,"div",23)(56,"div",24)(57,"div",25)(58,"div",26)(59,"h1",27),_e(60,"Add Molecule"),P(),it(61,"button",28),P(),L(62,"div",29)(63,"div",4)(64,"div",6)(65,"div",4)(66,"label",30),_e(67,"Name(s)"),P(),L(68,"div",6)(69,"input",31),ps("ngModelChange",function(h){return on(o),xs(r.substance_name,h)||(r.substance_name=h),rn(h)}),P()()(),L(70,"div",4)(71,"label",30),_e(72,"ID(s)"),P(),L(73,"div",6)(74,"input",32),ps("ngModelChange",function(h){return on(o),xs(r.substance_id,h)||(r.substance_id=h),rn(h)}),P()()(),L(75,"div",4)(76,"label",30),_e(77,"CAS-RN(s)"),P(),L(78,"div",6)(79,"input",33),ps("ngModelChange",function(h){return on(o),xs(r.substance_CASRN,h)||(r.substance_CASRN=h),rn(h)}),P()()(),L(80,"div",4)(81,"label",30),_e(82,"SMILES"),P(),L(83,"div",6)(84,"input",34),ps("ngModelChange",function(h){return on(o),xs(r.substance_SMILES,h)||(r.substance_SMILES=h),rn(h)}),P()()(),L(85,"div",4)(86,"label",30),_e(87,"Structure"),P(),L(88,"div",6)(89,"input",35),Vn("change",function(h){return on(o),rn(r.uploadSubstance(h))}),P()()(),L(90,"div",4)(91,"div",36)(92,"button",37),Vn("click",function(){return on(o),rn(r.autocomplete())}),_e(93,"Autocomplete"),P()()()()()(),L(94,"div",38)(95,"button",37),Vn("click",function(){return on(o),rn(r.addMolecule(!1))}),_e(96,"Add "),P(),L(97,"button",39),_e(98,"Close"),P()()()()(),L(99,"div",40)(100,"div",24)(101,"div",25)(102,"div",26)(103,"h1",41),_e(104,"Edit Molecule"),P(),it(105,"button",28),P(),L(106,"div",29)(107,"div",6)(108,"div",4)(109,"label",30),_e(110,"Name"),P(),L(111,"div",6)(112,"input",42),ps("ngModelChange",function(h){return on(o),xs(r.substance_name,h)||(r.substance_name=h),rn(h)}),P()()(),L(113,"div",4)(114,"label",30),_e(115,"CAS-RN"),P(),L(116,"div",6)(117,"input",43),ps("ngModelChange",function(h){return on(o),xs(r.substance_CASRN,h)||(r.substance_CASRN=h),rn(h)}),P()()(),L(118,"div",4)(119,"label",30),_e(120,"SMILES"),P(),L(121,"div",6)(122,"input",44),ps("ngModelChange",function(h){return on(o),xs(r.substance_SMILES,h)||(r.substance_SMILES=h),rn(h)}),P()()()()(),L(123,"div",38)(124,"button",37),Vn("click",function(){return on(o),rn(r.addMolecule(!0))}),_e(125,"Edit "),P(),L(126,"button",39),_e(127,"Close"),P()()()()()}2&i&&(ye(8),ht("placeholder",r.ra.general_information.placeholders.title),fs("ngModel",r.ra.general_information.general.title),ye(5),ht("placeholder",r.ra.general_information.placeholders.general_description),fs("ngModel",r.ra.general_information.general.general_description),ye(5),ht("placeholder",r.ra.general_information.placeholders.background),fs("ngModel",r.ra.general_information.general.background),ye(5),ht("placeholder",r.ra.general_information.placeholders.endpoint),fs("ngModel",r.ra.general_information.general.endpoint),ye(5),ht("placeholder",r.ra.general_information.placeholders.administration_route),fs("ngModel",r.ra.general_information.general.administration_route),ye(5),ht("placeholder",r.ra.general_information.placeholders.regulatory_framework),fs("ngModel",r.ra.general_information.general.regulatory_framework),ye(5),ht("placeholder",r.ra.general_information.placeholders.species),fs("ngModel",r.ra.general_information.general.species),ye(5),ht("placeholder",r.ra.general_information.placeholders.uncertainty),fs("ngModel",r.ra.general_information.general.uncertainty),ye(),ht("ngIf",0==(null==r.ra||null==r.ra.status?null:r.ra.status.step)),ye(8),ht("ngIf",r.ra.general_information.general.substances.length>0),ye(17),ht("placeholder",r.ra.general_information.placeholders.substances.name),fs("ngModel",r.substance_name),ye(5),ht("placeholder",r.ra.general_information.placeholders.substances.id),fs("ngModel",r.substance_id),ye(5),ht("placeholder",r.ra.general_information.placeholders.substances["cas-rn"]),fs("ngModel",r.substance_CASRN),ye(5),fs("ngModel",r.substance_SMILES),ye(28),fs("ngModel",r.substance_name),ye(5),fs("ngModel",r.substance_CASRN),ye(5),fs("ngModel",r.substance_SMILES))},dependencies:[Sp,Od,wC,i1,z0,gC,Tg,U_],styles:[".title[_ngcontent-%COMP%]{margin-top:40px;font-size:45px;font-family:Verdana,sans-serif;color:#734e81}.btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.container-form[_ngcontent-%COMP%]{color:#734e81}.containerMols[_ngcontent-%COMP%]{max-height:300px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:#fff}.modal[_ngcontent-%COMP%]{color:#734e81}"]})}return t})();var DC=O(2578);let nj=(()=>{class t{constructor(e){this.http=e}getModels(){return this.http.get(so_baseUrl+"models")}getPrediction(e,i,r){const o=new FormData;return o.append("models",i),o.append("versions",r),this.http.put(so_baseUrl+"predict/"+e,o)}getModelDocumentation(e,i){return this.http.get(so_baseUrl+"model_documentation/"+e+"/"+i)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Jm))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ij(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at();ye(),ir(" ",i.documentation[e]," ")}}function rj(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at(2).$implicit,r=at();ye(),ir(" ",r.documentation[i][e]," ")}}function sj(t,n){if(1&t&&(L(0,"div",18)(1,"div",16),_e(2),P(),_n(3,rj,2,1,"div",13),P()),2&t){const e=n.$implicit,i=at(2).$implicit,r=at();ye(2),Hi(e.replaceAll("_"," ")),ye(),ht("ngIf","None"!==r.documentation[i][e])}}function oj(t,n){if(1&t&&(L(0,"div",16),_n(1,sj,4,2,"div",17),P()),2&t){const e=at().$implicit,i=at();ye(),ht("ngForOf",i.objectKeys(i.documentation[e]))}}function aj(t,n){if(1&t&&(L(0,"div",11)(1,"div",12),_e(2),P(),_n(3,ij,2,1,"div",13)(4,oj,2,1,"div",14),P()),2&t){const e=n.$implicit,i=at();ye(2),ir(" ",e.replaceAll("_"," ")," "),ye(),ht("ngIf",!i.isObject(i.documentation[e])&&"None"!==i.documentation[e]),ye(),ht("ngIf",i.isObject(i.documentation[e]))}}function lj(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at();ye(),ir(" ",i.documentation[e]," ")}}function cj(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at(2).$implicit,r=at();ye(),ir(" ",r.documentation[i][e]," ")}}function uj(t,n){if(1&t&&(L(0,"div",18)(1,"div",16),_e(2),P(),_n(3,cj,2,1,"div",13),P()),2&t){const e=n.$implicit,i=at(2).$implicit,r=at();ye(2),Hi(e.replaceAll("_"," ")),ye(),ht("ngIf","None"!==r.documentation[i][e])}}function dj(t,n){if(1&t&&(L(0,"div",16),_n(1,uj,4,2,"div",17),P()),2&t){const e=at().$implicit,i=at();ye(),ht("ngForOf",i.objectKeys(i.documentation[e]))}}function hj(t,n){if(1&t&&(L(0,"div",11)(1,"div",12),_e(2),P(),_n(3,lj,2,1,"div",13)(4,dj,2,1,"div",14),P()),2&t){const e=n.$implicit,i=at();ye(2),ir(" ",e.replaceAll("_"," ")," "),ye(),ht("ngIf",!i.isObject(i.documentation[e])&&"None"!==i.documentation[e]),ye(),ht("ngIf",i.isObject(i.documentation[e]))}}function fj(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at();ye(),ir(" ",i.documentation[e]," ")}}function pj(t,n){if(1&t&&(L(0,"div",15),_e(1),P()),2&t){const e=at().$implicit,i=at(2).$implicit,r=at();ye(),ir(" ",r.documentation[i][e]," ")}}function gj(t,n){if(1&t&&(L(0,"div",18)(1,"div",16),_e(2),P(),_n(3,pj,2,1,"div",13),P()),2&t){const e=n.$implicit,i=at(2).$implicit,r=at();ye(2),Hi(e.replaceAll("_"," ")),ye(),ht("ngIf","None"!==r.documentation[i][e])}}function mj(t,n){if(1&t&&(L(0,"div",16),_n(1,gj,4,2,"div",17),P()),2&t){const e=at().$implicit,i=at();ye(),ht("ngForOf",i.objectKeys(i.documentation[e]))}}function _j(t,n){if(1&t&&(L(0,"div",11)(1,"div",19),_e(2),P(),_n(3,fj,2,1,"div",13)(4,mj,2,1,"div",14),P()),2&t){const e=n.$implicit,i=at();ye(2),ir(" ",e.replaceAll("_"," ")," "),ye(),ht("ngIf",!i.isObject(i.documentation[e])&&"None"!==i.documentation[e]),ye(),ht("ngIf",i.isObject(i.documentation[e]))}}let yj=(()=>{class t{constructor(){this.objectKeys=Object.keys,this.genInformationKeys=["ID","Version","Model_title","Model_description","Keywords","Contact","Institution","Date","Endpoint","Endpoint_units","Interpretation","Dependent_variable","Species","Limits_applicability","Experimental_protocol","Model_availability","Data_info"],this.algorithmKeys=["Algorithm","Software","Descriptors","Algorithm_settings","AD_method","AD_parameters","Goodness_of_fit_statistics","Internal_validation_1","Internal_validation_2","External_validation","Comments"],this.otherInformationKeys=["Other_related_models","Date_of_QMRF","Date_of_QMRF_updates","QMRF_updates","References","QMRF_same_models","Mechanistic_basis","Mechanistic_references","Supporting_information","Comment_on_the_endpoint","Endpoint_data_quality_and_variability","Descriptor_selection"]}ngOnInit(){}isObject(e){return"object"==typeof e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=bs({type:t,selectors:[["model-documentation"]],inputs:{documentation:"documentation"},decls:20,vars:3,consts:[["id","pills-tab-model-information","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pills-gen-informationmodel-tab","data-bs-toggle","pill","data-bs-target","#pills-gen-informationmodel","type","button","role","tab","aria-controls","pills-gen-informationmodel","aria-selected","True",1,"nav-link","active"],["id","pills-algorithm-tab","data-bs-toggle","pill","data-bs-target","#pills-algorithm","type","button","role","tab","aria-controls","pills-algorithm","aria-selected","false",1,"nav-link"],["id","pills-other_information-tab","data-bs-toggle","pill","data-bs-target","#pills-other_information","type","button","role","tab","aria-controls","pills-other_information","aria-selected","false",1,"nav-link"],["id","pills-modelInformationtab",1,"tab-content","container-fluid"],["id","pills-gen-informationmodel","role","tabpanel","aria-labelledby","pills-gen-informationmodel-tab",1,"tab-pane","fade","show","active","mt-2"],[1,"card-body"],["class","row border-bottom","id","headerOverview",4,"ngFor","ngForOf"],["id","pills-algorithm","role","tabpanel","aria-labelledby","pills-algorithm-tab",1,"tab-pane","fade","mt-2"],["id","pills-other_information","role","tabpanel","aria-labelledby","pills-other_information-tab",1,"tab-pane","fade","mt-2"],["id","headerOverview",1,"row","border-bottom"],[1,"col-3","p-1"],["class","col text-dark",4,"ngIf"],["class","col",4,"ngIf"],[1,"col","text-dark"],[1,"col"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-4","p-1"]],template:function(i,r){1&i&&(L(0,"ul",0)(1,"li",1)(2,"button",2),_e(3," General Information "),P()(),L(4,"li",1)(5,"button",3),_e(6," Algorithm and Software "),P()(),L(7,"li",1)(8,"button",4),_e(9," Other Information "),P()()(),L(10,"div",5)(11,"div",6)(12,"div",7),_n(13,aj,5,3,"div",8),P()(),L(14,"div",9)(15,"div",7),_n(16,hj,5,3,"div",8),P()(),L(17,"div",10)(18,"div",7),_n(19,_j,5,3,"div",8),P()()()),2&i&&(ye(13),ht("ngForOf",r.genInformationKeys),ye(3),ht("ngForOf",r.algorithmKeys),ye(3),ht("ngForOf",r.otherInformationKeys))},dependencies:[Sp,Od],styles:[".nav[_ngcontent-%COMP%]{background:none;font-size:1.1rem}.nav-link[_ngcontent-%COMP%]{color:#474286!important;font-size:1.1rem}.nav-link.active[_ngcontent-%COMP%]{background:none!important;color:#474286!important;font-weight:700!important;font-size:1.1rem!important;border-bottom:6px solid #734E81!important;border-radius:0!important}.secondary-color[_ngcontent-%COMP%]{color:#734e81}"]})}return t})(),vj=(()=>{class t{transform(e,i){return e.filter(r=>r[1]!==i)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=Yo({name:"filterVersion",type:t,pure:!0})}return t})();const bj=["DocumentFileInput"],wj=t=>({"selected-row":t});function Cj(t,n){if(1&t){const e=ct();L(0,"a",92),Vn("click",function(){return on(e),rn(at(2).openModalMethod(!1))}),_e(1," Add method "),P()}}function Tj(t,n){if(1&t){const e=ct();L(0,"a",93),Vn("click",function(){return on(e),rn(at(2).addParameterMode())}),_e(1," Add value "),P()}2&t&&_r("blink",at(2).isBlinking)}function xj(t,n){1&t&&(L(0,"a",94),_e(1,"Import Table"),P())}function Ej(t,n){if(1&t){const e=ct();L(0,"a",95),Vn("click",function(){return on(e),rn(at(2).openModal())}),_e(1,"Predict"),P()}}function Sj(t,n){if(1&t){const e=ct();L(0,"button",106),Vn("click",function(){on(e);const r=at().index;return rn(at(3).deleteMethod(r))}),_e(1," Delete "),P()}}function Aj(t,n){if(1&t){const e=ct();L(0,"a",107),Vn("click",function(){on(e);const r=at().index;return rn(at(3).openModalMethod(!0,r))}),_e(1," Edit "),P()}}function kj(t,n){if(1&t&&(L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),_e(6),P(),L(7,"td"),_e(8),P(),L(9,"td"),_e(10),P(),L(11,"td"),_e(12),P(),L(13,"td")(14,"div",103),_n(15,Sj,2,0,"button",104)(16,Aj,2,0,"a",105),P()()()),2&t){const e=n.$implicit,i=n.index,r=at(3);ye(2),Hi(e.name),ye(2),Hi(e.description),ye(2),Hi(e.sensitivity),ye(2),Hi(e.specificity),ye(2),Hi(e.sd),ye(2),Hi(e.link),ye(3),ht("ngIf",!r.listEditableMethods[i]),ye(),ht("ngIf",!r.listEditableMethods[i])}}function Dj(t,n){if(1&t&&(L(0,"div",96)(1,"div",97),_e(2," Methods "),P(),L(3,"table",98)(4,"thead")(5,"tr")(6,"th",99),_e(7,"Name"),P(),L(8,"th",100),_e(9,"Description"),P(),L(10,"th",99),_e(11,"Sensitivity"),P(),L(12,"th",99),_e(13,"Specificity"),P(),L(14,"th",99),_e(15,"SD"),P(),L(16,"th",99),_e(17,"Link"),P(),it(18,"th",101),P()(),L(19,"tbody"),_n(20,kj,17,8,"tr",102),P()()()),2&t){const e=at(2);ye(20),ht("ngForOf",e.model.methods)}}function Mj(t,n){if(1&t){const e=ct();L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),_e(6),P(),L(7,"td"),_e(8),P(),L(9,"td"),_e(10),P(),L(11,"td"),_e(12),P(),L(13,"td"),_e(14),P(),L(15,"td")(16,"div",103)(17,"a",106),Vn("click",function(){const r=on(e).index;return rn(at(3).deleteParameter(r))}),_e(18," Delete "),P(),L(19,"a",110),Vn("click",function(){const r=on(e).index;return rn(at(3).editFormParam(r))}),_e(20," Edit "),P()()()()}if(2&t){const e=n.$implicit,i=n.index,r=at(3);ye(2),Hi(null==e?null:e.substance),ye(2),Hi(null==e?null:e.method),ye(2),Hi(null==e?null:e.parameter),ye(2),Hi(null==e?null:e.value.toString()),ye(2),Hi(null==e?null:e.unit),ye(2),Hi(null==r.model||null==r.model.uncertainties[i]?null:r.model.uncertainties[i].uncertainty),ye(2),Hi(null==r.model||null==r.model.uncertainties[i]?null:r.model.uncertainties[i].term)}}function Ij(t,n){if(1&t&&(L(0,"div",108)(1,"div",97),_e(2," Values "),P(),L(3,"table",98)(4,"thead")(5,"tr")(6,"th",99),_e(7,"Substance"),P(),L(8,"th",99),_e(9,"Method"),P(),L(10,"th",99),_e(11,"Parameter"),P(),L(12,"th",99),_e(13,"Value"),P(),L(14,"th",101),_e(15,"Unit"),P(),L(16,"th",109),_e(17,"Uncertainty"),P(),L(18,"th",99),_e(19,"Term"),P(),it(20,"th",101),P()(),L(21,"tbody"),_n(22,Mj,21,7,"tr",102),P()()()),2&t){const e=at(2);ye(22),ht("ngForOf",e.model.values)}}function Nj(t,n){if(1&t){const e=ct();L(0,"div",30)(1,"label",16),_e(2,"Results*:"),P(),L(3,"div",17)(4,"textarea",111),ps("ngModelChange",function(r){on(e);const o=at(2);return xs(o.report,r)||(o.report=r),rn(r)}),_e(5,"        "),P()()()}if(2&t){const e=at(2);ye(4),ht("placeholder",e.pending_task["task description"].report),fs("ngModel",e.report)}}function Oj(t,n){1&t&&it(0,"i",117)}function Rj(t,n){if(1&t){const e=ct();L(0,"div",15),it(1,"label",16),L(2,"div",17)(3,"div",18)(4,"div",64),it(5,"input",112),P(),L(6,"div",67)(7,"div",113),_n(8,Oj,1,0,"i",114),P()(),L(9,"div",67)(10,"a",115),Vn("click",function(){const r=on(e).$implicit,o=at(2);return rn(o.deleteFile(o.documents[r].label))}),it(11,"i",116),P()()()()()}if(2&t){const e=n.$implicit,i=at(2);ye(5),ht("value",i.documents[e].label),ye(3),ht("ngIf",i.documents[e].include)}}function Pj(t,n){if(1&t){const e=ct();L(0,"button",118),Vn("click",function(){return on(e),rn(at(2).back())}),_e(1," Back "),P()}}function Fj(t,n){1&t&&(L(0,"div",119)(1,"div",120)(2,"span",121),_e(3,"Loading..."),P()()())}function Lj(t,n){1&t&&(L(0,"div",122),_e(1," No models available "),P())}function Bj(t,n){if(1&t){const e=ct();L(0,"tr",127),Vn("click",function(){const r=on(e).$implicit;return rn(at(3).getModelDocumentation(r))}),L(1,"td")(2,"input",128),Vn("change",function(r){const o=on(e).$implicit;return rn(at(3).onChange(o,r))}),P()(),L(3,"td"),_e(4),P(),L(5,"td"),_e(6),P()()}if(2&t){const e=n.$implicit,i=at(3);ht("ngClass",function ob(t,n,e,i){return A5(tn(),Cc(),t,n,e,i)}(3,wj,e===i.selectedModel)),ye(4),Hi(e[1]),ye(2),Hi(e[0])}}function Vj(t,n){if(1&t&&(L(0,"table",123)(1,"thead")(2,"tr"),it(3,"th",124),L(4,"th",124),_e(5,"Version"),P(),L(6,"th",125),_e(7,"Name"),P()()(),L(8,"tbody"),_n(9,Bj,7,5,"tr",126),cu(10,"filterVersion"),P()()),2&t){const e=at(2);ye(9),ht("ngForOf",N5(10,1,e.listAllModels,0))}}function Uj(t,n){if(1&t&&(L(0,"div",129),it(1,"model-documentation",130),P()),2&t){const e=at(2);ye(),ht("documentation",e.ModelDocumentation)}}function zj(t,n){if(1&t&&(L(0,"option",131),_e(1),P()),2&t){const e=n.$implicit;ht("ngValue",e),ye(),Hi(e.name)}}function Hj(t,n){1&t&&(L(0,"div",132),_e(1," There are missing required fields to fill out "),P())}function jj(t,n){1&t&&(L(0,"div",133),_e(1," Sensitivity and Specificity must be between 0 and 1. "),P())}function $j(t,n){if(1&t){const e=ct();L(0,"div")(1,"form",6,0),Vn("ngSubmit",function(r){return on(e),rn(at().onSubmit(r))}),L(3,"div",7),_n(4,Cj,2,0,"a",8)(5,Tj,2,2,"a",9)(6,xj,2,0,"a",10)(7,Ej,2,0,"a",11),P(),_n(8,Dj,21,1,"div",12)(9,Ij,23,1,"div",13)(10,Nj,6,2,"div",14),L(11,"div")(12,"div",15)(13,"label",16),_e(14,"Documentation:"),P(),L(15,"div",17)(16,"div",18)(17,"div",19)(18,"input",20,1),Vn("change",function(r){return on(e),rn(at().sendlink(r))}),P()(),L(20,"div",21)(21,"div",22)(22,"input",23),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.includeDoc,r)||(o.includeDoc=r),rn(r)}),P()(),L(23,"span",24),_e(24,"Include"),P()(),L(25,"div",19)(26,"input",25),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.labelFile,r)||(o.labelFile=r),rn(r)}),P()(),L(27,"div",26)(28,"a",27),Vn("click",function(){return on(e),rn(at().addDocument())}),it(29,"i",28),P()()()()(),_n(30,Rj,12,2,"div",29),P(),L(31,"div",30)(32,"label",16),_e(33,"Summary:"),P(),L(34,"div",17)(35,"textarea",31),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.model.summary,r)||(o.model.summary=r),rn(r)}),P()()(),L(36,"div",18)(37,"div",17),_n(38,Pj,2,0,"button",32),P(),L(39,"div",33)(40,"button",34),_e(41," Submit "),P()()()(),L(42,"div",35)(43,"div",36)(44,"div",37)(45,"div",38)(46,"h5",39),_e(47," Select Models "),P(),it(48,"button",40),P(),L(49,"div",41),_n(50,Fj,4,0,"div",42)(51,Lj,2,0,"div",43),L(52,"div",44),_n(53,Vj,11,4,"table",45),P(),_n(54,Uj,2,1,"div",46),P(),L(55,"div",47)(56,"button",48),_e(57," Cancel "),P(),L(58,"button",49),Vn("click",function(){return on(e),rn(at().executePredict())}),_e(59," Predict "),P()()()()(),L(60,"div",50)(61,"div",51)(62,"div",37)(63,"div",38)(64,"h5",52),_e(65," Import Table "),P(),it(66,"button",40),P(),L(67,"div",53)(68,"input",20),Vn("change",function(r){return on(e),rn(at().importTable(r))}),P(),L(69,"span",54),_e(70,"Use an excel format file with the same columns that are shown in the form"),P()(),L(71,"div",47)(72,"button",55),_e(73," Cancel "),P()()()()(),L(74,"div",56)(75,"div",36)(76,"div",37)(77,"div",38)(78,"h5",57),_e(79," Add new Value "),P(),it(80,"button",40),P(),L(81,"div",53)(82,"div",18)(83,"div",58)(84,"h6"),_e(85,"Select method"),P(),L(86,"select",59),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method,r)||(o.method=r),rn(r)}),_n(87,zj,2,2,"option",60),P()()(),L(88,"div",18)(89,"div",61)(90,"div",18)(91,"div",61)(92,"label",62),_e(93,"Parameter*"),P(),L(94,"input",63),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.parameter,r)||(o.parameter=r),rn(r)}),P()(),L(95,"div",64)(96,"label",65),_e(97,"Value*"),P(),L(98,"input",66),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.value,r)||(o.value=r),rn(r)}),P()(),L(99,"div",67)(100,"label",68),_e(101,"Unit"),P(),L(102,"div",18)(103,"div",61)(104,"input",69),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.unit,r)||(o.unit=r),rn(r)}),P()()()()()()(),L(105,"div",70)(106,"div",19)(107,"label",62),_e(108,"Uncertainty"),P(),L(109,"input",71),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.uncertainty,r)||(o.uncertainty=r),rn(r)}),P()(),L(110,"div",72)(111,"label",68),_e(112,"Term"),P(),L(113,"div",18)(114,"div",72)(115,"input",73),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.uncertainty_term,r)||(o.uncertainty_term=r),rn(r)}),P()()()()(),_n(116,Hj,2,0,"div",74),P(),L(117,"div",47)(118,"a",75),Vn("click",function(){return on(e),rn(at().addNewParameter())}),_e(119),P(),L(120,"button",76),_e(121," Close "),P()()()()(),L(122,"div",77)(123,"div",36)(124,"div",37)(125,"div",38)(126,"h5",78),_e(127),P(),it(128,"button",40),P(),L(129,"form",null,2)(131,"div",53)(132,"div",18)(133,"div",61)(134,"div",18)(135,"div",61)(136,"label",79),_e(137,"Name*"),P(),L(138,"input",80),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.name,r)||(o.method.name=r),rn(r)}),P()(),L(139,"div",61)(140,"label",81),_e(141,"Description"),P(),L(142,"input",82),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.description,r)||(o.method.description=r),rn(r)}),P()(),L(143,"div",61)(144,"label",83),_e(145,"Link"),P(),L(146,"input",84),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.link,r)||(o.method.link=r),rn(r)}),P()()(),L(147,"div",18)(148,"div",61)(149,"label",85),_e(150,"Sensitivity"),P(),L(151,"input",86,3),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.sensitivity,r)||(o.method.sensitivity=r),rn(r)}),P()(),L(153,"div",61)(154,"label",85),_e(155,"Specificity"),P(),L(156,"input",87,4),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.specificity,r)||(o.method.specificity=r),rn(r)}),P()(),L(158,"div",61)(159,"label",88),_e(160,"SD"),P(),L(161,"input",89),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.method.sd,r)||(o.method.sd=r),rn(r)}),P()()(),_n(162,jj,2,0,"div",90),P()()(),L(163,"div",47)(164,"button",91),Vn("click",function(){return on(e),rn(at().addMethod())}),_e(165),P(),L(166,"button",76),_e(167," Close "),P()()()()()()()}if(2&t){const e=Ec(2),i=Ec(130),r=Ec(152),o=Ec(157),l=at();ye(4),ht("ngIf","value"===l.pending_task.result.result_type),ye(),ht("ngIf","value"===l.pending_task.result.result_type),ye(),ht("ngIf","value"===l.pending_task.result.result_type),ye(),ht("ngIf","local_models"===l.pending_task["task description"].method_link[0]),ye(),ht("ngIf","value"===(null==l.pending_task?null:l.pending_task.result.result_type)&&l.model.methods.length>0),ye(),ht("ngIf","value"===(null==l.pending_task?null:l.pending_task.result.result_type)&&l.model.values.length>0),ye(),ht("ngIf","text"===l.pending_task.result.result_type),ye(12),fs("ngModel",l.includeDoc),ht("value",!0),ye(4),fs("ngModel",l.labelFile),ye(4),ht("ngForOf",l.objectKeys(l.documents)),ye(5),ht("placeholder",l.pending_task["task description"].summary),fs("ngModel",l.model.summary),ye(3),ht("ngIf",l.editMode),ye(2),ht("disabled",e.invalid),ye(10),ht("ngIf",l.isLoading),ye(),ht("ngIf",!l.listAllModels),ye(2),ht("ngIf",l.listAllModels),ye(),ht("ngIf",l.ModelDocumentation),ye(4),ht("disabled",0==l.listModelsSelected.length),ye(28),fs("ngModel",l.method),ye(),ht("ngForOf",l.model.methods),ye(7),fs("ngModel",l.parameter),ye(4),fs("ngModel",l.value),ye(6),fs("ngModel",l.unit),ye(5),ht("placeholder",l.pending_task["task description"].uncertainty),fs("ngModel",l.uncertainty),ye(6),fs("ngModel",l.uncertainty_term),ye(),ht("ngIf",!l.parameterInserted),ye(3),ir(" ",l.editParameterMode?"Update":"Add"," "),ye(8),ir(" ",l.editMethodMode?"Edit Method":"Add new Method"," "),ye(11),fs("ngModel",l.method.name),ye(4),fs("ngModel",l.method.description),ye(4),fs("ngModel",l.method.link),ye(5),fs("ngModel",l.method.sensitivity),ye(5),fs("ngModel",l.method.specificity),ye(5),fs("ngModel",l.method.sd),ye(),ht("ngIf",r.invalid||o.invalid),ye(2),ht("disabled",i.invalid),ye(),ir(" ",l.editMethodMode?"Update":"Add"," ")}}let Wj=(()=>{class t{constructor(e,i,r,o,l,h,g,b,E,B){this.ra=e,this.commonService=i,this.pendingTasks=r,this.func=o,this.results=l,this.updateService=h,this.toastr=g,this.global=b,this.modelsService=E,this.method=B,this.isLoading=void 0,this.idx=void 0,this.ModelDocumentation=void 0,this.editParameterMode=!1,this.listEditableMethods=[],this.loadForm=!1,this.labelFile="",this.objectKeys=Object.keys,this.report="",this.documents=[],this.pending_task_selected_id="",this.listModelsSelected=[],this.parameterInserted=!0,this.editMethodMode=!1,this.includeDoc=!0,this.isBlinking=!1}ngOnInit(){setTimeout(()=>{this.pending_task=this.task,this.model=this.task.result,this.editMode&&"text"==this.pending_task.result.result_type&&(this.report=this.model.values[0]),this.documents=this.model.links},100)}addMethod(e){e?e.forEach(i=>{this.model.methods.some(r=>JSON.stringify(r)===JSON.stringify(i))||(this.listEditableMethods.push(!0),this.model.methods.push(i))}):this.editMethodMode?(this.model.methods[this.idx]={name:this.method.name,description:this.method.description,link:this.method.link,sensitivity:this.method.sensitivity,specificity:this.method.specificity,sd:this.method.sd},this.toastr.success("Successfully Updated","")):(this.listEditableMethods.push(!1),this.model.methods.push({...this.method}),this.toastr.success("Successfully Added",""))}deleteMethod(e){this.model.methods.splice(e,1),this.listEditableMethods.splice(e,1)}deleteParameter(e){this.model.uncertainties.splice(e,1),this.model.values.splice(e,1)}editFormParam(e){const{method:i,parameter:r,value:o,unit:l}=this.model.values[e],{uncertainty:h,term:g}=this.model.uncertainties[e];Object.assign(this,{method:i,parameter:r,value:o,unit:l,uncertainty:h,term:g}),this.editParameterMode=!0,this.idx=e}addParameterMode(){this.editParameterMode=!1,this.resetFieldsParameter(),this.resetFieldsUncertainty()}back(){this.global.editModeTasks=!this.global.editModeTasks}getPendingTask(){this.commonService.getPendingTask(this.ra.name,this.pending_task_selected_id).subscribe({next:e=>{this.pending_task=e,this.model=this.pending_task.result,this.documents=this.model.links},error:e=>console.log(e)})}closeModal(){document.getElementById("btnclosePredModal").click()}editMethod(e){}executePredict(){this.isLoading=!0,this.resetFieldsUncertainty();var e=[],i=[];for(let r=0;r<this.listModelsSelected.length;r++){const o=this.listModelsSelected[r];e.push(o[0]),i.push(o[1])}this.modelsService.getPrediction(this.ra.name,e,i).subscribe({next:r=>{this.isLoading=!1,this.addMethod(r.methods);for(let o=0;o<r.models.length;o++)this.model.values.push({method:r.models[o][0],parameter:r.parameters[o],value:r.results[o],unit:r.units[o],substance:r.molnames[o]}),this.model.uncertainties.push({uncertainty:r.uncertainty[o]});this.closeModal(),this.toastr.success("PREDICTION DONE","SUCCESSFUL PREDICTION",{timeOut:5e3,positionClass:"toast-top-right"})},error:r=>{this.toastr.error(r.error,"FAILED",{timeOut:5e3,positionClass:"toast-top-right"}),console.log(r)}}),this.listModelsSelected=[]}getModelDocumentation(e){this.selectedModel=e,this.ModelDocumentation=void 0,this.model.name=e[0],this.model.version=e[1],this.modelsService.getModelDocumentation(e[0],e[1]).subscribe({next:i=>{this.ModelDocumentation=i},error:i=>{console.log(i)}})}onChange(e,i){if(i.target.checked)this.listModelsSelected.push(e);else for(let o=0;o<this.listModelsSelected.length;o++){const l=this.listModelsSelected[o];l[0]==e[0]&&l[1]==e[1]&&this.listModelsSelected.splice(o,1)}}resetFieldsUncertainty(){this.uncertainty=""}onlyNumbers(e){"ArrowLeft"===e.key||"ArrowRight"===e.key||"Delete"===e.key||"Backspace"===e.key||/[^0-9.]+$/.test(e.key)&&e.preventDefault()}invalidSensitivity(){return this.sensitivity.length>0&&(this.sensitivity=parseFloat(this.sensitivity)),this.sensitivity<0||this.sensitivity>1}onSubmit(e){this.loadForm=!1,this.report&&(this.model.values[0]=this.report),this.model.values.length>0?setTimeout(()=>{this.updateService.updateResult(this.ra.name,this.model).subscribe({next:i=>{i.success&&(this.pendingTasks.results=[],this.func.refreshRA(),this.editMode?this.global.editModeTasks=!1:setTimeout(()=>{this.pendingTasks.results.length&&(this.pending_task_selected_id=this.pendingTasks.results[0].id,this.getPendingTask())},1e3),this.toastr.success("RA "+this.ra.name,"SUCCESSFULLY UPDATED",{timeOut:5e3,positionClass:"toast-top-right"}))},error:i=>{this.toastr.error("Check the console to see more information","Unexpected Error",{timeOut:5e3,positionClass:"toast-top-right"}),console.error(i)}})},300):(this.alertUserAction(),this.toastr.warning("","value is required",{timeOut:5e3,positionClass:"toast-top-right"}),e.preventDefault())}openModalMethod(e,i){this.idx=i,this.editMethodMode=e,e?(this.method.name=this.model.methods[i].name,this.method.description=this.model.methods[i].description,this.method.link=this.model.methods[i].link,this.method.sensitivity=this.model.methods[i].sensitivity,this.method.specificity=this.model.methods[i].specificity,this.method.sd=this.model.methods[i].sd):(this.editMethodMode=e,this.cleanMethodFields())}cleanMethodFields(){this.method.name="",this.method.description="",this.method.link="",this.method.sensitivity=void 0,this.method.specificity=void 0,this.method.sd=""}alertUserAction(){this.isBlinking=!0,setTimeout(()=>{this.isBlinking=!this.isBlinking},4e3)}addNewParameter(){this.parameter&&this.value?(this.editParameterMode?(this.model.values[this.idx]={method:this.method.name,parameter:this.parameter,value:this.value,unit:this.unit},this.toastr.success("","Updated Successfully",{timeOut:5e3,positionClass:"toast-top-right"}),this.addNewUncertainty()):(this.model.values.push({method:this.method.name,parameter:this.parameter,value:this.value,unit:this.unit}),this.toastr.success("","Added Successfully",{timeOut:5e3,positionClass:"toast-top-right"}),this.addNewUncertainty(),this.resetFieldsParameter(),this.resetFieldsUncertainty()),this.parameterInserted=!0):this.parameterInserted=!1}changeSelectedOptionDOM(){var e=document.getElementById("uncertainty_term");const i=Array.from(e.options);for(const r of i)if(this.uncertainty_term==r.value){r.selected=!0;break}}resetFieldsParameter(){this.unit="",this.value="",this.parameter=""}addNewUncertainty(){this.editParameterMode?this.model.uncertainties[this.idx]={uncertainty:this.uncertainty,term:this.uncertainty_term}:this.model.uncertainties[this.model.values.length-1]={uncertainty:this.uncertainty,term:this.uncertainty_term}}openModal(){this.ModelDocumentation=void 0,$("#modelsTable").DataTable().destroy(),this.modelsService.getModels().subscribe({next:e=>{this.listAllModels=e,setTimeout(()=>{$("#modelsTable").DataTable()},200)},error:e=>{console.log(e)}})}importTable(e){this.model.input_file=e.target.files[0],this.updateService.updateTable(this.ra.name,this.model.input_file).subscribe({next:i=>{console.log("result:"),console.log(i),i.success&&(this.model.values=i.values,this.model.uncertainties=i.uncertainties,this.toastr.success("","SUCCESSFULLY IMPORTED",{timeOut:5e3,positionClass:"toast-top-right"}),document.getElementById("btncloseImportTableModal").click())},error:i=>{console.log(i),this.toastr.error("",i.error.error,{timeOut:6e3,positionClass:"toast-top-right"})}})}setLabelDocumentName(e){return e.split(".").slice(0,-1).join(".")}addDocument(){this.labelFile&&this.model.result_link&&this.updateService.updateLink(this.ra.name,this.model.result_link).subscribe({next:e=>{this.toastr.success("Document "+this.labelFile,"SUCCESSFULLY UPDATED",{timeOut:5e3,positionClass:"toast-top-right"}),this.documents.push({label:this.labelFile,File:this.model.result_link.name,include:this.includeDoc}),this.model.links=this.documents,this.labelFile="",this.model.result_link="",this.DocumentFileInput.nativeElement.value=null},error:e=>{this.toastr.error("Check the console to see more information","Failed uploaded document",{timeOut:5e3,positionClass:"toast-top-right"}),console.log(e)}})}sendlink(e){this.model.result_link=e.target.files[0],this.labelFile=this.setLabelDocumentName(e.target.files[0].name)}deleteFile(e){this.documents=this.documents.filter(i=>i.label!==e),this.model.links=this.documents}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(c1),St(d1),St(l1),St(kC),St(h1),St(u1),St(nj),St(K6))};static#t=this.\u0275cmp=bs({type:t,selectors:[["task-form"]],viewQuery:function(i,r){if(1&i&&xc(bj,5),2&i){let o;vo(o=bo())&&(r.DocumentFileInput=o.first)}},inputs:{task:"task",editMode:"editMode"},decls:1,vars:1,consts:[["taskForm","ngForm"],["DocumentFileInput",""],["methodForm","ngForm"],["sensitivityInputRef","ngModel"],["specificityInputRef","ngModel"],[4,"ngIf"],["id","taskForm",1,"container-form","mt-3",3,"ngSubmit"],[1,"d-flex","justify-content-end"],["class","btn btn-ets-do mb-2","role","button","data-bs-toggle","modal","data-bs-target","#methodModal",3,"click",4,"ngIf"],["class","btn btn-ets-do mb-2","role","button","data-bs-toggle","modal","data-bs-target","#extraInformation",3,"blink","click",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#importTableModal","role","button","class","btn btn-ets-do mb-2",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#predModal","role","button","class","btn btn-ets-do mb-2",3,"click",4,"ngIf"],["class","mt-1",4,"ngIf"],["class","mb-2",4,"ngIf"],["class","row mb-3",4,"ngIf"],[1,"row","mt-2","mb-3"],["for","inputPassword3",1,"col-2","col-form-label"],[1,"col-10"],[1,"row"],[1,"col-5"],["placeholder","","type","file",1,"form-control",3,"change"],[1,"col-auto","d-flex","flex-column"],[1,"d-flex","flex-row","justify-content-around"],["type","checkbox","name","inlineRadioOptions","id","inlineRadio1",1,"form-check-input",3,"ngModelChange","ngModel","value"],[1,"text-muted","sm-text"],["type","text","name","labelFile","placeholder","label",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-1","text-end",2,"margin-left","auto !important"],["role","button",1,"addbtn","btn","ms-auto",2,"background","rgb(250,250,250)",3,"click"],[1,"fa-solid","fa-arrow-turn-down","fa-rotate-90","fa-lg"],["class","row mt-2 mb-3",4,"ngFor","ngForOf"],[1,"row","mb-3"],["name","summary","id","summary","rows","4",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","submit","class","btn btn-ets-delete",3,"click",4,"ngIf"],[1,"col","d-flex","justify-content-end"],["type","submit",1,"btn","btn-ets-do","submit-button",3,"disabled"],["id","predModal","tabindex","-1","aria-labelledby","predModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","predModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],["class","loading-overlay",4,"ngIf"],["class","alert p-2 alert-warning","role","alert",4,"ngIf"],[1,"col-4"],["style","width: 100% !important","id","modelsTable","class","table display compact",4,"ngIf"],["class","col-8",4,"ngIf"],[1,"modal-footer"],["type","button","id","btnclosePredModal","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"btn","btn-ets-do",3,"click","disabled"],["id","importTableModal","tabindex","-1","aria-labelledby","importTableModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xs"],["id","importTableModalLabel",1,"modal-title"],[1,"modal-body"],[1,"info-import-table"],["type","button","id","btncloseImportTableModal","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","extraInformation","tabindex","-1","aria-labelledby","extraInformation","aria-hidden","true",1,"modal","fade"],["id","extraInformationLabel",1,"modal-title","fw-bold"],[1,"col","pb-3"],["id","method",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col"],["for","Parameter",1,"form-label"],["name","parameter","placeholder","","type","text","id","parameter",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-3"],["for","value",1,"form-label"],["type","text","name","value","id","value",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"col-1"],["for","unit",1,"form-label"],["placeholder","","type","text","name","unit","id","unit",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","mt-2"],["name","uncertainty","type","text","id","uncertainty",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"col-auto"],["type","text","id","uncertainty_term",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger mt-2",4,"ngIf"],["role","button",1,"btn","btn-ets-do",3,"click"],["type","button","id","btncloseImportTableModal","data-bs-dismiss","modal",1,"btn","btn-ets-bad"],["id","methodModal","tabindex","-1","aria-labelledby","methodModal","aria-hidden","true",1,"modal","fade"],["id","methodModaLabel",1,"modal-title","fw-bold"],["for","name",1,"form-label"],["name","name","placeholder","","type","text","id","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["type","text","name","description","id","description",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["for","link",1,"form-label"],["placeholder","","type","text","name","link","id","link",1,"form-control",3,"ngModelChange","ngModel"],["for","sensitivity",1,"form-label"],["type","number","min","0","max","1","step","0.01","name","sensitivity","id","sensitivity",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0","max","1","step","0.01","id","specificity","name","specificity",1,"form-control",3,"ngModelChange","ngModel"],["for","sd",1,"form-label"],["type","string","id","sd","name","sd",1,"form-control",3,"ngModelChange","ngModel"],["style","font-weight: bold !important;","class","text-warning  mt-2",4,"ngIf"],["role","button",1,"btn","btn-ets-do",3,"click","disabled"],["role","button","data-bs-toggle","modal","data-bs-target","#methodModal",1,"btn","btn-ets-do","mb-2",3,"click"],["role","button","data-bs-toggle","modal","data-bs-target","#extraInformation",1,"btn","btn-ets-do","mb-2",3,"click"],["data-bs-toggle","modal","data-bs-target","#importTableModal","role","button",1,"btn","btn-ets-do","mb-2"],["data-bs-toggle","modal","data-bs-target","#predModal","role","button",1,"btn","btn-ets-do","mb-2",3,"click"],[1,"mt-1"],[1,"table-header"],[1,"table","table-bordered",2,"width","100%"],[2,"width","10%"],[2,"width","30%"],[2,"width","5%"],[4,"ngFor","ngForOf"],[1,"d-flex"],["class","btn btn-ets-delete","role","button",3,"click",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#methodModal","class","btn btn-ets-do pr-4",3,"click",4,"ngIf"],["role","button",1,"btn","btn-ets-delete",3,"click"],["data-bs-toggle","modal","data-bs-target","#methodModal",1,"btn","btn-ets-do","pr-4",3,"click"],[1,"mb-2"],[2,"width","25%"],["role","button","data-bs-toggle","modal","data-bs-target","#extraInformation",1,"btn","btn-ets-do","pr-4",3,"click"],["rows","4","required","","type","text","name","report","id","report",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","text","readonly","",1,"form-control-plaintext","text-center",3,"value"],[2,"text-align","center !important","margin-top","7px"],["style","text-align: center;","class","fa-solid fa-check-to-slot fa-lg",4,"ngIf"],["role","button",1,"btn","ms-auto",3,"click"],[1,"fa-solid","fa-circle-minus","fa-lg",2,"color","#e01b24"],[1,"fa-solid","fa-check-to-slot","fa-lg",2,"text-align","center"],["type","submit",1,"btn","btn-ets-delete",3,"click"],[1,"loading-overlay"],["role","status",1,"spinner-border",2,"width","10rem","height","10rem"],[1,"visually-hidden"],["role","alert",1,"alert","p-2","alert-warning"],["id","modelsTable",1,"table","display","compact",2,"width","100% !important"],[2,"width","10% !important"],[2,"width","70% !important"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],["type","checkbox","id","flexCheckDefault",1,"form-check-input","text-center",3,"change"],[1,"col-8"],[3,"documentation"],[3,"ngValue"],[1,"text-danger","mt-2"],[1,"text-warning","mt-2",2,"font-weight","bold !important"]],template:function(i,r){1&i&&_n(0,$j,168,40,"div",5),2&i&&ht("ngIf",r.pending_task)},dependencies:[iN,Sp,Od,wC,CC,TC,i1,GD,fS,z_,z0,gC,gb,e4,JD,Tg,U_,yj,vj],styles:[".title[_ngcontent-%COMP%]{margin-top:40px;font-size:45px;font-family:Verdana,sans-serif;color:#734e81}.btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.nav[_ngcontent-%COMP%]{background-color:none!important}.nav-link[_ngcontent-%COMP%]{color:#734e81;font-size:1rem}.nav-link.active[_ngcontent-%COMP%]{background:none!important;color:#734e81;font-weight:700;font-size:1rem;border-bottom:3px solid #935277;border-radius:0}@keyframes _ngcontent-%COMP%_blink{0%{background-color:#474286}50%{background-color:#ec8229}to{background-color:#474286}}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 2s 3}#taskForm[_ngcontent-%COMP%], #extraInformation[_ngcontent-%COMP%], #methodModal[_ngcontent-%COMP%]{color:#734e81}.addbtn[_ngcontent-%COMP%]{color:#935277}.info-import-table[_ngcontent-%COMP%]{margin-left:5px;color:#734e81;font-weight:700}#predModal[_ngcontent-%COMP%]{color:#474286}#predModal[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#734e81}.selected-row[_ngcontent-%COMP%]{background-color:#474286;color:#fff}.sm-text[_ngcontent-%COMP%]{font-size:13.5px!important}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0000001a;display:flex;align-items:center;justify-content:center;z-index:1000;pointer-events:none}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;pointer-events:auto}.table-header[_ngcontent-%COMP%]{background-color:#734e81;color:#fff;padding-left:5px;font-weight:bolder}th[_ngcontent-%COMP%]{color:#734e81}"]})}return t})(),s8=(()=>{class t{transform(e){if(e){const i=e.indexOf(" ");if(-1!==i)return e.substring(0,i)}return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=Yo({name:"formatDate",type:t,pure:!0})}return t})(),o8=(()=>{class t{transform(e,...i){const r=parseFloat(e);return isNaN(r)?e:r.toFixed(3)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=Yo({name:"truncateDecimals",type:t,pure:!0})}return t})();function Gj(t,n){if(1&t&&(L(0,"option",27),_e(1),P()),2&t){const e=n.$implicit,i=at(2);ht("value",i.pendingTasks.results[e].id),ye(),ir(" ",i.pendingTasks.results[e].label," ")}}function Yj(t,n){1&t&&(it(0,"div",34),cu(1,"autolinkPipe")),2&t&&ht("innerHTML",_f(1,1,at(3).pending_task["task description"].description),po)}function Xj(t,n){if(1&t&&(L(0,"span")(1,"a",36),_e(2),P(),it(3,"br"),P()),2&t){const e=n.$implicit;ye(),ht("href",e,ra),ye(),Hi(e)}}function qj(t,n){if(1&t&&(L(0,"div",31)(1,"div"),_n(2,Xj,4,2,"span",35),P()()),2&t){const e=at(3);ye(2),ht("ngForOf",e.pending_task["task description"].method_link)}}function Kj(t,n){if(1&t&&it(0,"task-form",37),2&t){const e=at(3);ht("editMode",!1)("task",e.pending_task)}}function Zj(t,n){if(1&t&&(L(0,"div",28)(1,"div",29)(2,"div",16)(3,"div",30)(4,"strong"),_e(5,"Name"),P()(),L(6,"div",31),_e(7),P()(),L(8,"div",16)(9,"div",30)(10,"strong"),_e(11,"Description"),P()(),_n(12,Yj,2,3,"div",32),P(),L(13,"div",16)(14,"div",30)(15,"strong"),_e(16,"Method links"),P()(),_n(17,qj,3,1,"div",33),P()(),_n(18,Kj,1,2,"task-form",23),P()),2&t){const e=at(2);ye(7),ir(" ",e.pending_task["task description"].name," "),ye(5),ht("ngIf",e.pending_task["task description"].description),ye(5),ht("ngIf","local_models"!==e.pending_task["task description"].method_link[0]),ye(),ht("ngIf",e.pending_task)}}function Qj(t,n){if(1&t){const e=ct();L(0,"div")(1,"div",16)(2,"div",17)(3,"select",24),Vn("change",function(){return on(e),rn(at().getPendingTask())}),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.pending_task_selected,r)||(o.pending_task_selected=r),rn(r)}),_n(4,Gj,2,2,"option",25),P(),_n(5,Zj,19,4,"div",26),P()()()}if(2&t){const e=at();ye(3),fs("ngModel",e.pending_task_selected),ye(),ht("ngForOf",e.objectKeys(e.pendingTasks.results)),ye(),ht("ngIf",null==e.pending_task?null:e.pending_task.result)}}function Jj(t,n){1&t&&_e(0,"No pending Tasks")}function e$(t,n){1&t&&(L(0,"span"),_e(1,"..."),P())}function t$(t,n){if(1&t&&(L(0,"td"),_e(1),_n(2,e$,2,0,"span",40),P()),2&t){const e=at().$implicit;ye(),mk(" ",e.values[0].parameter,",",e.values[0].value,",",e.values[0].unit," "),ye(),ht("ngIf",e.values.length>0)}}function n$(t,n){if(1&t&&(L(0,"td"),_e(1),cu(2,"slice"),P()),2&t){const e=at().$implicit;ye(),ir(" ",qw(2,1,e.values[0],0,20),"... ")}}function i$(t,n){if(1&t){const e=ct();L(0,"tr",38),Vn("click",function(){const r=on(e).$implicit;return rn(at().selectTask(r.id))}),L(1,"td"),_e(2),cu(3,"formatDate"),P(),L(4,"td",39),_e(5),P(),L(6,"td"),_e(7),P(),L(8,"td"),_e(9),cu(10,"slice"),P(),_n(11,t$,3,4,"td",8)(12,n$,3,5,"ng-template",null,1,Nd),P()}if(2&t){const e=n.$implicit,i=Ec(13),r=at();ye(2),Hi(_f(3,7,e.date)),ye(2),pk("id",e.id),ye(),Hi(e.label),ye(2),Hi(e.name),ye(2),ir("",qw(10,9,e.summary,0,150),"..."),ye(2),ht("ngIf",r.isObject(e.values[0]))("ngIfElse",i)}}function r$(t,n){1&t&&(it(0,"div",34),cu(1,"autolinkPipe")),2&t&&ht("innerHTML",_f(1,1,at(2).results.resultSelected["task description"].description),po)}function s$(t,n){if(1&t&&(L(0,"span")(1,"a",36),_e(2),P(),it(3,"br"),P()),2&t){const e=n.$implicit;ye(),ht("href",e,ra),ye(),Hi(e)}}function o$(t,n){if(1&t&&(L(0,"div",31)(1,"div"),_n(2,s$,4,2,"span",35),P()()),2&t){const e=at(2);ye(2),ht("ngForOf",e.results.resultSelected["task description"].method_link)}}function a$(t,n){1&t&&(L(0,"div",52),_e(1," Report "),P())}function l$(t,n){1&t&&(L(0,"div",55),_e(1," Methods "),P())}function c$(t,n){if(1&t&&(L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),P(),L(5,"td"),_e(6),P(),L(7,"td"),_e(8),P(),L(9,"td"),_e(10),P(),L(11,"td"),_e(12),P()()),2&t){const e=n.$implicit;ye(2),ir(" ",e.name," "),ye(2),Hi(e.description),ye(2),Hi(e.sensitivity),ye(2),Hi(e.specificity),ye(2),Hi(e.sd),ye(2),Hi(e.link)}}function u$(t,n){if(1&t&&(L(0,"table",56)(1,"thead",57)(2,"tr")(3,"th",58),_e(4,"Name"),P(),L(5,"th",59),_e(6,"Description"),P(),L(7,"th",58),_e(8,"Sensitivity"),P(),L(9,"th",58),_e(10,"Specificity"),P(),L(11,"th",58),_e(12,"SD"),P(),L(13,"th",58),_e(14,"Link"),P()()(),L(15,"tbody"),_n(16,c$,13,6,"tr",35),P()()),2&t){const e=at(2);ye(16),ht("ngForOf",e.results.resultSelected.result.methods)}}function d$(t,n){1&t&&(L(0,"div",55),_e(1," Values "),P())}function h$(t,n){if(1&t&&(L(0,"tbody")(1,"tr")(2,"td"),_e(3),P(),L(4,"td"),_e(5),P(),L(6,"td"),_e(7),P(),L(8,"td"),_e(9),cu(10,"truncateDecimals"),P(),L(11,"td"),_e(12),P(),L(13,"td"),_e(14),P(),L(15,"td"),_e(16),P()()()),2&t){const e=n.$implicit,i=at(3);ye(3),ir(" ",i.results.resultSelected.result.values[e].substance," "),ye(2),ir(" ",i.results.resultSelected.result.values[e].method," "),ye(2),ir(" ",i.results.resultSelected.result.values[e].parameter," "),ye(2),ir(" ",_f(10,7,i.results.resultSelected.result.values[e].value)," "),ye(3),ir(" ",i.results.resultSelected.result.values[e].unit," "),ye(2),ir(" ",null==i.results.resultSelected.result||null==i.results.resultSelected.result.uncertainties[e]?null:i.results.resultSelected.result.uncertainties[e].uncertainty," "),ye(2),ir(" ",null==i.results.resultSelected.result||null==i.results.resultSelected.result.uncertainties[e]?null:i.results.resultSelected.result.uncertainties[e].term," ")}}function f$(t,n){if(1&t&&(L(0,"table",56)(1,"thead",57)(2,"tr")(3,"th",60),_e(4,"Substance"),P(),L(5,"th"),_e(6,"Method"),P(),L(7,"th"),_e(8,"Parameter"),P(),L(9,"th"),_e(10,"Value"),P(),L(11,"th"),_e(12,"Unit"),P(),L(13,"th"),_e(14,"Uncertainty"),P(),L(15,"th"),_e(16,"Term"),P()()(),_n(17,h$,17,9,"tbody",35),P()),2&t){const e=at(2);ye(17),ht("ngForOf",e.objectKeys(e.results.resultSelected.result.values))}}function p$(t,n){if(1&t&&(L(0,"div",61),_e(1),P()),2&t){const e=at(2);ye(),Hi(e.results.resultSelected.result.values[0])}}function g$(t,n){1&t&&it(0,"div",52)}function m$(t,n){if(1&t&&(L(0,"div",45)(1,"table",63)(2,"thead",57)(3,"th"),_e(4,"Uncertainty"),P(),L(5,"th"),_e(6,"Term"),P()(),L(7,"tbody")(8,"tr")(9,"td"),_e(10),P(),L(11,"td"),_e(12),P(),L(13,"td"),_e(14),P()()()()()),2&t){const e=at(3);ye(10),ir(" ",null==e.results.resultSelected.result||null==e.results.resultSelected.result.uncertainties[0]?null:e.results.resultSelected.result.uncertainties[0].uncertainty," "),ye(2),ir(" ",null==e.results.resultSelected.result||null==e.results.resultSelected.result.uncertainties[0]?null:e.results.resultSelected.result.uncertainties[0].p," "),ye(2),ir(" ",null==e.results.resultSelected.result||null==e.results.resultSelected.result.uncertainties[0]?null:e.results.resultSelected.result.uncertainties[0].term," ")}}function _$(t,n){if(1&t&&(L(0,"div",43),_n(1,g$,1,0,"div",44)(2,m$,15,3,"div",62),P()),2&t){const e=at(2);ye(),ht("ngIf","text"!=e.results.resultSelected.result.result_type),ye(),ht("ngIf","text"!=e.results.resultSelected.result.result_type)}}function y$(t,n){if(1&t&&(L(0,"div",43)(1,"div",52),_e(2,"Uncertainty"),P(),L(3,"div",45),_e(4),P()()),2&t){const e=at(2);ye(4),ir(" ",e.results.resultSelected.result.uncertainty," ")}}function v$(t,n){if(1&t){const e=ct();L(0,"div",66)(1,"button",67),Vn("click",function(){const r=on(e).$implicit,o=at(3);return rn(o.downloadFile(o.results.resultSelected.result.links[r].File))}),_e(2),P()()}if(2&t){const e=n.$implicit,i=at(3);ye(2),ir(" ",i.results.resultSelected.result.links[e].label," ")}}function b$(t,n){if(1&t&&(L(0,"div",43)(1,"div",64),_e(2," Documentation "),P(),L(3,"div",45),_n(4,v$,3,1,"div",65),P()()),2&t){const e=at(2);ye(4),ht("ngForOf",e.objectKeys(e.results.resultSelected.result.links))}}function w$(t,n){if(1&t&&(L(0,"div")(1,"div",68),it(2,"img",69),L(3,"div",29)(4,"p",70),_e(5),P()()()()),2&t){const e=n.$implicit;ye(2),ht("src",e.link,ra),ye(3),Hi(e.name)}}function C$(t,n){if(1&t&&(L(0,"tr")(1,"td",73),_e(2),P(),L(3,"td",73),_e(4),P(),L(5,"td",72),it(6,"canvas",39),P()()),2&t){const e=n.$implicit,i=at(3);ye(2),ir(" ",i.results.resultSelected.result.substance[e].name," "),ye(2),ir(" ",i.results.resultSelected.result.substance[e].CASRN," "),ye(2),ht("id","taskCanvas"+e)}}function T$(t,n){if(1&t&&(L(0,"div",43)(1,"div",30),_e(2,"Substance"),P(),L(3,"div",17)(4,"table",71)(5,"thead",57)(6,"tr")(7,"th",72),_e(8,"Name"),P(),L(9,"th",72),_e(10,"CASRN"),P(),L(11,"th",72),_e(12,"SMILES"),P()()(),L(13,"tbody"),_n(14,C$,7,3,"tr",35),P()()()()),2&t){const e=at(2);ye(14),ht("ngForOf",e.objectKeys(e.results.resultSelected.result.substance))}}function x$(t,n){if(1&t){const e=ct();L(0,"div",41),it(1,"hr"),L(2,"div",42)(3,"div",16)(4,"div",30)(5,"strong"),_e(6,"Date"),P()(),L(7,"div",31),_e(8),P()(),L(9,"div",16)(10,"div",30)(11,"strong"),_e(12,"Name"),P()(),L(13,"div",31),_e(14),P()(),L(15,"div",16)(16,"div",30)(17,"strong"),_e(18,"Description"),P()(),_n(19,r$,2,3,"div",32),P(),L(20,"div",16)(21,"div",30)(22,"strong"),_e(23,"Method links"),P()(),_n(24,o$,3,1,"div",33),P()(),L(25,"div",29)(26,"div",43),_n(27,a$,2,0,"div",44),L(28,"div",45),_n(29,l$,2,0,"div",46)(30,u$,17,1,"table",47)(31,d$,2,0,"div",46)(32,f$,18,1,"table",48)(33,p$,2,1,"div",49),P()(),_n(34,_$,3,2,"div",50)(35,y$,5,1,"div",50)(36,b$,5,1,"div",50),L(37,"div",51),_n(38,w$,6,2,"div",35),P(),L(39,"div",43)(40,"div",52),_e(41,"Summary"),P(),L(42,"div",53),_e(43),P()(),_n(44,T$,15,1,"div",50),L(45,"div",16)(46,"button",54),Vn("click",function(){return on(e),rn(at().editTask())}),_e(47," Edit "),P()()()()}if(2&t){const e=at();ye(8),ir(" ",e.results.resultSelected.result.date," "),ye(6),ir(" ",e.results.resultSelected["task description"].name," "),ye(5),ht("ngIf",e.results.resultSelected["task description"].description),ye(5),ht("ngIf","local_models"!==e.results.resultSelected["task description"].method_link[0]),ye(3),ht("ngIf","text"===e.results.resultSelected.result.result_type),ye(2),ht("ngIf","text"!=e.results.resultSelected.result.result_type),ye(),ht("ngIf","text"!=e.results.resultSelected.result.result_type),ye(),ht("ngIf",e.isObject(e.results.resultSelected.result.values[0])),ye(),ht("ngIf",e.isObject(e.results.resultSelected.result.values[0])),ye(),ht("ngIf","text"===e.results.resultSelected.result.result_type),ye(),ht("ngIf","text"===e.results.resultSelected.result.result_type),ye(),ht("ngIf",e.results.resultSelected.result.uncertainty),ye(),ht("ngIf",e.results.resultSelected.result.links),ye(2),ht("ngForOf",e.listImages),ye(5),Hi(e.results.resultSelected.result.summary),ye(),ht("ngIf",(null==e.results.resultSelected||null==e.results.resultSelected.result||null==e.results.resultSelected.result.substance?null:e.results.resultSelected.result.substance.length)>1)}}function E$(t,n){if(1&t&&it(0,"task-form",37),2&t){const e=at();ht("editMode",!0)("task",e.results.resultSelected)}}let S$=(()=>{class t{constructor(e,i,r,o,l){this.ra=e,this.commonService=i,this.pendingTasks=r,this.results=o,this.global=l,this.loadForm=!1,this.pending_task_selected="",this.objectKeys=Object.keys,this.parameters=[],this.files=[],this.labelFile="",this.documents=[],this.report="",this.listModelsSelected=[],this.loadEditForm=!1,this.listImages=[]}ngOnInit(){this.commonService.generateForms$.subscribe(e=>{this.pendingTasks.results[0]&&(this.pending_task_selected=e||this.pendingTasks.results[0].id,this.getPendingTask())})}isImage(){this.listImages=[],console.log(this.listImages);var e=["jpeg","png","jpg"];this.results.resultSelected.result.links.forEach(i=>{const r=i.File.split(".").pop();e.includes(r)&&this.commonService.getLink(this.ra.name,i.File).subscribe({next:o=>{const l=new Blob([o],{type:"application/octet-stream"}),h=new FileReader;h.readAsDataURL(l),h.onloadend=()=>{this.listImages.push({name:i.label,link:h.result})}},error:o=>console.log(o)})})}editTask(){this.pending_task=!1,this.global.editModeTasks=!this.global.editModeTasks}downloadFile(e){e&&this.commonService.getLink(this.ra.name,e).subscribe({next:i=>{const r=new Blob([i],{type:"application/octet-stream"});(0,DC.saveAs)(r,e)},error:i=>console.log(i)})}drawMol(){for(let e=0;e<this.results.resultSelected.substance.length;e++){let i=new _b.Drawer({width:200,height:150});_b.parse(this.results.resultSelected.substance[e].SMILES,function(r){i.draw(r,"taskCanvas"+e,"light",!1)},function(r){console.log(r)})}}selectTask(e){this.commonService.getTask(this.ra.name,e).subscribe(i=>{this.results.resultSelected=i,Array.isArray(this.results.resultSelected.substance)||(this.results.resultSelected.substance=[this.results.resultSelected.substance]),setTimeout(()=>{this.results.resultSelected?.substance.length>1&&this.drawMol(),this.isImage()},300)}),$("#tableCollapseTasks").click(),$("#pastCollapseTasks").click()}showTablePastTasks(){$("#tableCollapseTasks").click()}isObject(e){return"object"==typeof e}getPendingTask(){this.global.editModeTasks=!1,this.pending_task=!1,this.commonService.getPendingTask(this.ra.name,this.pending_task_selected).subscribe({next:e=>{this.pending_task=e},error:e=>console.log(e)})}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(c1),St(l1),St(u1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-tasks"]],decls:45,vars:6,consts:[["noTasks",""],["reportTD",""],["id","results-tab","role","tablist",1,"nav","nav-pills"],["role","presentation",1,"nav-item"],["id","pills-pendingtask-tab","data-bs-toggle","pill","data-bs-target","#pills-pendingtask","type","button","role","tab","aria-controls","pills-pendingtask","aria-selected","True",1,"nav-link","active"],["id","pills-pasttasks-tab","data-bs-toggle","pill","data-bs-target","#pills-pasttasks","type","button","role","tab","aria-controls","pills-pasttasks","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content","container-fluid"],["id","pills-pendingtask","role","tabpanel","aria-labelledby","pills-pendingtask-tab",1,"tab-pane","fade","show","active","mt-2"],[4,"ngIf","ngIfElse"],["id","pills-pasttasks","role","tabpanel","aria-labelledby","pills-pasttasks-tab",1,"tab-pane","fade"],["id","accordionTasks",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","flush-headingTwoTasks",1,"accordion-header"],["id","tableCollapseTasks","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOneTasks","aria-expanded","false","aria-controls","flush-collapseOneTasks",1,"accordion-button","collapsed"],["id","flush-collapseOneTasks","aria-labelledby","flush-headingOneTasks","data-bs-parent","#accordionTasks",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"row"],[1,"col"],["id","dtTasks",1,"display","compact"],[3,"click",4,"ngFor","ngForOf"],["id","pastCollapseTasks","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseTwoTasks","aria-expanded","true","aria-controls","flush-collapseTwoTasks",1,"accordion-button","collapsed",3,"click"],["id","flush-collapseTwoTasks","aria-labelledby","flush-headingTwoTasks","data-bs-parent","#accordionTasks",1,"accordion-collapse","collapse"],["class","mt-2",4,"ngIf"],[3,"editMode","task",4,"ngIf"],["id","selectPendingResult","aria-label","Default select example",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","container-information mt-2 ml-2",4,"ngIf"],[3,"value"],[1,"container-information","mt-2","ml-2"],[1,"card-body"],[1,"col-2","text"],[1,"col-10"],["class","col-10",3,"innerHTML",4,"ngIf"],["class","col-10",4,"ngIf"],[1,"col-10",3,"innerHTML"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[3,"editMode","task"],[3,"click"],[3,"id"],[4,"ngIf"],[1,"mt-2"],[1,"card-body","mb-3"],[1,"row","pt-1","pb-1"],["class","col-2 text border-bottom",4,"ngIf"],[1,"col","border-bottom"],["class","table-header",4,"ngIf"],["style","width: 100% !important;","class","table table-bordered",4,"ngIf"],["class","table table-bordered","style","width:100% !important",4,"ngIf"],["class","col formatted-text",4,"ngIf"],["class","row pt-1 pb-1",4,"ngIf"],[1,"d-flex","p-1","justify-content-around"],[1,"col-2","text","border-bottom"],[1,"col","border-bottom","formatted-text"],[1,"btn","btn-ets-edit",3,"click"],[1,"table-header"],[1,"table","table-bordered",2,"width","100% !important"],[1,"text"],[2,"width","10%"],[2,"width","30%"],[2,"width","15%"],[1,"col","formatted-text"],["class","col border-bottom",4,"ngIf"],[1,"table","table-borderless"],[1,"col-2","text","border-bottom","d-flex","align-items-center"],["class","d-inline mx-1",4,"ngFor","ngForOf"],[1,"d-inline","mx-1"],[1,"btn","btn-outline-success","mt-2","mb-2",3,"click"],[1,"card",2,"width","18rem"],["width","288","height","288","alt","",3,"src"],[1,"card-text","text"],["id","dtSubstancesTasks",1,"table","table-borderless"],[2,"text-align","center"],[2,"vertical-align","middle","text-align","center"]],template:function(i,r){if(1&i){const o=ct();L(0,"ul",2)(1,"li",3)(2,"button",4),_e(3," Pending "),P()(),L(4,"li",3)(5,"button",5),_e(6," Completed "),P()()(),L(7,"div",6)(8,"div",7),_n(9,Qj,6,3,"div",8)(10,Jj,1,0,"ng-template",null,0,Nd),P(),L(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2",12)(16,"button",13),_e(17," Completed Task "),P()(),L(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17)(22,"table",18)(23,"thead")(24,"tr")(25,"th"),_e(26,"Date"),P(),L(27,"th"),_e(28,"Label"),P(),L(29,"th"),_e(30,"Name"),P(),L(31,"th"),_e(32,"Summary"),P(),L(33,"th"),_e(34,"Value"),P()()(),L(35,"tbody"),_n(36,i$,14,13,"tr",19),P()()()()()()(),L(37,"div",11)(38,"h2",12)(39,"button",20),Vn("click",function(){return on(o),rn(r.showTablePastTasks())}),_e(40),P()(),L(41,"div",21)(42,"div",15),_n(43,x$,48,16,"div",22)(44,E$,1,2,"task-form",23),P()()()()()()}if(2&i){const o=Ec(11);ye(9),ht("ngIf",r.pendingTasks.results.length>0)("ngIfElse",o),ye(27),ht("ngForOf",r.results.results),ye(4),ir(" ",null==r.results||null==r.results.resultSelected["task description"]?null:r.results.resultSelected["task description"].label," "),ye(3),ht("ngIf",r.results.resultSelected.result&&!r.global.editModeTasks),ye(),ht("ngIf",r.global.editModeTasks)}},dependencies:[Sp,Od,CC,TC,z_,z0,Tg,Wj,ZE,s8,i4,o8],styles:[".title[_ngcontent-%COMP%]{margin-top:40px;font-size:45px;font-family:Verdana,sans-serif;color:#734e81}.btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.nav[_ngcontent-%COMP%]{background-color:none!important}.nav-link[_ngcontent-%COMP%]{color:#734e81;font-size:1rem}.nav-link.active[_ngcontent-%COMP%]{background:none!important;color:#734e81;font-weight:700;font-size:1rem;border-bottom:3px solid #935277;border-radius:0}.multiple-value[_ngcontent-%COMP%]{background-color:#f3f3f3!important}#dtTasks[_ngcontent-%COMP%]{padding-top:10px}#dtTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#474286;color:#fff}#dtTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:20%!important}#dtTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%!important}#dtTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%!important}#dtTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:25%!important}#dtTasks[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;padding:0 10px!important}#dtSubstancesTasks[_ngcontent-%COMP%]{table-layout:fixed;width:100%}#dtSubstancesTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%!important}#dtSubstancesTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:20%!important}#dtSubstancesTasks[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:50%!important}hr[_ngcontent-%COMP%]{height:3px;background-color:#935277;border:None}.text[_ngcontent-%COMP%], .container-form[_ngcontent-%COMP%], .modal-title[_ngcontent-%COMP%], #modelsTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#734e81}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#00000020}.accordion-button[_ngcontent-%COMP%]{background-color:#f8f6f6!important;color:#734e81!important}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:#f8f6f6!important;color:#734e81!important}li[_ngcontent-%COMP%]{padding-left:2px}.formatted-text[_ngcontent-%COMP%]{white-space:pre-wrap!important}.table-header[_ngcontent-%COMP%]{background-color:#935277;color:#fff;padding-left:5px;font-weight:bolder}"]})}return t})();const A$=["DocumentFile"];function k$(t,n){1&t&&it(0,"i",43)}function D$(t,n){if(1&t){const e=ct();L(0,"div",19),it(1,"label",8),L(2,"div",17)(3,"div",20)(4,"div",36),it(5,"input",37),P(),L(6,"div",38)(7,"div",39),_n(8,k$,1,0,"i",40),P()(),L(9,"div",38)(10,"a",41),Vn("click",function(){const r=on(e).$implicit,o=at(2);return rn(o.deleteFile(o.documents[r].label))}),it(11,"i",42),P()()()()()}if(2&t){const e=n.$implicit,i=at(2);ye(5),ht("value",i.documents[e].label),ye(3),ht("ngIf",i.documents[e].include)}}function M$(t,n){if(1&t){const e=ct();L(0,"button",44),Vn("click",function(){return on(e),rn(at(2).back())}),_e(1," Back "),P()}}function I$(t,n){if(1&t){const e=ct();L(0,"form",6,0),Vn("ngSubmit",function(){return on(e),rn(at().onSubmit())}),L(2,"div",7)(3,"label",8),_e(4,"Decision:"),P(),L(5,"div",9)(6,"div",10)(7,"input",11),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.model.decision,r)||(o.model.decision=r),rn(r)}),P(),L(8,"label",12),_e(9,"Yes"),P()(),L(10,"div",10)(11,"input",13),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.model.decision,r)||(o.model.decision=r),rn(r)}),P(),L(12,"label",14),_e(13,"No"),P()()(),L(14,"div",15)(15,"a",16),Vn("click",function(){return on(e),rn(at().openSupportModal())}),_e(16,"support"),P()()(),L(17,"div",7)(18,"label",8),_e(19,"Justification*:"),P(),L(20,"div",17)(21,"textarea",18),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.model.justification,r)||(o.model.justification=r),rn(r)}),P()()(),L(22,"div",19)(23,"label",8),_e(24,"Documentation:"),P(),L(25,"div",17)(26,"div",20)(27,"div",21)(28,"input",22,1),Vn("change",function(r){return on(e),rn(at().sendlink(r))}),P()(),L(30,"div",23)(31,"div",24)(32,"input",25),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.includeDoc,r)||(o.includeDoc=r),rn(r)}),P()(),L(33,"span",26),_e(34,"Include"),P()(),L(35,"div",21)(36,"input",27),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.labelFile,r)||(o.labelFile=r),rn(r)}),P()(),L(37,"div",28)(38,"a",29),Vn("click",function(){return on(e),rn(at().addDocument())}),it(39,"i",30),P()()()()(),_n(40,D$,12,2,"div",31),L(41,"div",7)(42,"label",8),_e(43,"Summary:"),P(),L(44,"div",17)(45,"textarea",32),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.model.summary,r)||(o.model.summary=r),rn(r)}),P()()(),L(46,"div",20)(47,"div",17),_n(48,M$,2,0,"button",33),P(),L(49,"div",34)(50,"button",35),_e(51," Submit "),P()()()()}if(2&t){const e=Ec(1),i=at();ye(7),ht("disabled",i.editMode),fs("ngModel",i.model.decision),ht("value",!0),ye(4),ht("disabled",i.editMode),fs("ngModel",i.model.decision),ht("value",!1),ye(10),ht("placeholder",i.pending_task["task description"].justification),fs("ngModel",i.model.justification),ye(11),ht("disabled",i.editMode),fs("ngModel",i.includeDoc),ht("value",!0),ye(4),fs("ngModel",i.labelFile),ye(4),ht("ngForOf",i.objectKeys(i.documents)),ye(5),ht("placeholder",i.pending_task["task description"].summary),fs("ngModel",i.model.summary),ye(3),ht("ngIf",i.editMode),ye(2),ht("disabled",e.invalid)}}function N$(t,n){if(1&t&&(L(0,"td",58),_e(1),P()),2&t){const e=at().$implicit,i=at(2);ye(),ir(" ",i.upstream_tasks[e].values," ")}}function O$(t,n){if(1&t&&(L(0,"tr")(1,"td"),_e(2),P(),L(3,"td"),_e(4),cu(5,"truncateDecimals"),P(),L(6,"td"),_e(7),P(),L(8,"td"),_e(9),P(),L(10,"td"),_e(11),P(),L(12,"td"),_e(13),P(),L(14,"td"),_e(15),P(),L(16,"td"),_e(17),P()()),2&t){const e=n.$implicit,i=n.index,r=at(2).$implicit,o=at(2);ye(2),Hi(e.parameter),ye(2),Hi(_f(5,8,e.value)),ye(3),Hi(e.unit),ye(2),Hi(o.upstream_tasks[r].uncertainties[i].uncertainty),ye(2),Hi(null==o.upstream_tasks[r].methods[i]?null:o.upstream_tasks[r].methods[i].name),ye(2),Hi(null==o.upstream_tasks[r].methods[i]?null:o.upstream_tasks[r].methods[i].specificity),ye(2),Hi(null==o.upstream_tasks[r].methods[i]?null:o.upstream_tasks[r].methods[i].sensitivity),ye(2),Hi(null==o.upstream_tasks[r].methods[i]?null:o.upstream_tasks[r].methods[i].sd)}}function R$(t,n){if(1&t&&(L(0,"td",59)(1,"table",60)(2,"thead")(3,"tr")(4,"th",61),_e(5,"Parameter"),P(),L(6,"th",61),_e(7,"Value"),P(),L(8,"th",61),_e(9,"Unit"),P(),L(10,"th",62),_e(11,"Uncertainty"),P(),L(12,"th",61),_e(13,"Method"),P(),L(14,"th",61),_e(15,"Specificity"),P(),L(16,"th",61),_e(17,"Sensitivity"),P(),L(18,"th",63),_e(19,"SD"),P()()(),L(20,"tbody"),_n(21,O$,18,10,"tr",53),P()()()),2&t){const e=at().$implicit,i=at(2);ye(21),ht("ngForOf",i.upstream_tasks[e].values)}}function P$(t,n){if(1&t&&(L(0,"tr")(1,"td"),_e(2),P(),_n(3,N$,2,1,"td",56)(4,R$,22,1,"td",57),P()),2&t){const e=n.$implicit,i=at(2);ye(2),Hi(i.upstream_tasks[e].name),ye(),ht("ngIf",i.isReportOrParameters(i.upstream_tasks[e].values)),ye(),ht("ngIf",!i.isReportOrParameters(i.upstream_tasks[e].values))}}function F$(t,n){if(1&t&&(L(0,"div",45)(1,"div",46)(2,"h1",47),_e(3),L(4,"span",48),_e(5),P()(),it(6,"button",49),P(),L(7,"div",50)(8,"div",20)(9,"table",51)(10,"thead",52)(11,"tr")(12,"th"),_e(13,"Upstream task"),P(),L(14,"th"),_e(15,"Result"),P()()(),L(16,"tbody"),_n(17,P$,5,3,"tr",53),P()()()(),L(18,"div",54)(19,"button",55),_e(20," Close "),P()()()),2&t){const e=at();ye(3),ir(" ",e.pending_task["task description"].name," "),ye(2),ir(" ",e.pending_task["task description"].description," "),ye(12),ht("ngForOf",e.objectKeys(e.upstream_tasks))}}let L$=(()=>{class t{constructor(e,i,r,o,l,h,g){this.commonService=e,this.ra=i,this.updateService=r,this.toastr=o,this.pendingTasks=l,this.func=h,this.global=g,this.documents=[],this.pending_task_selected_id="",this.labelFile="",this.objectKeys=Object.keys,this.popupX=300,this.popupY=450,this.includeDoc=!0,this.isDragging=!1,this.dragOffsetX=0,this.dragOffsetY=0}isReportOrParameters(e){return e.length>0&&"string"==typeof e[0]}ngOnInit(){setTimeout(()=>{this.pending_task=this.task,this.model=this.task.result,this.documents=this.model.links},100)}openSupportModal(){console.log("values:"),this.commonService.getUpstreamTasks(this.ra.name,this.pending_task.result.id).subscribe({next:e=>{console.log("support modal endpoint"),console.log(e),this.upstream_tasks=e},error:e=>{console.log(e)}})}onDrag(e){this.isDragging&&(this.popupX=e.clientX-this.dragOffsetX,this.popupY=e.clientY-this.dragOffsetY)}onDragStart(e){this.isDragging=!0,this.dragOffsetX=e.clientX-this.popupX,this.dragOffsetY=e.clientY-this.popupY}onMouseMove(e){this.isDragging&&(this.popupX=e.clientX-this.dragOffsetX,this.popupY=e.clientY-this.dragOffsetY)}onMouseUp(){this.isDragging=!1}setLabelDocumentName(e){return e.split(".").slice(0,-1).join(".")}sendlink(e){this.model.result_link=e.target.files[0],this.labelFile=this.setLabelDocumentName(e.target.files[0].name)}addDocument(){this.labelFile&&this.model.result_link&&this.updateService.updateLink(this.ra.name,this.model.result_link).subscribe({next:e=>{this.toastr.success("Document "+this.labelFile,"SUCCESSFULLY UPDATED",{timeOut:5e3,positionClass:"toast-top-right"}),this.documents.push({label:this.labelFile,File:this.model.result_link.name,include:this.includeDoc}),this.model.links=this.documents,this.labelFile="",this.model.result_link="",this.DocumentFileInput.nativeElement.value=null},error:e=>{this.toastr.error("Check the console to see more information","Failed uploaded document",{timeOut:5e3,positionClass:"toast-top-right"}),console.log(e)}})}deleteFile(e){this.documents=this.documents.filter(i=>i.label!==e),this.model.links=this.documents}back(){this.global.editModeDecisions=!this.global.editModeDecisions}getPendingTask(){this.commonService.getPendingTask(this.ra.name,this.pending_task_selected_id).subscribe({next:e=>{this.pending_task=e,this.model=this.pending_task.result,this.documents=this.model.links},error:e=>console.log(e)})}onSubmit(){setTimeout(()=>{this.updateService.updateResult(this.ra.name,this.model).subscribe({next:e=>{e.success&&(this.pendingTasks.results=[],this.func.refreshRA(),this.editMode?this.global.editModeDecisions=!1:setTimeout(()=>{this.pendingTasks.results.length&&(this.pending_task_selected_id=this.pendingTasks.results[0].id,this.getPendingTask())},1e3),this.toastr.success("RA "+this.ra.name,"SUCCESSFULLY UPDATED",{timeOut:5e3,positionClass:"toast-top-right"}))},error:e=>{this.toastr.error("Check the console to see more information","Unexpected Error",{timeOut:5e3,positionClass:"toast-top-right"}),console.error(e)}}),this.documents=[]},300)}static#e=this.\u0275fac=function(i){return new(i||t)(St(Rd),St(ad),St(kC),St(h1),St(c1),St(d1),St(u1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["decisions-form"]],viewQuery:function(i,r){if(1&i&&xc(A$,5),2&i){let o;vo(o=bo())&&(r.DocumentFileInput=o.first)}},hostBindings:function(i,r){1&i&&Vn("mousemove",function(l){return r.onMouseMove(l)},0,$y)("mouseup",function(){return r.onMouseUp()},!1,$y)},inputs:{task:"task",editMode:"editMode"},decls:4,vars:6,consts:[["decisionForm","ngForm"],["DocumentFile",""],["id","decisionForm","class","container-form mt-3",3,"ngSubmit",4,"ngIf"],["data-bs-focus","false","show","false","id","supportModal","tabindex","-1","data-bs-keyboard","false","data-bs-backdrop","false","aria-labelledby","supportModalLabel","aria-hidden","false",1,"modal","fade",3,"mousedown","mousemove"],[1,"modal-dialog","modal-xl"],["class","modal-content",4,"ngIf"],["id","decisionForm",1,"container-form","mt-3",3,"ngSubmit"],[1,"row","mb-3"],["for","inputPassword3",1,"col-2","col-form-label"],[1,"col-8"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioDecisionOptions","id","inlineRadioDecision1",1,"form-check-input",3,"ngModelChange","disabled","ngModel","value"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioDecisionOptions","id","inlineRadioDecision2",1,"form-check-input",3,"ngModelChange","disabled","ngModel","value"],["for","inlineRadio2",1,"form-check-label"],[1,"col-2","d-flex","justify-content-end"],["id","infobutton","data-bs-toggle","modal","data-bs-target","#supportModal","role","button",1,"btn","ms-auto","btn-ets-do",3,"click"],[1,"col-10"],["required","","name","justification","id","justification","rows","4",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"row","mt-2","mb-3"],[1,"row"],[1,"col-5"],["placeholder","","type","file",1,"form-control",3,"change"],[1,"col-auto","d-flex","flex-column"],[1,"d-flex","flex-row","justify-content-around"],["type","checkbox","name","inlineRadioOptions","id","inlineRadio1",1,"form-check-input",3,"ngModelChange","disabled","ngModel","value"],[1,"text-muted","sm-text"],["type","text","name","labelFile","placeholder","label",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-1","text-end",2,"margin-left","auto !important"],["role","button",1,"addbtn","btn","ms-auto",2,"background","rgb(250,250,250)",3,"click"],[1,"fa-solid","fa-arrow-turn-down","fa-rotate-90","fa-lg"],["class","row mt-2 mb-3",4,"ngFor","ngForOf"],["name","summary","id","summary","rows","4",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","submit","class","btn btn-ets-delete",3,"click",4,"ngIf"],[1,"col","d-flex","justify-content-end"],["type","submit",1,"btn","btn-ets-do","submit-button",3,"disabled"],[1,"col-3"],["type","text","readonly","",1,"form-control-plaintext","text-center",3,"value"],[1,"col-1"],[2,"text-align","center !important",";margin-top","7px"],["style","text-align: center;margin-right: 18px;","class","fa-solid fa-check-to-slot fa-lg",4,"ngIf"],["role","button",1,"btn","ms-auto",3,"click"],[1,"fa-solid","fa-circle-minus","fa-lg",2,"color","#e01b24"],[1,"fa-solid","fa-check-to-slot","fa-lg",2,"text-align","center","margin-right","18px"],["type","submit",1,"btn","btn-ets-delete",3,"click"],[1,"modal-content"],[1,"modal-header"],["id","supportModalLabel",1,"modal-title","fs-2"],[1,"text-muted","fs-4","d-block"],["id","closeBtnModal","type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table",2,"width","100%"],[1,""],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["style","width: 700px !important;",4,"ngIf"],["style","padding: 0px !important;","class","text-justify",4,"ngIf"],[2,"width","700px !important"],[1,"text-justify",2,"padding","0px !important"],[1,"table","table-borderless",2,"width","100% !important"],[2,"width","10%"],[2,"width","35%"],[2,"width","5%"]],template:function(i,r){1&i&&(_n(0,I$,52,17,"form",2),L(1,"div",3),Vn("mousedown",function(l){return r.onDragStart(l)})("mousemove",function(l){return r.onDrag(l)}),L(2,"div",4),_n(3,F$,21,3,"div",5),P()()),2&i&&(ht("ngIf",r.pending_task),ye(),Cp("left",r.popupX,"px")("top",r.popupY,"px"),ye(2),ht("ngIf",r.upstream_tasks))},dependencies:[Sp,Od,wC,i1,fS,YD,z0,gC,gb,Tg,U_,o8],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.container-form[_ngcontent-%COMP%]{color:#734e81}.addbtn[_ngcontent-%COMP%]{color:#935277}.sm-text[_ngcontent-%COMP%]{font-size:13.5px!important}.modal-dialog[_ngcontent-%COMP%]{position:absolute;cursor:move}#suppIDText[_ngcontent-%COMP%]{color:#bc8f8f;font-size:smaller;margin-left:5px!important}#supportModalLabel[_ngcontent-%COMP%], .primary-color[_ngcontent-%COMP%]{color:#474286}.secondary-color[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{color:#734e81}.modal-footer[_ngcontent-%COMP%]{border:none}"]})}return t})();function B$(t,n){if(1&t&&(L(0,"option",28),_e(1),P()),2&t){const e=n.$implicit,i=at(2);ht("value",i.pendingTasks.decisions[e].id),ye(),ir(" ",i.pendingTasks.decisions[e].label," ")}}function V$(t,n){1&t&&(it(0,"div",35),cu(1,"autolinkPipe")),2&t&&ht("innerHTML",_f(1,1,at(3).pending_task["task description"].description),po)}function U$(t,n){if(1&t&&(L(0,"span")(1,"a",37),_e(2),P(),it(3,"br"),P()),2&t){const e=n.$implicit;ye(),ht("href",e,ra),ye(),Hi(e)}}function z$(t,n){if(1&t&&(L(0,"div",32)(1,"div"),_n(2,U$,4,2,"span",36),P()()),2&t){const e=at(3);ye(2),ht("ngForOf",e.pending_task["task description"].method_link)}}function H$(t,n){if(1&t&&it(0,"decisions-form",38),2&t){const e=at(3);ht("editMode",!1)("task",e.pending_task)}}function j$(t,n){if(1&t&&(L(0,"div",29)(1,"div",30)(2,"div",16)(3,"div",31)(4,"strong"),_e(5,"Name"),P()(),L(6,"div",32),_e(7),P()(),L(8,"div",16)(9,"div",31)(10,"strong"),_e(11,"Description"),P()(),_n(12,V$,2,3,"div",33),P(),L(13,"div",16)(14,"div",31)(15,"strong"),_e(16,"Method links"),P()(),_n(17,z$,3,1,"div",34),P()(),_n(18,H$,1,2,"decisions-form",24),P()),2&t){const e=at(2);ye(7),ir(" ",e.pending_task["task description"].name," "),ye(5),ht("ngIf",e.pending_task["task description"].description),ye(5),ht("ngIf","local_models"!==e.pending_task["task description"].method_link[0]),ye(),ht("ngIf",e.pending_task)}}function $$(t,n){if(1&t){const e=ct();L(0,"div")(1,"div",16)(2,"div",17)(3,"select",25),Vn("change",function(){return on(e),rn(at().getPendingTask())}),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.pending_task_selected,r)||(o.pending_task_selected=r),rn(r)}),_n(4,B$,2,2,"option",26),P(),_n(5,j$,19,4,"div",27),P()()()}if(2&t){const e=at();ye(3),fs("ngModel",e.pending_task_selected),ye(),ht("ngForOf",e.objectKeys(e.pendingTasks.decisions)),ye(),ht("ngIf",null==e.pending_task?null:e.pending_task.result)}}function W$(t,n){1&t&&_e(0,"No pending decisions")}function G$(t,n){if(1&t){const e=ct();L(0,"tr",39),Vn("click",function(){const r=on(e).$implicit;return rn(at().selectDecision(r.id))}),L(1,"td"),_e(2),cu(3,"formatDate"),P(),L(4,"td"),_e(5),P(),L(6,"td"),_e(7),P(),L(8,"td"),_e(9),cu(10,"slice"),P(),L(11,"td"),_e(12),P()()}if(2&t){const e=n.$implicit;ye(2),Hi(_f(3,5,e.date)),ye(3),Hi(e.label),ye(2),Hi(e.name),ye(2),ir("",qw(10,7,e.summary,0,150),"..."),ye(3),Hi(e.decision?"Yes":"No")}}function Y$(t,n){1&t&&(it(0,"div",35),cu(1,"autolinkPipe")),2&t&&ht("innerHTML",_f(1,1,at(2).results.decisionSelected["task description"].description),po)}function X$(t,n){if(1&t&&(L(0,"span")(1,"a",37),_e(2),P(),it(3,"br"),P()),2&t){const e=n.$implicit;ye(),ht("href",e,ra),ye(),Hi(e)}}function q$(t,n){if(1&t&&(L(0,"div",32)(1,"div"),_n(2,X$,4,2,"span",36),P()()),2&t){const e=at(2);ye(2),ht("ngForOf",e.results.decisionSelected["task description"].method_link)}}function K$(t,n){1&t&&(L(0,"span"),_e(1," Yes "),P())}function Z$(t,n){1&t&&_e(0," No ")}function Q$(t,n){if(1&t){const e=ct();L(0,"div",51)(1,"button",52),Vn("click",function(){const r=on(e).$implicit,o=at(2);return rn(o.downloadFile(o.results.decisionSelected.result.links[r].File))}),_e(2),P()()}if(2&t){const e=n.$implicit,i=at(2);ye(2),ir(" ",i.results.decisionSelected.result.links[e].label," ")}}function J$(t,n){if(1&t&&(L(0,"div")(1,"div",53),it(2,"img",54),L(3,"div",30)(4,"p",55),_e(5),P()()()()),2&t){const e=n.$implicit;ye(2),ht("src",e.link,ra),ye(3),Hi(e.name)}}function eW(t,n){if(1&t&&(L(0,"tr")(1,"td",59),_e(2),P(),L(3,"td",59),_e(4),P(),L(5,"td",58),it(6,"canvas",60),P()()),2&t){const e=n.$implicit,i=at(3);ye(2),ir(" ",i.results.decisionSelected.substance[e].name," "),ye(2),ir(" ",i.results.decisionSelected.substance[e].CASRN," "),ye(2),ht("id","decisionCanvas"+e)}}function tW(t,n){if(1&t&&(L(0,"div",42)(1,"div",31),_e(2,"Substance"),P(),L(3,"div",17)(4,"table",56)(5,"thead",57)(6,"tr")(7,"th",58),_e(8,"Name"),P(),L(9,"th",58),_e(10,"CASRN"),P(),L(11,"th",58),_e(12,"SMILES"),P()()(),L(13,"tbody"),_n(14,eW,7,3,"tr",36),P()()()()),2&t){const e=at(2);ye(14),ht("ngForOf",e.objectKeys(e.results.decisionSelected.substance))}}function nW(t,n){if(1&t){const e=ct();L(0,"div",40),it(1,"hr"),L(2,"div",41)(3,"div",16)(4,"div",31)(5,"strong"),_e(6,"Date"),P()(),L(7,"div",32),_e(8),P()(),L(9,"div",16)(10,"div",31)(11,"strong"),_e(12,"Name"),P()(),L(13,"div",32),_e(14),P()(),L(15,"div",16)(16,"div",31)(17,"strong"),_e(18,"Description"),P()(),_n(19,Y$,2,3,"div",33),P(),L(20,"div",16)(21,"div",31)(22,"strong"),_e(23,"Method links"),P()(),_n(24,q$,3,1,"div",34),P()(),L(25,"div",30)(26,"div",42)(27,"div",43),_e(28,"Decision"),P(),L(29,"div",44),_n(30,K$,2,0,"span",8)(31,Z$,1,0,"ng-template",null,1,Nd),P()(),L(33,"div",42)(34,"div",45),_e(35," Documentation "),P(),L(36,"div",44),_n(37,Q$,3,1,"div",46),P()(),L(38,"div",47),_n(39,J$,6,2,"div",36),P(),L(40,"div",42)(41,"div",43),_e(42,"Summary"),P(),L(43,"div",48),_e(44),P()(),L(45,"div",42)(46,"div",43),_e(47,"Justification"),P(),L(48,"div",48),_e(49),P()(),_n(50,tW,15,1,"div",49),L(51,"div",16)(52,"button",50),Vn("click",function(){return on(e),rn(at().editDecision())}),_e(53," Edit "),P()()()()}if(2&t){const e=Ec(32),i=at();ye(8),ir(" ",i.results.decisionSelected["task description"].date," "),ye(6),ir(" ",i.results.decisionSelected["task description"].name," "),ye(5),ht("ngIf",i.pending_task["task description"].description),ye(5),ht("ngIf","local_models"!==i.pending_task["task description"].method_link[0]),ye(6),ht("ngIf",i.results.decisionSelected.result.decision)("ngIfElse",e),ye(7),ht("ngForOf",i.objectKeys(i.results.decisionSelected.result.links)),ye(2),ht("ngForOf",i.listImages),ye(5),Hi(i.results.decisionSelected.result.summary),ye(5),Hi(i.results.decisionSelected.result.justification),ye(),ht("ngIf",i.results.decisionSelected.substance)}}function iW(t,n){if(1&t&&it(0,"decisions-form",38),2&t){const e=at();ht("editMode",!0)("task",e.results.decisionSelected)}}let rW=(()=>{class t{constructor(e,i,r,o,l,h,g){this.ra=e,this.commonService=i,this.func=r,this.pendingTasks=o,this.results=l,this.updateService=h,this.global=g,this.loadForm=!1,this.form=new B_({}),this.formEdit=new B_({}),this.pending_task_selected="",this.objectKeys=Object.keys,this.loadEditForm=!1,this.listImages=[],this.optSelect=[{value:!0,label:"Yes"},{value:!1,label:"No"}]}ngOnInit(){this.pendingTasks.decisions[0]&&(this.pending_task_selected=this.pendingTasks.decisions[0].id),this.commonService.generateForms$.subscribe(e=>{this.pendingTasks.decisions[0]&&(this.pending_task_selected=e||this.pendingTasks.decisions[0].id,this.getPendingTask())})}getPendingTask(){this.pending_task=!1,this.commonService.getPendingTask(this.ra.name,this.pending_task_selected).subscribe({next:e=>{this.pending_task=e},error:e=>console.log(e)})}editDecision(){this.global.editModeDecisions=!this.global.editModeDecisions}downloadFile(e){e&&this.commonService.getLink(this.ra.name,e).subscribe({next:i=>{const r=new Blob([i],{type:"application/octet-stream"});(0,DC.saveAs)(r,e)},error:i=>console.log(i)})}isImage(){this.listImages=[];var e=["jpeg","png","jpg"];this.results.decisionSelected.result.links.forEach(i=>{const r=i.File.split(".").pop();e.includes(r)&&this.commonService.getLink(this.ra.name,i.File).subscribe({next:o=>{const l=new Blob([o],{type:"application/octet-stream"}),h=new FileReader;h.readAsDataURL(l),h.onloadend=()=>{this.listImages.push({name:i.label,link:h.result})}},error:o=>console.log(o)}),console.log(this.listImages)})}showTablePastDecisions(){$("#tableCollapse").click()}drawMol(){if(this.results.decisionSelected.substance.length>0)for(let e=0;e<this.results.decisionSelected.substance.length;e++){const i=new _b.Drawer({width:200,height:150}),r="decisionCanvas"+e;_b.parse(this.results.decisionSelected.substance[e].SMILES,function(o){i.draw(o,r,"light",!1)},function(o){console.log(o)})}}selectDecision(e){this.commonService.getTask(this.ra.name,e).subscribe({next:i=>{this.results.decisionSelected=i,this.isImage(),setTimeout(()=>{this.results.decisionSelected?.substance&&this.drawMol(),this.isImage()},300),this.results.decisionSelected.result_link&&this.commonService.getLink(this.ra.name,this.results.decisionSelected.result_link).subscribe({next:r=>{this.link=r},error:r=>console.log(r)})},error:i=>console.log(i)}),$("#tableCollapse").click(),$("#pastCollapse").click()}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd),St(d1),St(c1),St(l1),St(kC),St(u1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-decisions"]],decls:45,vars:6,consts:[["noDecisions",""],["elseBlock",""],["id","results-tab","role","tablist",1,"nav","nav-pills"],["role","presentation",1,"nav-item"],["id","pills-pendingdecisions-tab","data-bs-toggle","pill","data-bs-target","#pills-pendingdecisions","type","button","role","tab","aria-controls","pills-pendingdecisions","aria-selected","True",1,"nav-link","active"],["id","pills-pastdecisions-tab","data-bs-toggle","pill","data-bs-target","#pills-pastdecisions","type","button","role","tab","aria-controls","pills-pastdecisions","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content","container-fluid"],["id","pills-pendingdecisions","role","tabpanel","aria-labelledby","pills-pendingdecisions-tab",1,"tab-pane","fade","show","active","mt-2"],[4,"ngIf","ngIfElse"],["id","pills-pastdecisions","role","tabpanel","aria-labelledby","pills-pastdecisions-tab",1,"tab-pane","fade"],["id","accordionFlushExample",1,"accordion","accordion-flush"],[1,"accordion-item"],["id","flush-headingOne",1,"accordion-header"],["id","tableCollapseDecisions","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOneDecisions","aria-expanded","false","aria-controls","flush-collapseOneDecisions",1,"accordion-button","collapsed"],["id","flush-collapseOneDecisions","aria-labelledby","flush-headingOneDecisions","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"row"],[1,"col"],["id","dtDecisions",1,"display","compact"],[3,"click",4,"ngFor","ngForOf"],["id","flush-headingTwo",1,"accordion-header"],["id","pastCollapseDecisions","type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseTwoDecisions","aria-expanded","true","aria-controls","flush-collapseTwoDecisions",1,"accordion-button","collapsed",3,"click"],["id","flush-collapseTwoDecisions","aria-labelledby","flush-headingTwoDecisions","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],["class","mt-2",4,"ngIf"],[3,"editMode","task",4,"ngIf"],["id","selectPendingDecision","aria-label","Default select example",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","container-information mt-2",4,"ngIf"],[3,"value"],[1,"container-information","mt-2"],[1,"card-body"],[1,"col-2","text"],[1,"col-10"],["class","col-10",3,"innerHTML",4,"ngIf"],["class","col-10",4,"ngIf"],[1,"col-10",3,"innerHTML"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[3,"editMode","task"],[3,"click"],[1,"mt-2"],[1,"card-body","mb-3"],[1,"row","pt-1","pb-1"],[1,"col-2","text","border-bottom"],[1,"col","border-bottom"],[1,"col-2","text","border-bottom","d-flex","align-items-center"],["class","d-inline mx-1",4,"ngFor","ngForOf"],[1,"d-flex","p-1","justify-content-around"],[1,"col","border-bottom","formatted-text"],["class","row pt-1 pb-1",4,"ngIf"],[1,"btn","btn-ets-edit",3,"click"],[1,"d-inline","mx-1"],[1,"btn","btn-outline-success","mt-2","mb-2",3,"click"],[1,"card",2,"width","18rem"],["width","288","height","288","alt","",3,"src"],[1,"card-text","text"],["id","dtSubstancesDecisions",1,"table","table-borderless"],[1,"text"],[2,"text-align","center"],[2,"vertical-align","middle","text-align","center"],[3,"id"]],template:function(i,r){if(1&i){const o=ct();L(0,"ul",2)(1,"li",3)(2,"button",4),_e(3," Pending "),P()(),L(4,"li",3)(5,"button",5),_e(6," Completed "),P()()(),L(7,"div",6)(8,"div",7),_n(9,$$,6,3,"div",8)(10,W$,1,0,"ng-template",null,0,Nd),P(),L(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2",12)(16,"button",13),_e(17," Completed Task "),P()(),L(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17)(22,"table",18)(23,"thead")(24,"tr")(25,"th"),_e(26,"Date"),P(),L(27,"th"),_e(28,"Label"),P(),L(29,"th"),_e(30,"Name"),P(),L(31,"th"),_e(32,"summary"),P(),L(33,"th"),_e(34,"decision"),P()()(),L(35,"tbody"),_n(36,G$,13,11,"tr",19),P()()()()()()(),L(37,"div",11)(38,"h2",20)(39,"button",21),Vn("click",function(){return on(o),rn(r.showTablePastDecisions())}),_e(40),P()(),L(41,"div",22)(42,"div",15),_n(43,nW,54,11,"div",23)(44,iW,1,2,"decisions-form",24),P()()()()()()}if(2&i){const o=Ec(11);ye(9),ht("ngIf",r.pendingTasks.decisions.length>0)("ngIfElse",o),ye(27),ht("ngForOf",r.results.decisions),ye(4),ir(" ",null==r.results||null==r.results.decisionSelected["task description"]?null:r.results.decisionSelected["task description"].label," "),ye(3),ht("ngIf",r.results.decisionSelected&&!r.global.editModeDecisions),ye(),ht("ngIf",r.global.editModeDecisions)}},dependencies:[Sp,Od,CC,TC,z_,z0,Tg,L$,ZE,s8,i4],styles:[".title[_ngcontent-%COMP%]{margin-top:40px;font-size:45px;font-family:Verdana,sans-serif;color:#734e81}.btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.nav[_ngcontent-%COMP%]{background-color:none!important}.nav-link[_ngcontent-%COMP%]{color:#734e81;font-size:1rem}.nav-link.active[_ngcontent-%COMP%]{background:none!important;color:#734e81;font-weight:700;font-size:1rem;border-bottom:3px solid #935277;border-radius:0}#dtDecisions[_ngcontent-%COMP%]{padding-top:10px}#dtDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#474286;color:#fff}#dtDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:20%!important}#dtDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10%!important}#dtDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%!important}#dtDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:60%!important}#dtDecisions[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;text-align:left;padding:0 10px!important}hr[_ngcontent-%COMP%]{height:3px;background-color:#935277;border:None}.text[_ngcontent-%COMP%], .container-form[_ngcontent-%COMP%]{color:#734e81}#dtSubstancesDecisions[_ngcontent-%COMP%]{table-layout:fixed;width:100%}#dtSubstancesDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%!important}#dtSubstancesDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:20%!important}#dtSubstancesDecisions[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:50%!important}.accordion-button[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#00000020}.accordion-button[_ngcontent-%COMP%]{background-color:#f8f6f6!important;color:#734e81!important;border:none!important;border-color:transparent!important}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:#f8f6f6!important;color:#734e81!important}li[_ngcontent-%COMP%]{padding-left:2px}.formatted-text[_ngcontent-%COMP%]{white-space:pre-wrap!important}"]})}return t})(),sW=(()=>{class t{constructor(e){this.http=e}createRA(e){return this.http.put(so_baseUrl+"new/"+e,null)}deleteRA(e){return this.http.put(so_baseUrl+"delete/"+e,null)}deleteStep(e,i){return this.http.put(so_baseUrl+"delete/"+e+"/"+i,null)}exportRA(e){return this.http.get(so_baseUrl+"export/"+e,{responseType:"blob"})}importRA(e){const i=new FormData;return i.append("file",e),this.http.post(so_baseUrl+"import",i)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(Jm))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),a8=(()=>{class t{constructor(e,i){this.document=e,this.platformId=i,this.documentIsAccessible=N_(this.platformId)}static getCookieRegExp(e){const i=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),t.getCookieRegExp(e).test(this.document.cookie))}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);const r=t.getCookieRegExp(e).exec(this.document.cookie);return r[1]?t.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const e={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[o,l]=r.split("=");e[t.safeDecodeURIComponent(o.replace(/^ /,""))]=t.safeDecodeURIComponent(l)}),e}set(e,i,r,o,l,h,g,b){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||o||l||h||g)return void this.set(e,i,{expires:r,path:o,domain:l,secure:h,sameSite:g||"Lax",partitioned:b});let E=encodeURIComponent(e)+"="+encodeURIComponent(i)+";";const B=r||{};B.expires&&(E+="number"==typeof B.expires?"expires="+new Date((new Date).getTime()+1e3*B.expires*60*60*24).toUTCString()+";":"expires="+B.expires.toUTCString()+";"),B.path&&(E+="path="+B.path+";"),B.domain&&(E+="domain="+B.domain+";"),!1===B.secure&&"None"===B.sameSite&&(B.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),B.secure&&(E+="secure;"),B.sameSite||(B.sameSite="Lax"),E+="sameSite="+B.sameSite+";",B.partitioned&&(E+="Partitioned;"),this.document.cookie=E}delete(e,i,r,o,l="Lax"){this.documentIsAccessible&&this.set(e,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:i,domain:r,secure:o,sameSite:l})}deleteAll(e,i,r,o="Lax"){if(!this.documentIsAccessible)return;const l=this.getAll();for(const h in l)l.hasOwnProperty(h)&&this.delete(h,e,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac),Ii(hh))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oW(t,n){if(1&t){const e=ct();L(0,"a",1),Vn("click",function(){return on(e),rn(at().logout())}),_e(1,"Logout"),P()}}let aW=(()=>{class t{constructor(e,i,r){this.user=e,this.cookieService=i,this.keycloackService=r}logout(){this.user.username=void 0}static#e=this.\u0275fac=function(i){return new(i||t)(St(ES),St(a8),St(Z6))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-user-info"]],decls:1,vars:1,consts:[["class","pl-3 btn btn-ets-do","href","/logout",3,"click",4,"ngIf"],["href","/logout",1,"pl-3","btn","btn-ets-do",3,"click"]],template:function(i,r){1&i&&_n(0,oW,2,0,"a",0),2&i&&ht("ngIf",r.user.username)},dependencies:[Od],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}"]})}return t})();const lW=["nameRAinput"],cW=["fileInput"];function uW(t,n){1&t&&(L(0,"div",35)(1,"div",36)(2,"span",37),_e(3,"Loading..."),P()()())}let dW=(()=>{class t{constructor(e,i,r,o,l,h,g){this.toastr=e,this.global=i,this.ra=r,this.commonService=o,this.func=l,this.manageRA=h,this.updateService=g,this.newRAname="",this.isLoading=void 0,this.newRepo=""}confirmImportModel(){this.isLoading=!0,this.updateService.importModel(this.modelFile).subscribe(e=>{e.success&&this.toastr.success(e.message,""),this.isLoading=!1},e=>{this.toastr.error(e.error.message,""),this.isLoading=!1})}selectModelFile(e){this.modelFile=e.target.files[0]}changeModelRepo(){this.updateService.updateModelsRepo(this.newRepo).subscribe(e=>{e.success&&this.toastr.success("Repository updated successfully","")},e=>{console.log(e),this.toastr.error(e.error,"")})}duplicateRA(){console.log("duplicate RA")}showConfModal(){}ngAfterViewInit(){}newRA(){this.manageRA.createRA(this.newRAname).subscribe({next:e=>{e.success&&($("#pills-gen-information-tab").click(),this.commonService.getRaList().subscribe(i=>{this.ra.listRA=[...i],this.ra.name=this.newRAname,this.func.refreshRA(),this.nameRAinput.nativeElement.value=""}),setTimeout(()=>{document.getElementById("menubtn").click(),this.global.interfaceVisible=!0},500))},error:e=>{console.log(e),this.toastr.error(e.error,e.statusText,{timeOut:5e3,positionClass:"toast-top-right"})}})}focus(){setTimeout(()=>{this.nameRAinput.nativeElement.focus()},500)}deleteStep(){this.manageRA.deleteStep(this.ra.name,this.ra.status.step).subscribe({next:e=>{e.success&&this.toastr.success("STEP "+this.ra.status.step,"SUCCESSFULLY DELETED",{timeOut:5e3,positionClass:"toast-top-right"}),this.func.refreshRA(),document.getElementById("menubtn").click()},error:e=>console.log(e)})}deleteRA(){this.manageRA.deleteRA(this.ra.name).subscribe(e=>{e.success&&this.toastr.success("RA "+this.ra.name,"SUCCESSFULLY DELETED",{timeOut:5e3,positionClass:"toast-top-right"}),this.commonService.getRaList().subscribe(i=>{this.ra.listRA=[...i],this.ra.listRA.length>0?(this.ra.name=this.ra.listRA[this.ra.listRA.length-1],this.func.refreshRA(),this.global.interfaceVisible=!0):(this.ra.name="",this.global.interfaceVisible=!1),document.getElementById("menubtn").click(),document.getElementById("pills-overview-tab").click()})},e=>{console.log(e)})}exportRA(){this.manageRA.exportRA(this.ra.name).subscribe(e=>{const i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=this.ra.name+".tgz",r.click(),window.URL.revokeObjectURL(i)})}importRA(){document.getElementById("fileinput").click()}handleFile(e){console.log();const i=e.target.files[0],r=i.name.split(".")[0];this.manageRA.importRA(i).subscribe(o=>{o.success&&(this.commonService.getRaList().subscribe({next:l=>{this.ra.listRA=[...l]}}),this.toastr.success("RA '"+r+"' imported","IMPORTED SUCCESFULLY",{timeOut:5e3,positionClass:"toast-top-right"})),this.resetFileInput()},o=>{console.log("Error while importing:"),console.log(o),this.resetFileInput()})}resetFileInput(){this.fileInput&&this.fileInput.nativeElement&&(this.fileInput.nativeElement.value="")}static#e=this.\u0275fac=function(i){return new(i||t)(St(h1),St(u1),St(ad),St(Rd),St(d1),St(sW),St(kC))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-manage-ra"]],viewQuery:function(i,r){if(1&i&&(xc(lW,5),xc(cW,5)),2&i){let o;vo(o=bo())&&(r.nameRAinput=o.first),vo(o=bo())&&(r.fileInput=o.first)}},decls:65,vars:7,consts:[["fileInput",""],["nameRAinput",""],["id","navbarToggleExternalContent",1,"collapse"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button","data-bs-toggle","modal","data-bs-target","#newRA",1,"btn","btn-ets-do",3,"click"],["type","button",1,"btn","btn-ets-do",3,"click"],["type","button",1,"btn","btn-ets-delete",3,"click","disabled"],["type","button",1,"btn","btn-ets-bad",3,"click"],["type","file","id","fileinput",2,"display","none",3,"change"],["type","button",1,"btn","btn-ets-bad",3,"click","disabled"],["type","button","data-bs-toggle","modal","data-bs-target","#confModal",1,"btn","btn-ets-bad",3,"click"],[1,"version-text"],["id","newRA","tabindex","-1","role","dialog","aria-labelledby","newModalLabel","aria-hidden","false",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newModalLabel",1,"modal-title"],["data-bs-dismiss","modal","aria-label","Cancel",1,"btn","btn-danger","btn-sm"],["aria-hidden","true"],[1,"modal-body"],[1,"row","g-3","align-items-center"],[1,"col-auto"],["for","model_name",1,"col-form-label","label_name"],["type","text","placeholder","name",1,"form-control","ml-2",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-nam-bad"],["type","button","data-bs-dismiss","modal",1,"btn","btn-ets-do",3,"click","disabled"],["id","confModal","tabindex","-1","role","dialog","aria-labelledby","newModalLabel","aria-hidden","false",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"d-flex","flex-row","align-items-stretch"],[1,"btn","btn-ets-do",3,"click"],["placeholder","","type","file",1,"form-control",2,"width","600px",3,"change"],[1,"d-flex","mt-2","flex-row","align-items-stretch"],["placeholder","Introduce new repository path","type","text",1,"form-control",2,"width","600px",3,"ngModelChange","ngModel"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],["role","status",1,"spinner-border",2,"width","10rem","height","10rem"],[1,"visually-hidden"]],template:function(i,r){if(1&i){const o=ct();L(0,"div",2)(1,"div",3)(2,"button",4),Vn("click",function(){return on(o),rn(r.focus())}),_e(3," New RA "),P(),L(4,"button",5),Vn("click",function(){return on(o),rn(r.duplicateRA())}),_e(5," Duplicate RA "),P(),L(6,"button",6),Vn("click",function(){return on(o),rn(r.deleteRA())}),_e(7," Delete RA "),P(),L(8,"button",6),Vn("click",function(){return on(o),rn(r.deleteStep())}),_e(9," Delete Step "),P(),L(10,"button",7),Vn("click",function(){return on(o),rn(r.importRA())}),_e(11," Import RA "),P(),L(12,"input",8,0),Vn("change",function(h){return on(o),rn(r.handleFile(h))}),P(),L(14,"button",9),Vn("click",function(){return on(o),rn(r.exportRA())}),_e(15," Export RA "),P(),L(16,"button",10),Vn("click",function(){return on(o),rn(r.showConfModal())}),_e(17," Configure "),P(),it(18,"app-user-info"),P(),L(19,"span",11),_e(20,"v0.4.1"),P()(),L(21,"div",12)(22,"div",13)(23,"div",14)(24,"div",15)(25,"h5",16),_e(26,"New RA"),P(),L(27,"button",17)(28,"span",18),_e(29,"\xd7"),P()()(),L(30,"div",19)(31,"div",20)(32,"div",21)(33,"label",22),_e(34,"RA name:"),P()(),L(35,"div",21)(36,"input",23,1),ps("ngModelChange",function(h){return on(o),xs(r.newRAname,h)||(r.newRAname=h),rn(h)}),P()()()(),L(38,"div",24)(39,"button",25),_e(40," Cancel "),P(),L(41,"button",26),Vn("click",function(){return on(o),rn(r.newRA())}),_e(42," Create "),P()()()()(),L(43,"div",27)(44,"div",28)(45,"div",14)(46,"div",15)(47,"h5",16),_e(48,"Configure"),P(),L(49,"button",17)(50,"span",18),_e(51,"\xd7"),P()()(),L(52,"div",19)(53,"div",29)(54,"button",30),Vn("click",function(){return on(o),rn(r.confirmImportModel())}),_e(55,"Import Model"),P(),L(56,"input",31),Vn("change",function(h){return on(o),rn(r.selectModelFile(h))}),P()(),L(57,"div",32)(58,"button",30),Vn("click",function(){return on(o),rn(r.changeModelRepo())}),_e(59," Change Repo "),P(),L(60,"input",33),ps("ngModelChange",function(h){return on(o),xs(r.newRepo,h)||(r.newRepo=h),rn(h)}),P()(),_n(61,uW,4,0,"div",34),P(),L(62,"div",24)(63,"button",25),_e(64," Close "),P()()()()()}2&i&&(ye(6),ht("disabled",r.ra.listRA.length<1),ye(2),ht("disabled",r.ra.listRA.length<1||r.ra.status.step<=1),ye(6),ht("disabled",r.ra.listRA.length<1),ye(22),fs("ngModel",r.newRAname),ye(5),ht("disabled",!r.newRAname),ye(19),fs("ngModel",r.newRepo),ye(),ht("ngIf",r.isLoading))},dependencies:[Od,i1,z0,Tg,aW],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.modal-title[_ngcontent-%COMP%], .label_name[_ngcontent-%COMP%]{color:#734e81}.version-text[_ngcontent-%COMP%]{vertical-align:bottom;margin-left:10px;color:gray;line-height:1}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0000001a;display:flex;align-items:center;justify-content:center;z-index:1000;pointer-events:none}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;pointer-events:auto}"]})}return t})();const hW=["mySplit"];function fW(t,n){if(1&t&&(L(0,"div",7),it(1,"i",8),L(2,"span"),_e(3),P()()),2&t){const e=at();ye(3),Hi(e.user.username)}}function pW(t,n){if(1&t&&(L(0,"option",13),_e(1),P()),2&t){const e=n.$implicit;ht("value",e),ye(),Hi(e)}}function gW(t,n){if(1&t){const e=ct();L(0,"div",9)(1,"label",10),_e(2,"RA "),P(),L(3,"select",11),Vn("change",function(){return on(e),rn(at().loadRA())}),ps("ngModelChange",function(r){on(e);const o=at();return xs(o.ra.name,r)||(o.ra.name=r),rn(r)}),_n(4,pW,2,2,"option",12),P()()}if(2&t){const e=at();ye(3),fs("ngModel",e.ra.name),ye(),ht("ngForOf",e.ra.listRA)}}function mW(t,n){1&t&&it(0,"div",14)}function _W(t,n){1&t&&it(0,"div",9)}let yW=(()=>{class t{constructor(e,i,r,o,l,h,g){this.global=e,this.ra=i,this.user=r,this.commonService=o,this.func=l,this.pendingTasks=h,this.results=g,this._size1=0,this._size2=100}loadRA(){this.func.refreshRA()}loadStep(){this.results.resultSelected="",this.results.decisionSelected="",this.commonService.getStatusWithStep(this.ra.name,this.ra.status.step).subscribe({next:e=>this.ra.status=e.ra,error:e=>console.log(e)}),this.commonService.getResultsWithStep(this.ra.name,this.ra.status.step).subscribe({next:e=>{this.ra.results=e,this.func.separatePastTasks()},error:e=>console.log(e)}),this.commonService.getWorkflowByStep(this.ra.name,this.ra.status.step).subscribe({next:e=>{this.ra.workflow=e.result,this.commonService.updateWorkflow()}})}get size1(){return this._size1}set size1(e){this._size1=e}get size2(){return this._size2}set size2(e){this._size2=e}gutterClick(e){1===e.gutterNum&&(0==e.sizes[0]?(this.size1=30,this.size2=70):(this.size2=100,this.size1=0))}static#e=this.\u0275fac=function(i){return new(i||t)(St(u1),St(ad),St(ES),St(Rd),St(d1),St(c1),St(l1))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-select-ra"]],viewQuery:function(i,r){if(1&i&&xc(hW,5),2&i){let o;vo(o=bo())&&(r.mySplitEl=o.first)}},decls:9,vars:4,consts:[["class","user-container",4,"ngIf"],[1,"mb-2",2,"display","flex"],[1,"d-inline-block"],["id","menubtn","data-bs-toggle","collapse","data-bs-target","#navbarToggleExternalContent","aria-controls","navbarToggleExternalContent","aria-expanded","false","aria-label","Toggle navigation","role","button",1,"btn"],[1,"fa-solid","fa-bars"],["class","form-inline d-inline-block position-relative",4,"ngIf"],["class","m-2 d-inline-block",4,"ngIf"],[1,"user-container"],[1,"fa-solid","icon","fa-user"],[1,"form-inline","d-inline-block","position-relative"],["for","ra1"],["id","ra1","aria-label","Default select example",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"m-2","d-inline-block"]],template:function(i,r){1&i&&(_n(0,fW,4,1,"div",0),it(1,"app-manage-ra"),L(2,"div",1)(3,"div",2)(4,"a",3),it(5,"i",4),P()(),_n(6,gW,5,2,"div",5)(7,mW,1,0,"div",6)(8,_W,1,0,"div",5),P()),2&i&&(ht("ngIf",r.user.username),ye(6),ht("ngIf",r.global.interfaceVisible),ye(),ht("ngIf",r.global.interfaceVisible),ye(),ht("ngIf",r.global.interfaceVisible))},dependencies:[Sp,Od,CC,TC,z_,z0,Tg,dW],styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}#menubtn[_ngcontent-%COMP%]{color:#474286}.form-inline[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:5px 10px 5px 0}.form-inline[_ngcontent-%COMP%]   inpselectut[_ngcontent-%COMP%]{vertical-align:middle;margin:5px 10px 5px 0;padding:10px;background-color:#fff;border:1px solid #ddd}select[_ngcontent-%COMP%]{border:.5px solid whitesmoke;background-color:#fff!important;color:#734e81}.btn-nam-good[_ngcontent-%COMP%]{background:#28328a;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-nam-good[_ngcontent-%COMP%]:hover, .btn-nam-good[_ngcontent-%COMP%]:focus, .btn-nam-good.active[_ngcontent-%COMP%]{background:#4251de;color:#fff}#offcanvasExample[_ngcontent-%COMP%]{width:150px;height:150px;margin-top:75px;background:transparent!important;border:0px transparent}.user-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:10px;font-size:15px}.user-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;background:linear-gradient(to right,#474286,#de6168);-webkit-background-clip:text;-webkit-text-fill-color:transparent;display:inline-block}"]})}return t})(),vW=(()=>{class t{constructor(e,i){this.ra=e,this.commonService=i}downloadFiles(){this.commonService.attachments(this.ra.name).subscribe(e=>{const i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=this.ra.name+"_repo.tgz",r.click(),window.URL.revokeObjectURL(i)},e=>{console.error("error"),console.log(e)})}downloadExcel(){this.commonService.exportToFile(this.ra.name,"excel").subscribe(e=>{let i=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,DC.saveAs)(i,this.ra.name+".xlsx")},e=>{alert("Error downloading documentation in EXCEL format")})}downloadWord(){this.commonService.exportToFile(this.ra.name,"word").subscribe(e=>{let i=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});(0,DC.saveAs)(i,this.ra.name+".docx")},e=>{alert("Error downloading documentation in WORD format")})}downloadEFSA(){alert("Not implemented")}downloadREACH(){alert("Not implemented")}downloadEMA(){alert("Not implemented")}downloadFile(){this.commonService.exportToFile(this.ra.name,"yaml").subscribe(e=>{let i=new Blob([e],{type:"text/plain;charset=utf-8"});(0,DC.saveAs)(i,this.ra.name+".yaml")},e=>{alert("Error downloading documentation in YAML format")})}static#e=this.\u0275fac=function(i){return new(i||t)(St(ad),St(Rd))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-report"]],decls:48,vars:3,consts:[[1,"container"],[1,"div-style"],[1,"text-white","p-1",2,"padding-left","5px !important"],[1,"container-information","pt-2"],[1,"pl-2"],[1,"badge","number"],[1,"d-flex","p-2","justify-content-between"],[2,"margin-right","10px !important"],["type","button",1,"btn","btn-ets-bad",3,"click"],["role","group","aria-label","group1 ",1,"btn-group","ml-2"],[1,"align-bottom",2,"margin-right","10px !important"],["id","btnGroupDrop1","type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-ets-bad","dropdown-toggle","ml-2"],["aria-labelledby","btnGroupDrop1",1,"dropdown-menu","column"],["type","button","data-toggle","modal",1,"btn-ets-do","dropdown-item","btn","btn-ets-down","ml-2",3,"click"],["role","group","aria-label","group2 ",1,"btn-group","ml-2"],["id","btnGroupDrop2","type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-ets-bad","dropdown-toggle","ml-2"],["aria-labelledby","btnGroupDrop2",1,"dropdown-menu","column"]],template:function(i,r){1&i&&(L(0,"div",0)(1,"div",1)(2,"h5",2),_e(3,"RA progress"),P()(),L(4,"div",3)(5,"span",4)(6,"span",5),_e(7),P(),_e(8,"Tasks completed"),P(),it(9,"br"),L(10,"span",4)(11,"span",5),_e(12),P(),_e(13,"Steps"),P(),it(14,"br"),L(15,"span",4)(16,"span",5),_e(17),P(),_e(18,"Notes"),P(),L(19,"div",6)(20,"div")(21,"span",7),_e(22,"Download:"),P(),L(23,"button",8),Vn("click",function(){return r.downloadFiles()}),_e(24,"Attachments"),P()(),L(25,"div")(26,"div",9)(27,"span",10),_e(28,"Generate report:"),P(),L(29,"button",11),_e(30,"Generic formats"),P(),L(31,"div",12)(32,"button",13),Vn("click",function(){return r.downloadExcel()}),_e(33,"Excel"),P(),L(34,"button",13),Vn("click",function(){return r.downloadWord()}),_e(35,"Word"),P(),L(36,"button",13),Vn("click",function(){return r.downloadFile()}),_e(37,"YAML"),P()()(),L(38,"div",14)(39,"button",15),_e(40," Template "),P(),L(41,"div",16)(42,"button",13),Vn("click",function(){return r.downloadEFSA()}),_e(43,"EFSA"),P(),L(44,"button",13),Vn("click",function(){return r.downloadREACH()}),_e(45,"REACH"),P(),L(46,"button",13),Vn("click",function(){return r.downloadEMA()}),_e(47,"EMA"),P()()()()()()()),2&i&&(ye(7),ir("",r.ra.status.tasks_completed," "),ye(5),Hi(r.ra.status.step),ye(5),Hi(r.ra.status.notes))},styles:[".btn-ets-edit[_ngcontent-%COMP%]{background:#f6d268;color:#000;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-edit[_ngcontent-%COMP%]:hover, .btn-ets-edit[_ngcontent-%COMP%]:active, .btn-ets-edit[_ngcontent-%COMP%]:focus, .btn-ets-edit.active[_ngcontent-%COMP%]{background:#f1bf0a;color:#000}.btn-ets-do[_ngcontent-%COMP%]{background:#474286;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-do[_ngcontent-%COMP%]:hover, .btn-ets-do[_ngcontent-%COMP%]:active, .btn-ets-do[_ngcontent-%COMP%]:focus, .btn-ets-do.active[_ngcontent-%COMP%]{background:#734e81;color:#fff}.btn-ets-delete[_ngcontent-%COMP%]{background:#ff1818;color:#fff;border-width:0;font-family:Barlow Semi Condensed,Arial,Helvetica;letter-spacing:.05em;border-radius:0}.btn-ets-delete[_ngcontent-%COMP%]:hover, .btn-ets-delete[_ngcontent-%COMP%]:active, .btn-ets-delete[_ngcontent-%COMP%]:focus, .btn-ets-delete.active[_ngcontent-%COMP%]{background:#9a0a0a;color:#fff}.btn-ets-bad[_ngcontent-%COMP%]{background-color:#646363;color:#fff;border-width:0;letter-spacing:.05em;border-radius:0}.btn-ets-bad[_ngcontent-%COMP%]:hover, .btn-ets-bad[_ngcontent-%COMP%]:focus, .btn-ets-bad.active[_ngcontent-%COMP%]{background-color:#9e9d9d;color:#fff}.div-style[_ngcontent-%COMP%]{width:67%;min-height:23px;background:#734e81;border-top-right-radius:2px;border-top-left-radius:2px}.dropdown-menu[_ngcontent-%COMP%]{background:#734e81}.container-information[_ngcontent-%COMP%]{border-bottom-left-radius:2px;border-bottom-right-radius:2px;width:67%}.number[_ngcontent-%COMP%]{color:#935277;font-weight:700}span[_ngcontent-%COMP%]{font-size:18px}.dropdown-item[_ngcontent-%COMP%]{text-align:center}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#734e81}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#935277}"]})}return t})();const bW=["mySplit"];function wW(t,n){1&t&&it(0,"app-overview")}function CW(t,n){1&t&&it(0,"app-general-information")}function TW(t,n){1&t&&it(0,"app-tasks")}function xW(t,n){1&t&&it(0,"app-decisions")}let EW=(()=>{class t{constructor(e,i,r,o,l,h){this.global=e,this.ra=i,this.user=r,this.commonService=o,this.func=l,this.keycloackService=h,this.title="namastox_web",this.navbarleft=60,this.navbarright=40,this._size1=100,this._size2=0}ngOnInit(){console.log("keycloak function"),this.keycloackService.getSessionUser().subscribe({next:e=>{console.log("function get username"),console.log("result:",e.username),this.user.username=e.username}}),this.commonService.getRaList().subscribe({next:e=>{this.ra.listRA=[...e],this.ra.listRA.length>0&&(this.ra.name=this.ra.listRA[this.ra.listRA.length-1],this.commonService.getGeneralInfo(this.ra.name).subscribe({next:i=>{this.ra.general_information=i,this.func.refreshRA(),setTimeout(()=>{this.global.interfaceVisible=!0},500)},error:i=>{console.log(i)}}))},error:e=>{console.error(e)}})}loadGeneralInfoCanvas(){this.commonService.drawGeneralInfoCanvas(!0)}loadOverviewCanvas(){this.commonService.drawOverviewCanvas(!1)}get size1(){return this._size1}set size1(e){this._size1=e}get size2(){return this._size2}set size2(e){this._size2=e}static#e=this.\u0275fac=function(i){return new(i||t)(St(u1),St(ad),St(ES),St(Rd),St(d1),St(Z6))};static#t=this.\u0275cmp=bs({type:t,selectors:[["app-root"]],viewQuery:function(i,r){if(1&i&&xc(bW,5),2&i){let o;vo(o=bo())&&(r.mySplitEl=o.first)}},decls:39,vars:8,consts:[["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pills-overview-tab","data-bs-toggle","pill","data-bs-target","#pills-overview","type","button","role","tab","aria-controls","pills-overview","aria-selected","True",1,"nav-link","active",3,"click"],["id","pills-gen-information-tab","data-bs-toggle","pill","data-bs-target","#pills-gen-information","type","button","role","tab","aria-controls","pills-gen-information","aria-selected","false",1,"nav-link",3,"click"],["id","pills-tasks-tab","data-bs-toggle","pill","data-bs-target","#pills-tasks","type","button","role","tab","aria-controls","pills-tasks","aria-selected","false",1,"nav-link"],["id","pills-decisions-tab","data-bs-toggle","pill","data-bs-target","#pills-decisions","type","button","role","tab","aria-controls","pills-decisions","aria-selected","false",1,"nav-link"],["id","pills-notes-tab","data-bs-toggle","pill","data-bs-target","#pills-notes","type","button","role","tab","aria-controls","pills-notes","aria-selected","false",1,"nav-link"],["role","presentation",1,"nav-item",2,"margin-right","auto !important"],["id","pills-report-tab","data-bs-toggle","pill","data-bs-target","#pills-report","type","button","role","tab","aria-controls","pills-report","aria-selected","false",1,"nav-link"],["alt","",2,"height","44px",3,"src"],["alt","",2,"height","30px","margin-top","8px","margin-right","7px",3,"src"],["direction","horizontal",1,"",2,"height","93vh"],[3,"size"],["id","pills-tabContent",1,"tab-content","container-fluid"],["id","pills-overview","role","tabpanel","aria-labelledby","pills-overview-tab",1,"tab-pane","fade","show","active","mt-2"],[4,"ngIf"],["id","pills-gen-information","role","tabpanel","aria-labelledby","pills-gen-information-tab",1,"tab-pane","fade","mt-2"],["id","pills-tasks","role","tabpanel","aria-labelledby","pills-tasks-tab",1,"tab-pane","fade","mt-2"],["id","pills-decisions","role","tabpanel","aria-labelledby","pills-decisions-tab",1,"tab-pane","fade","mt-2"],["id","pills-notes","role","tabpanel","aria-labelledby","pills-notes-tab",1,"tab-pane","fade","mt-2"],["id","pills-report","role","tabpanel","aria-labelledby","pills-report-tab",1,"tab-pane","fade","mt-2"]],template:function(i,r){1&i&&(L(0,"ul",0)(1,"li",1)(2,"button",2),Vn("click",function(){return r.loadOverviewCanvas()}),_e(3," Overview "),P()(),L(4,"li",1)(5,"button",3),Vn("click",function(){return r.loadGeneralInfoCanvas()}),_e(6," General information "),P()(),L(7,"li",1)(8,"button",4),_e(9," Tasks "),P()(),L(10,"li",1)(11,"button",5),_e(12," Decisions "),P()(),L(13,"li",1)(14,"button",6),_e(15," Notes "),P()(),L(16,"li",7)(17,"button",8),_e(18," Report "),P()(),it(19,"img",9)(20,"img",10),P(),L(21,"as-split",11)(22,"as-split-area",12)(23,"div",13),it(24,"app-select-ra"),L(25,"div",14),_n(26,wW,1,0,"app-overview",15),P(),L(27,"div",16),_n(28,CW,1,0,"app-general-information",15),P(),L(29,"div",17),_n(30,TW,1,0,"app-tasks",15),P(),L(31,"div",18),_n(32,xW,1,0,"app-decisions",15),P(),L(33,"div",19),it(34,"app-notes"),P(),L(35,"div",20),it(36,"app-report"),P()()(),L(37,"as-split-area",12),it(38,"app-workflow"),P()()),2&i&&(ye(19),ht("src","../../assets/img/aspis_logo.png",ra),ye(),ht("src","../../assets/img/riskhunterlogowhite.png",ra),ye(2),ht("size",r.navbarleft),ye(4),ht("ngIf",r.global.interfaceVisible),ye(2),ht("ngIf",r.global.interfaceVisible),ye(2),ht("ngIf",r.global.interfaceVisible),ye(2),ht("ngIf",r.global.interfaceVisible),ye(5),ht("size",r.navbarright))},dependencies:[Od,q6,oH,_H,XH,ZH,tj,S$,rW,yW,vW],styles:[".nav[_ngcontent-%COMP%]{background:linear-gradient(to right,#474286,#de6168)}.nav-link[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.nav-link.active[_ngcontent-%COMP%]{background:none;color:#fff;font-weight:700;font-size:1rem;border-bottom:6px solid #734E81;border-radius:0}.app-base[_ngcontent-%COMP%]{padding-left:0;padding-right:0;overflow-x:hidden}  .as-split-gutter-icon{background-color:#935277}"]})}return t})();function l8(t){return new Yt(3e3,!1)}function f1(t){switch(t.length){case 0:return new AC;case 1:return t[0];default:return new t8(t)}}function c8(t,n,e=new Map,i=new Map){const r=[],o=[];let l=-1,h=null;if(n.forEach(g=>{const b=g.get("offset"),E=b==l,B=E&&h||new Map;g.forEach((ce,de)=>{let De=de,He=ce;if("offset"!==de)switch(De=t.normalizePropertyName(De,r),He){case"!":He=e.get(de);break;case H0:He=i.get(de);break;default:He=t.normalizeStyleValue(de,De,He,r)}B.set(De,He)}),E||o.push(B),h=B,l=b}),r.length)throw function XW(t){return new Yt(3502,!1)}();return o}function r4(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&s4(e,"start",t)));break;case"done":t.onDone(()=>i(e&&s4(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&s4(e,"destroy",t)))}}function s4(t,n,e){const o=o4(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),l=t._data;return null!=l&&(o._data=l),o}function o4(t,n,e,i,r="",o=0,l){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!l}}function Ah(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function u8(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const oG=typeof document>"u"?null:document.documentElement;function a4(t){const n=t.parentNode||t.host||null;return n===oG?null:n}let j_=null,d8=!1;function h8(t,n){for(;n;){if(n===t)return!0;n=a4(n)}return!1}function f8(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let l4=(()=>{class t{validateStyleProperty(e){return function lG(t){j_||(j_=function cG(){return typeof document<"u"?document.body:null}()||{},d8=!!j_.style&&"WebkitAppearance"in j_.style);let n=!0;return j_.style&&!function aG(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in j_.style,!n&&d8&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in j_.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return h8(e,i)}getParentElement(e){return a4(e)}query(e,i,r){return f8(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,l,h=[],g){return new AC(r,o)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})();class c4{static#e=this.NOOP=new l4}class u4{}const dG=1e3,d4="ng-enter",AS="ng-leave",kS="ng-trigger",DS=".ng-trigger",g8="ng-animating",h4=".ng-animating";function j0(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:f4(parseFloat(n[1]),n[2])}function f4(t,n){return"s"===n?t*dG:t}function MS(t,n,e){return t.hasOwnProperty("duration")?t:function fG(t,n,e){let r,o=0,l="";if("string"==typeof t){const h=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return n.push(l8()),{duration:0,delay:0,easing:""};r=f4(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(o=f4(parseFloat(g),h[4]));const b=h[5];b&&(l=b)}else r=t;if(!e){let h=!1,g=n.length;r<0&&(n.push(function SW(){return new Yt(3100,!1)}()),h=!0),o<0&&(n.push(function AW(){return new Yt(3101,!1)}()),h=!0),h&&n.splice(g,0,l8())}return{duration:r,delay:o,easing:l}}(t,n,e)}function xg(t,n,e){n.forEach((i,r)=>{const o=g4(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=i})}function $_(t,n){n.forEach((e,i)=>{const r=g4(i);t.style[r]=""})}function MC(t){return Array.isArray(t)?1==t.length?t[0]:function vH(t,n=null){return{type:ts.Sequence,steps:t,options:n}}(t):t}const p4=new RegExp("{{\\s*(.+?)\\s*}}","g");function _8(t){let n=[];if("string"==typeof t){let e;for(;e=p4.exec(t);)n.push(e[1]);p4.lastIndex=0}return n}function IC(t,n,e){const i=`${t}`,r=i.replace(p4,(o,l)=>{let h=n[l];return null==h&&(e.push(function DW(t){return new Yt(3003,!1)}()),h=""),h.toString()});return r==i?t:r}const mG=/-+([a-z0-9])/g;function g4(t){return t.replace(mG,(...n)=>n[1].toUpperCase())}function kh(t,n,e){switch(n.type){case ts.Trigger:return t.visitTrigger(n,e);case ts.State:return t.visitState(n,e);case ts.Transition:return t.visitTransition(n,e);case ts.Sequence:return t.visitSequence(n,e);case ts.Group:return t.visitGroup(n,e);case ts.Animate:return t.visitAnimate(n,e);case ts.Keyframes:return t.visitKeyframes(n,e);case ts.Style:return t.visitStyle(n,e);case ts.Reference:return t.visitReference(n,e);case ts.AnimateChild:return t.visitAnimateChild(n,e);case ts.AnimateRef:return t.visitAnimateRef(n,e);case ts.Query:return t.visitQuery(n,e);case ts.Stagger:return t.visitStagger(n,e);default:throw function MW(t){return new Yt(3004,!1)}()}}function m4(t,n){return window.getComputedStyle(t)[n]}const vG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class y8 extends u4{normalizePropertyName(n,e){return g4(n)}normalizeStyleValue(n,e,i,r){let o="";const l=i.toString().trim();if(vG.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function IW(t,n){return new Yt(3005,!1)}())}return l+o}}const IS="*";const NS=new Set(["true","1"]),OS=new Set(["false","0"]);function v8(t,n){const e=NS.has(t)||OS.has(t),i=NS.has(n)||OS.has(n);return(r,o)=>{let l=t==IS||t==r,h=n==IS||n==o;return!l&&e&&"boolean"==typeof r&&(l=r?NS.has(t):OS.has(t)),!h&&i&&"boolean"==typeof o&&(h=o?NS.has(n):OS.has(n)),l&&h}}const TG=new RegExp("s*:selfs*,?","g");function _4(t,n,e,i){return new xG(t).build(n,e,i)}class xG{constructor(n){this._driver=n}build(n,e,i){const r=new AG(e);return this._resetContextStyleTimingState(r),kh(this,MC(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],l=[];return"@"==n.name.charAt(0)&&e.errors.push(function NW(){return new Yt(3006,!1)}()),n.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),h.type==ts.State){const g=h,b=g.name;b.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,o.push(this.visitState(g,e))}),g.name=b}else if(h.type==ts.Transition){const g=this.visitTransition(h,e);i+=g.queryCount,r+=g.depCount,l.push(g)}else e.errors.push(function OW(){return new Yt(3007,!1)}())}),{type:ts.Trigger,name:n.name,states:o,transitions:l,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const o=new Set,l=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(g=>{_8(g).forEach(b=>{l.hasOwnProperty(b)||o.add(b)})})}),o.size&&e.errors.push(function RW(t,n){return new Yt(3008,!1)}(0,o.values()))}return{type:ts.State,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=kh(this,MC(n.animation),e),r=function bG(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function wG(t,n,e){if(":"==t[0]){const g=function CG(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function $W(t){return new Yt(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof g)return void n.push(g);t=g}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function jW(t){return new Yt(3015,!1)}()),n;const r=i[1],o=i[2],l=i[3];n.push(v8(r,l)),"<"==o[0]&&(r!=IS||l!=IS)&&n.push(v8(l,r))}(i,e,n)):e.push(t),e}(n.expr,e.errors);return{type:ts.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:W_(n.options)}}visitSequence(n,e){return{type:ts.Sequence,steps:n.steps.map(i=>kh(this,i,e)),options:W_(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const o=n.steps.map(l=>{e.currentTime=i;const h=kh(this,l,e);return r=Math.max(r,e.currentTime),h});return e.currentTime=r,{type:ts.Group,steps:o,options:W_(n.options)}}visitAnimate(n,e){const i=function DG(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return y4(MS(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=y4(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=MS(e,n);return y4(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,o=n.styles?n.styles:SC({});if(o.type==ts.Keyframes)r=this.visitKeyframes(o,e);else{let l=n.styles,h=!1;if(!l){h=!0;const b={};i.easing&&(b.easing=i.easing),l=SC(b)}e.currentTime+=i.duration+i.delay;const g=this.visitStyle(l,e);g.isEmptyStep=h,r=g}return e.currentAnimateTimings=null,{type:ts.Animate,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let h of r)"string"==typeof h?h===H0?i.push(h):e.errors.push(new Yt(3002,!1)):i.push(new Map(Object.entries(h)));let o=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!o))for(let g of h.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:ts.Style,styles:i,easing:l,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,g)=>{const b=e.collectedStyles.get(e.currentQuerySelector),E=b.get(g);let B=!0;E&&(o!=r&&o>=E.startTime&&r<=E.endTime&&(e.errors.push(function FW(t,n,e,i,r){return new Yt(3010,!1)}()),B=!1),o=E.startTime),B&&b.set(g,{startTime:o,endTime:r}),e.options&&function gG(t,n,e){const i=n.params||{},r=_8(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function kW(t){return new Yt(3001,!1)}())})}(h,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:ts.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function LW(){return new Yt(3011,!1)}()),i;let o=0;const l=[];let h=!1,g=!1,b=0;const E=n.steps.map(bt=>{const yt=this._makeStyleAst(bt,e);let Cn=null!=yt.offset?yt.offset:function kG(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(yt.styles),Mn=0;return null!=Cn&&(o++,Mn=yt.offset=Cn),g=g||Mn<0||Mn>1,h=h||Mn<b,b=Mn,l.push(Mn),yt});g&&e.errors.push(function BW(){return new Yt(3012,!1)}()),h&&e.errors.push(function VW(){return new Yt(3200,!1)}());const B=n.steps.length;let ce=0;o>0&&o<B?e.errors.push(function UW(){return new Yt(3202,!1)}()):0==o&&(ce=1/(B-1));const de=B-1,De=e.currentTime,He=e.currentAnimateTimings,ot=He.duration;return E.forEach((bt,yt)=>{const Cn=ce>0?yt==de?1:ce*yt:l[yt],Mn=Cn*ot;e.currentTime=De+He.delay+Mn,He.duration=Mn,this._validateStyleAst(bt,e),bt.offset=Cn,i.styles.push(bt)}),i}visitReference(n,e){return{type:ts.Reference,animation:kh(this,MC(n.animation),e),options:W_(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:ts.AnimateChild,options:W_(n.options)}}visitAnimateRef(n,e){return{type:ts.AnimateRef,animation:this.visitReference(n.animation,e),options:W_(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[o,l]=function EG(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(TG,"")),t=t.replace(/@\*/g,DS).replace(/@\w+/g,e=>DS+"-"+e.slice(1)).replace(/:animating/g,h4),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+o:o,Ah(e.collectedStyles,e.currentQuerySelector,new Map);const h=kh(this,MC(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:ts.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:h,originalSelector:n.selector,options:W_(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function zW(){return new Yt(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:MS(n.timings,e.errors,!0);return{type:ts.Stagger,animation:kh(this,MC(n.animation),e),timings:i,options:null}}}class AG{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function W_(t){return t?(t={...t}).params&&(t.params=function SG(t){return t?{...t}:null}(t.params)):t={},t}function y4(t,n,e){return{duration:t,delay:n,easing:e}}function v4(t,n,e,i,r,o,l=null,h=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:l,subTimeline:h}}class RS{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const NG=new RegExp(":enter","g"),RG=new RegExp(":leave","g");function b4(t,n,e,i,r,o=new Map,l=new Map,h,g,b=[]){return(new PG).buildKeyframes(t,n,e,i,r,o,l,h,g,b)}class PG{buildKeyframes(n,e,i,r,o,l,h,g,b,E=[]){b=b||new RS;const B=new w4(n,e,b,r,o,E,[]);B.options=g;const ce=g.delay?j0(g.delay):0;B.currentTimeline.delayNextStep(ce),B.currentTimeline.setStyles([l],null,B.errors,g),kh(this,i,B);const de=B.timelines.filter(De=>De.containsAnimation());if(de.length&&h.size){let De;for(let He=de.length-1;He>=0;He--){const ot=de[He];if(ot.element===e){De=ot;break}}De&&!De.allowOnlyTimelineStyles()&&De.setStyles([h],null,B.errors,g)}return de.length?de.map(De=>De.buildKeyframes()):[v4(e,[],[],[],0,ce,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),o=e.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);o!=l&&e.transformIntoNewTimeline(l)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const o=r?.delay;if(o){const l="number"==typeof o?o:j0(IC(o,r?.params??{},e.errors));i.delayNextStep(l)}}}_visitSubInstructions(n,e,i){let o=e.currentTimeline.currentTime;const l=null!=i.duration?j0(i.duration):null,h=null!=i.delay?j0(i.delay):null;return 0!==l&&n.forEach(g=>{const b=e.appendInstructionToTimeline(g,l,h);o=Math.max(o,b.duration+b.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),kh(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const o=n.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){r.previousNode.type==ts.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=PS);const l=j0(o.delay);r.delayNextStep(l)}n.steps.length&&(n.steps.forEach(l=>kh(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const o=n.options&&n.options.delay?j0(n.options.delay):0;n.steps.forEach(l=>{const h=e.createSubContext(n.options);o&&h.delayNextStep(o),kh(this,l,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return MS(e.params?IC(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=n.style;o.type==ts.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,h=e.createSubContext().currentTimeline;h.easing=i.easing,n.styles.forEach(g=>{h.forwardTime((g.offset||0)*o),h.setStyles(g.styles,g.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(r+o),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},o=r.delay?j0(r.delay):0;o&&(e.previousNode.type===ts.Style||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=PS);let l=i;const h=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=h.length;let g=null;h.forEach((b,E)=>{e.currentQueryIndex=E;const B=e.createSubContext(n.options,b);o&&B.delayNextStep(o),b===e.element&&(g=B.currentTimeline),kh(this,n.animation,B),B.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,B.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),g&&(e.currentTimeline.mergeTimelineCollectedStyles(g),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,o=n.timings,l=Math.abs(o.duration),h=l*(e.currentQueryTotal-1);let g=l*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=h-g;break;case"full":g=i.currentStaggerTime}const E=e.currentTimeline;g&&E.delayNextStep(g);const B=E.currentTime;kh(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-B+(r.startTime-i.currentTimeline.startTime)}}const PS={};class w4{constructor(n,e,i,r,o,l,h,g){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=PS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new FS(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=j0(i.duration)),null!=i.delay&&(r.delay=j0(i.delay));const o=i.params;if(o){let l=r.params;l||(l=this.options.params={}),Object.keys(o).forEach(h=>{(!e||!l.hasOwnProperty(h))&&(l[h]=IC(o[h],l,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,o=new w4(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=PS,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},o=new FG(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,o,l){let h=[];if(r&&h.push(this.element),n.length>0){n=(n=n.replace(NG,"."+this._enterClassName)).replace(RG,"."+this._leaveClassName);let b=this._driver.query(this.element,n,1!=i);0!==i&&(b=i<0?b.slice(b.length+i,b.length):b.slice(0,i)),h.push(...b)}return!o&&0==h.length&&l.push(function HW(t){return new Yt(3014,!1)}()),h}}class FS{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new FS(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||H0),this._currentKeyframe.set(e,H0);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},l=function LG(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i??=n.keys();for(let o of i)e.set(o,H0)}else for(let[o,l]of r)e.set(o,l)}),e}(n,this._globalTimelineStyles);for(let[h,g]of l){const b=IC(g,o,i);this._pendingStyles.set(h,b),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??H0),this._updateStyle(h,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,g)=>{const b=new Map([...this._backFill,...h]);b.forEach((E,B)=>{"!"===E?n.add(B):E===H0&&e.add(B)}),i||b.set("offset",g/this.duration),r.push(b)});const o=[...n.values()],l=[...e.values()];if(i){const h=r[0],g=new Map(h);h.set("offset",0),g.set("offset",1),r=[h,g]}return v4(this.element,r,o,l,this.duration,this.startTime,this.easing,!1)}}class FG extends FS{constructor(n,e,i,r,o,l,h=!1){super(n,e,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],l=i+e,h=e/l,g=new Map(n[0]);g.set("offset",0),o.push(g);const b=new Map(n[0]);b.set("offset",C8(h)),o.push(b);const E=n.length-1;for(let B=1;B<=E;B++){let ce=new Map(n[B]);const de=ce.get("offset");ce.set("offset",C8((e+de*i)/l)),o.push(ce)}i=l,e=0,r="",n=o}return v4(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function C8(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}function T8(t,n,e,i,r,o,l,h,g,b,E,B,ce){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:l,timelines:h,queriedElements:g,preStyleProps:b,postStyleProps:E,totalTime:B,errors:ce}}const C4={};class x8{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function BG(t,n,e,i,r){return t.some(o=>o(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,o,l,h,g,b,E){const B=[],ce=this.ast.options&&this.ast.options.params||C4,De=this.buildStyles(i,h&&h.params||C4,B),He=g&&g.params||C4,ot=this.buildStyles(r,He,B),bt=new Set,yt=new Map,Cn=new Map,Mn="void"===r,si={params:E8(He,ce),delay:this.ast.options?.delay},bi=E?[]:b4(n,e,this.ast.animation,o,l,De,ot,si,b,B);let sr=0;return bi.forEach(Ur=>{sr=Math.max(Ur.duration+Ur.delay,sr)}),B.length?T8(e,this._triggerName,i,r,Mn,De,ot,[],[],yt,Cn,sr,B):(bi.forEach(Ur=>{const Jo=Ur.element,sa=Ah(yt,Jo,new Set);Ur.preStyleProps.forEach(kc=>sa.add(kc));const Ac=Ah(Cn,Jo,new Set);Ur.postStyleProps.forEach(kc=>Ac.add(kc)),Jo!==e&&bt.add(Jo)}),T8(e,this._triggerName,i,r,Mn,De,ot,bi,[...bt.values()],yt,Cn,sr))}}function E8(t,n){const e={...n};return Object.entries(t).forEach(([i,r])=>{null!=r&&(e[i]=r)}),e}class VG{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=E8(n,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,h)=>{l&&(l=IC(l,r,e));const g=this.normalizer.normalizePropertyName(h,e);l=this.normalizer.normalizeStyleValue(h,g,l,e),i.set(h,l)})}),i}}class zG{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new VG(r.style,r.options&&r.options.params||{},i))}),S8(this.states,"true","1"),S8(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new x8(n,r,this.states))}),this.fallbackTransition=function HG(t,n,e){return new x8(t,{type:ts.Transition,animation:{type:ts.Sequence,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(l=>l.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function S8(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const jG=new RS;class $G{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],o=_4(this._driver,e,i,[]);if(i.length)throw function qW(t){return new Yt(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,e,i){const r=n.element,o=c8(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],o=this._animations.get(n);let l;const h=new Map;if(o?(l=b4(this._driver,e,o,d4,AS,new Map,new Map,i,jG,r),l.forEach(E=>{const B=Ah(h,E.element,new Map);E.postStyleProps.forEach(ce=>B.set(ce,null))})):(r.push(function KW(){return new Yt(3300,!1)}()),l=[]),r.length)throw function ZW(t){return new Yt(3504,!1)}();h.forEach((E,B)=>{E.forEach((ce,de)=>{E.set(de,this._driver.computeStyle(B,de,H0))})});const b=f1(l.map(E=>{const B=h.get(E.element);return this._buildPlayer(E,new Map,B)}));return this._playersById.set(n,b),b.onDestroy(()=>this.destroy(n)),this.players.push(b),b}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function QW(t){return new Yt(3301,!1)}();return e}listen(n,e,i,r){const o=o4(e,"","","");return r4(this._getPlayer(n),i,o,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const A8="ng-animate-queued",T4="ng-animate-disabled",qG=[],k8={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},KG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dp="__ng_removed";class x4{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function eY(t){return t??null}(i?n.value:n),i){const{value:o,...l}=n;this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const NC="void",E4=new x4(NC);class ZG{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Tf(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function JW(t,n){return new Yt(3302,!1)}();if(null==i||0==i.length)throw function eG(t){return new Yt(3303,!1)}();if(!function tY(t){return"start"==t||"done"==t}(i))throw function tG(t,n){return new Yt(3400,!1)}();const o=Ah(this._elementListeners,n,[]),l={name:e,phase:i,callback:r};o.push(l);const h=Ah(this._engine.statesByElement,n,new Map);return h.has(e)||(Tf(n,kS),Tf(n,kS+"-"+e),h.set(e,E4)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(l);g>=0&&o.splice(g,1),this._triggers.has(e)||h.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function nG(t){return new Yt(3401,!1)}();return e}trigger(n,e,i,r=!0){const o=this._getTrigger(e),l=new S4(this.id,e,n);let h=this._engine.statesByElement.get(n);h||(Tf(n,kS),Tf(n,kS+"-"+e),this._engine.statesByElement.set(n,h=new Map));let g=h.get(e);const b=new x4(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&g&&b.absorbOptions(g.options),h.set(e,b),g||(g=E4),b.value!==NC&&g.value===b.value){if(!function rY(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}(g.params,b.params)){const He=[],ot=o.matchStyles(g.value,g.params,He),bt=o.matchStyles(b.value,b.params,He);He.length?this._engine.reportError(He):this._engine.afterFlush(()=>{$_(n,ot),xg(n,bt)})}return}const ce=Ah(this._engine.playersByElement,n,[]);ce.forEach(He=>{He.namespaceId==this.id&&He.triggerName==e&&He.queued&&He.destroy()});let de=o.matchTransition(g.value,b.value,n,b.params),De=!1;if(!de){if(!r)return;de=o.fallbackTransition,De=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:de,fromState:g,toState:b,player:l,isFallbackTransition:De}),De||(Tf(n,A8),l.onStart(()=>{yb(n,A8)})),l.onDone(()=>{let He=this.players.indexOf(l);He>=0&&this.players.splice(He,1);const ot=this._engine.playersByElement.get(n);if(ot){let bt=ot.indexOf(l);bt>=0&&ot.splice(bt,1)}}),this.players.push(l),ce.push(l),l}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,DS,!0);i.forEach(r=>{if(r[Dp])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(l=>l.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const o=this._engine.statesByElement.get(n),l=new Map;if(o){const h=[];if(o.forEach((g,b)=>{if(l.set(b,g.value),this._triggers.has(b)){const E=this.trigger(n,b,NC,r);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,l),i&&f1(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(o=>{const l=o.name;if(r.has(l))return;r.add(l);const g=this._triggers.get(l).fallbackTransition,b=i.get(l)||E4,E=new x4(NC),B=new S4(this.id,l,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:l,transition:g,fromState:b,toState:E,player:B,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let l=n;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const o=n[Dp];(!o||o===k8)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Tf(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,l=this._elementListeners.get(o);l&&l.forEach(h=>{if(h.name==i.triggerName){const g=o4(o,i.triggerName,i.fromState.value,i.toState.value);g._data=n,r4(i.player,h.phase,g,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class QG{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i,r){this.bodyNode=n,this.driver=e,this._normalizer=i,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,l)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new ZG(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(e);for(;h;){const g=r.get(h);if(g){const b=i.indexOf(g);i.splice(b+1,0,n),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(n,e,i,r){if(LS(e)){const o=this._fetchNamespace(n);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!LS(e))return;const o=e[Dp];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(n){const l=this._fetchNamespace(n);l&&l.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Tf(n,T4)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),yb(n,T4))}removeNode(n,e,i){if(LS(e)){this.scheduler?.notify();const r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const o=this.namespacesByHostElement.get(e);o&&o.id!==n&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,o){this.collectedLeaveElements.push(e),e[Dp]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,e,i,r,o){return LS(e)?this._fetchNamespace(n).listen(e,i,r,o):()=>{}}_buildInstruction(n,e,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,DS,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,h4,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return f1(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Dp];if(e&&e.setForRemoval){if(n[Dp]=k8,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(T4)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Tf(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?f1(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function iG(t){return new Yt(3402,!1)}()}_flushAnimations(n,e){const i=new RS,r=[],o=new Map,l=[],h=new Map,g=new Map,b=new Map,E=new Set;this.disabledNodes.forEach(Fi=>{E.add(Fi);const lr=this.driver.query(Fi,".ng-animate-queued",!0);for(let zr=0;zr<lr.length;zr++)E.add(lr[zr])});const B=this.bodyNode,ce=Array.from(this.statesByElement.keys()),de=I8(ce,this.collectedEnterElements),De=new Map;let He=0;de.forEach((Fi,lr)=>{const zr=d4+He++;De.set(lr,zr),Fi.forEach(Gs=>Tf(Gs,zr))});const ot=[],bt=new Set,yt=new Set;for(let Fi=0;Fi<this.collectedLeaveElements.length;Fi++){const lr=this.collectedLeaveElements[Fi],zr=lr[Dp];zr&&zr.setForRemoval&&(ot.push(lr),bt.add(lr),zr.hasAnimation?this.driver.query(lr,".ng-star-inserted",!0).forEach(Gs=>bt.add(Gs)):yt.add(lr))}const Cn=new Map,Mn=I8(ce,Array.from(bt));Mn.forEach((Fi,lr)=>{const zr=AS+He++;Cn.set(lr,zr),Fi.forEach(Gs=>Tf(Gs,zr))}),n.push(()=>{de.forEach((Fi,lr)=>{const zr=De.get(lr);Fi.forEach(Gs=>yb(Gs,zr))}),Mn.forEach((Fi,lr)=>{const zr=Cn.get(lr);Fi.forEach(Gs=>yb(Gs,zr))}),ot.forEach(Fi=>{this.processLeaveNode(Fi)})});const si=[],bi=[];for(let Fi=this._namespaceList.length-1;Fi>=0;Fi--)this._namespaceList[Fi].drainQueuedTransitions(e).forEach(zr=>{const Gs=zr.player,_l=zr.element;if(si.push(Gs),this.collectedEnterElements.length){const Yl=_l[Dp];if(Yl&&Yl.setForMove){if(Yl.previousTriggersValues&&Yl.previousTriggersValues.has(zr.triggerName)){const ld=Yl.previousTriggersValues.get(zr.triggerName),Vu=this.statesByElement.get(zr.element);if(Vu&&Vu.has(zr.triggerName)){const Ab=Vu.get(zr.triggerName);Ab.value=ld,Vu.set(zr.triggerName,Ab)}}return void Gs.destroy()}}const Ld=!B||!this.driver.containsElement(B,_l),Mc=Cn.get(_l),Nh=De.get(_l),Ho=this._buildInstruction(zr,i,Nh,Mc,Ld);if(Ho.errors&&Ho.errors.length)return void bi.push(Ho);if(Ld)return Gs.onStart(()=>$_(_l,Ho.fromStyles)),Gs.onDestroy(()=>xg(_l,Ho.toStyles)),void r.push(Gs);if(zr.isFallbackTransition)return Gs.onStart(()=>$_(_l,Ho.fromStyles)),Gs.onDestroy(()=>xg(_l,Ho.toStyles)),void r.push(Gs);const Op=[];Ho.timelines.forEach(Yl=>{Yl.stretchStartingKeyframe=!0,this.disabledNodes.has(Yl.element)||Op.push(Yl)}),Ho.timelines=Op,i.append(_l,Ho.timelines),l.push({instruction:Ho,player:Gs,element:_l}),Ho.queriedElements.forEach(Yl=>Ah(h,Yl,[]).push(Gs)),Ho.preStyleProps.forEach((Yl,ld)=>{if(Yl.size){let Vu=g.get(ld);Vu||g.set(ld,Vu=new Set),Yl.forEach((Ab,ty)=>Vu.add(ty))}}),Ho.postStyleProps.forEach((Yl,ld)=>{let Vu=b.get(ld);Vu||b.set(ld,Vu=new Set),Yl.forEach((Ab,ty)=>Vu.add(ty))})});if(bi.length){const Fi=[];bi.forEach(lr=>{Fi.push(function rG(t,n){return new Yt(3505,!1)}())}),si.forEach(lr=>lr.destroy()),this.reportError(Fi)}const sr=new Map,Ur=new Map;l.forEach(Fi=>{const lr=Fi.element;i.has(lr)&&(Ur.set(lr,lr),this._beforeAnimationBuild(Fi.player.namespaceId,Fi.instruction,sr))}),r.forEach(Fi=>{const lr=Fi.element;this._getPreviousPlayers(lr,!1,Fi.namespaceId,Fi.triggerName,null).forEach(Gs=>{Ah(sr,lr,[]).push(Gs),Gs.destroy()})});const Jo=ot.filter(Fi=>O8(Fi,g,b)),sa=new Map;M8(sa,this.driver,yt,b,H0).forEach(Fi=>{O8(Fi,g,b)&&Jo.push(Fi)});const kc=new Map;de.forEach((Fi,lr)=>{M8(kc,this.driver,new Set(Fi),g,"!")}),Jo.forEach(Fi=>{const lr=sa.get(Fi),zr=kc.get(Fi);sa.set(Fi,new Map([...lr?.entries()??[],...zr?.entries()??[]]))});const Dc=[],Ag=[],kg={};l.forEach(Fi=>{const{element:lr,player:zr,instruction:Gs}=Fi;if(i.has(lr)){if(E.has(lr))return zr.onDestroy(()=>xg(lr,Gs.toStyles)),zr.disabled=!0,zr.overrideTotalTime(Gs.totalTime),void r.push(zr);let _l=kg;if(Ur.size>1){let Mc=lr;const Nh=[];for(;Mc=Mc.parentNode;){const Ho=Ur.get(Mc);if(Ho){_l=Ho;break}Nh.push(Mc)}Nh.forEach(Ho=>Ur.set(Ho,_l))}const Ld=this._buildAnimation(zr.namespaceId,Gs,sr,o,kc,sa);if(zr.setRealPlayer(Ld),_l===kg)Dc.push(zr);else{const Mc=this.playersByElement.get(_l);Mc&&Mc.length&&(zr.parentPlayer=f1(Mc)),r.push(zr)}}else $_(lr,Gs.fromStyles),zr.onDestroy(()=>xg(lr,Gs.toStyles)),Ag.push(zr),E.has(lr)&&r.push(zr)}),Ag.forEach(Fi=>{const lr=o.get(Fi.element);if(lr&&lr.length){const zr=f1(lr);Fi.setRealPlayer(zr)}}),r.forEach(Fi=>{Fi.parentPlayer?Fi.syncPlayerEvents(Fi.parentPlayer):Fi.destroy()});for(let Fi=0;Fi<ot.length;Fi++){const lr=ot[Fi],zr=lr[Dp];if(yb(lr,AS),zr&&zr.hasAnimation)continue;let Gs=[];if(h.size){let Ld=h.get(lr);Ld&&Ld.length&&Gs.push(...Ld);let Mc=this.driver.query(lr,h4,!0);for(let Nh=0;Nh<Mc.length;Nh++){let Ho=h.get(Mc[Nh]);Ho&&Ho.length&&Gs.push(...Ho)}}const _l=Gs.filter(Ld=>!Ld.destroyed);_l.length?nY(this,lr,_l):this.processLeaveNode(lr)}return ot.length=0,Dc.forEach(Fi=>{this.players.push(Fi),Fi.onDone(()=>{Fi.destroy();const lr=this.players.indexOf(Fi);this.players.splice(lr,1)}),Fi.play()}),Dc}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,o){let l=[];if(e){const h=this.playersByQueriedElement.get(n);h&&(l=h)}else{const h=this.playersByElement.get(n);if(h){const g=!o||o==NC;h.forEach(b=>{b.queued||!g&&b.triggerName!=r||l.push(b)})}}return(i||r)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),l}_beforeAnimationBuild(n,e,i){const o=e.element,l=e.isRemovalTransition?void 0:n,h=e.isRemovalTransition?void 0:e.triggerName;for(const g of e.timelines){const b=g.element,E=b!==o,B=Ah(i,b,[]);this._getPreviousPlayers(b,E,l,h,e.toState).forEach(de=>{const De=de.getRealPlayer();De.beforeDestroy&&De.beforeDestroy(),de.destroy(),B.push(de)})}$_(o,e.fromStyles)}_buildAnimation(n,e,i,r,o,l){const h=e.triggerName,g=e.element,b=[],E=new Set,B=new Set,ce=e.timelines.map(De=>{const He=De.element;E.add(He);const ot=He[Dp];if(ot&&ot.removedBeforeQueried)return new AC(De.duration,De.delay);const bt=He!==g,yt=function iY(t){const n=[];return N8(t,n),n}((i.get(He)||qG).map(sr=>sr.getRealPlayer())).filter(sr=>!!sr.element&&sr.element===He),Cn=o.get(He),Mn=l.get(He),si=c8(this._normalizer,De.keyframes,Cn,Mn),bi=this._buildPlayer(De,si,yt);if(De.subTimeline&&r&&B.add(He),bt){const sr=new S4(n,h,He);sr.setRealPlayer(bi),b.push(sr)}return bi});b.forEach(De=>{Ah(this.playersByQueriedElement,De.element,[]).push(De),De.onDone(()=>function JG(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,De.element,De))}),E.forEach(De=>Tf(De,g8));const de=f1(ce);return de.onDestroy(()=>{E.forEach(De=>yb(De,g8)),xg(g,e.toStyles)}),B.forEach(De=>{Ah(r,De,[]).push(de)}),de}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new AC(n.duration,n.delay)}}class S4{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new AC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>r4(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Ah(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function LS(t){return t&&1===t.nodeType}function D8(t,n){const e=t.style.display;return t.style.display=n??"none",e}function M8(t,n,e,i,r){const o=[];e.forEach(g=>o.push(D8(g)));const l=[];i.forEach((g,b)=>{const E=new Map;g.forEach(B=>{const ce=n.computeStyle(b,B,r);E.set(B,ce),(!ce||0==ce.length)&&(b[Dp]=KG,l.push(b))}),t.set(b,E)});let h=0;return e.forEach(g=>D8(g,o[h++])),l}function I8(t,n){const e=new Map;if(t.forEach(h=>e.set(h,[])),0==n.length)return e;const r=new Set(n),o=new Map;function l(h){if(!h)return 1;let g=o.get(h);if(g)return g;const b=h.parentNode;return g=e.has(b)?b:r.has(b)?1:l(b),o.set(h,g),g}return n.forEach(h=>{const g=l(h);1!==g&&e.get(g).push(h)}),e}function Tf(t,n){t.classList?.add(n)}function yb(t,n){t.classList?.remove(n)}function nY(t,n,e){f1(e).onDone(()=>t.processLeaveNode(n))}function N8(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof t8?N8(i.players,n):n.push(i)}}function O8(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(o=>r.add(o)):n.set(t,i),e.delete(t),!0}class OC{constructor(n,e,i,r){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,l)=>{},this._transitionEngine=new QG(n.body,e,i,r),this._timelineEngine=new $G(n.body,e,i),this._transitionEngine.onRemovalComplete=(o,l)=>this.onRemovalComplete(o,l)}registerTrigger(n,e,i,r,o){const l=n+"-"+r;let h=this._triggerCache[l];if(!h){const g=[],E=_4(this._driver,o,g,[]);if(g.length)throw function YW(t,n){return new Yt(3404,!1)}();h=function UG(t,n,e){return new zG(t,n,e)}(r,E,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(e,r,h)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[o,l]=u8(i);this._timelineEngine.command(o,e,l,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,o){if("@"==i.charAt(0)){const[l,h]=u8(i);return this._timelineEngine.listen(l,e,h,o)}return this._transitionEngine.listen(n,e,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}class RC{static#e=this.initialStylesByElement=new WeakMap;constructor(n,e,i){this._element=n,this._startStyles=e,this._endStyles=i,this._state=0;let r=RC.initialStylesByElement.get(n);r||RC.initialStylesByElement.set(n,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&xg(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xg(this._element,this._initialStyles),this._endStyles&&(xg(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(RC.initialStylesByElement.delete(this._element),this._startStyles&&($_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($_(this._element,this._endStyles),this._endStyles=null),xg(this._element,this._initialStyles),this._state=3)}}function A4(t){let n=null;return t.forEach((e,i)=>{(function oY(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class R8{constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&n.set(r,this._finished?i:m4(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class P8{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return h8(n,e)}getParentElement(n){return a4(n)}query(n,e,i){return f8(n,e,i)}computeStyle(n,e,i){return m4(n,e)}animate(n,e,i,r,o,l=[]){const g={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(g.easing=o);const b=new Map,E=l.filter(de=>de instanceof R8);(function _G(t,n){return 0===t||0===n})(i,r)&&E.forEach(de=>{de.currentSnapshot.forEach((De,He)=>b.set(He,De))});let B=function pG(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}(e).map(de=>new Map(de));B=function yG(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((o,l)=>{i.has(l)||r.push(l),i.set(l,o)}),r.length)for(let o=1;o<n.length;o++){let l=n[o];r.forEach(h=>l.set(h,m4(t,h)))}}return n}(n,B,b);const ce=function sY(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=A4(n[0]),n.length>1&&(i=A4(n[n.length-1]))):n instanceof Map&&(e=A4(n)),e||i?new RC(t,e,i):null}(n,B);return new R8(n,B,g,ce)}}const F8="@.disabled";class L8{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==F8?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class aY extends L8{constructor(n,e,i,r,o){super(e,i,r,o),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==F8?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function lY(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let o=e.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function cY(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,r,o,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(n,e,i)}}class uY{constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(r,o)=>{const l=o?.parentNode(r);l&&o.removeChild(l,r)}}createRenderer(n,e){const r=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){const b=this._rendererCache;let E=b.get(r);return E||(E=new L8("",r,this.engine,()=>b.delete(r)),b.set(r,E)),E}const o=e.id,l=e.id+"-"+this._currentId;this._currentId++,this.engine.register(l,n);const h=b=>{Array.isArray(b)?b.forEach(h):this.engine.registerTrigger(o,l,n,b.name,b)};return e.data.animation.forEach(h),new aY(this,l,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>e(i));const r=this._animationCallbacksBuffer;0==r.length&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{const[l,h]=o;l(h)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const B8=[{provide:u4,useFactory:function hY(){return new y8}},{provide:OC,useClass:(()=>{class t extends OC{constructor(e,i,r){super(e,i,r,$t($2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(Ii(ac),Ii(c4),Ii(u4))};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac})}return t})()},{provide:td,useFactory:function fY(t,n,e){return new uY(t,n,e)},deps:[uD,OC,Bs]}],k4=[{provide:c4,useFactory:()=>new P8},{provide:n2,useValue:"BrowserAnimations"},...B8],V8=[{provide:c4,useClass:l4},{provide:n2,useValue:"NoopAnimations"},...B8];let pY=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?V8:k4}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({providers:k4,imports:[ON]})}return t})();const yY=["addListener","removeListener"],vY=["addEventListener","removeEventListener"],bY=["on","off"];function fu(t,n,e,i){if(ei(e)&&(i=e,e=void 0),i)return fu(t,n,e).pipe(GO(i));const[r,o]=function TY(t){return ei(t.addEventListener)&&ei(t.removeEventListener)}(t)?vY.map(l=>h=>t[l](n,h,e)):function wY(t){return ei(t.addListener)&&ei(t.removeListener)}(t)?yY.map(U8(t,n)):function CY(t){return ei(t.on)&&ei(t.off)}(t)?bY.map(U8(t,n)):[];if(!r&&vD(t))return hb(l=>fu(l,n,e))(uu(t));if(!r)throw new TypeError("Invalid event target");return new Zr(l=>{const h=(...g)=>l.next(1<g.length?g:g[0]);return r(h),()=>o(h)})}function U8(t,n){return e=>i=>t[e](n,i)}const{isArray:xY}=Array;function z8(t){return 1===t.length&&xY(t[0])?t[0]:t}function D4(...t){const n=pD(t),e=z8(t);return e.length?new Zr(i=>{let r=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{r=o=null});for(let l=0;!i.closed&&l<e.length;l++)uu(e[l]).subscribe(li(i,h=>{if(r[l].push(h),r.every(g=>g.length)){const g=r.map(b=>b.shift());i.next(n?n(...g):g),r.some((b,E)=>!b.length&&o[E])&&i.complete()}},()=>{o[l]=!0,!r[l].length&&i.complete()}));return()=>{r=o=null}}):fC}function M4(...t){const n=pD(t);return Ne((e,i)=>{const r=t.length,o=new Array(r);let l=t.map(()=>!1),h=!1;for(let g=0;g<r;g++)uu(t[g]).subscribe(li(i,b=>{o[g]=b,!h&&!l[g]&&(l[g]=!0,(h=l.every(wa))&&(l=null))},Ln));e.subscribe(li(i,g=>{if(h){const b=[g,...o];i.next(n?n(...b):b)}}))})}Math,Math,Math;const OX=["*"],cq=["dialog"],lR={animation:!0,transitionTimerDelayMs:5};let jS=(()=>{class t{constructor(){this.animation=lR.animation}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tb(t){return"string"==typeof t}function X_(t){return null!=t}function xb(t){return(t||document.body).getBoundingClientRect()}const nK=()=>{},{transitionTimerDelayMs:iK}=lR,zC=new Map,Ef=(t,n,e,i)=>{let r=i.context||{};const o=zC.get(n);if(o)switch(i.runningTransition){case"continue":return fC;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),zC.delete(n)}const l=e(n,i.animation,r)||nK;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>l()),db(void 0).pipe(function tK(t){return n=>new Zr(e=>n.subscribe({next:l=>t.run(()=>e.next(l)),error:l=>t.run(()=>e.error(l)),complete:()=>t.run(()=>e.complete())}))}(t));const h=new Ir,g=new Ir,b=h.pipe(function SY(...t){return n=>cS(n,db(...t))}(!0));zC.set(n,{transition$:h,complete:()=>{g.next(),g.complete()},context:r});const E=function Qq(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const B=fu(n,"transitionend").pipe(du(b),bf(({target:de})=>de===n));(function H8(...t){return 1===(t=z8(t)).length?uu(t[0]):new Zr(function EY(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(uu(t[i]).subscribe(li(n,r=>{if(e){for(let o=0;o<e.length;o++)o!==i&&e[o].unsubscribe();e=null}n.next(r)})))}}(t))})(kD(E+iK).pipe(du(b)),B,g).pipe(du(b)).subscribe(()=>{zC.delete(n),t.run(()=>{l(),h.next(),h.complete()})})}),h.asObservable()};let gR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),mR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),vR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),bR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})();var ba=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(ba||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const AR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function kR(t){const n=Array.from(t.querySelectorAll(AR)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let $R=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),GR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),oZ=(()=>{class t{constructor(){this._ngbConfig=$t(jS),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class J_{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}let aZ=(()=>{class t{constructor(){this._document=$t(ac)}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:l}=r;if(e>0){const h=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${h+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=l),r.overflow=o}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lZ=(()=>{class t{constructor(){this._nativeElement=$t(Ks).nativeElement,this._zone=$t(Bs)}ngOnInit(){this._zone.onStable.asObservable().pipe(kp(1)).subscribe(()=>{Ef(this._zone,this._nativeElement,(e,i)=>{i&&xb(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ef(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=bs({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(id("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),_r("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Eh],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return t})();class YR{update(n){}close(n){}dismiss(n){}}const cZ=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],uZ=["animation","backdropClass"];class dZ{_applyWindowOptions(n,e){cZ.forEach(i=>{X_(e[i])&&(n[i]=e[i])})}_applyBackdropOptions(n,e){uZ.forEach(i=>{X_(e[i])&&(n[i]=e[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(du(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(du(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Ir,this._dismissed=new Ir,this._hidden=new Ir,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,l)=>{this._resolve=o,this._reject=l}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function cR(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():db(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),D4(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var eM=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(eM||{});let hZ=(()=>{class t{constructor(){this._document=$t(ac),this._elRef=$t(Ks),this._zone=$t(Bs),this._closed$=new Ir,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new mr,this.shown=new Ir,this.hidden=new Ir}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Tb(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(kp(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},l=D4(Ef(this._zone,e,()=>e.classList.remove("show"),i),Ef(this._zone,this._dialogEl.nativeElement,()=>{},i));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const e={animation:this.animation,runningTransition:"continue"};D4(Ef(this._zone,this._elRef.nativeElement,(o,l)=>{l&&xb(o),o.classList.add("show")},e),Ef(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{fu(e,"keydown").pipe(du(this._closed$),bf(r=>r.which===ba.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(eM.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;fu(this._dialogEl.nativeElement,"mousedown").pipe(du(this._closed$),function j8(t,n,e){const i=ei(t)||n||e?{next:t,error:n,complete:e}:t;return i?Ne((r,o)=>{var l;null===(l=i.subscribe)||void 0===l||l.call(i);let h=!0;r.subscribe(li(o,g=>{var b;null===(b=i.next)||void 0===b||b.call(i,g),o.next(g)},()=>{var g;h=!1,null===(g=i.complete)||void 0===g||g.call(i),o.complete()},g=>{var b;h=!1,null===(b=i.error)||void 0===b||b.call(i,g),o.error(g)},()=>{var g,b;h&&(null===(g=i.unsubscribe)||void 0===g||g.call(i)),null===(b=i.finalize)||void 0===b||b.call(i)}))}):wa}(()=>i=!1),bD(()=>fu(e,"mouseup").pipe(du(this._closed$),kp(1))),bf(({target:r})=>e===r)).subscribe(()=>{i=!0}),fu(e,"click").pipe(du(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(eM.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=kR(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ef(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=bs({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&xc(cq,7),2&i){let o;vo(o=bo())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(Ro("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),id("modal d-block"+(r.windowClass?" "+r.windowClass:"")),_r("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Eh],ngContentSelectors:OX,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){1&i&&(Ww(),L(0,"div",1,0)(2,"div",2),Gw(3),P()()),2&i&&id("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return t})(),fZ=(()=>{class t{constructor(){this._applicationRef=$t(bg),this._injector=$t(fa),this._environmentInjector=$t(Sl),this._document=$t(ac),this._scrollBar=$t(aZ),this._activeWindowCmptHasChanged=new Ir,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new mr;const e=$t(Bs);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const i=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{t.runOutsideAngular(()=>{const r=fu(n,"focusin").pipe(du(e),Xi(o=>o.target));fu(n,"keydown").pipe(du(e),bf(o=>o.which===ba.Tab),M4(r)).subscribe(([o,l])=>{const[h,g]=kR(n);(l===h||l===n)&&o.shiftKey&&(g.focus(),o.preventDefault()),l===g&&!o.shiftKey&&(h.focus(),o.preventDefault())}),i&&fu(n,"click").pipe(du(e),M4(r),Xi(o=>o[1])).subscribe(o=>o.focus())})})(e,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const o=r.container instanceof HTMLElement?r.container:X_(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const l=new YR,h=(e=r.injector||e).get(Sl,null)||this._environmentInjector,g=this._getContentRef(e,h,i,l,r);let b=!1!==r.backdrop?this._attachBackdrop(o):void 0,E=this._attachWindowComponent(o,g.nodes),B=new dZ(E,g,b,r.beforeDismiss);return this._registerModalRef(B),this._registerWindowCmpt(E),B.hidden.pipe(kp(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),l.close=ce=>{B.close(ce)},l.dismiss=ce=>{B.dismiss(ce)},l.update=ce=>{B.update(ce)},B.update(r),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),b&&b.instance&&b.changeDetectorRef.detectChanges(),E.changeDetectorRef.detectChanges(),B}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=Hk(lZ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=Hk(hZ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,o,l){return r?r instanceof $l?this._createFromTemplateRef(r,o):Tb(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,l):new J_([])}_createFromTemplateRef(e,i){const o=e.createEmbeddedView({$implicit:i,close(l){i.close(l)},dismiss(l){i.dismiss(l)}});return this._applicationRef.attachView(o),new J_([o.rootNodes],o)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new J_([[i]])}_createFromComponent(e,i,r,o,l){const g=Hk(r,{environmentInjector:i,elementInjector:fa.create({providers:[{provide:YR,useValue:o}],parent:e})}),b=g.location.nativeElement;return l.scrollable&&b.classList.add("component-host-scrollable"),this._applicationRef.attachView(g.hostView),new J_([[b]],g.hostView,g)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pZ=(()=>{class t{constructor(){this._injector=$t(fa),this._modalStack=$t(fZ),this._config=$t(oZ)}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Un({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({providers:[pZ]})}return t})(),ZR=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),sP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),oP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),aP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),lP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),cP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),uP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),dP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),hP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})();new yi("live announcer delay",{providedIn:"root",factory:()=>100});let fP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})(),pP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({})}return t})();const DZ=[gR,mR,vR,bR,$R,GR,XR,ZR,pP,sP,oP,aP,lP,cP,uP,dP,hP,fP];let MZ=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t});static#n=this.\u0275inj=Fr({imports:[DZ,gR,mR,vR,bR,$R,GR,XR,ZR,pP,sP,oP,aP,lP,cP,uP,dP,hP,fP]})}return t})(),IZ=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Fs({type:t,bootstrap:[EW]});static#n=this.\u0275inj=Fr({providers:[a8,ad,u1,c1,l1,ES,K6],imports:[MZ,ON,qz,aH,KV,$6,$6,Yz,pH,pY,WH.forRoot(),WU.forRoot({loader:Jm,markedOptions:{provide:jO,useFactory:NZ}})]})}return t})();function NZ(){const t=new F_;return t.code=function(n,e){return e.match(/^mermaid/)?'<div class="mermaid">'+n+"</div>":"<pre><code>"+n+"</code></pre>"},{renderer:t,gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1}}RB().bootstrapModule(IZ).catch(t=>console.error(t))},7374:function(It){It.exports=function(){"use strict";var O=6e4,R=36e5,U="millisecond",q="second",te="minute",re="hour",A="day",F="week",ne="month",x="quarter",k="year",I="date",S="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Le){var Fe=["th","st","nd","rd"],Xe=Le%100;return"["+Le+(Fe[(Xe-20)%10]||Fe[Xe]||Fe[0])+"]"}},Ce=function(Le,Fe,Xe){var mt=String(Le);return!mt||mt.length>=Fe?Le:""+Array(Fe+1-mt.length).join(Xe)+Le},H={s:Ce,z:function(Le){var Fe=-Le.utcOffset(),Xe=Math.abs(Fe),mt=Math.floor(Xe/60),ft=Xe%60;return(Fe<=0?"+":"-")+Ce(mt,2,"0")+":"+Ce(ft,2,"0")},m:function Le(Fe,Xe){if(Fe.date()<Xe.date())return-Le(Xe,Fe);var mt=12*(Xe.year()-Fe.year())+(Xe.month()-Fe.month()),ft=Fe.clone().add(mt,ne),Zt=Xe-ft<0,Tt=Fe.clone().add(mt+(Zt?-1:1),ne);return+(-(mt+(Xe-ft)/(Zt?ft-Tt:Tt-ft))||0)},a:function(Le){return Le<0?Math.ceil(Le)||0:Math.floor(Le)},p:function(Le){return{M:ne,y:k,w:F,d:A,D:I,h:re,m:te,s:q,ms:U,Q:x}[Le]||String(Le||"").toLowerCase().replace(/s$/,"")},u:function(Le){return void 0===Le}},G="en",K={};K[G]=Q;var ie="$isDayjsObject",ge=function(Le){return Le instanceof tt||!(!Le||!Le[ie])},we=function Le(Fe,Xe,mt){var ft;if(!Fe)return G;if("string"==typeof Fe){var Zt=Fe.toLowerCase();K[Zt]&&(ft=Zt),Xe&&(K[Zt]=Xe,ft=Zt);var Tt=Fe.split("-");if(!ft&&Tt.length>1)return Le(Tt[0])}else{var On=Fe.name;K[On]=Fe,ft=On}return!mt&&ft&&(G=ft),ft||!mt&&G},fe=function(Le,Fe){if(ge(Le))return Le.clone();var Xe="object"==typeof Fe?Fe:{};return Xe.date=Le,Xe.args=arguments,new tt(Xe)},Te=H;Te.l=we,Te.i=ge,Te.w=function(Le,Fe){return fe(Le,{locale:Fe.$L,utc:Fe.$u,x:Fe.$x,$offset:Fe.$offset})};var tt=function(){function Le(Xe){this.$L=we(Xe.locale,null,!0),this.parse(Xe),this.$x=this.$x||Xe.x||{},this[ie]=!0}var Fe=Le.prototype;return Fe.parse=function(Xe){this.$d=function(mt){var ft=mt.date,Zt=mt.utc;if(null===ft)return new Date(NaN);if(Te.u(ft))return new Date;if(ft instanceof Date)return new Date(ft);if("string"==typeof ft&&!/Z$/i.test(ft)){var Tt=ft.match(z);if(Tt){var On=Tt[2]-1||0,_i=(Tt[7]||"0").substring(0,3);return Zt?new Date(Date.UTC(Tt[1],On,Tt[3]||1,Tt[4]||0,Tt[5]||0,Tt[6]||0,_i)):new Date(Tt[1],On,Tt[3]||1,Tt[4]||0,Tt[5]||0,Tt[6]||0,_i)}}return new Date(ft)}(Xe),this.init()},Fe.init=function(){var Xe=this.$d;this.$y=Xe.getFullYear(),this.$M=Xe.getMonth(),this.$D=Xe.getDate(),this.$W=Xe.getDay(),this.$H=Xe.getHours(),this.$m=Xe.getMinutes(),this.$s=Xe.getSeconds(),this.$ms=Xe.getMilliseconds()},Fe.$utils=function(){return Te},Fe.isValid=function(){return this.$d.toString()!==S},Fe.isSame=function(Xe,mt){var ft=fe(Xe);return this.startOf(mt)<=ft&&ft<=this.endOf(mt)},Fe.isAfter=function(Xe,mt){return fe(Xe)<this.startOf(mt)},Fe.isBefore=function(Xe,mt){return this.endOf(mt)<fe(Xe)},Fe.$g=function(Xe,mt,ft){return Te.u(Xe)?this[mt]:this.set(ft,Xe)},Fe.unix=function(){return Math.floor(this.valueOf()/1e3)},Fe.valueOf=function(){return this.$d.getTime()},Fe.startOf=function(Xe,mt){var ft=this,Zt=!!Te.u(mt)||mt,Tt=Te.p(Xe),On=function(ki,Mi){var or=Te.w(ft.$u?Date.UTC(ft.$y,Mi,ki):new Date(ft.$y,Mi,ki),ft);return Zt?or:or.endOf(A)},_i=function(ki,Mi){return Te.w(ft.toDate()[ki].apply(ft.toDate("s"),(Zt?[0,0,0,0]:[23,59,59,999]).slice(Mi)),ft)},Ti=this.$W,Ri=this.$M,Yi=this.$D,vr="set"+(this.$u?"UTC":"");switch(Tt){case k:return Zt?On(1,0):On(31,11);case ne:return Zt?On(1,Ri):On(0,Ri+1);case F:var Wn=this.$locale().weekStart||0,Pi=(Ti<Wn?Ti+7:Ti)-Wn;return On(Zt?Yi-Pi:Yi+(6-Pi),Ri);case A:case I:return _i(vr+"Hours",0);case re:return _i(vr+"Minutes",1);case te:return _i(vr+"Seconds",2);case q:return _i(vr+"Milliseconds",3);default:return this.clone()}},Fe.endOf=function(Xe){return this.startOf(Xe,!1)},Fe.$set=function(Xe,mt){var ft,Zt=Te.p(Xe),Tt="set"+(this.$u?"UTC":""),On=(ft={},ft[A]=Tt+"Date",ft[I]=Tt+"Date",ft[ne]=Tt+"Month",ft[k]=Tt+"FullYear",ft[re]=Tt+"Hours",ft[te]=Tt+"Minutes",ft[q]=Tt+"Seconds",ft[U]=Tt+"Milliseconds",ft)[Zt],_i=Zt===A?this.$D+(mt-this.$W):mt;if(Zt===ne||Zt===k){var Ti=this.clone().set(I,1);Ti.$d[On](_i),Ti.init(),this.$d=Ti.set(I,Math.min(this.$D,Ti.daysInMonth())).$d}else On&&this.$d[On](_i);return this.init(),this},Fe.set=function(Xe,mt){return this.clone().$set(Xe,mt)},Fe.get=function(Xe){return this[Te.p(Xe)]()},Fe.add=function(Xe,mt){var ft,Zt=this;Xe=Number(Xe);var Tt=Te.p(mt),On=function(Ri){var Yi=fe(Zt);return Te.w(Yi.date(Yi.date()+Math.round(Ri*Xe)),Zt)};if(Tt===ne)return this.set(ne,this.$M+Xe);if(Tt===k)return this.set(k,this.$y+Xe);if(Tt===A)return On(1);if(Tt===F)return On(7);var _i=(ft={},ft[te]=O,ft[re]=R,ft[q]=1e3,ft)[Tt]||1,Ti=this.$d.getTime()+Xe*_i;return Te.w(Ti,this)},Fe.subtract=function(Xe,mt){return this.add(-1*Xe,mt)},Fe.format=function(Xe){var mt=this,ft=this.$locale();if(!this.isValid())return ft.invalidDate||S;var Zt=Xe||"YYYY-MM-DDTHH:mm:ssZ",Tt=Te.z(this),On=this.$H,_i=this.$m,Ti=this.$M,Ri=ft.weekdays,Yi=ft.months,Wn=function(Mi,or,qi,Qs){return Mi&&(Mi[or]||Mi(mt,Zt))||qi[or].slice(0,Qs)},Pi=function(Mi){return Te.s(On%12||12,Mi,"0")},ki=ft.meridiem||function(Mi,or,qi){var Qs=Mi<12?"AM":"PM";return qi?Qs.toLowerCase():Qs};return Zt.replace(ee,function(Mi,or){return or||function(qi){switch(qi){case"YY":return String(mt.$y).slice(-2);case"YYYY":return Te.s(mt.$y,4,"0");case"M":return Ti+1;case"MM":return Te.s(Ti+1,2,"0");case"MMM":return Wn(ft.monthsShort,Ti,Yi,3);case"MMMM":return Wn(Yi,Ti);case"D":return mt.$D;case"DD":return Te.s(mt.$D,2,"0");case"d":return String(mt.$W);case"dd":return Wn(ft.weekdaysMin,mt.$W,Ri,2);case"ddd":return Wn(ft.weekdaysShort,mt.$W,Ri,3);case"dddd":return Ri[mt.$W];case"H":return String(On);case"HH":return Te.s(On,2,"0");case"h":return Pi(1);case"hh":return Pi(2);case"a":return ki(On,_i,!0);case"A":return ki(On,_i,!1);case"m":return String(_i);case"mm":return Te.s(_i,2,"0");case"s":return String(mt.$s);case"ss":return Te.s(mt.$s,2,"0");case"SSS":return Te.s(mt.$ms,3,"0");case"Z":return Tt}return null}(Mi)||Tt.replace(":","")})},Fe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Fe.diff=function(Xe,mt,ft){var Zt,Tt=this,On=Te.p(mt),_i=fe(Xe),Ti=(_i.utcOffset()-this.utcOffset())*O,Ri=this-_i,Yi=function(){return Te.m(Tt,_i)};switch(On){case k:Zt=Yi()/12;break;case ne:Zt=Yi();break;case x:Zt=Yi()/3;break;case F:Zt=(Ri-Ti)/6048e5;break;case A:Zt=(Ri-Ti)/864e5;break;case re:Zt=Ri/R;break;case te:Zt=Ri/O;break;case q:Zt=Ri/1e3;break;default:Zt=Ri}return ft?Zt:Te.a(Zt)},Fe.daysInMonth=function(){return this.endOf(ne).$D},Fe.$locale=function(){return K[this.$L]},Fe.locale=function(Xe,mt){if(!Xe)return this.$L;var ft=this.clone(),Zt=we(Xe,mt,!0);return Zt&&(ft.$L=Zt),ft},Fe.clone=function(){return Te.w(this.$d,this)},Fe.toDate=function(){return new Date(this.valueOf())},Fe.toJSON=function(){return this.isValid()?this.toISOString():null},Fe.toISOString=function(){return this.$d.toISOString()},Fe.toString=function(){return this.$d.toUTCString()},Le}(),Ze=tt.prototype;return fe.prototype=Ze,[["$ms",U],["$s",q],["$m",te],["$H",re],["$W",A],["$M",ne],["$y",k],["$D",I]].forEach(function(Le){Ze[Le[1]]=function(Fe){return this.$g(Fe,Le[0],Le[1])}}),fe.extend=function(Le,Fe){return Le.$i||(Le(Fe,tt,fe),Le.$i=!0),fe},fe.locale=we,fe.isDayjs=ge,fe.unix=function(Le){return fe(1e3*Le)},fe.en=K[G],fe.Ls=K,fe.p={},fe}()},2900:function(It){It.exports=function(){"use strict";return function(ke,O){var R=O.prototype,U=R.format;R.format=function(q){var te=this,re=this.$locale();if(!this.isValid())return U.bind(this)(q);var A=this.$utils(),F=(q||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(ne){switch(ne){case"Q":return Math.ceil((te.$M+1)/3);case"Do":return re.ordinal(te.$D);case"gggg":return te.weekYear();case"GGGG":return te.isoWeekYear();case"wo":return re.ordinal(te.week(),"W");case"w":case"ww":return A.s(te.week(),"w"===ne?1:2,"0");case"W":case"WW":return A.s(te.isoWeek(),"W"===ne?1:2,"0");case"k":case"kk":return A.s(String(0===te.$H?24:te.$H),"k"===ne?1:2,"0");case"X":return Math.floor(te.$d.getTime()/1e3);case"x":return te.$d.getTime();case"z":return"["+te.offsetName()+"]";case"zzz":return"["+te.offsetName("long")+"]";default:return ne}});return U.bind(this)(F)}}}()},2799:function(It){It.exports=function(){"use strict";var ke={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},O=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,R=/\d\d/,U=/\d\d?/,q=/\d*[^-_:/,()\s\d]+/,te={},re=function(S){return(S=+S)+(S>68?1900:2e3)},A=function(S){return function(z){this[S]=+z}},F=[/[+-]\d\d:?(\d\d)?|Z/,function(S){(this.zone||(this.zone={})).offset=function(z){if(!z||"Z"===z)return 0;var ee=z.match(/([+-]|\d\d)/g),Q=60*ee[1]+(+ee[2]||0);return 0===Q?0:"+"===ee[0]?-Q:Q}(S)}],ne=function(S){var z=te[S];return z&&(z.indexOf?z:z.s.concat(z.f))},x=function(S,z){var ee,Q=te.meridiem;if(Q){for(var Ce=1;Ce<=24;Ce+=1)if(S.indexOf(Q(Ce,0,z))>-1){ee=Ce>12;break}}else ee=S===(z?"pm":"PM");return ee},k={A:[q,function(S){this.afternoon=x(S,!1)}],a:[q,function(S){this.afternoon=x(S,!0)}],S:[/\d/,function(S){this.milliseconds=100*+S}],SS:[R,function(S){this.milliseconds=10*+S}],SSS:[/\d{3}/,function(S){this.milliseconds=+S}],s:[U,A("seconds")],ss:[U,A("seconds")],m:[U,A("minutes")],mm:[U,A("minutes")],H:[U,A("hours")],h:[U,A("hours")],HH:[U,A("hours")],hh:[U,A("hours")],D:[U,A("day")],DD:[R,A("day")],Do:[q,function(S){var z=te.ordinal,ee=S.match(/\d+/);if(this.day=ee[0],z)for(var Q=1;Q<=31;Q+=1)z(Q).replace(/\[|\]/g,"")===S&&(this.day=Q)}],M:[U,A("month")],MM:[R,A("month")],MMM:[q,function(S){var z=ne("months"),ee=(ne("monthsShort")||z.map(function(Q){return Q.slice(0,3)})).indexOf(S)+1;if(ee<1)throw new Error;this.month=ee%12||ee}],MMMM:[q,function(S){var z=ne("months").indexOf(S)+1;if(z<1)throw new Error;this.month=z%12||z}],Y:[/[+-]?\d+/,A("year")],YY:[R,function(S){this.year=re(S)}],YYYY:[/\d{4}/,A("year")],Z:F,ZZ:F};return function(S,z,ee){ee.p.customParseFormat=!0,S&&S.parseTwoDigitYear&&(re=S.parseTwoDigitYear);var Q=z.prototype,Ce=Q.parse;Q.parse=function(H){var G=H.date,K=H.utc,ie=H.args;this.$u=K;var ge=ie[1];if("string"==typeof ge){var we=!0===ie[2],fe=!0===ie[3],Te=we||fe,tt=ie[2];fe&&(tt=ie[2]),te=this.$locale(),!we&&tt&&(te=ee.Ls[tt]),this.$d=function(Xe,mt,ft){try{if(["x","X"].indexOf(mt)>-1)return new Date(("X"===mt?1e3:1)*Xe);var Zt=function I(S){var ee;ee=te&&te.formats;for(var Q=(S=S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(we,fe,Te){var tt=Te&&Te.toUpperCase();return fe||ee[Te]||ke[Te]||ee[tt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ze,Le,Fe){return Le||Fe.slice(1)})})).match(O),Ce=Q.length,H=0;H<Ce;H+=1){var G=Q[H],K=k[G],ge=K&&K[1];Q[H]=ge?{regex:K&&K[0],parser:ge}:G.replace(/^\[|\]$/g,"")}return function(we){for(var fe={},Te=0,tt=0;Te<Ce;Te+=1){var Ze=Q[Te];if("string"==typeof Ze)tt+=Ze.length;else{var Le=Ze.regex,Fe=Ze.parser,Xe=we.slice(tt),mt=Le.exec(Xe)[0];Fe.call(fe,mt),we=we.replace(mt,"")}}return function(ft){var Zt=ft.afternoon;if(void 0!==Zt){var Tt=ft.hours;Zt?Tt<12&&(ft.hours+=12):12===Tt&&(ft.hours=0),delete ft.afternoon}}(fe),fe}}(mt)(Xe),Tt=Zt.year,On=Zt.month,_i=Zt.day,Ti=Zt.hours,Ri=Zt.minutes,Yi=Zt.seconds,vr=Zt.milliseconds,Wn=Zt.zone,Pi=new Date,ki=_i||(Tt||On?1:Pi.getDate()),Mi=Tt||Pi.getFullYear(),or=0;Tt&&!On||(or=On>0?On-1:Pi.getMonth());var qi=Ti||0,Qs=Ri||0,ko=Yi||0,ei=vr||0;return Wn?new Date(Date.UTC(Mi,or,ki,qi,Qs,ko,ei+60*Wn.offset*1e3)):ft?new Date(Date.UTC(Mi,or,ki,qi,Qs,ko,ei)):new Date(Mi,or,ki,qi,Qs,ko,ei)}catch{return new Date("")}}(G,ge,K),this.init(),tt&&!0!==tt&&(this.$L=this.locale(tt).$L),Te&&G!=this.format(ge)&&(this.$d=new Date("")),te={}}else if(ge instanceof Array)for(var Ze=ge.length,Le=1;Le<=Ze;Le+=1){ie[1]=ge[Le-1];var Fe=ee.apply(this,ie);if(Fe.isValid()){this.$d=Fe.$d,this.$L=Fe.$L,this.init();break}Le===Ze&&(this.$d=new Date(""))}else Ce.call(this,H)}}}()},2548:function(It){It.exports=function(){"use strict";return function(O,R,U){var q=function(A){return A.add(4-A.isoWeekday(),"day")},te=R.prototype;te.isoWeekYear=function(){return q(this).year()},te.isoWeek=function(A){if(!this.$utils().u(A))return this.add(7*(A-this.isoWeek()),"day");var F,x,k,I=q(this),S=(F=this.isoWeekYear(),k=4-(x=(this.$u?U.utc:U)().year(F).startOf("year")).isoWeekday(),x.isoWeekday()>4&&(k+=7),x.add(k,"day"));return I.diff(S,"week")+1},te.isoWeekday=function(A){return this.$utils().u(A)?this.day()||7:this.day(this.day()%7?A:A-7)};var re=te.startOf;te.startOf=function(A,F){var ne=this.$utils(),x=!!ne.u(F)||F;return"isoweek"===ne.p(A)?x?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):re.bind(this)(A,F)}}}()},1973:function(It){It.exports=function(){"use strict";function ke(zt){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(nn){return typeof nn}:function(nn){return nn&&"function"==typeof Symbol&&nn.constructor===Symbol&&nn!==Symbol.prototype?"symbol":typeof nn})(zt)}function O(zt,nn){return(O=Object.setPrototypeOf||function(ti,ai){return ti.__proto__=ai,ti})(zt,nn)}function U(zt,nn,mn){return(U=function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(ai,ns,oo){var ao=[null];ao.push.apply(ao,ns);var Do=new(Function.bind.apply(ai,ao));return oo&&O(Do,oo.prototype),Do}).apply(null,arguments)}function q(zt){return function te(zt){if(Array.isArray(zt))return F(zt)}(zt)||function re(zt){if(typeof Symbol<"u"&&null!=zt[Symbol.iterator]||null!=zt["@@iterator"])return Array.from(zt)}(zt)||function A(zt,nn){if(zt){if("string"==typeof zt)return F(zt,nn);var mn=Object.prototype.toString.call(zt).slice(8,-1);if("Object"===mn&&zt.constructor&&(mn=zt.constructor.name),"Map"===mn||"Set"===mn)return Array.from(zt);if("Arguments"===mn||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mn))return F(zt,nn)}}(zt)||function ne(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(zt,nn){(null==nn||nn>zt.length)&&(nn=zt.length);for(var mn=0,ti=new Array(nn);mn<nn;mn++)ti[mn]=zt[mn];return ti}var x=Object.hasOwnProperty,k=Object.setPrototypeOf,I=Object.isFrozen,S=Object.getPrototypeOf,z=Object.getOwnPropertyDescriptor,ee=Object.freeze,Q=Object.seal,Ce=Object.create,H=typeof Reflect<"u"&&Reflect,G=H.apply,K=H.construct;G||(G=function(nn,mn,ti){return nn.apply(mn,ti)}),ee||(ee=function(nn){return nn}),Q||(Q=function(nn){return nn}),K||(K=function(nn,mn){return U(nn,q(mn))});var ie=ft(Array.prototype.forEach),ge=ft(Array.prototype.pop),we=ft(Array.prototype.push),fe=ft(String.prototype.toLowerCase),Te=ft(String.prototype.toString),tt=ft(String.prototype.match),Ze=ft(String.prototype.replace),Le=ft(String.prototype.indexOf),Fe=ft(String.prototype.trim),Xe=ft(RegExp.prototype.test),mt=function Zt(zt){return function(){for(var nn=arguments.length,mn=new Array(nn),ti=0;ti<nn;ti++)mn[ti]=arguments[ti];return K(zt,mn)}}(TypeError);function ft(zt){return function(nn){for(var mn=arguments.length,ti=new Array(mn>1?mn-1:0),ai=1;ai<mn;ai++)ti[ai-1]=arguments[ai];return G(zt,nn,ti)}}function Tt(zt,nn,mn){mn=mn||fe,k&&k(zt,null);for(var ti=nn.length;ti--;){var ai=nn[ti];if("string"==typeof ai){var ns=mn(ai);ns!==ai&&(I(nn)||(nn[ti]=ns),ai=ns)}zt[ai]=!0}return zt}function On(zt){var mn,nn=Ce(null);for(mn in zt)!0===G(x,zt,[mn])&&(nn[mn]=zt[mn]);return nn}function _i(zt,nn){for(;null!==zt;){var mn=z(zt,nn);if(mn){if(mn.get)return ft(mn.get);if("function"==typeof mn.value)return ft(mn.value)}zt=S(zt)}return function ti(ai){return console.warn("fallback value for",ai),null}}var Ti=ee(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ri=ee(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Yi=ee(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vr=ee(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Wn=ee(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Pi=ee(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ki=ee(["#text"]),Mi=ee(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),or=ee(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qi=ee(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qs=ee(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ko=Q(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ei=Q(/<%[\w\W]*|[\w\W]*%>/gm),jt=Q(/\${[\w\W]*}/gm),pn=Q(/^data-[\-\w.\u00B7-\uFFFF]/),ln=Q(/^aria-[\-\w]+$/),Fn=Q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ci=Q(/^(?:\w+script|data):/i),xi=Q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gt=Q(/^html$/i);return function yn(){var zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,nn=function(Et){return yn(Et)};if(nn.version="2.4.3",nn.removed=[],!zt||!zt.document||9!==zt.document.nodeType)return nn.isSupported=!1,nn;var mn=zt.document,ti=zt.document,ai=zt.DocumentFragment,ns=zt.HTMLTemplateElement,oo=zt.Node,ao=zt.Element,Co=zt.NodeFilter,Do=zt.NamedNodeMap,Rs=void 0===Do?zt.NamedNodeMap||zt.MozNamedAttrMap:Do,Us=zt.HTMLFormElement,ea=zt.DOMParser,jo=zt.trustedTypes,Js=ao.prototype,$a=_i(Js,"cloneNode"),Xl=_i(Js,"nextSibling"),wa=_i(Js,"childNodes"),dc=_i(Js,"parentNode");if("function"==typeof ns){var Ca=ti.createElement("template");Ca.content&&Ca.content.ownerDocument&&(ti=Ca.content.ownerDocument)}var Zr=function(nn,mn){if("object"!==ke(nn)||"function"!=typeof nn.createPolicy)return null;var ti=null,ai="data-tt-policy-suffix";mn.currentScript&&mn.currentScript.hasAttribute(ai)&&(ti=mn.currentScript.getAttribute(ai));var ns="dompurify"+(ti?"#"+ti:"");try{return nn.createPolicy(ns,{createHTML:function(ao){return ao},createScriptURL:function(ao){return ao}})}catch{return console.warn("TrustedTypes policy "+ns+" could not be created."),null}}(jo,mn),yl=Zr?Zr.createHTML(""):"",hc=ti.implementation,fc=ti.createNodeIterator,Ir=ti.createDocumentFragment,hn=ti.getElementsByTagName,Gn=mn.importNode,dr={};try{dr=On(ti).documentMode?ti.documentMode:{}}catch{}var Ne={};nn.isSupported="function"==typeof dc&&hc&&typeof hc.createHTMLDocument<"u"&&9!==dr;var is,Wo,li=ko,Ki=ei,Xi=jt,xr=pn,oi=ln,Yt=Ci,To=xi,lo=Fn,Nr=null,Wa=Tt({},[].concat(q(Ti),q(Ri),q(Yi),q(Wn),q(ki))),Zi=null,eo=Tt({},[].concat(q(Mi),q(or),q(qi),q(Qs))),Hr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xo=null,Uo=null,Fa=!0,oa=!0,Di=!1,$o=!1,Ga=!1,Yr=!1,Ta=!1,Ol=!1,Pr=!1,gs=!1,ms=!0,ql=!1,_s=!0,cr=!1,Ui={},xa=null,co=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ys=null,aa=Tt({},["audio","video","img","source","image","track"]),Me=null,Mo=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wt="http://www.w3.org/1998/Math/MathML",Ge="http://www.w3.org/2000/svg",fn="http://www.w3.org/1999/xhtml",Lt=fn,An=!1,fi=null,$i=Tt({},[wt,Ge,fn],Te),to=["application/xhtml+xml","text/html"],Ic=null,Io=ti.createElement("form"),vl=function(Et){return Et instanceof RegExp||Et instanceof Function},tr=function(Et){Ic&&Ic===Et||((!Et||"object"!==ke(Et))&&(Et={}),Et=On(Et),is=is=-1===to.indexOf(Et.PARSER_MEDIA_TYPE)?"text/html":Et.PARSER_MEDIA_TYPE,Wo="application/xhtml+xml"===is?Te:fe,Nr="ALLOWED_TAGS"in Et?Tt({},Et.ALLOWED_TAGS,Wo):Wa,Zi="ALLOWED_ATTR"in Et?Tt({},Et.ALLOWED_ATTR,Wo):eo,fi="ALLOWED_NAMESPACES"in Et?Tt({},Et.ALLOWED_NAMESPACES,Te):$i,Me="ADD_URI_SAFE_ATTR"in Et?Tt(On(Mo),Et.ADD_URI_SAFE_ATTR,Wo):Mo,ys="ADD_DATA_URI_TAGS"in Et?Tt(On(aa),Et.ADD_DATA_URI_TAGS,Wo):aa,xa="FORBID_CONTENTS"in Et?Tt({},Et.FORBID_CONTENTS,Wo):co,xo="FORBID_TAGS"in Et?Tt({},Et.FORBID_TAGS,Wo):{},Uo="FORBID_ATTR"in Et?Tt({},Et.FORBID_ATTR,Wo):{},Ui="USE_PROFILES"in Et&&Et.USE_PROFILES,Fa=!1!==Et.ALLOW_ARIA_ATTR,oa=!1!==Et.ALLOW_DATA_ATTR,Di=Et.ALLOW_UNKNOWN_PROTOCOLS||!1,$o=Et.SAFE_FOR_TEMPLATES||!1,Ga=Et.WHOLE_DOCUMENT||!1,Ol=Et.RETURN_DOM||!1,Pr=Et.RETURN_DOM_FRAGMENT||!1,gs=Et.RETURN_TRUSTED_TYPE||!1,Ta=Et.FORCE_BODY||!1,ms=!1!==Et.SANITIZE_DOM,ql=Et.SANITIZE_NAMED_PROPS||!1,_s=!1!==Et.KEEP_CONTENT,cr=Et.IN_PLACE||!1,lo=Et.ALLOWED_URI_REGEXP||lo,Lt=Et.NAMESPACE||fn,Et.CUSTOM_ELEMENT_HANDLING&&vl(Et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Hr.tagNameCheck=Et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Et.CUSTOM_ELEMENT_HANDLING&&vl(Et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Hr.attributeNameCheck=Et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Et.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Hr.allowCustomizedBuiltInElements=Et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$o&&(oa=!1),Pr&&(Ol=!0),Ui&&(Nr=Tt({},q(ki)),Zi=[],!0===Ui.html&&(Tt(Nr,Ti),Tt(Zi,Mi)),!0===Ui.svg&&(Tt(Nr,Ri),Tt(Zi,or),Tt(Zi,Qs)),!0===Ui.svgFilters&&(Tt(Nr,Yi),Tt(Zi,or),Tt(Zi,Qs)),!0===Ui.mathMl&&(Tt(Nr,Wn),Tt(Zi,qi),Tt(Zi,Qs))),Et.ADD_TAGS&&(Nr===Wa&&(Nr=On(Nr)),Tt(Nr,Et.ADD_TAGS,Wo)),Et.ADD_ATTR&&(Zi===eo&&(Zi=On(Zi)),Tt(Zi,Et.ADD_ATTR,Wo)),Et.ADD_URI_SAFE_ATTR&&Tt(Me,Et.ADD_URI_SAFE_ATTR,Wo),Et.FORBID_CONTENTS&&(xa===co&&(xa=On(xa)),Tt(xa,Et.FORBID_CONTENTS,Wo)),_s&&(Nr["#text"]=!0),Ga&&Tt(Nr,["html","head","body"]),Nr.table&&(Tt(Nr,["tbody"]),delete xo.tbody),ee&&ee(Et),Ic=Et)},Un=Tt({},["mi","mo","mn","ms","mtext"]),Rl=Tt({},["foreignobject","desc","title","annotation-xml"]),Fr=Tt({},["title","style","font","a","script"]),pc=Tt({},Ri);Tt(pc,Yi),Tt(pc,vr);var Bd=Tt({},Wn);Tt(Bd,Pi);var bl=function(Et){we(nn.removed,{element:Et});try{Et.parentNode.removeChild(Et)}catch{try{Et.outerHTML=yl}catch{Et.remove()}}},Nc=function(Et,Yn){try{we(nn.removed,{attribute:Yn.getAttributeNode(Et),from:Yn})}catch{we(nn.removed,{attribute:null,from:Yn})}if(Yn.removeAttribute(Et),"is"===Et&&!Zi[Et])if(Ol||Pr)try{bl(Yn)}catch{}else try{Yn.setAttribute(Et,"")}catch{}},gu=function(Et){var Yn,hi;if(Ta)Et="<remove></remove>"+Et;else{var As=tt(Et,/^[\r\n\t ]+/);hi=As&&As[0]}"application/xhtml+xml"===is&&Lt===fn&&(Et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Et+"</body></html>");var Go=Zr?Zr.createHTML(Et):Et;if(Lt===fn)try{Yn=(new ea).parseFromString(Go,is)}catch{}if(!Yn||!Yn.documentElement){Yn=hc.createDocument(Lt,"template",null);try{Yn.documentElement.innerHTML=An?yl:Go}catch{}}var Ys=Yn.body||Yn.documentElement;return Et&&hi&&Ys.insertBefore(ti.createTextNode(hi),Ys.childNodes[0]||null),Lt===fn?hn.call(Yn,Ga?"html":"body")[0]:Ga?Yn.documentElement:Ys},zu=function(Et){return fc.call(Et.ownerDocument||Et,Et,Co.SHOW_ELEMENT|Co.SHOW_COMMENT|Co.SHOW_TEXT,null,!1)},Xc=function(Et){return"object"===ke(oo)?Et instanceof oo:Et&&"object"===ke(Et)&&"number"==typeof Et.nodeType&&"string"==typeof Et.nodeName},yi=function(Et,Yn,hi){Ne[Et]&&ie(Ne[Et],function(As){As.call(nn,Yn,hi,Ic)})},ol=function(Et){var Yn;if(yi("beforeSanitizeElements",Et,null),function(Et){return Et instanceof Us&&("string"!=typeof Et.nodeName||"string"!=typeof Et.textContent||"function"!=typeof Et.removeChild||!(Et.attributes instanceof Rs)||"function"!=typeof Et.removeAttribute||"function"!=typeof Et.setAttribute||"string"!=typeof Et.namespaceURI||"function"!=typeof Et.insertBefore||"function"!=typeof Et.hasChildNodes)}(Et)||Xe(/[\u0080-\uFFFF]/,Et.nodeName))return bl(Et),!0;var hi=Wo(Et.nodeName);if(yi("uponSanitizeElement",Et,{tagName:hi,allowedTags:Nr}),Et.hasChildNodes()&&!Xc(Et.firstElementChild)&&(!Xc(Et.content)||!Xc(Et.content.firstElementChild))&&Xe(/<[/\w]/g,Et.innerHTML)&&Xe(/<[/\w]/g,Et.textContent)||"select"===hi&&Xe(/<template/i,Et.innerHTML))return bl(Et),!0;if(!Nr[hi]||xo[hi]){if(!xo[hi]&&qc(hi)&&(Hr.tagNameCheck instanceof RegExp&&Xe(Hr.tagNameCheck,hi)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(hi)))return!1;if(_s&&!xa[hi]){var As=dc(Et)||Et.parentNode,Go=wa(Et)||Et.childNodes;if(Go&&As)for(var Xs=Go.length-1;Xs>=0;--Xs)As.insertBefore($a(Go[Xs],!0),Xl(Et))}return bl(Et),!0}return Et instanceof ao&&!function(Et){var Yn=dc(Et);(!Yn||!Yn.tagName)&&(Yn={namespaceURI:Lt,tagName:"template"});var hi=fe(Et.tagName),As=fe(Yn.tagName);return!!fi[Et.namespaceURI]&&(Et.namespaceURI===Ge?Yn.namespaceURI===fn?"svg"===hi:Yn.namespaceURI===wt?"svg"===hi&&("annotation-xml"===As||Un[As]):!!pc[hi]:Et.namespaceURI===wt?Yn.namespaceURI===fn?"math"===hi:Yn.namespaceURI===Ge?"math"===hi&&Rl[As]:!!Bd[hi]:Et.namespaceURI===fn?!(Yn.namespaceURI===Ge&&!Rl[As]||Yn.namespaceURI===wt&&!Un[As])&&!Bd[hi]&&(Fr[hi]||!pc[hi]):!("application/xhtml+xml"!==is||!fi[Et.namespaceURI]))}(Et)||("noscript"===hi||"noembed"===hi)&&Xe(/<\/no(script|embed)/i,Et.innerHTML)?(bl(Et),!0):($o&&3===Et.nodeType&&(Yn=Ze(Yn=Et.textContent,li," "),Yn=Ze(Yn,Ki," "),Yn=Ze(Yn,Xi," "),Et.textContent!==Yn&&(we(nn.removed,{element:Et.cloneNode()}),Et.textContent=Yn)),yi("afterSanitizeElements",Et,null),!1)},al=function(Et,Yn,hi){if(ms&&("id"===Yn||"name"===Yn)&&(hi in ti||hi in Io))return!1;if((!oa||Uo[Yn]||!Xe(xr,Yn))&&(!Fa||!Xe(oi,Yn)))if(!Zi[Yn]||Uo[Yn]){if(!(qc(Et)&&(Hr.tagNameCheck instanceof RegExp&&Xe(Hr.tagNameCheck,Et)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(Et))&&(Hr.attributeNameCheck instanceof RegExp&&Xe(Hr.attributeNameCheck,Yn)||Hr.attributeNameCheck instanceof Function&&Hr.attributeNameCheck(Yn))||"is"===Yn&&Hr.allowCustomizedBuiltInElements&&(Hr.tagNameCheck instanceof RegExp&&Xe(Hr.tagNameCheck,hi)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(hi))))return!1}else if(!Me[Yn]&&!Xe(lo,Ze(hi,To,""))&&("src"!==Yn&&"xlink:href"!==Yn&&"href"!==Yn||"script"===Et||0!==Le(hi,"data:")||!ys[Et])&&(!Di||Xe(Yt,Ze(hi,To,"")))&&hi)return!1;return!0},qc=function(Et){return Et.indexOf("-")>0},mu=function(Et){var Yn,hi,As,Go;yi("beforeSanitizeAttributes",Et,null);var Ys=Et.attributes;if(Ys){var Xs={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zi};for(Go=Ys.length;Go--;){var zo=(Yn=Ys[Go]).name,wl=Yn.namespaceURI;if(hi="value"===zo?Yn.value:Fe(Yn.value),As=Wo(zo),Xs.attrName=As,Xs.attrValue=hi,Xs.keepAttr=!0,Xs.forceKeepAttr=void 0,yi("uponSanitizeAttribute",Et,Xs),hi=Xs.attrValue,!Xs.forceKeepAttr&&(Nc(zo,Et),Xs.keepAttr)){if(Xe(/\/>/i,hi)){Nc(zo,Et);continue}$o&&(hi=Ze(hi,li," "),hi=Ze(hi,Ki," "),hi=Ze(hi,Xi," "));var la=Wo(Et.nodeName);if(al(la,As,hi)){if(ql&&("id"===As||"name"===As)&&(Nc(zo,Et),hi="user-content-"+hi),Zr&&"object"===ke(jo)&&"function"==typeof jo.getAttributeType&&!wl)switch(jo.getAttributeType(la,As)){case"TrustedHTML":hi=Zr.createHTML(hi);break;case"TrustedScriptURL":hi=Zr.createScriptURL(hi)}try{wl?Et.setAttributeNS(wl,zo,hi):Et.setAttribute(zo,hi),ge(nn.removed)}catch{}}}}yi("afterSanitizeAttributes",Et,null)}},Vd=function Wi(Et){var Yn,hi=zu(Et);for(yi("beforeSanitizeShadowDOM",Et,null);Yn=hi.nextNode();)yi("uponSanitizeShadowNode",Yn,null),!ol(Yn)&&(Yn.content instanceof ai&&Wi(Yn.content),mu(Yn));yi("afterSanitizeShadowDOM",Et,null)};return nn.sanitize=function(Wi){var Yn,hi,As,Go,Ys,Et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((An=!Wi)&&(Wi="\x3c!--\x3e"),"string"!=typeof Wi&&!Xc(Wi)){if("function"!=typeof Wi.toString)throw mt("toString is not a function");if("string"!=typeof(Wi=Wi.toString()))throw mt("dirty is not a string, aborting")}if(!nn.isSupported){if("object"===ke(zt.toStaticHTML)||"function"==typeof zt.toStaticHTML){if("string"==typeof Wi)return zt.toStaticHTML(Wi);if(Xc(Wi))return zt.toStaticHTML(Wi.outerHTML)}return Wi}if(Yr||tr(Et),nn.removed=[],"string"==typeof Wi&&(cr=!1),cr){if(Wi.nodeName){var Xs=Wo(Wi.nodeName);if(!Nr[Xs]||xo[Xs])throw mt("root node is forbidden and cannot be sanitized in-place")}}else if(Wi instanceof oo)1===(hi=(Yn=gu("\x3c!----\x3e")).ownerDocument.importNode(Wi,!0)).nodeType&&"BODY"===hi.nodeName||"HTML"===hi.nodeName?Yn=hi:Yn.appendChild(hi);else{if(!Ol&&!$o&&!Ga&&-1===Wi.indexOf("<"))return Zr&&gs?Zr.createHTML(Wi):Wi;if(!(Yn=gu(Wi)))return Ol?null:gs?yl:""}Yn&&Ta&&bl(Yn.firstChild);for(var _u=zu(cr?Wi:Yn);As=_u.nextNode();)3===As.nodeType&&As===Go||ol(As)||(As.content instanceof ai&&Vd(As.content),mu(As),Go=As);if(Go=null,cr)return Wi;if(Ol){if(Pr)for(Ys=Ir.call(Yn.ownerDocument);Yn.firstChild;)Ys.appendChild(Yn.firstChild);else Ys=Yn;return Zi.shadowroot&&(Ys=Gn.call(mn,Ys,!0)),Ys}var zo=Ga?Yn.outerHTML:Yn.innerHTML;return Ga&&Nr["!doctype"]&&Yn.ownerDocument&&Yn.ownerDocument.doctype&&Yn.ownerDocument.doctype.name&&Xe(Gt,Yn.ownerDocument.doctype.name)&&(zo="<!DOCTYPE "+Yn.ownerDocument.doctype.name+">\n"+zo),$o&&(zo=Ze(zo,li," "),zo=Ze(zo,Ki," "),zo=Ze(zo,Xi," ")),Zr&&gs?Zr.createHTML(zo):zo},nn.setConfig=function(Wi){tr(Wi),Yr=!0},nn.clearConfig=function(){Ic=null,Yr=!1},nn.isValidAttribute=function(Wi,Et,Yn){Ic||tr({});var hi=Wo(Wi),As=Wo(Et);return al(hi,As,Yn)},nn.addHook=function(Wi,Et){"function"==typeof Et&&(Ne[Wi]=Ne[Wi]||[],we(Ne[Wi],Et))},nn.removeHook=function(Wi){if(Ne[Wi])return ge(Ne[Wi])},nn.removeHooks=function(Wi){Ne[Wi]&&(Ne[Wi]=[])},nn.removeAllHooks=function(){Ne={}},nn}()}()},2578:function(It,ke){var O,U;void 0!==(U="function"==typeof(O=function(){"use strict";function te(k,I,S){var z=new XMLHttpRequest;z.open("GET",k),z.responseType="blob",z.onload=function(){x(z.response,I,S)},z.onerror=function(){console.error("could not download file")},z.send()}function re(k){var I=new XMLHttpRequest;I.open("HEAD",k,!1);try{I.send()}catch{}return 200<=I.status&&299>=I.status}function A(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var I=document.createEvent("MouseEvents");I.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(I)}}var F="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,ne=F.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=F.saveAs||("object"!=typeof window||window!==F?function(){}:"download"in HTMLAnchorElement.prototype&&!ne?function(k,I,S){var z=F.URL||F.webkitURL,ee=document.createElement("a");ee.download=I=I||k.name||"download",ee.rel="noopener","string"==typeof k?(ee.href=k,ee.origin===location.origin?A(ee):re(ee.href)?te(k,I,S):A(ee,ee.target="_blank")):(ee.href=z.createObjectURL(k),setTimeout(function(){z.revokeObjectURL(ee.href)},4e4),setTimeout(function(){A(ee)},0))}:"msSaveOrOpenBlob"in navigator?function(k,I,S){if(I=I||k.name||"download","string"!=typeof k)navigator.msSaveOrOpenBlob(function q(k,I){return typeof I>"u"?I={autoBom:!1}:"object"!=typeof I&&(console.warn("Deprecated: Expected third argument to be a object"),I={autoBom:!I}),I.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(k.type)?new Blob(["\ufeff",k],{type:k.type}):k}(k,S),I);else if(re(k))te(k,I,S);else{var z=document.createElement("a");z.href=k,z.target="_blank",setTimeout(function(){A(z)})}}:function(k,I,S,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),"string"==typeof k)return te(k,I,S);var ee="application/octet-stream"===k.type,Q=/constructor/i.test(F.HTMLElement)||F.safari,Ce=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ce||ee&&Q||ne)&&typeof FileReader<"u"){var H=new FileReader;H.onloadend=function(){var ie=H.result;ie=Ce?ie:ie.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=ie:location=ie,z=null},H.readAsDataURL(k)}else{var G=F.URL||F.webkitURL,K=G.createObjectURL(k);z?z.location=K:location.href=K,z=null,setTimeout(function(){G.revokeObjectURL(K)},4e4)}});F.saveAs=x.saveAs=x,It.exports=x})?O.apply(ke,[]):O)&&(It.exports=U)},179:(It,ke,O)=>{"use strict";O.d(ke,{a:()=>qa,b:()=>h0,c:()=>tr,d:()=>Qi,e:()=>Io,f:()=>qt,g:()=>ut,h:()=>y0,i:()=>L1,j:()=>Ai,k:()=>Li,l:()=>Me,m:()=>je,n:()=>An,o:()=>rd,p:()=>Hy,s:()=>ih});var R=O(467);const q=function U(s){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];var f=Array.from("string"==typeof s?[s]:s);f[f.length-1]=f[f.length-1].replace(/\r?\n([\t ]*)$/,"");var p=f.reduce(function(w,C){var D=C.match(/\n([\t ]+|(?!\s).)/g);return D?w.concat(D.map(function(V){var W,j;return null!==(j=null===(W=V.match(/[\t ]/g))||void 0===W?void 0:W.length)&&void 0!==j?j:0})):w},[]);if(p.length){var y=new RegExp("\n[\t ]{"+Math.min.apply(Math,p)+"}","g");f=f.map(function(w){return w.replace(y,"\n")})}f[0]=f[0].replace(/^\r?\n/,"");var v=f[0];return a.forEach(function(w,C){var D=v.match(/(?:^|\n)( *)$/),V=D?D[1]:"",W=w;"string"==typeof w&&w.includes("\n")&&(W=String(w).split("\n").map(function(j,X){return 0===X?j:""+V+j}).join("\n")),v+=W+f[C+1]}),v};var te=O(7374),re=O.n(te),A=O(2571),F=O(1975),ne=O(1973),x=O.n(ne),k=O(7501),I=O(8844);const z=(s,a)=>{const d=k.A.parse(s);for(const f in a)d[f]=I.A.channel.clamp[f](a[f]);return k.A.stringify(d)},Q=(s,a)=>{const d=k.A.parse(s),f={};for(const p in a)a[p]&&(f[p]=d[p]+a[p]);return z(s,f)};var Ce=O(7394);const G=(s,a,d=0,f=1)=>{if("number"!=typeof s)return z(s,{a});const p=Ce.A.set({r:I.A.channel.clamp.r(s),g:I.A.channel.clamp.g(a),b:I.A.channel.clamp.b(d),a:I.A.channel.clamp.a(f)});return k.A.stringify(p)},we=(s,a=100)=>{const d=k.A.parse(s);return d.r=255-d.r,d.g=255-d.g,d.b=255-d.b,((s,a,d=50)=>{const{r:f,g:p,b:y,a:v}=k.A.parse(s),{r:w,g:C,b:D,a:V}=k.A.parse(a),W=d/100,j=2*W-1,X=v-V,Ie=((j*X==-1?j:(j+X)/(1+j*X))+1)/2,Pe=1-Ie;return G(f*Ie+w*Pe,p*Ie+C*Pe,y*Ie+D*Pe,v*W+V*(1-W))})(d,s,a)};var fe=O(7376),Te=O(4328),tt=O(4569),Xe="comm",mt="rule",ft="decl",or=Math.abs,qi=String.fromCharCode;function ei(s){return s.trim()}function pn(s,a,d){return s.replace(a,d)}function ln(s,a){return s.indexOf(a)}function Fn(s,a){return 0|s.charCodeAt(a)}function Ci(s,a,d){return s.slice(a,d)}function xi(s){return s.length}function Gt(s){return s.length}function At(s,a){return a.push(s),s}function yn(s,a){for(var d="",f=Gt(s),p=0;p<f;p++)d+=a(s[p],p,s,a)||"";return d}function Ln(s,a,d,f){switch(s.type){case"@import":case ft:return s.return=s.return||s.value;case Xe:return"";case"@keyframes":return s.return=s.value+"{"+yn(s.children,f)+"}";case mt:s.value=s.props.join(",")}return xi(d=yn(s.children,f))?s.return=s.value+"{"+d+"}":""}var zt=1,nn=1,mn=0,ti=0,ai=0,ns="";function oo(s,a,d,f,p,y,v){return{value:s,root:a,parent:d,type:f,props:p,children:y,line:zt,column:nn,length:v,return:""}}function Rs(){return ai=ti<mn?Fn(ns,ti++):0,nn++,10===ai&&(nn=1,zt++),ai}function Us(){return Fn(ns,ti)}function ea(){return ti}function jo(s,a){return Ci(ns,s,a)}function Js(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wa(s){return ei(jo(ti-1,sl(91===s?s+2:40===s?s+1:s)))}function Ca(s){for(;(ai=Us())&&ai<33;)Rs();return Js(s)>2||Js(ai)>3?"":" "}function yl(s,a){for(;--a&&Rs()&&!(ai<48||ai>102||ai>57&&ai<65||ai>70&&ai<97););return jo(s,ea()+(a<6&&32==Us()&&32==Rs()))}function sl(s){for(;Rs();)switch(ai){case s:return ti;case 34:case 39:34!==s&&39!==s&&sl(ai);break;case 40:41===s&&sl(s);break;case 92:Rs()}return ti}function hc(s,a){for(;Rs()&&s+ai!==57&&(s+ai!==84||47!==Us()););return"/*"+jo(a,ti-1)+"*"+qi(47===s?s:Rs())}function fc(s){for(;!Js(Us());)Rs();return jo(s,ti)}function Ir(s){return function Xl(s){return ns="",s}(hn("",null,null,null,[""],s=function $a(s){return zt=nn=1,mn=xi(ns=s),ti=0,[]}(s),0,[0],s))}function hn(s,a,d,f,p,y,v,w,C){for(var D=0,V=0,W=v,j=0,X=0,Ee=0,Ie=1,Pe=1,Ve=1,Ae=0,Qe="",vt=p,Ft=y,Qt=f,st=Qe;Pe;)switch(Ee=Ae,Ae=Rs()){case 40:if(108!=Ee&&58==Fn(st,W-1)){-1!=ln(st+=pn(wa(Ae),"&","&\f"),"&\f")&&(Ve=-1);break}case 34:case 39:case 91:st+=wa(Ae);break;case 9:case 10:case 13:case 32:st+=Ca(Ee);break;case 92:st+=yl(ea()-1,7);continue;case 47:switch(Us()){case 42:case 47:At(dr(hc(Rs(),ea()),a,d),C);break;default:st+="/"}break;case 123*Ie:w[D++]=xi(st)*Ve;case 125*Ie:case 59:case 0:switch(Ae){case 0:case 125:Pe=0;case 59+V:X>0&&xi(st)-W&&At(X>32?Ne(st+";",f,d,W-1):Ne(pn(st," ","")+";",f,d,W-2),C);break;case 59:st+=";";default:if(At(Qt=Gn(st,a,d,D,V,p,w,Qe,vt=[],Ft=[],W),y),123===Ae)if(0===V)hn(st,a,Qt,Qt,vt,y,W,w,Ft);else switch(99===j&&110===Fn(st,3)?100:j){case 100:case 109:case 115:hn(s,Qt,Qt,f&&At(Gn(s,Qt,Qt,0,0,p,w,Qe,p,vt=[],W),Ft),p,Ft,W,w,f?vt:Ft);break;default:hn(st,Qt,Qt,Qt,[""],Ft,0,w,Ft)}}D=V=X=0,Ie=Ve=1,Qe=st="",W=v;break;case 58:W=1+xi(st),X=Ee;default:if(Ie<1)if(123==Ae)--Ie;else if(125==Ae&&0==Ie++&&125==(ai=ti>0?Fn(ns,--ti):0,nn--,10===ai&&(nn=1,zt--),ai))continue;switch(st+=qi(Ae),Ae*Ie){case 38:Ve=V>0?1:(st+="\f",-1);break;case 44:w[D++]=(xi(st)-1)*Ve,Ve=1;break;case 64:45===Us()&&(st+=wa(Rs())),j=Us(),V=W=xi(Qe=st+=fc(ea())),Ae++;break;case 45:45===Ee&&2==xi(st)&&(Ie=0)}}return y}function Gn(s,a,d,f,p,y,v,w,C,D,V){for(var W=p-1,j=0===p?y:[""],X=Gt(j),Ee=0,Ie=0,Pe=0;Ee<f;++Ee)for(var Ve=0,Ae=Ci(s,W+1,W=or(Ie=v[Ee])),Qe=s;Ve<X;++Ve)(Qe=ei(Ie>0?j[Ve]+" "+Ae:pn(Ae,/&\f/g,j[Ve])))&&(C[Pe++]=Qe);return oo(s,a,d,0===p?mt:w,C,D,V)}function dr(s,a,d){return oo(s,a,d,Xe,qi(function Co(){return ai}()),Ci(s,2,-2),0)}function Ne(s,a,d,f){return oo(s,a,d,ft,Ci(s,0,f),Ci(s,f+1,-1),f)}var li=O(5180),Ki=O(8802),Xi=O(8807);const xr=[];for(let s=0;s<256;++s)xr.push((s+256).toString(16).slice(1));const lo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,eo=function Zi(s){if(!function Nr(s){return"string"==typeof s&&lo.test(s)}(s))throw TypeError("Invalid UUID");let a;const d=new Uint8Array(16);return d[0]=(a=parseInt(s.slice(0,8),16))>>>24,d[1]=a>>>16&255,d[2]=a>>>8&255,d[3]=255&a,d[4]=(a=parseInt(s.slice(9,13),16))>>>8,d[5]=255&a,d[6]=(a=parseInt(s.slice(14,18),16))>>>8,d[7]=255&a,d[8]=(a=parseInt(s.slice(19,23),16))>>>8,d[9]=255&a,d[10]=(a=parseInt(s.slice(24,36),16))/1099511627776&255,d[11]=a/4294967296&255,d[12]=a>>>24&255,d[13]=a>>>16&255,d[14]=a>>>8&255,d[15]=255&a,d};function oa(s,a,d,f){switch(s){case 0:return a&d^~a&f;case 1:case 3:return a^d^f;case 2:return a&d^a&f^d&f}}function Di(s,a){return s<<a|s>>>32-a}const Ta=function Fa(s,a,d){function f(p,y,v,w){var C;if("string"==typeof p&&(p=function Hr(s){s=unescape(encodeURIComponent(s));const a=[];for(let d=0;d<s.length;++d)a.push(s.charCodeAt(d));return a}(p)),"string"==typeof y&&(y=eo(y)),16!==(null===(C=y)||void 0===C?void 0:C.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let D=new Uint8Array(16+p.length);if(D.set(y),D.set(p,y.length),D=d(D),D[6]=15&D[6]|a,D[8]=63&D[8]|128,v){w=w||0;for(let V=0;V<16;++V)v[w+V]=D[V];return v}return function oi(s,a=0){return(xr[s[a+0]]+xr[s[a+1]]+xr[s[a+2]]+xr[s[a+3]]+"-"+xr[s[a+4]]+xr[s[a+5]]+"-"+xr[s[a+6]]+xr[s[a+7]]+"-"+xr[s[a+8]]+xr[s[a+9]]+"-"+xr[s[a+10]]+xr[s[a+11]]+xr[s[a+12]]+xr[s[a+13]]+xr[s[a+14]]+xr[s[a+15]]).toLowerCase()}(D)}try{f.name=s}catch{}return f.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",f.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",f}("v5",80,function $o(s){const a=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof s){const v=unescape(encodeURIComponent(s));s=[];for(let w=0;w<v.length;++w)s.push(v.charCodeAt(w))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);const p=Math.ceil((s.length/4+2)/16),y=new Array(p);for(let v=0;v<p;++v){const w=new Uint32Array(16);for(let C=0;C<16;++C)w[C]=s[64*v+4*C]<<24|s[64*v+4*C+1]<<16|s[64*v+4*C+2]<<8|s[64*v+4*C+3];y[v]=w}y[p-1][14]=8*(s.length-1)/Math.pow(2,32),y[p-1][14]=Math.floor(y[p-1][14]),y[p-1][15]=8*(s.length-1)&4294967295;for(let v=0;v<p;++v){const w=new Uint32Array(80);for(let X=0;X<16;++X)w[X]=y[v][X];for(let X=16;X<80;++X)w[X]=Di(w[X-3]^w[X-8]^w[X-14]^w[X-16],1);let C=d[0],D=d[1],V=d[2],W=d[3],j=d[4];for(let X=0;X<80;++X){const Ee=Math.floor(X/20),Ie=Di(C,5)+oa(Ee,D,V,W)+j+a[Ee]+w[X]>>>0;j=W,W=V,V=Di(D,30)>>>0,D=C,C=Ie}d[0]=d[0]+C>>>0,d[1]=d[1]+D>>>0,d[2]=d[2]+V>>>0,d[3]=d[3]+W>>>0,d[4]=d[4]+j>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,255&d[0],d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,255&d[1],d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,255&d[2],d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,255&d[3],d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,255&d[4]]});O(338),O(6320);var gs=O(9483),Kn=(O(8384),O(8356),O(2548)),_s=O.n(Kn),cr=O(2799),Ui=O.n(cr),xa=O(2900),co=O.n(xa),ys=O(2036);const aa={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Me={trace:(...s)=>{},debug:(...s)=>{},info:(...s)=>{},warn:(...s)=>{},error:(...s)=>{},fatal:(...s)=>{}},Mo=function(s="fatal"){let a=aa.fatal;"string"==typeof s?(s=s.toLowerCase())in aa&&(a=aa[s]):"number"==typeof s&&(a=s),Me.trace=()=>{},Me.debug=()=>{},Me.info=()=>{},Me.warn=()=>{},Me.error=()=>{},Me.fatal=()=>{},a<=aa.fatal&&(Me.fatal=console.error?console.error.bind(console,wt("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",wt("FATAL"))),a<=aa.error&&(Me.error=console.error?console.error.bind(console,wt("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",wt("ERROR"))),a<=aa.warn&&(Me.warn=console.warn?console.warn.bind(console,wt("WARN"),"color: orange"):console.log.bind(console,"\x1b[33m",wt("WARN"))),a<=aa.info&&(Me.info=console.info?console.info.bind(console,wt("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",wt("INFO"))),a<=aa.debug&&(Me.debug=console.debug?console.debug.bind(console,wt("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",wt("DEBUG"))),a<=aa.trace&&(Me.trace=console.debug?console.debug.bind(console,wt("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",wt("TRACE")))},wt=s=>`%c${re()().format("ss.SSS")} : ${s} : `,fn=s=>x().sanitize(s),Lt=(s,a)=>{var d;if(!1!==(null==(d=a.flowchart)?void 0:d.htmlLabels)){const f=a.securityLevel;"antiscript"===f||"strict"===f?s=fn(s):"loose"!==f&&(s=(s=(s=Wo(s)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),s=zi(s))}return s},An=(s,a)=>s&&(a.dompurifyConfig?x().sanitize(Lt(s,a),a.dompurifyConfig).toString():x().sanitize(Lt(s,a),{FORBID_TAGS:["style"]}).toString()),$i=/<br\s*\/?>/gi,zi=s=>s.replace(/#br#/g,"<br/>"),Wo=s=>s.replace($i,"#br#"),Io=s=>!(!1===s||["false","null","0"].includes(String(s).trim().toLowerCase())),vl=function(s){let a=s;if(s.split("~").length-1>=2){let d=a;do{a=d,d=a.replace(/~([^\s,:;]+)~/,"<$1>")}while(d!=a);return vl(d)}return a},tr={getRows:s=>s?Wo(s).replace(/\\n/g,"#br#").split("#br#"):[""],sanitizeText:An,sanitizeTextOrArray:(s,a)=>"string"==typeof s?An(s,a):s.flat().map(d=>An(d,a)),hasBreaks:s=>$i.test(s),splitBreaks:s=>s.split($i),lineBreakRegex:$i,removeScript:fn,getUrl:s=>{let a="";return s&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replaceAll(/\(/g,"\\("),a=a.replaceAll(/\)/g,"\\)")),a},evaluate:Io},Un=(s,a)=>Q(s,a?{s:-40,l:10}:{s:-40,l:-10}),Rl="#ffffff",Fr="#f2f2f2";let pc=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Q(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Q(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Un(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Un(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Un(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Un(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||we(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||we(this.tertiaryColor),this.lineColor=this.lineColor||we(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?(0,fe.A)(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||(0,fe.A)(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||we(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||(0,Te.A)(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Q(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Q(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Q(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Q(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Q(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Q(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Q(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Q(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Q(this.primaryColor,{h:330}),this.darkMode)for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=(0,fe.A)(this["cScale"+d],75);else for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=(0,fe.A)(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||we(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this.darkMode?this["cScalePeer"+d]||(0,Te.A)(this["cScale"+d],10):this["cScalePeer"+d]||(0,fe.A)(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;const a=this.darkMode?-4:-1;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Q(this.mainBkg,{h:180,s:-15,l:a*(5+3*d)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Q(this.mainBkg,{h:180,s:-15,l:a*(8+3*d)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Q(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Q(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Q(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Q(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Q(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Q(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Q(this.primaryColor,{l:-10}),this.pie5=this.pie5||Q(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Q(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Q(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Q(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Q(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Q(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Q(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Q(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,fe.A)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Q(this.primaryColor,{h:-30}),this.git4=this.git4||Q(this.primaryColor,{h:-60}),this.git5=this.git5||Q(this.primaryColor,{h:-90}),this.git6=this.git6||Q(this.primaryColor,{h:60}),this.git7=this.git7||Q(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,Te.A)(this.git0,25),this.git1=(0,Te.A)(this.git1,25),this.git2=(0,Te.A)(this.git2,25),this.git3=(0,Te.A)(this.git3,25),this.git4=(0,Te.A)(this.git4,25),this.git5=(0,Te.A)(this.git5,25),this.git6=(0,Te.A)(this.git6,25),this.git7=(0,Te.A)(this.git7,25)):(this.git0=(0,fe.A)(this.git0,25),this.git1=(0,fe.A)(this.git1,25),this.git2=(0,fe.A)(this.git2,25),this.git3=(0,fe.A)(this.git3,25),this.git4=(0,fe.A)(this.git4,25),this.git5=(0,fe.A)(this.git5,25),this.git6=(0,fe.A)(this.git6,25),this.git7=(0,fe.A)(this.git7,25)),this.gitInv0=this.gitInv0||we(this.git0),this.gitInv1=this.gitInv1||we(this.git1),this.gitInv2=this.gitInv2||we(this.git2),this.gitInv3=this.gitInv3||we(this.git3),this.gitInv4=this.gitInv4||we(this.git4),this.gitInv5=this.gitInv5||we(this.git5),this.gitInv6=this.gitInv6||we(this.git6),this.gitInv7=this.gitInv7||we(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fr}calculate(a){if("object"!=typeof a)return void this.updateColors();const d=Object.keys(a);d.forEach(f=>{this[f]=a[f]}),this.updateColors(),d.forEach(f=>{this[f]=a[f]})}},Uu=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=(0,Te.A)(this.primaryColor,16),this.tertiaryColor=Q(this.primaryColor,{h:-160}),this.primaryBorderColor=we(this.background),this.secondaryBorderColor=Un(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Un(this.tertiaryColor,this.darkMode),this.primaryTextColor=we(this.primaryColor),this.secondaryTextColor=we(this.secondaryColor),this.tertiaryTextColor=we(this.tertiaryColor),this.lineColor=we(this.background),this.textColor=we(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=(0,Te.A)(we("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=G(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=(0,fe.A)("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=G(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=G(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=(0,Te.A)(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=(0,Te.A)(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=(0,Te.A)(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Q(this.primaryColor,{h:64}),this.fillType3=Q(this.secondaryColor,{h:64}),this.fillType4=Q(this.primaryColor,{h:-64}),this.fillType5=Q(this.secondaryColor,{h:-64}),this.fillType6=Q(this.primaryColor,{h:128}),this.fillType7=Q(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Q(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Q(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Q(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Q(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Q(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Q(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Q(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Q(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Q(this.primaryColor,{h:330});for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleInv"+a]=this["cScaleInv"+a]||we(this["cScale"+a]);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScalePeer"+a]=this["cScalePeer"+a]||(0,Te.A)(this["cScale"+a],10);for(let a=0;a<5;a++)this["surface"+a]=this["surface"+a]||Q(this.mainBkg,{h:30,s:-30,l:-(4*a-10)}),this["surfacePeer"+a]=this["surfacePeer"+a]||Q(this.mainBkg,{h:30,s:-30,l:-(4*a-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleLabel"+a]=this["cScaleLabel"+a]||this.scaleLabelColor;for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["pie"+a]=this["cScale"+a];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,fe.A)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,Te.A)(this.secondaryColor,20),this.git1=(0,Te.A)(this.pie2||this.secondaryColor,20),this.git2=(0,Te.A)(this.pie3||this.tertiaryColor,20),this.git3=(0,Te.A)(this.pie4||Q(this.primaryColor,{h:-30}),20),this.git4=(0,Te.A)(this.pie5||Q(this.primaryColor,{h:-60}),20),this.git5=(0,Te.A)(this.pie6||Q(this.primaryColor,{h:-90}),10),this.git6=(0,Te.A)(this.pie7||Q(this.primaryColor,{h:60}),10),this.git7=(0,Te.A)(this.pie8||Q(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||we(this.git0),this.gitInv1=this.gitInv1||we(this.git1),this.gitInv2=this.gitInv2||we(this.git2),this.gitInv3=this.gitInv3||we(this.git3),this.gitInv4=this.gitInv4||we(this.git4),this.gitInv5=this.gitInv5||we(this.git5),this.gitInv6=this.gitInv6||we(this.git6),this.gitInv7=this.gitInv7||we(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||(0,Te.A)(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||(0,Te.A)(this.background,2)}calculate(a){if("object"!=typeof a)return void this.updateColors();const d=Object.keys(a);d.forEach(f=>{this[f]=a[f]}),this.updateColors(),d.forEach(f=>{this[f]=a[f]})}},Nc=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Q(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Q(this.primaryColor,{h:-160}),this.primaryBorderColor=Un(this.primaryColor,this.darkMode),this.secondaryBorderColor=Un(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Un(this.tertiaryColor,this.darkMode),this.primaryTextColor=we(this.primaryColor),this.secondaryTextColor=we(this.secondaryColor),this.tertiaryTextColor=we(this.tertiaryColor),this.lineColor=we(this.background),this.textColor=we(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=G(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Q(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Q(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Q(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Q(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Q(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Q(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Q(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Q(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Q(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,fe.A)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,fe.A)(this.tertiaryColor,40);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScale"+a]=(0,fe.A)(this["cScale"+a],10),this["cScalePeer"+a]=this["cScalePeer"+a]||(0,fe.A)(this["cScale"+a],25);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleInv"+a]=this["cScaleInv"+a]||Q(this["cScale"+a],{h:180});for(let a=0;a<5;a++)this["surface"+a]=this["surface"+a]||Q(this.mainBkg,{h:30,l:-(5+5*a)}),this["surfacePeer"+a]=this["surfacePeer"+a]||Q(this.mainBkg,{h:30,l:-(7+5*a)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||we(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||we(this.labelTextColor);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleLabel"+a]=this["cScaleLabel"+a]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=(0,Te.A)(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Q(this.primaryColor,{h:64}),this.fillType3=Q(this.secondaryColor,{h:64}),this.fillType4=Q(this.primaryColor,{h:-64}),this.fillType5=Q(this.secondaryColor,{h:-64}),this.fillType6=Q(this.primaryColor,{h:128}),this.fillType7=Q(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Q(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Q(this.primaryColor,{l:-10}),this.pie5=this.pie5||Q(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Q(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Q(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Q(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Q(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Q(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Q(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Q(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Q(this.primaryColor,{h:-30}),this.git4=this.git4||Q(this.primaryColor,{h:-60}),this.git5=this.git5||Q(this.primaryColor,{h:-90}),this.git6=this.git6||Q(this.primaryColor,{h:60}),this.git7=this.git7||Q(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,Te.A)(this.git0,25),this.git1=(0,Te.A)(this.git1,25),this.git2=(0,Te.A)(this.git2,25),this.git3=(0,Te.A)(this.git3,25),this.git4=(0,Te.A)(this.git4,25),this.git5=(0,Te.A)(this.git5,25),this.git6=(0,Te.A)(this.git6,25),this.git7=(0,Te.A)(this.git7,25)):(this.git0=(0,fe.A)(this.git0,25),this.git1=(0,fe.A)(this.git1,25),this.git2=(0,fe.A)(this.git2,25),this.git3=(0,fe.A)(this.git3,25),this.git4=(0,fe.A)(this.git4,25),this.git5=(0,fe.A)(this.git5,25),this.git6=(0,fe.A)(this.git6,25),this.git7=(0,fe.A)(this.git7,25)),this.gitInv0=this.gitInv0||(0,fe.A)(we(this.git0),25),this.gitInv1=this.gitInv1||we(this.git1),this.gitInv2=this.gitInv2||we(this.git2),this.gitInv3=this.gitInv3||we(this.git3),this.gitInv4=this.gitInv4||we(this.git4),this.gitInv5=this.gitInv5||we(this.git5),this.gitInv6=this.gitInv6||we(this.git6),this.gitInv7=this.gitInv7||we(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||we(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||we(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fr}calculate(a){if("object"!=typeof a)return void this.updateColors();const d=Object.keys(a);d.forEach(f=>{this[f]=a[f]}),this.updateColors(),d.forEach(f=>{this[f]=a[f]})}},zu=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=(0,Te.A)("#cde498",10),this.primaryBorderColor=Un(this.primaryColor,this.darkMode),this.secondaryBorderColor=Un(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Un(this.tertiaryColor,this.darkMode),this.primaryTextColor=we(this.primaryColor),this.secondaryTextColor=we(this.secondaryColor),this.tertiaryTextColor=we(this.primaryColor),this.lineColor=we(this.background),this.textColor=we(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Q(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Q(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Q(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Q(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Q(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Q(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Q(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Q(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Q(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,fe.A)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,fe.A)(this.tertiaryColor,40);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScale"+a]=(0,fe.A)(this["cScale"+a],10),this["cScalePeer"+a]=this["cScalePeer"+a]||(0,fe.A)(this["cScale"+a],25);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleInv"+a]=this["cScaleInv"+a]||Q(this["cScale"+a],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleLabel"+a]=this["cScaleLabel"+a]||this.scaleLabelColor;for(let a=0;a<5;a++)this["surface"+a]=this["surface"+a]||Q(this.mainBkg,{h:30,s:-30,l:-(5+5*a)}),this["surfacePeer"+a]=this["surfacePeer"+a]||Q(this.mainBkg,{h:30,s:-30,l:-(8+5*a)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=(0,fe.A)(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Q(this.primaryColor,{h:64}),this.fillType3=Q(this.secondaryColor,{h:64}),this.fillType4=Q(this.primaryColor,{h:-64}),this.fillType5=Q(this.secondaryColor,{h:-64}),this.fillType6=Q(this.primaryColor,{h:128}),this.fillType7=Q(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Q(this.primaryColor,{l:-30}),this.pie5=this.pie5||Q(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Q(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Q(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Q(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Q(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Q(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Q(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Q(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Q(this.primaryColor,{h:-30}),this.git4=this.git4||Q(this.primaryColor,{h:-60}),this.git5=this.git5||Q(this.primaryColor,{h:-90}),this.git6=this.git6||Q(this.primaryColor,{h:60}),this.git7=this.git7||Q(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,Te.A)(this.git0,25),this.git1=(0,Te.A)(this.git1,25),this.git2=(0,Te.A)(this.git2,25),this.git3=(0,Te.A)(this.git3,25),this.git4=(0,Te.A)(this.git4,25),this.git5=(0,Te.A)(this.git5,25),this.git6=(0,Te.A)(this.git6,25),this.git7=(0,Te.A)(this.git7,25)):(this.git0=(0,fe.A)(this.git0,25),this.git1=(0,fe.A)(this.git1,25),this.git2=(0,fe.A)(this.git2,25),this.git3=(0,fe.A)(this.git3,25),this.git4=(0,fe.A)(this.git4,25),this.git5=(0,fe.A)(this.git5,25),this.git6=(0,fe.A)(this.git6,25),this.git7=(0,fe.A)(this.git7,25)),this.gitInv0=this.gitInv0||we(this.git0),this.gitInv1=this.gitInv1||we(this.git1),this.gitInv2=this.gitInv2||we(this.git2),this.gitInv3=this.gitInv3||we(this.git3),this.gitInv4=this.gitInv4||we(this.git4),this.gitInv5=this.gitInv5||we(this.git5),this.gitInv6=this.gitInv6||we(this.git6),this.gitInv7=this.gitInv7||we(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fr}calculate(a){if("object"!=typeof a)return void this.updateColors();const d=Object.keys(a);d.forEach(f=>{this[f]=a[f]}),this.updateColors(),d.forEach(f=>{this[f]=a[f]})}};class Xc{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=(0,Te.A)(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Q(this.primaryColor,{h:-160}),this.primaryBorderColor=Un(this.primaryColor,this.darkMode),this.secondaryBorderColor=Un(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Un(this.tertiaryColor,this.darkMode),this.primaryTextColor=we(this.primaryColor),this.secondaryTextColor=we(this.secondaryColor),this.tertiaryTextColor=we(this.tertiaryColor),this.lineColor=we(this.background),this.textColor=we(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=(0,Te.A)(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleInv"+a]=this["cScaleInv"+a]||we(this["cScale"+a]);for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScalePeer"+a]=this.darkMode?this["cScalePeer"+a]||(0,Te.A)(this["cScale"+a],10):this["cScalePeer"+a]||(0,fe.A)(this["cScale"+a],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["cScaleLabel"+a]=this["cScaleLabel"+a]||this.scaleLabelColor;for(let a=0;a<5;a++)this["surface"+a]=this["surface"+a]||Q(this.mainBkg,{l:-(5+5*a)}),this["surfacePeer"+a]=this["surfacePeer"+a]||Q(this.mainBkg,{l:-(8+5*a)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=(0,Te.A)(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=(0,Te.A)(this.contrast,30),this.sectionBkgColor2=(0,Te.A)(this.contrast,30),this.taskBorderColor=(0,fe.A)(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=(0,Te.A)(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=(0,fe.A)(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Q(this.primaryColor,{h:64}),this.fillType3=Q(this.secondaryColor,{h:64}),this.fillType4=Q(this.primaryColor,{h:-64}),this.fillType5=Q(this.secondaryColor,{h:-64}),this.fillType6=Q(this.primaryColor,{h:128}),this.fillType7=Q(this.secondaryColor,{h:128});for(let a=0;a<this.THEME_COLOR_LIMIT;a++)this["pie"+a]=this["cScale"+a];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,fe.A)(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Q(this.primaryColor,{h:-30}),this.git4=this.pie5||Q(this.primaryColor,{h:-60}),this.git5=this.pie6||Q(this.primaryColor,{h:-90}),this.git6=this.pie7||Q(this.primaryColor,{h:60}),this.git7=this.pie8||Q(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||we(this.git0),this.gitInv1=this.gitInv1||we(this.git1),this.gitInv2=this.gitInv2||we(this.git2),this.gitInv3=this.gitInv3||we(this.git3),this.gitInv4=this.gitInv4||we(this.git4),this.gitInv5=this.gitInv5||we(this.git5),this.gitInv6=this.gitInv6||we(this.git6),this.gitInv7=this.gitInv7||we(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fr}calculate(a){if("object"!=typeof a)return void this.updateColors();const d=Object.keys(a);d.forEach(f=>{this[f]=a[f]}),this.updateColors(),d.forEach(f=>{this[f]=a[f]})}}const ol={base:{getThemeVariables:s=>{const a=new pc;return a.calculate(s),a}},dark:{getThemeVariables:s=>{const a=new Uu;return a.calculate(s),a}},default:{getThemeVariables:s=>{const a=new Nc;return a.calculate(s),a}},forest:{getThemeVariables:s=>{const a=new zu;return a.calculate(s),a}},neutral:{getThemeVariables:s=>{const a=new Xc;return a.calculate(s),a}}},al={theme:"default",themeVariables:ol.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},timeline:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};al.class&&(al.class.arrowMarkerAbsolute=al.arrowMarkerAbsolute),al.gitGraph&&(al.gitGraph.arrowMarkerAbsolute=al.arrowMarkerAbsolute);const qc=(s,a="")=>Object.keys(s).reduce((d,f)=>Array.isArray(s[f])?d:"object"==typeof s[f]&&null!==s[f]?[...d,a+f,...qc(s[f],"")]:[...d,a+f],[]),mu=qc(al,""),Vd=al;function Wi(s){return typeof s>"u"||null===s}var Ea={isNothing:Wi,isObject:function Et(s){return"object"==typeof s&&null!==s},toArray:function Yn(s){return Array.isArray(s)?s:Wi(s)?[]:[s]},repeat:function As(s,a){var f,d="";for(f=0;f<a;f+=1)d+=s;return d},isNegativeZero:function Go(s){return 0===s&&Number.NEGATIVE_INFINITY===1/s},extend:function hi(s,a){var d,f,p,y;if(a)for(d=0,f=(y=Object.keys(a)).length;d<f;d+=1)s[p=y[d]]=a[p];return s}};function Dr(s,a){var d="",f=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(d+='in "'+s.mark.name+'" '),d+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!a&&s.mark.snippet&&(d+="\n\n"+s.mark.snippet),f+" "+d):f}function vs(s,a){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=a,this.message=Dr(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(vs.prototype=Object.create(Error.prototype)).constructor=vs,vs.prototype.toString=function(a){return this.name+": "+Dr(this,a)};var gc=vs;function Sf(s,a,d,f,p){var y="",v="",w=Math.floor(p/2)-1;return f-a>w&&(a=f-w+(y=" ... ").length),d-f>w&&(d=f+w-(v=" ...").length),{str:y+s.slice(a,d).replace(/\t/g,"\u2192")+v,pos:f-a+y.length}}function Af(s,a){return Ea.repeat(" ",a-s.length)+s}var Mg=function Dg(s,a){if(a=Object.create(a||null),!s.buffer)return null;a.maxLength||(a.maxLength=79),"number"!=typeof a.indent&&(a.indent=1),"number"!=typeof a.linesBefore&&(a.linesBefore=3),"number"!=typeof a.linesAfter&&(a.linesAfter=2);for(var y,d=/\r?\n|\r|\0/g,f=[0],p=[],v=-1;y=d.exec(s.buffer);)p.push(y.index),f.push(y.index+y[0].length),s.position<=y.index&&v<0&&(v=f.length-2);v<0&&(v=f.length-1);var C,D,w="",V=Math.min(s.line+a.linesAfter,p.length).toString().length,W=a.maxLength-(a.indent+V+3);for(C=1;C<=a.linesBefore&&!(v-C<0);C++)D=Sf(s.buffer,f[v-C],p[v-C],s.position-(f[v]-f[v-C]),W),w=Ea.repeat(" ",a.indent)+Af((s.line-C+1).toString(),V)+" | "+D.str+"\n"+w;for(D=Sf(s.buffer,f[v],p[v],s.position,W),w+=Ea.repeat(" ",a.indent)+Af((s.line+1).toString(),V)+" | "+D.str+"\n",w+=Ea.repeat("-",a.indent+V+3+D.pos)+"^\n",C=1;C<=a.linesAfter&&!(v+C>=p.length);C++)D=Sf(s.buffer,f[v+C],p[v+C],s.position-(f[v]-f[v+C]),W),w+=Ea.repeat(" ",a.indent)+Af((s.line+C+1).toString(),V)+" | "+D.str+"\n";return w.replace(/\n$/,"")},kf=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ks=["scalar","sequence","mapping"],Ps=function Rp(s,a){if(a=a||{},Object.keys(a).forEach(function(d){if(-1===kf.indexOf(d))throw new gc('Unknown option "'+d+'" is met in definition of "'+s+'" YAML type.')}),this.options=a,this.tag=s,this.kind=a.kind||null,this.resolve=a.resolve||function(){return!0},this.construct=a.construct||function(d){return d},this.instanceOf=a.instanceOf||null,this.predicate=a.predicate||null,this.represent=a.represent||null,this.representName=a.representName||null,this.defaultStyle=a.defaultStyle||null,this.multi=a.multi||!1,this.styleAliases=function Oh(s){var a={};return null!==s&&Object.keys(s).forEach(function(d){s[d].forEach(function(f){a[String(f)]=d})}),a}(a.styleAliases||null),-1===ks.indexOf(this.kind))throw new gc('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')};function cd(s,a){var d=[];return s[a].forEach(function(f){var p=d.length;d.forEach(function(y,v){y.tag===f.tag&&y.kind===f.kind&&y.multi===f.multi&&(p=v)}),d[p]=f}),d}function Oc(s){return this.extend(s)}Oc.prototype.extend=function(a){var d=[],f=[];if(a instanceof Ps)f.push(a);else if(Array.isArray(a))f=f.concat(a);else{if(!a||!Array.isArray(a.implicit)&&!Array.isArray(a.explicit))throw new gc("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");a.implicit&&(d=d.concat(a.implicit)),a.explicit&&(f=f.concat(a.explicit))}d.forEach(function(y){if(!(y instanceof Ps))throw new gc("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(y.loadKind&&"scalar"!==y.loadKind)throw new gc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(y.multi)throw new gc("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),f.forEach(function(y){if(!(y instanceof Ps))throw new gc("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var p=Object.create(Oc.prototype);return p.implicit=(this.implicit||[]).concat(d),p.explicit=(this.explicit||[]).concat(f),p.compiledImplicit=cd(p,"implicit"),p.compiledExplicit=cd(p,"explicit"),p.compiledTypeMap=function Rh(){var a,d,s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function f(p){p.multi?(s.multi[p.kind].push(p),s.multi.fallback.push(p)):s[p.kind][p.tag]=s.fallback[p.tag]=p}for(a=0,d=arguments.length;a<d;a+=1)arguments[a].forEach(f);return s}(p.compiledImplicit,p.compiledExplicit),p};var La=new Oc({explicit:[new Ps("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return null!==s?s:""}}),new Ps("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return null!==s?s:[]}}),new Ps("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return null!==s?s:{}}})]}),Ud=new Ps("tag:yaml.org,2002:null",{kind:"scalar",resolve:function Df(s){if(null===s)return!0;var a=s.length;return 1===a&&"~"===s||4===a&&("null"===s||"Null"===s||"NULL"===s)},construct:function Mf(){return null},predicate:function Rc(s){return null===s},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Fh=new Ps("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function Pc(s){if(null===s)return!1;var a=s.length;return 4===a&&("true"===s||"True"===s||"TRUE"===s)||5===a&&("false"===s||"False"===s||"FALSE"===s)},construct:function Pp(s){return"true"===s||"True"===s||"TRUE"===s},predicate:function Ii(s){return"[object Boolean]"===Object.prototype.toString.call(s)},represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function $t(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function Lh(s){return 48<=s&&s<=55}function vu(s){return 48<=s&&s<=57}var zd=new Ps("tag:yaml.org,2002:int",{kind:"scalar",resolve:function dd(s){if(null===s)return!1;var p,a=s.length,d=0,f=!1;if(!a)return!1;if(("-"===(p=s[d])||"+"===p)&&(p=s[++d]),"0"===p){if(d+1===a)return!0;if("b"===(p=s[++d])){for(d++;d<a;d++)if("_"!==(p=s[d])){if("0"!==p&&"1"!==p)return!1;f=!0}return f&&"_"!==p}if("x"===p){for(d++;d<a;d++)if("_"!==(p=s[d])){if(!$t(s.charCodeAt(d)))return!1;f=!0}return f&&"_"!==p}if("o"===p){for(d++;d<a;d++)if("_"!==(p=s[d])){if(!Lh(s.charCodeAt(d)))return!1;f=!0}return f&&"_"!==p}}if("_"===p)return!1;for(;d<a;d++)if("_"!==(p=s[d])){if(!vu(s.charCodeAt(d)))return!1;f=!0}return!(!f||"_"===p)},construct:function Hu(s){var f,a=s,d=1;if(-1!==a.indexOf("_")&&(a=a.replace(/_/g,"")),("-"===(f=a[0])||"+"===f)&&("-"===f&&(d=-1),f=(a=a.slice(1))[0]),"0"===a)return 0;if("0"===f){if("b"===a[1])return d*parseInt(a.slice(2),2);if("x"===a[1])return d*parseInt(a.slice(2),16);if("o"===a[1])return d*parseInt(a.slice(2),8)}return d*parseInt(a,10)},predicate:function Fp(s){return"[object Number]"===Object.prototype.toString.call(s)&&s%1==0&&!Ea.isNegativeZero(s)},represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ju=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Hd=/^[-+]?[0-9]+e/,jd=new Ps("tag:yaml.org,2002:float",{kind:"scalar",resolve:function Zc(s){return!(null===s||!ju.test(s)||"_"===s[s.length-1])},construct:function Ya(s){var a,d;return d="-"===(a=s.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(a[0])>=0&&(a=a.slice(1)),".inf"===a?1===d?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===a?NaN:d*parseFloat(a,10)},predicate:function Qc(s){return"[object Number]"===Object.prototype.toString.call(s)&&(s%1!=0||Ea.isNegativeZero(s))},represent:function Ig(s,a){var d;if(isNaN(s))switch(a){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(a){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(a){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ea.isNegativeZero(s))return"-0.0";return d=s.toString(10),Hd.test(d)?d.replace("e",".e"):d},defaultStyle:"lowercase"}),Kl=La.extend({implicit:[Ud,Fh,zd,jd]}),Bh=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),bu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),hd=new Ps("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function $d(s){return null!==s&&(null!==Bh.exec(s)||null!==bu.exec(s))},construct:function Cl(s){var a,d,f,p,y,v,w,j,C=0,D=null;if(null===(a=Bh.exec(s))&&(a=bu.exec(s)),null===a)throw new Error("Date resolve error");if(d=+a[1],f=+a[2]-1,p=+a[3],!a[4])return new Date(Date.UTC(d,f,p));if(y=+a[4],v=+a[5],w=+a[6],a[7]){for(C=a[7].slice(0,3);C.length<3;)C+="0";C=+C}return a[9]&&(D=6e4*(60*+a[10]+ +(a[11]||0)),"-"===a[9]&&(D=-D)),j=new Date(Date.UTC(d,f,p,y,v,w,C)),D&&j.setTime(j.getTime()-D),j},instanceOf:Date,represent:function Lp(s){return s.toISOString()}}),Tl=new Ps("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function Wd(s){return"<<"===s||null===s}}),fd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",zs=new Ps("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function pd(s){if(null===s)return!1;var a,d,f=0,p=s.length,y=fd;for(d=0;d<p;d++)if(!((a=y.indexOf(s.charAt(d)))>64)){if(a<0)return!1;f+=6}return f%8==0},construct:function If(s){var a,d,f=s.replace(/[\r\n=]/g,""),p=f.length,y=fd,v=0,w=[];for(a=0;a<p;a++)a%4==0&&a&&(w.push(v>>16&255),w.push(v>>8&255),w.push(255&v)),v=v<<6|y.indexOf(f.charAt(a));return 0==(d=p%4*6)?(w.push(v>>16&255),w.push(v>>8&255),w.push(255&v)):18===d?(w.push(v>>10&255),w.push(v>>2&255)):12===d&&w.push(v>>4&255),new Uint8Array(w)},predicate:function Zl(s){return"[object Uint8Array]"===Object.prototype.toString.call(s)},represent:function Nf(s){var f,p,a="",d=0,y=s.length,v=fd;for(f=0;f<y;f++)f%3==0&&f&&(a+=v[d>>18&63],a+=v[d>>12&63],a+=v[d>>6&63],a+=v[63&d]),d=(d<<8)+s[f];return 0==(p=y%3)?(a+=v[d>>18&63],a+=v[d>>12&63],a+=v[d>>6&63],a+=v[63&d]):2===p?(a+=v[d>>10&63],a+=v[d>>4&63],a+=v[d<<2&63],a+=v[64]):1===p&&(a+=v[d>>2&63],a+=v[d<<4&63],a+=v[64],a+=v[64]),a}}),wu=Object.prototype.hasOwnProperty,Fc=Object.prototype.toString,Of=new Ps("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function Cu(s){if(null===s)return!0;var d,f,p,y,v,a=[],w=s;for(d=0,f=w.length;d<f;d+=1){if(v=!1,"[object Object]"!==Fc.call(p=w[d]))return!1;for(y in p)if(wu.call(p,y)){if(v)return!1;v=!0}if(!v)return!1;if(-1!==a.indexOf(y))return!1;a.push(y)}return!0},construct:function Gd(s){return null!==s?s:[]}}),Ql=Object.prototype.toString,Pf=new Ps("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function uo(s){if(null===s)return!0;var a,d,f,p,y,v=s;for(y=new Array(v.length),a=0,d=v.length;a<d;a+=1){if("[object Object]"!==Ql.call(f=v[a])||1!==(p=Object.keys(f)).length)return!1;y[a]=[p[0],f[p[0]]]}return!0},construct:function Rf(s){if(null===s)return[];var a,d,f,p,y,v=s;for(y=new Array(v.length),a=0,d=v.length;a<d;a+=1)f=v[a],p=Object.keys(f),y[a]=[p[0],f[p[0]]];return y}}),Ff=Object.prototype.hasOwnProperty,Xd=new Ps("tag:yaml.org,2002:set",{kind:"mapping",resolve:function Yd(s){if(null===s)return!0;var a,d=s;for(a in d)if(Ff.call(d,a)&&null!==d[a])return!1;return!0},construct:function Lc(s){return null!==s?s:{}}}),Bp=Kl.extend({implicit:[hd,Tl],explicit:[zs,Of,Pf,Xd]}),Tu=Object.prototype.hasOwnProperty,$u=1,Vh=2,Vp=3,xl=4,Lf=1,Uh=2,Bf=3,Up=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ng=/[\x85\u2028\u2029]/,Og=/[,\[\]\{\}]/,Vf=/^(?:!|!!|![a-z\-]+!)$/i,Uf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zp(s){return Object.prototype.toString.call(s)}function mc(s){return 10===s||13===s}function bs(s){return 9===s||32===s}function El(s){return 9===s||32===s||10===s||13===s}function gd(s){return 44===s||91===s||93===s||123===s||125===s}function Fs(s){var a;return 48<=s&&s<=57?s-48:97<=(a=32|s)&&a<=102?a-97+10:-1}function Hp(s){return 120===s?2:117===s?4:85===s?8:0}function vi(s){return 48<=s&&s<=57?s-48:-1}function Yo(s){return 48===s?"\0":97===s?"\x07":98===s?"\b":116===s||9===s?"\t":110===s?"\n":118===s?"\v":102===s?"\f":114===s?"\r":101===s?"\x1b":32===s?" ":34===s?'"':47===s?"/":92===s?"\\":78===s?"\x85":95===s?"\xa0":76===s?"\u2028":80===s?"\u2029":""}function Jr(s){return s<=65535?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023))}for(var Xo=new Array(256),ca=new Array(256),Pl=0;Pl<256;Pl++)Xo[Pl]=Yo(Pl)?1:0,ca[Pl]=Yo(Pl);function Xa(s,a){this.input=s,this.filename=a.filename||null,this.schema=a.schema||Bp,this.onWarning=a.onWarning||null,this.legacy=a.legacy||!1,this.json=a.json||!1,this.listener=a.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function zf(s,a){var d={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return d.snippet=Mg(d),new gc(a,d)}function Gi(s,a){throw zf(s,a)}function Wu(s,a){s.onWarning&&s.onWarning.call(null,zf(s,a))}var jp={YAML:function(a,d,f){var p,y,v;null!==a.version&&Gi(a,"duplication of %YAML directive"),1!==f.length&&Gi(a,"YAML directive accepts exactly one argument"),null===(p=/^([0-9]+)\.([0-9]+)$/.exec(f[0]))&&Gi(a,"ill-formed argument of the YAML directive"),y=parseInt(p[1],10),v=parseInt(p[2],10),1!==y&&Gi(a,"unacceptable YAML version of the document"),a.version=f[0],a.checkLineBreaks=v<2,1!==v&&2!==v&&Wu(a,"unsupported YAML version of the document")},TAG:function(a,d,f){var p,y;2!==f.length&&Gi(a,"TAG directive accepts exactly two arguments"),y=f[1],Vf.test(p=f[0])||Gi(a,"ill-formed tag handle (first argument) of the TAG directive"),Tu.call(a.tagMap,p)&&Gi(a,'there is a previously declared suffix for "'+p+'" tag handle'),Uf.test(y)||Gi(a,"ill-formed tag prefix (second argument) of the TAG directive");try{y=decodeURIComponent(y)}catch{Gi(a,"tag prefix is malformed: "+y)}a.tagMap[p]=y}};function Fl(s,a,d,f){var p,y,v,w;if(a<d){if(w=s.input.slice(a,d),f)for(p=0,y=w.length;p<y;p+=1)9===(v=w.charCodeAt(p))||32<=v&&v<=1114111||Gi(s,"expected valid JSON character");else Up.test(w)&&Gi(s,"the stream contains non-printable characters");s.result+=w}}function xu(s,a,d,f){var p,y,v,w;for(Ea.isObject(d)||Gi(s,"cannot merge mappings; the provided source object is unacceptable"),v=0,w=(p=Object.keys(d)).length;v<w;v+=1)Tu.call(a,y=p[v])||(a[y]=d[y],f[y]=!0)}function md(s,a,d,f,p,y,v,w,C){var D,V;if(Array.isArray(p))for(D=0,V=(p=Array.prototype.slice.call(p)).length;D<V;D+=1)Array.isArray(p[D])&&Gi(s,"nested arrays are not supported inside keys"),"object"==typeof p&&"[object Object]"===zp(p[D])&&(p[D]="[object Object]");if("object"==typeof p&&"[object Object]"===zp(p)&&(p="[object Object]"),p=String(p),null===a&&(a={}),"tag:yaml.org,2002:merge"===f)if(Array.isArray(y))for(D=0,V=y.length;D<V;D+=1)xu(s,a,y[D],d);else xu(s,a,y,d);else!s.json&&!Tu.call(d,p)&&Tu.call(a,p)&&(s.line=v||s.line,s.lineStart=w||s.lineStart,s.position=C||s.position,Gi(s,"duplicated mapping key")),"__proto__"===p?Object.defineProperty(a,p,{configurable:!0,enumerable:!0,writable:!0,value:y}):a[p]=y,delete d[p];return a}function qd(s){var a;10===(a=s.input.charCodeAt(s.position))?s.position++:13===a?(s.position++,10===s.input.charCodeAt(s.position)&&s.position++):Gi(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function qo(s,a,d){for(var f=0,p=s.input.charCodeAt(s.position);0!==p;){for(;bs(p);)9===p&&-1===s.firstTabInLine&&(s.firstTabInLine=s.position),p=s.input.charCodeAt(++s.position);if(a&&35===p)do{p=s.input.charCodeAt(++s.position)}while(10!==p&&13!==p&&0!==p);if(!mc(p))break;for(qd(s),p=s.input.charCodeAt(s.position),f++,s.lineIndent=0;32===p;)s.lineIndent++,p=s.input.charCodeAt(++s.position)}return-1!==d&&0!==f&&s.lineIndent<d&&Wu(s,"deficient indentation"),f}function Gu(s){var d,a=s.position;return!(45!==(d=s.input.charCodeAt(a))&&46!==d||d!==s.input.charCodeAt(a+1)||d!==s.input.charCodeAt(a+2)||(a+=3,d=s.input.charCodeAt(a),0!==d&&!El(d)))}function zh(s,a){1===a?s.result+=" ":a>1&&(s.result+=Ea.repeat("\n",a-1))}function Jc(s,a){var d,C,f=s.tag,p=s.anchor,y=[],w=!1;if(-1!==s.firstTabInLine)return!1;for(null!==s.anchor&&(s.anchorMap[s.anchor]=y),C=s.input.charCodeAt(s.position);0!==C&&(-1!==s.firstTabInLine&&(s.position=s.firstTabInLine,Gi(s,"tab characters must not be used in indentation")),45===C&&El(s.input.charCodeAt(s.position+1)));)if(w=!0,s.position++,qo(s,!0,-1)&&s.lineIndent<=a)y.push(null),C=s.input.charCodeAt(s.position);else if(d=s.line,eu(s,a,Vp,!1,!0),y.push(s.result),qo(s,!0,-1),C=s.input.charCodeAt(s.position),(s.line===d||s.lineIndent>a)&&0!==C)Gi(s,"bad indentation of a sequence entry");else if(s.lineIndent<a)break;return!!w&&(s.tag=f,s.anchor=p,s.kind="sequence",s.result=y,!0)}function jh(s){var a,p,y,v,d=!1,f=!1;if(33!==(v=s.input.charCodeAt(s.position)))return!1;if(null!==s.tag&&Gi(s,"duplication of a tag property"),60===(v=s.input.charCodeAt(++s.position))?(d=!0,v=s.input.charCodeAt(++s.position)):33===v?(f=!0,p="!!",v=s.input.charCodeAt(++s.position)):p="!",a=s.position,d){do{v=s.input.charCodeAt(++s.position)}while(0!==v&&62!==v);s.position<s.length?(y=s.input.slice(a,s.position),v=s.input.charCodeAt(++s.position)):Gi(s,"unexpected end of the stream within a verbatim tag")}else{for(;0!==v&&!El(v);)33===v&&(f?Gi(s,"tag suffix cannot contain exclamation marks"):(p=s.input.slice(a-1,s.position+1),Vf.test(p)||Gi(s,"named tag handle cannot contain such characters"),f=!0,a=s.position+1)),v=s.input.charCodeAt(++s.position);y=s.input.slice(a,s.position),Og.test(y)&&Gi(s,"tag suffix cannot contain flow indicator characters")}y&&!Uf.test(y)&&Gi(s,"tag name cannot contain such characters: "+y);try{y=decodeURIComponent(y)}catch{Gi(s,"tag name is malformed: "+y)}return d?s.tag=y:Tu.call(s.tagMap,p)?s.tag=s.tagMap[p]+y:"!"===p?s.tag="!"+y:"!!"===p?s.tag="tag:yaml.org,2002:"+y:Gi(s,'undeclared tag handle "'+p+'"'),!0}function _d(s){var a,d;if(38!==(d=s.input.charCodeAt(s.position)))return!1;for(null!==s.anchor&&Gi(s,"duplication of an anchor property"),d=s.input.charCodeAt(++s.position),a=s.position;0!==d&&!El(d)&&!gd(d);)d=s.input.charCodeAt(++s.position);return s.position===a&&Gi(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(a,s.position),!0}function eu(s,a,d,f,p){var y,v,w,W,j,X,Ee,Ie,Pe,C=1,D=!1,V=!1;if(null!==s.listener&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,y=v=w=xl===d||Vp===d,f&&qo(s,!0,-1)&&(D=!0,s.lineIndent>a?C=1:s.lineIndent===a?C=0:s.lineIndent<a&&(C=-1)),1===C)for(;jh(s)||_d(s);)qo(s,!0,-1)?(D=!0,w=y,s.lineIndent>a?C=1:s.lineIndent===a?C=0:s.lineIndent<a&&(C=-1)):w=!1;if(w&&(w=D||p),(1===C||xl===d)&&(Ie=$u===d||Vh===d?a:a+1,Pe=s.position-s.lineStart,1===C?w&&(Jc(s,Pe)||function Rg(s,a,d){var f,p,y,v,w,C,Ae,D=s.tag,V=s.anchor,W={},j=Object.create(null),X=null,Ee=null,Ie=null,Pe=!1,Ve=!1;if(-1!==s.firstTabInLine)return!1;for(null!==s.anchor&&(s.anchorMap[s.anchor]=W),Ae=s.input.charCodeAt(s.position);0!==Ae;){if(!Pe&&-1!==s.firstTabInLine&&(s.position=s.firstTabInLine,Gi(s,"tab characters must not be used in indentation")),f=s.input.charCodeAt(s.position+1),y=s.line,63!==Ae&&58!==Ae||!El(f)){if(v=s.line,w=s.lineStart,C=s.position,!eu(s,d,Vh,!1,!0))break;if(s.line===y){for(Ae=s.input.charCodeAt(s.position);bs(Ae);)Ae=s.input.charCodeAt(++s.position);if(58===Ae)El(Ae=s.input.charCodeAt(++s.position))||Gi(s,"a whitespace character is expected after the key-value separator within a block mapping"),Pe&&(md(s,W,j,X,Ee,null,v,w,C),X=Ee=Ie=null),Ve=!0,Pe=!1,p=!1,X=s.tag,Ee=s.result;else{if(!Ve)return s.tag=D,s.anchor=V,!0;Gi(s,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Ve)return s.tag=D,s.anchor=V,!0;Gi(s,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Ae?(Pe&&(md(s,W,j,X,Ee,null,v,w,C),X=Ee=Ie=null),Ve=!0,Pe=!0,p=!0):Pe?(Pe=!1,p=!0):Gi(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,Ae=f;if((s.line===y||s.lineIndent>a)&&(Pe&&(v=s.line,w=s.lineStart,C=s.position),eu(s,a,xl,!0,p)&&(Pe?Ee=s.result:Ie=s.result),Pe||(md(s,W,j,X,Ee,Ie,v,w,C),X=Ee=Ie=null),qo(s,!0,-1),Ae=s.input.charCodeAt(s.position)),(s.line===y||s.lineIndent>a)&&0!==Ae)Gi(s,"bad indentation of a mapping entry");else if(s.lineIndent<a)break}return Pe&&md(s,W,j,X,Ee,null,v,w,C),Ve&&(s.tag=D,s.anchor=V,s.kind="mapping",s.result=W),Ve}(s,Pe,Ie))||function Kd(s,a){var f,p,y,w,V,W,j,X,Ie,Pe,Ve,Ae,d=!0,v=s.tag,C=s.anchor,Ee=Object.create(null);if(91===(Ae=s.input.charCodeAt(s.position)))V=93,X=!1,w=[];else{if(123!==Ae)return!1;V=125,X=!0,w={}}for(null!==s.anchor&&(s.anchorMap[s.anchor]=w),Ae=s.input.charCodeAt(++s.position);0!==Ae;){if(qo(s,!0,a),(Ae=s.input.charCodeAt(s.position))===V)return s.position++,s.tag=v,s.anchor=C,s.kind=X?"mapping":"sequence",s.result=w,!0;d?44===Ae&&Gi(s,"expected the node content, but found ','"):Gi(s,"missed comma between flow collection entries"),Ve=null,W=j=!1,63===Ae&&El(s.input.charCodeAt(s.position+1))&&(W=j=!0,s.position++,qo(s,!0,a)),f=s.line,p=s.lineStart,y=s.position,eu(s,a,$u,!1,!0),Pe=s.tag,Ie=s.result,qo(s,!0,a),Ae=s.input.charCodeAt(s.position),(j||s.line===f)&&58===Ae&&(W=!0,Ae=s.input.charCodeAt(++s.position),qo(s,!0,a),eu(s,a,$u,!1,!0),Ve=s.result),X?md(s,w,Ee,Pe,Ie,Ve,f,p,y):w.push(W?md(s,null,Ee,Pe,Ie,Ve,f,p,y):Ie),qo(s,!0,a),44===(Ae=s.input.charCodeAt(s.position))?(d=!0,Ae=s.input.charCodeAt(++s.position)):d=!1}Gi(s,"unexpected end of the stream within a flow collection")}(s,Ie)?V=!0:(v&&function Hf(s,a){var d,f,V,W,p=Lf,y=!1,v=!1,w=a,C=0,D=!1;if(124===(W=s.input.charCodeAt(s.position)))f=!1;else{if(62!==W)return!1;f=!0}for(s.kind="scalar",s.result="";0!==W;)if(43===(W=s.input.charCodeAt(++s.position))||45===W)Lf===p?p=43===W?Bf:Uh:Gi(s,"repeat of a chomping mode identifier");else{if(!((V=vi(W))>=0))break;0===V?Gi(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):v?Gi(s,"repeat of an indentation width identifier"):(w=a+V-1,v=!0)}if(bs(W)){do{W=s.input.charCodeAt(++s.position)}while(bs(W));if(35===W)do{W=s.input.charCodeAt(++s.position)}while(!mc(W)&&0!==W)}for(;0!==W;){for(qd(s),s.lineIndent=0,W=s.input.charCodeAt(s.position);(!v||s.lineIndent<w)&&32===W;)s.lineIndent++,W=s.input.charCodeAt(++s.position);if(!v&&s.lineIndent>w&&(w=s.lineIndent),mc(W))C++;else{if(s.lineIndent<w){p===Bf?s.result+=Ea.repeat("\n",y?1+C:C):p===Lf&&y&&(s.result+="\n");break}for(f?bs(W)?(D=!0,s.result+=Ea.repeat("\n",y?1+C:C)):D?(D=!1,s.result+=Ea.repeat("\n",C+1)):0===C?y&&(s.result+=" "):s.result+=Ea.repeat("\n",C):s.result+=Ea.repeat("\n",y?1+C:C),y=!0,v=!0,C=0,d=s.position;!mc(W)&&0!==W;)W=s.input.charCodeAt(++s.position);Fl(s,d,s.position,!1)}}return!0}(s,Ie)||function $p(s,a){var d,f,p;if(39!==(d=s.input.charCodeAt(s.position)))return!1;for(s.kind="scalar",s.result="",s.position++,f=p=s.position;0!==(d=s.input.charCodeAt(s.position));)if(39===d){if(Fl(s,f,s.position,!0),39!==(d=s.input.charCodeAt(++s.position)))return!0;f=s.position,s.position++,p=s.position}else mc(d)?(Fl(s,f,p,!0),zh(s,qo(s,!1,a)),f=p=s.position):s.position===s.lineStart&&Gu(s)?Gi(s,"unexpected end of the document within a single quoted scalar"):(s.position++,p=s.position);Gi(s,"unexpected end of the stream within a single quoted scalar")}(s,Ie)||function Hh(s,a){var d,f,p,y,v,w;if(34!==(w=s.input.charCodeAt(s.position)))return!1;for(s.kind="scalar",s.result="",s.position++,d=f=s.position;0!==(w=s.input.charCodeAt(s.position));){if(34===w)return Fl(s,d,s.position,!0),s.position++,!0;if(92===w){if(Fl(s,d,s.position,!0),mc(w=s.input.charCodeAt(++s.position)))qo(s,!1,a);else if(w<256&&Xo[w])s.result+=ca[w],s.position++;else if((v=Hp(w))>0){for(p=v,y=0;p>0;p--)(v=Fs(w=s.input.charCodeAt(++s.position)))>=0?y=(y<<4)+v:Gi(s,"expected hexadecimal character");s.result+=Jr(y),s.position++}else Gi(s,"unknown escape sequence");d=f=s.position}else mc(w)?(Fl(s,d,f,!0),zh(s,qo(s,!1,a)),d=f=s.position):s.position===s.lineStart&&Gu(s)?Gi(s,"unexpected end of the document within a double quoted scalar"):(s.position++,f=s.position)}Gi(s,"unexpected end of the stream within a double quoted scalar")}(s,Ie)?V=!0:function Pg(s){var a,d,f;if(42!==(f=s.input.charCodeAt(s.position)))return!1;for(f=s.input.charCodeAt(++s.position),a=s.position;0!==f&&!El(f)&&!gd(f);)f=s.input.charCodeAt(++s.position);return s.position===a&&Gi(s,"name of an alias node must contain at least one character"),d=s.input.slice(a,s.position),Tu.call(s.anchorMap,d)||Gi(s,'unidentified alias "'+d+'"'),s.result=s.anchorMap[d],qo(s,!0,-1),!0}(s)?(V=!0,(null!==s.tag||null!==s.anchor)&&Gi(s,"alias node should not have any properties")):function ll(s,a,d){var p,y,v,w,C,D,V,X,W=s.kind,j=s.result;if(El(X=s.input.charCodeAt(s.position))||gd(X)||35===X||38===X||42===X||33===X||124===X||62===X||39===X||34===X||37===X||64===X||96===X||(63===X||45===X)&&(El(p=s.input.charCodeAt(s.position+1))||d&&gd(p)))return!1;for(s.kind="scalar",s.result="",y=v=s.position,w=!1;0!==X;){if(58===X){if(El(p=s.input.charCodeAt(s.position+1))||d&&gd(p))break}else if(35===X){if(El(s.input.charCodeAt(s.position-1)))break}else{if(s.position===s.lineStart&&Gu(s)||d&&gd(X))break;if(mc(X)){if(C=s.line,D=s.lineStart,V=s.lineIndent,qo(s,!1,-1),s.lineIndent>=a){w=!0,X=s.input.charCodeAt(s.position);continue}s.position=v,s.line=C,s.lineStart=D,s.lineIndent=V;break}}w&&(Fl(s,y,v,!1),zh(s,s.line-C),y=v=s.position,w=!1),bs(X)||(v=s.position+1),X=s.input.charCodeAt(++s.position)}return Fl(s,y,v,!1),!!s.result||(s.kind=W,s.result=j,!1)}(s,Ie,$u===d)&&(V=!0,null===s.tag&&(s.tag="?")),null!==s.anchor&&(s.anchorMap[s.anchor]=s.result)):0===C&&(V=w&&Jc(s,Pe))),null===s.tag)null!==s.anchor&&(s.anchorMap[s.anchor]=s.result);else if("?"===s.tag){for(null!==s.result&&"scalar"!==s.kind&&Gi(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),W=0,j=s.implicitTypes.length;W<j;W+=1)if((Ee=s.implicitTypes[W]).resolve(s.result)){s.result=Ee.construct(s.result),s.tag=Ee.tag,null!==s.anchor&&(s.anchorMap[s.anchor]=s.result);break}}else if("!"!==s.tag){if(Tu.call(s.typeMap[s.kind||"fallback"],s.tag))Ee=s.typeMap[s.kind||"fallback"][s.tag];else for(Ee=null,W=0,j=(X=s.typeMap.multi[s.kind||"fallback"]).length;W<j;W+=1)if(s.tag.slice(0,X[W].tag.length)===X[W].tag){Ee=X[W];break}Ee||Gi(s,"unknown tag !<"+s.tag+">"),null!==s.result&&Ee.kind!==s.kind&&Gi(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+Ee.kind+'", not "'+s.kind+'"'),Ee.resolve(s.result,s.tag)?(s.result=Ee.construct(s.result,s.tag),null!==s.anchor&&(s.anchorMap[s.anchor]=s.result)):Gi(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return null!==s.listener&&s.listener("close",s),null!==s.tag||null!==s.anchor||V}function Ll(s){var d,f,p,v,a=s.position,y=!1;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);0!==(v=s.input.charCodeAt(s.position))&&(qo(s,!0,-1),v=s.input.charCodeAt(s.position),!(s.lineIndent>0||37!==v));){for(y=!0,v=s.input.charCodeAt(++s.position),d=s.position;0!==v&&!El(v);)v=s.input.charCodeAt(++s.position);for(p=[],(f=s.input.slice(d,s.position)).length<1&&Gi(s,"directive name must not be less than one character in length");0!==v;){for(;bs(v);)v=s.input.charCodeAt(++s.position);if(35===v){do{v=s.input.charCodeAt(++s.position)}while(0!==v&&!mc(v));break}if(mc(v))break;for(d=s.position;0!==v&&!El(v);)v=s.input.charCodeAt(++s.position);p.push(s.input.slice(d,s.position))}0!==v&&qd(s),Tu.call(jp,f)?jp[f](s,f,p):Wu(s,'unknown document directive "'+f+'"')}qo(s,!0,-1),0===s.lineIndent&&45===s.input.charCodeAt(s.position)&&45===s.input.charCodeAt(s.position+1)&&45===s.input.charCodeAt(s.position+2)?(s.position+=3,qo(s,!0,-1)):y&&Gi(s,"directives end mark is expected"),eu(s,s.lineIndent-1,xl,!1,!0),qo(s,!0,-1),s.checkLineBreaks&&Ng.test(s.input.slice(a,s.position))&&Wu(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&Gu(s)?46===s.input.charCodeAt(s.position)&&(s.position+=3,qo(s,!0,-1)):s.position<s.length-1&&Gi(s,"end of the stream or a document separator is expected")}function Sl(s,a){a=a||{},0!==(s=String(s)).length&&(10!==s.charCodeAt(s.length-1)&&13!==s.charCodeAt(s.length-1)&&(s+="\n"),65279===s.charCodeAt(0)&&(s=s.slice(1)));var d=new Xa(s,a),f=s.indexOf("\0");for(-1!==f&&(d.position=f,Gi(d,"null byte is not allowed in input")),d.input+="\0";32===d.input.charCodeAt(d.position);)d.lineIndent+=1,d.position+=1;for(;d.position<d.length-1;)Ll(d);return d.documents}var yd=La,Fg=function _c(s,a){var d=Sl(s,a);if(0!==d.length){if(1===d.length)return d[0];throw new gc("expected a single document in the stream, but found more")}};const jf=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Qd=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,yc=/\s*%%.*\n/gm,Jl={},M=function(s,a){s=s.replace(jf,"").replace(Qd,"").replace(yc,"\n");for(const[d,{detector:f}]of Object.entries(Jl))if(f(s,a))return d;throw new Error(`No diagram type detected for text: ${s}`)},Z=(...s)=>{for(const{id:a,detector:d,loader:f}of s)le(a,d,f)},le=(s,a,d)=>{Jl[s]?Me.error(`Detector with key ${s} already exists`):Jl[s]={detector:a,loader:d},Me.debug(`Detector with key ${s} added${d?" with loader":""}`)},Se=function(s,a,d){const{depth:f,clobber:p}=Object.assign({depth:2,clobber:!1},d);return Array.isArray(a)&&!Array.isArray(s)?(a.forEach(y=>Se(s,y,d)),s):Array.isArray(a)&&Array.isArray(s)?(a.forEach(y=>{s.includes(y)||s.push(y)}),s):void 0===s||f<=0?null!=s&&"object"==typeof s&&"object"==typeof a?Object.assign(s,a):a:(void 0!==a&&"object"==typeof s&&"object"==typeof a&&Object.keys(a).forEach(y=>{"object"!=typeof a[y]||void 0!==s[y]&&"object"!=typeof s[y]?(p||"object"!=typeof s[y]&&"object"!=typeof a[y])&&(s[y]=a[y]):(void 0===s[y]&&(s[y]=Array.isArray(a[y])?[]:{}),s[y]=Se(s[y],a[y],{depth:f-1,clobber:p}))}),s)},Re=Se,We={curveBasis:F.qrM,curveBasisClosed:F.Yu4,curveBasisOpen:F.IA3,curveBumpX:F.Wi0,curveBumpY:F.PGM,curveBundle:F.OEq,curveCardinalClosed:F.olC,curveCardinalOpen:F.IrU,curveCardinal:F.y8u,curveCatmullRomClosed:F.Q7f,curveCatmullRomOpen:F.cVp,curveCatmullRom:F.oDi,curveLinear:F.lUB,curveLinearClosed:F.Lx9,curveMonotoneX:F.nVG,curveMonotoneY:F.uxU,curveNatural:F.Xf2,curveStep:F.GZz,curveStepAfter:F.UPb,curveStepBefore:F.dyv},_t=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Rt=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,dn=function(s,a=null){try{const d=new RegExp(`[%]{2}(?![{]${Rt.source})(?=[}][%]{2}).*\n`,"ig");let f;s=s.trim().replace(d,"").replace(/'/gm,'"'),Me.debug(`Detecting diagram directive${null!==a?" type:"+a:""} based on the text:${s}`);const p=[];for(;null!==(f=_t.exec(s));)if(f.index===_t.lastIndex&&_t.lastIndex++,f&&!a||a&&f[1]&&f[1].match(a)||a&&f[2]&&f[2].match(a)){const y=f[1]?f[1]:f[2],v=f[3]?f[3].trim():f[4]?JSON.parse(f[4].trim()):null;p.push({type:y,args:v})}return 0===p.length&&p.push({type:s,args:null}),1===p.length?p[0]:p}catch(d){return Me.error(`ERROR: ${d.message} - Unable to parse directive\n      ${null!==a?" type:"+a:""} based on the text:${s}`),{type:null,args:null}}};function Qi(s,a){if(!s)return a;const d=`curve${s.charAt(0).toUpperCase()+s.slice(1)}`;return We[d]||a}function Eo(s,a){return s&&a?Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2)):0}function qa(s){let a="",d="";for(const f of s)void 0!==f&&(f.startsWith("color:")||f.startsWith("text-align:")?d=d+f+";":a=a+f+";");return{style:a,labelStyle:d}}let Al=0;const vc=()=>(Al++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Al),io=s=>function Ka(s){let a="";for(let p=0;p<s;p++)a+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return a}(s.length),Bl=function(s,a){const d=a.text.replace(tr.lineBreakRegex," "),[,f]=Mr(a.fontSize),p=s.append("text");p.attr("x",a.x),p.attr("y",a.y),p.style("text-anchor",a.anchor),p.style("font-family",a.fontFamily),p.style("font-size",f),p.style("font-weight",a.fontWeight),p.attr("fill",a.fill),void 0!==a.class&&p.attr("class",a.class);const y=p.append("tspan");return y.attr("x",a.x+2*a.textMargin),y.attr("fill",a.fill),y.text(d),p},Lr=(0,tt.A)((s,a,d)=>{if(!s||(d=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},d),tr.lineBreakRegex.test(s)))return s;const f=s.split(" "),p=[];let y="";return f.forEach((v,w)=>{const C=Vl(`${v} `,d),D=Vl(y,d);if(C>a){const{hyphenatedStrings:j,remainingWord:X}=vd(v,a,"-",d);p.push(y,...j),y=X}else D+C>=a?(p.push(y),y=v):y=[y,v].filter(Boolean).join(" ");w+1===f.length&&p.push(y)}),p.filter(v=>""!==v).join(d.joinWith)},(s,a,d)=>`${s}${a}${d.fontSize}${d.fontWeight}${d.fontFamily}${d.joinWith}`),vd=(0,tt.A)((s,a,d="-",f)=>{f=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},f);const p=[...s],y=[];let v="";return p.forEach((w,C)=>{const D=`${v}${w}`;Vl(D,f)>=a?(y.push(p.length===C+1?D:`${D}${d}`),v=""):v=D}),{hyphenatedStrings:y,remainingWord:v}},(s,a,d="-",f)=>`${s}${a}${d}${f.fontSize}${f.fontWeight}${f.fontFamily}`);function Yp(s,a){return a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},a),Po(s,a).height}function Vl(s,a){return a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},a),Po(s,a).width}const Po=(0,tt.A)((s,a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},a);const{fontSize:d,fontFamily:f,fontWeight:p}=a;if(!s)return{width:0,height:0};const[,y]=Mr(d),v=["sans-serif",f],w=s.split(tr.lineBreakRegex),C=[],D=(0,F.Ltv)("body");if(!D.remove)return{width:0,height:0,lineHeight:0};const V=D.append("svg");for(const j of v){let X=0;const Ee={width:0,height:0,lineHeight:0};for(const Ie of w){const Pe={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0};Pe.text=Ie;const Ve=Bl(V,Pe).style("font-size",y).style("font-weight",p).style("font-family",j),Ae=(Ve._groups||Ve)[0][0].getBBox();Ee.width=Math.round(Math.max(Ee.width,Ae.width)),X=Math.round(Ae.height),Ee.height+=X,Ee.lineHeight=Math.round(Math.max(Ee.lineHeight,X))}C.push(Ee)}return V.remove(),C[isNaN(C[1].height)||isNaN(C[1].width)||isNaN(C[1].lineHeight)||C[0].height>C[1].height&&C[0].width>C[1].width&&C[0].lineHeight>C[1].lineHeight?0:1]},(s,a)=>`${s}${a.fontSize}${a.fontWeight}${a.fontFamily}`);let Bc;const Ba=s=>{if(Me.debug("directiveSanitizer called with",s),"object"==typeof s&&(s.length?s.forEach(a=>Ba(a)):Object.keys(s).forEach(a=>{Me.debug("Checking key",a),a.startsWith("__")&&(Me.debug("sanitize deleting __ option",a),delete s[a]),a.includes("proto")&&(Me.debug("sanitize deleting proto option",a),delete s[a]),a.includes("constr")&&(Me.debug("sanitize deleting constr option",a),delete s[a]),a.includes("themeCSS")&&(Me.debug("sanitizing themeCss option"),s[a]=bc(s[a])),a.includes("fontFamily")&&(Me.debug("sanitizing fontFamily option"),s[a]=bc(s[a])),a.includes("altFontFamily")&&(Me.debug("sanitizing altFontFamily option"),s[a]=bc(s[a])),mu.includes(a)?"object"==typeof s[a]&&(Me.debug("sanitize deleting object",a),Ba(s[a])):(Me.debug("sanitize deleting option",a),delete s[a])})),s.themeVariables){const a=Object.keys(s.themeVariables);for(const d of a){const f=s.themeVariables[d];f&&f.match&&!f.match(/^[\d "#%(),.;A-Za-z]+$/)&&(s.themeVariables[d]="")}}Me.debug("After sanitization",s)},bc=s=>{let a=0,d=0;for(const f of s){if(a<d)return"{ /* ERROR: Unbalanced CSS */ }";"{"===f?a++:"}"===f&&d++}return a!==d?"{ /* ERROR: Unbalanced CSS */ }":s};function Ul(s){return"str"in s}const Mr=s=>{if("number"==typeof s)return[s,s+"px"];const a=parseInt(s,10);return Number.isNaN(a)?[void 0,void 0]:s===String(a)?[a,s+"px"]:[a,s]},Br={assignWithDepth:Re,wrapLabel:Lr,calculateTextHeight:Yp,calculateTextWidth:Vl,calculateTextDimensions:Po,detectInit:function(s,a){const d=dn(s,/(?:init\b)|(?:initialize\b)/);let f={};if(Array.isArray(d)){const p=d.map(y=>y.args);Ba(p),f=Re(f,[...p])}else f=d.args;if(f){let p=M(s,a);["config"].forEach(y=>{void 0!==f[y]&&("flowchart-v2"===p&&(p="flowchart"),f[p]=f[y],delete f[y])})}return f},detectDirective:dn,isSubstringInArray:function(s,a){for(const[d,f]of a.entries())if(f.match(s))return d;return-1},interpolateToCurve:Qi,calcLabelPosition:function Xn(s){return 1===s.length?s[0]:function no(s){let a,d=0;s.forEach(y=>{d+=Eo(y,a),a=y});let p,f=d/2;return a=void 0,s.forEach(y=>{if(a&&!p){const v=Eo(y,a);if(v<f)f-=v;else{const w=f/v;w<=0&&(p=a),w>=1&&(p={x:y.x,y:y.y}),w>0&&w<1&&(p={x:(1-w)*a.x+w*y.x,y:(1-w)*a.y+w*y.y})}}a=y}),p}(s)},calcCardinalityPosition:(s,a,d)=>{let f;Me.info(`our points ${JSON.stringify(a)}`),a[0]!==d&&(a=a.reverse());let v,y=25;f=void 0,a.forEach(V=>{if(f&&!v){const W=Eo(V,f);if(W<y)y-=W;else{const j=y/W;j<=0&&(v=f),j>=1&&(v={x:V.x,y:V.y}),j>0&&j<1&&(v={x:(1-j)*f.x+j*V.x,y:(1-j)*f.y+j*V.y})}}f=V});const w=s?10:5,C=Math.atan2(a[0].y-v.y,a[0].x-v.x),D={x:0,y:0};return D.x=Math.sin(C)*w+(a[0].x+v.x)/2,D.y=-Math.cos(C)*w+(a[0].y+v.y)/2,D},calcTerminalLabelPosition:function ua(s,a,d){let p,f=JSON.parse(JSON.stringify(d));Me.info("our points",f),"start_left"!==a&&"start_right"!==a&&(f=f.reverse()),f.forEach(W=>{p=W});let w,v=25+s;p=void 0,f.forEach(W=>{if(p&&!w){const j=Eo(W,p);if(j<v)v-=j;else{const X=v/j;X<=0&&(w=p),X>=1&&(w={x:W.x,y:W.y}),X>0&&X<1&&(w={x:(1-X)*p.x+X*W.x,y:(1-X)*p.y+X*W.y})}}p=W});const C=10+.5*s,D=Math.atan2(f[0].y-w.y,f[0].x-w.x),V={x:0,y:0};return V.x=Math.sin(D)*C+(f[0].x+w.x)/2,V.y=-Math.cos(D)*C+(f[0].y+w.y)/2,"start_left"===a&&(V.x=Math.sin(D+Math.PI)*C+(f[0].x+w.x)/2,V.y=-Math.cos(D+Math.PI)*C+(f[0].y+w.y)/2),"end_right"===a&&(V.x=Math.sin(D-Math.PI)*C+(f[0].x+w.x)/2-5,V.y=-Math.cos(D-Math.PI)*C+(f[0].y+w.y)/2-5),"end_left"===a&&(V.x=Math.sin(D)*C+(f[0].x+w.x)/2-5,V.y=-Math.cos(D)*C+(f[0].y+w.y)/2-5),V},formatUrl:function Or(s,a){const d=s.trim();if(d)return"loose"!==a.securityLevel?(0,A.J)(d):d},getStylesFromArray:qa,generateId:vc,random:io,runFunc:(s,...a)=>{const d=s.split("."),f=d.length-1,p=d[f];let y=window;for(let v=0;v<f;v++)if(y=y[d[v]],!y)return;y[p](...a)},entityDecode:function(s){return Bc=Bc||document.createElement("div"),s=escape(s).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Bc.innerHTML=s,unescape(Bc.textContent)},initIdGenerator:class{constructor(a,d){this.deterministic=a,this.seed=d,this.count=d?d.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:Ba,sanitizeCss:bc,insertTitle:(s,a,d,f)=>{if(!f)return;const p=s.node().getBBox();s.append("text").text(f).attr("x",p.x+p.width/2).attr("y",-d).attr("class",a)},parseFontSize:Mr},wd="9.4.3",Fo=Object.freeze(Vd);let qu,Va=Re({},Fo),go=[],Ku=Re({},Fo);const Aa=(s,a)=>{let d=Re({},s),f={};for(const p of a)g1(p),f=Re(f,p);if(d=Re(d,f),f.theme&&f.theme in ol){const p=Re({},qu),y=Re(p.themeVariables||{},f.themeVariables);d.theme&&d.theme in ol&&(d.themeVariables=ol[d.theme].getThemeVariables(y))}return Ku=d,Vg(Ku),Ku},eh=()=>Re({},Va),wc=s=>(Vg(s),Re(Ku,s),ut()),ut=()=>Re({},Ku),g1=s=>{["secure",...Va.secure??[]].forEach(a=>{void 0!==s[a]&&(Me.debug(`Denied attempt to modify a secure key ${a}`,s[a]),delete s[a])}),Object.keys(s).forEach(a=>{0===a.indexOf("__")&&delete s[a]}),Object.keys(s).forEach(a=>{"string"==typeof s[a]&&(s[a].includes("<")||s[a].includes(">")||s[a].includes("url(data:"))&&delete s[a],"object"==typeof s[a]&&g1(s[a])})},Lg=s=>{s.fontFamily&&(s.themeVariables&&s.themeVariables.fontFamily||(s.themeVariables={fontFamily:s.fontFamily})),go.push(s),Aa(Va,go)},th=(s=Va)=>{go=[],Aa(s,go)};var Bg=(s=>(s.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",s))(Bg||{});const nh={},Vg=s=>{s&&(s.lazyLoadedDiagrams||s.loadExternalDiagramsAtStartup)&&(s=>{nh[s]||(Me.warn(Bg[s]),nh[s]=!0)})("LAZY_LOAD_DEPRECATED")},tu=function(s,a,d,f){const p=function(s,a,d){let f=new Map;return d?(f.set("width","100%"),f.set("style",`max-width: ${a}px;`)):(f.set("height",s),f.set("width",a)),f}(a,d,f);!function(s,a){for(let d of a)s.attr(d[0],d[1])}(s,p)},ih=function(s,a,d,f){const p=a.node().getBBox(),y=p.width,v=p.height;Me.info(`SVG bounds: ${y}x${v}`,p);let w=0,C=0;Me.info(`Graph bounds: ${w}x${C}`,s),w=y+2*d,C=v+2*d,Me.info(`Calculated bounds: ${w}x${C}`),tu(a,C,w,f),a.attr("viewBox",`${p.x-d} ${p.y-d} ${p.width+2*d} ${p.height+2*d}`)},Gf=s=>`g.classGroup text {\n  fill: ${s.nodeBorder};\n  fill: ${s.classText};\n  stroke: none;\n  font-family: ${s.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${s.classText};\n}\n.edgeLabel .label rect {\n  fill: ${s.mainBkg};\n}\n.label text {\n  fill: ${s.classText};\n}\n.edgeLabel .label span {\n  background: ${s.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${s.mainBkg};\n    stroke: ${s.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${s.nodeBorder};\n  stroke: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${s.mainBkg};\n  stroke: ${s.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${s.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${s.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${s.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${s.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${s.lineColor} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${s.lineColor} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${s.lineColor} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${s.lineColor} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${s.mainBkg} !important;\n  stroke: ${s.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${s.textColor};\n}\n`,zg=s=>`\n  .entityBox {\n    fill: ${s.mainBkg};\n    stroke: ${s.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: ${s.attributeBackgroundColorOdd};\n    stroke: ${s.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill:  ${s.attributeBackgroundColorEven};\n    stroke: ${s.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${s.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${s.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${s.lineColor};\n    }\n\n  .entityTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${s.textColor};\n  }    \n`,ka=()=>"",Yf=s=>`.label {\n    font-family: ${s.fontFamily};\n    color: ${s.nodeTextColor||s.textColor};\n  }\n  .cluster-label text {\n    fill: ${s.titleColor};\n  }\n  .cluster-label span {\n    color: ${s.titleColor};\n  }\n\n  .label text,span {\n    fill: ${s.nodeTextColor||s.textColor};\n    color: ${s.nodeTextColor||s.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${s.mainBkg};\n    stroke: ${s.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${s.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${s.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${s.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${s.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${s.edgeLabelBackground};\n      fill: ${s.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n    fill: ${s.clusterBkg};\n    stroke: ${s.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${s.titleColor};\n  }\n\n  .cluster span {\n    color: ${s.titleColor};\n  }\n  /* .cluster div {\n    color: ${s.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${s.fontFamily};\n    font-size: 12px;\n    background: ${s.tertiaryColor};\n    border: 1px solid ${s.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${s.textColor};\n  }\n`,Hg=s=>`\n  .mermaid-main-font {\n    font-family: "trebuchet ms", verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  .exclude-range {\n    fill: ${s.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${s.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${s.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${s.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${s.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${s.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${s.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${s.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    // font-size: ${s.ganttFontSize};\n    // text-height: 14px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${s.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n    text {\n      font-family: ${s.fontFamily};\n      fill: ${s.textColor};\n    }\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${s.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n\n  // .taskText:not([font-size]) {\n  //   font-size: ${s.ganttFontSize};\n  // }\n\n  .taskTextOutsideRight {\n    fill: ${s.taskTextDarkColor};\n    text-anchor: start;\n    // font-size: ${s.ganttFontSize};\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${s.taskTextDarkColor};\n    text-anchor: end;\n    // font-size: ${s.ganttFontSize};\n  }\n\n  /* Special case clickable */\n  .task.clickable {\n    cursor: pointer;\n  }\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${s.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${s.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${s.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${s.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${s.taskBkgColor};\n    stroke: ${s.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${s.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${s.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${s.activeTaskBkgColor};\n    stroke: ${s.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${s.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${s.doneTaskBorderColor};\n    fill: ${s.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${s.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${s.critBorderColor};\n    fill: ${s.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${s.critBorderColor};\n    fill: ${s.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${s.critBorderColor};\n    fill: ${s.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${s.taskTextDarkColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${s.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${s.textColor}    ;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n`,X0=()=>"",jg=s=>`\n  .pieCircle{\n    stroke: ${s.pieStrokeColor};\n    stroke-width : ${s.pieStrokeWidth};\n    opacity : ${s.pieOpacity};\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${s.pieTitleTextSize};\n    fill: ${s.pieTitleTextColor};\n    font-family: ${s.fontFamily};\n  }\n  .slice {\n    font-family: ${s.fontFamily};\n    fill: ${s.pieSectionTextColor};\n    font-size:${s.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${s.pieLegendTextColor};\n    font-family: ${s.fontFamily};\n    font-size: ${s.pieLegendTextSize};\n  }\n`,cl=s=>`\n\n  marker {\n    fill: ${s.relationColor};\n    stroke: ${s.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${s.lineColor};\n  }\n\n  svg {\n    font-family: ${s.fontFamily};\n    font-size: ${s.fontSize};\n  }\n\n  .reqBox {\n    fill: ${s.requirementBackground};\n    fill-opacity: 100%;\n    stroke: ${s.requirementBorderColor};\n    stroke-width: ${s.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${s.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${s.relationLabelBackground};\n    fill-opacity: 100%;\n  }\n\n  .req-title-line {\n    stroke: ${s.requirementBorderColor};\n    stroke-width: ${s.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${s.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${s.relationLabelColor};\n  }\n\n`,q0=s=>`.actor {\n    stroke: ${s.actorBorder};\n    fill: ${s.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${s.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${s.actorLineColor};\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${s.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${s.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${s.signalColor};\n    stroke: ${s.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${s.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${s.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${s.signalColor};\n    stroke: ${s.signalColor};\n  }\n\n  .messageText {\n    fill: ${s.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${s.labelBoxBorderColor};\n    fill: ${s.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${s.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${s.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${s.labelBoxBorderColor};\n    fill: ${s.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${s.noteBorderColor};\n    fill: ${s.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${s.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${s.activationBkgColor};\n    stroke: ${s.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${s.activationBkgColor};\n    stroke: ${s.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${s.activationBkgColor};\n    stroke: ${s.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${s.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${s.actorBorder};\n    fill: ${s.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${s.actorBorder};\n    fill: ${s.actorBkg};\n    stroke-width: 2px;\n  }\n`,nu=s=>`\ndefs #statediagram-barbEnd {\n    fill: ${s.transitionColor};\n    stroke: ${s.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${s.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${s.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${s.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${s.mainBkg};\n  stroke: ${s.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${s.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${s.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${s.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${s.noteBorderColor};\n  fill: ${s.noteBkgColor};\n\n  text {\n    fill: ${s.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${s.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${s.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel .label text {\n  fill: ${s.transitionLabelColor||s.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${s.transitionLabelColor||s.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${s.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${s.specialStateColor};\n  stroke: ${s.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${s.specialStateColor};\n  stroke: ${s.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${s.innerEndBackground};\n  stroke: ${s.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${s.compositeBackground||s.background};\n  // stroke: ${s.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${s.stateBkg||s.mainBkg};\n  stroke: ${s.stateBorder||s.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${s.mainBkg};\n  stroke: ${s.stateBorder||s.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${s.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${s.compositeTitleBackground};\n  stroke: ${s.stateBorder||s.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${s.stateLabelColor};\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${s.stateBorder||s.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${s.compositeBackground||s.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${s.altBackground?s.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${s.altBackground?s.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${s.noteBkgColor};\n  stroke: ${s.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${s.noteBkgColor};\n  stroke: ${s.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${s.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${s.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${s.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${s.lineColor};\n  stroke: ${s.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${s.textColor};\n}\n`,K0=s=>`.label {\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    color: ${s.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${s.textColor}\n  }\n\n  .legend {\n    fill: ${s.textColor};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${s.textColor}\n  }\n\n  .face {\n    ${s.faceColor?`fill: ${s.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${s.mainBkg};\n    stroke: ${s.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${s.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${s.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${s.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${s.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${s.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    font-size: 12px;\n    background: ${s.tertiaryColor};\n    border: 1px solid ${s.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${s.fillType0?`fill: ${s.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${s.fillType0?`fill: ${s.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${s.fillType0?`fill: ${s.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${s.fillType0?`fill: ${s.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${s.fillType0?`fill: ${s.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${s.fillType0?`fill: ${s.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${s.fillType0?`fill: ${s.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${s.fillType0?`fill: ${s.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${s.actor0?`fill: ${s.actor0}`:""};\n  }\n  .actor-1 {\n    ${s.actor1?`fill: ${s.actor1}`:""};\n  }\n  .actor-2 {\n    ${s.actor2?`fill: ${s.actor2}`:""};\n  }\n  .actor-3 {\n    ${s.actor3?`fill: ${s.actor3}`:""};\n  }\n  .actor-4 {\n    ${s.actor4?`fill: ${s.actor4}`:""};\n  }\n  .actor-5 {\n    ${s.actor5?`fill: ${s.actor5}`:""};\n  }\n`,Kp=s=>`.person {\n    stroke: ${s.personBorder};\n    fill: ${s.personBkg};\n  }\n`,Hl={flowchart:Yf,"flowchart-v2":Yf,sequence:q0,gantt:Hg,classDiagram:Gf,"classDiagram-v2":Gf,class:Gf,stateDiagram:nu,state:nu,info:X0,pie:jg,er:zg,error:ka,journey:K0,requirement:cl,c4:Kp};let Z0="",Y="",se="";const me=s=>An(s,ut()),je=function(){Z0="",se="",Y=""},Je=function(s){Z0=me(s).replace(/^\s+/g,"")},pt=function(){return Z0||Y},et=function(s){se=me(s).replace(/\n\s+/g,"\n")},Mt=function(){return se},Nt=function(s){Y=me(s)},cn=function(){return Y},Ai=Object.freeze(Object.defineProperty({__proto__:null,clear:je,default:{setAccTitle:Je,getAccTitle:pt,setDiagramTitle:Nt,getDiagramTitle:cn,getAccDescription:Mt,setAccDescription:et,clear:je},getAccDescription:Mt,getAccTitle:pt,getDiagramTitle:cn,setAccDescription:et,setAccTitle:Je,setDiagramTitle:Nt},Symbol.toStringTag,{value:"Module"}));let In={};const Li=function(s,a,d,f){Me.debug("parseDirective is being called",a,d,f);try{if(void 0!==a)switch(a=a.trim(),d){case"open_directive":In={};break;case"type_directive":if(!In)throw new Error("currentDirective is undefined");In.type=a.toLowerCase();break;case"arg_directive":if(!In)throw new Error("currentDirective is undefined");In.args=JSON.parse(a);break;case"close_directive":ji(s,In,f),In=void 0}}catch(p){Me.error(`Error while rendering sequenceDiagram directive: ${a} jison context: ${d}`),Me.error(p.message)}},ji=function(s,a,d){switch(Me.info(`Directive type=${a.type} with args:`,a.args),a.type){case"init":case"initialize":["config"].forEach(f=>{void 0!==a.args[f]&&("flowchart-v2"===d&&(d="flowchart"),a.args[d]=a.args[f],delete a.args[f])}),Me.info("sanitize in handleDirective",a.args),Ba(a.args),Me.info("sanitize in handleDirective (done)",a.args),Lg(a.args);break;case"wrap":case"nowrap":s&&s.setWrap&&s.setWrap("wrap"===a.type);break;case"themeCss":Me.warn("themeCss encountered");break;default:Me.warn(`Unhandled directive: source: '%%{${a.type}: ${JSON.stringify(a.args?a.args:{})}}%%`,a)}},rs=Me,ls=Mo,cs=ut,Es=s=>An(s,cs()),na=ih,Da=(s,a,d,f)=>Li(s,a,d,f),ri={},kn=(s,a,d)=>{if(ri[s])throw new Error(`Diagram ${s} already registered.`);ri[s]=a,d&&le(s,d),((s,a)=>{Hl[s]=a})(s,a.styles),a.injectUtils&&a.injectUtils(rs,ls,cs,Es,na,Ai,Da)},Er=s=>{if(s in ri)return ri[s];throw new Error(`Diagram ${s} not found.`)};var us=function(){var s=function(rt,Ue,qe,$e){for(qe=qe||{},$e=rt.length;$e--;qe[rt[$e]]=Ue);return qe},a=[1,4],d=[1,7],f=[1,5],p=[1,9],y=[1,6],v=[2,6],w=[1,16],C=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],D=[8,14,20,22,24,25,27,29,32,37,40],V=[8,13,14,20,22,24,25,27,29,32,37,40],W=[1,26],j=[6,8,14,50,55],X=[8,14,55],Ee=[1,53],Ie=[1,52],Pe=[8,14,30,33,35,38,55],Ve=[1,67],Ae=[1,68],Qe=[1,69],vt=[8,14,33,35,42,55],Ft={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(Ue,qe,$e,pe,Ke,J,dt){var ae=J.length-1;switch(Ke){case 3:return J[ae];case 4:return J[ae-1];case 5:return pe.setDirection(J[ae-3]),J[ae-1];case 7:pe.setOptions(J[ae-1]),this.$=J[ae];break;case 8:J[ae-1]+=J[ae],this.$=J[ae-1];break;case 10:this.$=[];break;case 11:J[ae-1].push(J[ae]),this.$=J[ae-1];break;case 12:this.$=J[ae-1];break;case 17:this.$=J[ae].trim(),pe.setAccTitle(this.$);break;case 18:case 19:this.$=J[ae].trim(),pe.setAccDescription(this.$);break;case 20:pe.addSection(J[ae].substr(8)),this.$=J[ae].substr(8);break;case 22:pe.checkout(J[ae]);break;case 23:pe.branch(J[ae]);break;case 24:pe.branch(J[ae-2],J[ae]);break;case 25:pe.cherryPick(J[ae],"",void 0);break;case 26:pe.cherryPick(J[ae-2],"",J[ae]);break;case 27:case 29:pe.cherryPick(J[ae-2],"","");break;case 28:pe.cherryPick(J[ae],"",J[ae-2]);break;case 30:pe.merge(J[ae],"","","");break;case 31:pe.merge(J[ae-2],J[ae],"","");break;case 32:pe.merge(J[ae-2],"",J[ae],"");break;case 33:pe.merge(J[ae-2],"","",J[ae]);break;case 34:pe.merge(J[ae-4],J[ae],"",J[ae-2]);break;case 35:pe.merge(J[ae-4],"",J[ae],J[ae-2]);break;case 36:pe.merge(J[ae-4],"",J[ae-2],J[ae]);break;case 37:pe.merge(J[ae-4],J[ae-2],J[ae],"");break;case 38:pe.merge(J[ae-4],J[ae-2],"",J[ae]);break;case 39:pe.merge(J[ae-4],J[ae],J[ae-2],"");break;case 40:pe.merge(J[ae-6],J[ae-4],J[ae-2],J[ae]);break;case 41:pe.merge(J[ae-6],J[ae],J[ae-4],J[ae-2]);break;case 42:pe.merge(J[ae-6],J[ae-4],J[ae],J[ae-2]);break;case 43:pe.merge(J[ae-6],J[ae-2],J[ae-4],J[ae]);break;case 44:pe.merge(J[ae-6],J[ae],J[ae-2],J[ae-4]);break;case 45:pe.merge(J[ae-6],J[ae-2],J[ae],J[ae-4]);break;case 46:pe.commit(J[ae]);break;case 47:pe.commit("","",pe.commitType.NORMAL,J[ae]);break;case 48:pe.commit("","",J[ae],"");break;case 49:pe.commit("","",J[ae],J[ae-2]);break;case 50:pe.commit("","",J[ae-2],J[ae]);break;case 51:pe.commit("",J[ae],pe.commitType.NORMAL,"");break;case 52:pe.commit("",J[ae-2],pe.commitType.NORMAL,J[ae]);break;case 53:pe.commit("",J[ae],pe.commitType.NORMAL,J[ae-2]);break;case 54:pe.commit("",J[ae-2],J[ae],"");break;case 55:pe.commit("",J[ae],J[ae-2],"");break;case 56:pe.commit("",J[ae-4],J[ae-2],J[ae]);break;case 57:pe.commit("",J[ae-4],J[ae],J[ae-2]);break;case 58:pe.commit("",J[ae-2],J[ae-4],J[ae]);break;case 59:pe.commit("",J[ae],J[ae-4],J[ae-2]);break;case 60:pe.commit("",J[ae],J[ae-2],J[ae-4]);break;case 61:pe.commit("",J[ae-2],J[ae],J[ae-4]);break;case 62:pe.commit(J[ae],"",pe.commitType.NORMAL,"");break;case 63:pe.commit(J[ae],"",pe.commitType.NORMAL,J[ae-2]);break;case 64:pe.commit(J[ae-2],"",pe.commitType.NORMAL,J[ae]);break;case 65:pe.commit(J[ae-2],"",J[ae],"");break;case 66:pe.commit(J[ae],"",J[ae-2],"");break;case 67:pe.commit(J[ae],J[ae-2],pe.commitType.NORMAL,"");break;case 68:pe.commit(J[ae-2],J[ae],pe.commitType.NORMAL,"");break;case 69:pe.commit(J[ae-4],"",J[ae-2],J[ae]);break;case 70:pe.commit(J[ae-4],"",J[ae],J[ae-2]);break;case 71:pe.commit(J[ae-2],"",J[ae-4],J[ae]);break;case 72:pe.commit(J[ae],"",J[ae-4],J[ae-2]);break;case 73:pe.commit(J[ae],"",J[ae-2],J[ae-4]);break;case 74:pe.commit(J[ae-2],"",J[ae],J[ae-4]);break;case 75:pe.commit(J[ae-4],J[ae],J[ae-2],"");break;case 76:pe.commit(J[ae-4],J[ae-2],J[ae],"");break;case 77:pe.commit(J[ae-2],J[ae],J[ae-4],"");break;case 78:pe.commit(J[ae],J[ae-2],J[ae-4],"");break;case 79:pe.commit(J[ae],J[ae-4],J[ae-2],"");break;case 80:pe.commit(J[ae-2],J[ae-4],J[ae],"");break;case 81:pe.commit(J[ae-4],J[ae],pe.commitType.NORMAL,J[ae-2]);break;case 82:pe.commit(J[ae-4],J[ae-2],pe.commitType.NORMAL,J[ae]);break;case 83:pe.commit(J[ae-2],J[ae],pe.commitType.NORMAL,J[ae-4]);break;case 84:pe.commit(J[ae],J[ae-2],pe.commitType.NORMAL,J[ae-4]);break;case 85:pe.commit(J[ae],J[ae-4],pe.commitType.NORMAL,J[ae-2]);break;case 86:pe.commit(J[ae-2],J[ae-4],pe.commitType.NORMAL,J[ae]);break;case 87:pe.commit(J[ae-6],J[ae-4],J[ae-2],J[ae]);break;case 88:pe.commit(J[ae-6],J[ae-4],J[ae],J[ae-2]);break;case 89:pe.commit(J[ae-6],J[ae-2],J[ae-4],J[ae]);break;case 90:pe.commit(J[ae-6],J[ae],J[ae-4],J[ae-2]);break;case 91:pe.commit(J[ae-6],J[ae-2],J[ae],J[ae-4]);break;case 92:pe.commit(J[ae-6],J[ae],J[ae-2],J[ae-4]);break;case 93:pe.commit(J[ae-4],J[ae-6],J[ae-2],J[ae]);break;case 94:pe.commit(J[ae-4],J[ae-6],J[ae],J[ae-2]);break;case 95:pe.commit(J[ae-2],J[ae-6],J[ae-4],J[ae]);break;case 96:pe.commit(J[ae],J[ae-6],J[ae-4],J[ae-2]);break;case 97:pe.commit(J[ae-2],J[ae-6],J[ae],J[ae-4]);break;case 98:pe.commit(J[ae],J[ae-6],J[ae-2],J[ae-4]);break;case 99:pe.commit(J[ae],J[ae-4],J[ae-2],J[ae-6]);break;case 100:pe.commit(J[ae-2],J[ae-4],J[ae],J[ae-6]);break;case 101:pe.commit(J[ae],J[ae-2],J[ae-4],J[ae-6]);break;case 102:pe.commit(J[ae-2],J[ae],J[ae-4],J[ae-6]);break;case 103:pe.commit(J[ae-4],J[ae-2],J[ae],J[ae-6]);break;case 104:pe.commit(J[ae-4],J[ae],J[ae-2],J[ae-6]);break;case 105:pe.commit(J[ae-2],J[ae-4],J[ae-6],J[ae]);break;case 106:pe.commit(J[ae],J[ae-4],J[ae-6],J[ae-2]);break;case 107:pe.commit(J[ae-2],J[ae],J[ae-6],J[ae-4]);break;case 108:pe.commit(J[ae],J[ae-2],J[ae-6],J[ae-4]);break;case 109:pe.commit(J[ae-4],J[ae-2],J[ae-6],J[ae]);break;case 110:pe.commit(J[ae-4],J[ae],J[ae-6],J[ae-2]);break;case 111:this.$="";break;case 112:this.$=J[ae];break;case 113:this.$=pe.commitType.NORMAL;break;case 114:this.$=pe.commitType.REVERSE;break;case 115:this.$=pe.commitType.HIGHLIGHT;break;case 118:pe.parseDirective("%%{","open_directive");break;case 119:pe.parseDirective(J[ae],"type_directive");break;case 120:J[ae]=J[ae].trim().replace(/'/g,'"'),pe.parseDirective(J[ae],"arg_directive");break;case 121:pe.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:a,8:d,14:f,46:8,50:p,55:y},{1:[3]},{3:10,4:2,5:3,6:a,8:d,14:f,46:8,50:p,55:y},{3:11,4:2,5:3,6:a,8:d,14:f,46:8,50:p,55:y},{7:12,8:v,9:[1,13],10:[1,14],11:15,14:w},s(C,[2,124]),s(C,[2,125]),s(C,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:v,11:15,14:w},{9:[1,21]},s(D,[2,10],{12:22,13:[1,23]}),s(V,[2,9]),{9:[1,25],48:24,53:W},s([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:v,11:15,14:w},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},s(V,[2,8]),s(j,[2,116]),{49:45,52:[1,46]},s(j,[2,121]),{1:[2,4]},{8:[1,47]},s(D,[2,11]),{4:48,8:d,14:f,55:y},s(D,[2,13]),s(X,[2,14]),s(X,[2,15]),s(X,[2,16]),{21:[1,49]},{23:[1,50]},s(X,[2,19]),s(X,[2,20]),s(X,[2,21]),{28:51,34:Ee,54:Ie},s(X,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Ee,54:Ie},{33:[1,61],35:[1,62]},{28:63,34:Ee,54:Ie},{48:64,53:W},{53:[2,120]},{1:[2,5]},s(D,[2,12]),s(X,[2,17]),s(X,[2,18]),s(X,[2,22]),s(Pe,[2,122]),s(Pe,[2,123]),s(X,[2,46]),{34:[1,65]},{39:66,43:Ve,44:Ae,45:Qe},{34:[1,70]},{34:[1,71]},s(X,[2,112]),s(X,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},s(X,[2,23],{30:[1,78]}),s(j,[2,117]),s(X,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),s(X,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),s(vt,[2,113]),s(vt,[2,114]),s(vt,[2,115]),s(X,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),s(X,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:Ve,44:Ae,45:Qe},{34:[1,93]},s(X,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:Ve,44:Ae,45:Qe},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:Ve,44:Ae,45:Qe},{34:[1,106]},{34:[1,107]},{39:108,43:Ve,44:Ae,45:Qe},{34:[1,109]},s(X,[2,31],{35:[1,111],38:[1,110]}),s(X,[2,32],{33:[1,113],35:[1,112]}),s(X,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},s(X,[2,24]),s(X,[2,49],{33:[1,120],42:[1,121]}),s(X,[2,53],{38:[1,122],42:[1,123]}),s(X,[2,63],{33:[1,125],38:[1,124]}),s(X,[2,50],{33:[1,126],42:[1,127]}),s(X,[2,55],{35:[1,128],42:[1,129]}),s(X,[2,66],{33:[1,131],35:[1,130]}),s(X,[2,52],{38:[1,132],42:[1,133]}),s(X,[2,54],{35:[1,134],42:[1,135]}),s(X,[2,67],{35:[1,137],38:[1,136]}),s(X,[2,64],{33:[1,139],38:[1,138]}),s(X,[2,65],{33:[1,141],35:[1,140]}),s(X,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:Ve,44:Ae,45:Qe},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:Ve,44:Ae,45:Qe},s(X,[2,26]),s(X,[2,27]),s(X,[2,28]),s(X,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:Ve,44:Ae,45:Qe},{34:[1,153]},{39:154,43:Ve,44:Ae,45:Qe},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:Ve,44:Ae,45:Qe},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:Ve,44:Ae,45:Qe},{34:[1,167]},{39:168,43:Ve,44:Ae,45:Qe},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:Ve,44:Ae,45:Qe},{34:[1,173]},s(X,[2,37],{35:[1,174]}),s(X,[2,38],{38:[1,175]}),s(X,[2,36],{33:[1,176]}),s(X,[2,39],{35:[1,177]}),s(X,[2,34],{38:[1,178]}),s(X,[2,35],{33:[1,179]}),s(X,[2,60],{42:[1,180]}),s(X,[2,73],{33:[1,181]}),s(X,[2,61],{42:[1,182]}),s(X,[2,84],{38:[1,183]}),s(X,[2,74],{33:[1,184]}),s(X,[2,83],{38:[1,185]}),s(X,[2,59],{42:[1,186]}),s(X,[2,72],{33:[1,187]}),s(X,[2,58],{42:[1,188]}),s(X,[2,78],{35:[1,189]}),s(X,[2,71],{33:[1,190]}),s(X,[2,77],{35:[1,191]}),s(X,[2,57],{42:[1,192]}),s(X,[2,85],{38:[1,193]}),s(X,[2,56],{42:[1,194]}),s(X,[2,79],{35:[1,195]}),s(X,[2,80],{35:[1,196]}),s(X,[2,86],{38:[1,197]}),s(X,[2,70],{33:[1,198]}),s(X,[2,81],{38:[1,199]}),s(X,[2,69],{33:[1,200]}),s(X,[2,75],{35:[1,201]}),s(X,[2,76],{35:[1,202]}),s(X,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:Ve,44:Ae,45:Qe},{34:[1,206]},{34:[1,207]},{39:208,43:Ve,44:Ae,45:Qe},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:Ve,44:Ae,45:Qe},{34:[1,214]},{39:215,43:Ve,44:Ae,45:Qe},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:Ve,44:Ae,45:Qe},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:Ve,44:Ae,45:Qe},{34:[1,228]},{39:229,43:Ve,44:Ae,45:Qe},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:Ve,44:Ae,45:Qe},s(X,[2,40]),s(X,[2,42]),s(X,[2,41]),s(X,[2,43]),s(X,[2,45]),s(X,[2,44]),s(X,[2,101]),s(X,[2,102]),s(X,[2,99]),s(X,[2,100]),s(X,[2,104]),s(X,[2,103]),s(X,[2,108]),s(X,[2,107]),s(X,[2,106]),s(X,[2,105]),s(X,[2,110]),s(X,[2,109]),s(X,[2,98]),s(X,[2,97]),s(X,[2,96]),s(X,[2,95]),s(X,[2,93]),s(X,[2,94]),s(X,[2,92]),s(X,[2,91]),s(X,[2,90]),s(X,[2,89]),s(X,[2,87]),s(X,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(Ue,qe){if(!qe.recoverable){var $e=new Error(Ue);throw $e.hash=qe,$e}this.trace(Ue)},parse:function(Ue){var $e=[0],pe=[],Ke=[null],J=[],dt=this.table,ae="",Ct=0,Jn=0,L=J.slice.call(arguments,1),P=Object.create(this.lexer),it={yy:{}};for(var Hn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Hn)&&(it.yy[Hn]=this.yy[Hn]);P.setInput(Ue,it.yy),it.yy.lexer=P,it.yy.parser=this,typeof P.yylloc>"u"&&(P.yylloc={});var Dn=P.yylloc;J.push(Dn);var gr,Pt=P.options&&P.options.ranges;this.parseError="function"==typeof it.yy.parseError?it.yy.parseError:Object.getPrototypeOf(this).parseError;for(var xt,Tn,Wt,Ht,Ye,ct,bn,lt={};;){if(this.defaultActions[Tn=$e[$e.length-1]]?Wt=this.defaultActions[Tn]:((null===xt||typeof xt>"u")&&(gr=void 0,"number"!=typeof(gr=pe.pop()||P.lex()||1)&&(gr instanceof Array&&(gr=(pe=gr).pop()),gr=this.symbols_[gr]||gr),xt=gr),Wt=dt[Tn]&&dt[Tn][xt]),typeof Wt>"u"||!Wt.length||!Wt[0]){var xe;for(Ye in bn=[],dt[Tn])this.terminals_[Ye]&&Ye>2&&bn.push("'"+this.terminals_[Ye]+"'");xe=P.showPosition?"Parse error on line "+(Ct+1)+":\n"+P.showPosition()+"\nExpecting "+bn.join(", ")+", got '"+(this.terminals_[xt]||xt)+"'":"Parse error on line "+(Ct+1)+": Unexpected "+(1==xt?"end of input":"'"+(this.terminals_[xt]||xt)+"'"),this.parseError(xe,{text:P.match,token:this.terminals_[xt]||xt,line:P.yylineno,loc:Dn,expected:bn})}if(Wt[0]instanceof Array&&Wt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Tn+", token: "+xt);switch(Wt[0]){case 1:$e.push(xt),Ke.push(P.yytext),J.push(P.yylloc),$e.push(Wt[1]),xt=null,Jn=P.yyleng,ae=P.yytext,Ct=P.yylineno,Dn=P.yylloc;break;case 2:if(lt.$=Ke[Ke.length-(ct=this.productions_[Wt[1]][1])],lt._$={first_line:J[J.length-(ct||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(ct||1)].first_column,last_column:J[J.length-1].last_column},Pt&&(lt._$.range=[J[J.length-(ct||1)].range[0],J[J.length-1].range[1]]),typeof(Ht=this.performAction.apply(lt,[ae,Jn,Ct,it.yy,Wt[1],Ke,J].concat(L)))<"u")return Ht;ct&&($e=$e.slice(0,-1*ct*2),Ke=Ke.slice(0,-1*ct),J=J.slice(0,-1*ct)),$e.push(this.productions_[Wt[1]][0]),Ke.push(lt.$),J.push(lt._$),$e.push(dt[$e[$e.length-2]][$e[$e.length-1]]);break;case 3:return!0}}return!0}};function st(){this.yy={}}return Ft.lexer=function(){return{EOF:1,parseError:function(qe,$e){if(!this.yy.parser)throw new Error(qe);this.yy.parser.parseError(qe,$e)},setInput:function(Ue,qe){return this.yy=qe||this.yy||{},this._input=Ue,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ue=this._input[0];return this.yytext+=Ue,this.yyleng++,this.offset++,this.match+=Ue,this.matched+=Ue,Ue.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ue},unput:function(Ue){var qe=Ue.length,$e=Ue.split(/(?:\r\n?|\n)/g);this._input=Ue+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-qe),this.offset-=qe;var pe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$e.length-1&&(this.yylineno-=$e.length-1);var Ke=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$e?($e.length===pe.length?this.yylloc.first_column:0)+pe[pe.length-$e.length].length-$e[0].length:this.yylloc.first_column-qe},this.options.ranges&&(this.yylloc.range=[Ke[0],Ke[0]+this.yyleng-qe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ue){this.unput(this.match.slice(Ue))},pastInput:function(){var Ue=this.matched.substr(0,this.matched.length-this.match.length);return(Ue.length>20?"...":"")+Ue.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ue=this.match;return Ue.length<20&&(Ue+=this._input.substr(0,20-Ue.length)),(Ue.substr(0,20)+(Ue.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ue=this.pastInput(),qe=new Array(Ue.length+1).join("-");return Ue+this.upcomingInput()+"\n"+qe+"^"},test_match:function(Ue,qe){var $e,pe,Ke;if(this.options.backtrack_lexer&&(Ke={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ke.yylloc.range=this.yylloc.range.slice(0))),(pe=Ue[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=pe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pe?pe[pe.length-1].length-pe[pe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ue[0].length},this.yytext+=Ue[0],this.match+=Ue[0],this.matches=Ue,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ue[0].length),this.matched+=Ue[0],$e=this.performAction.call(this,this.yy,this,qe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$e)return $e;if(this._backtrack){for(var J in Ke)this[J]=Ke[J];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ue,qe,$e,pe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ke=this._currentRules(),J=0;J<Ke.length;J++)if(($e=this._input.match(this.rules[Ke[J]]))&&(!qe||$e[0].length>qe[0].length)){if(qe=$e,pe=J,this.options.backtrack_lexer){if(!1!==(Ue=this.test_match($e,Ke[J])))return Ue;if(this._backtrack){qe=!1;continue}return!1}if(!this.options.flex)break}return qe?!1!==(Ue=this.test_match(qe,Ke[pe]))&&Ue:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(qe){this.conditionStack.push(qe)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(qe){return(qe=this.conditionStack.length-1-Math.abs(qe||0))>=0?this.conditionStack[qe]:"INITIAL"},pushState:function(qe){this.begin(qe)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(qe,$e,pe,Ke){switch(pe){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 34:case 38:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}}}(),st.prototype=Ft,Ft.Parser=st,new st}();us.parser=us;const ds=us,Qa=s=>null!==s.match(/^\s*gitGraph/);let wo=ut().gitGraph.mainBranchName,ss=ut().gitGraph.mainBranchOrder,Rr={},Xr=null,qs={};qs[wo]={name:wo,order:ss};let ho={};ho[wo]=Xr;let No=wo,tn="LR",ar=0;function on(){return io({length:7})}let ec={};const Cc=function(s){if(s=tr.sanitizeText(s,ut()),void 0===ho[s]){let a=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+s+'")');throw a.hash={text:"checkout "+s,token:"checkout "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+s+'"']},a}No=s,Xr=Rr[ho[No]]};function iu(s,a,d){const f=s.indexOf(a);-1===f?s.push(d):s.splice(f,1,d)}function ry(s){const a=s.reduce((p,y)=>p.seq>y.seq?p:y,s[0]);let d="";s.forEach(function(p){d+=p===a?"\t*":"\t|"});const f=[d,a.id,a.seq];for(let p in ho)ho[p]===a.id&&f.push(p);if(Me.debug(f.join(" ")),a.parents&&2==a.parents.length)iu(s,a,Rr[a.parents[0]]),s.push(Rr[a.parents[1]]);else{if(0==a.parents.length)return;iu(s,a,Rr[a.parents])}s=function Ms(s,a){const d=Object.create(null);return s.reduce((f,p)=>{const y=a(p);return d[y]||(d[y]=!0,f.push(p)),f},[])}(s,p=>p.id),ry(s)}const Mb=function(){const s=Object.keys(Rr).map(function(a){return Rr[a]});return s.forEach(function(a){Me.debug(a.id)}),s.sort((a,d)=>a.seq-d.seq),s},Kf={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},ay={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().gitGraph,setDirection:function(s){tn=s},setOptions:function(s){Me.debug("options str",s),s=(s=s&&s.trim())||"{}";try{ec=JSON.parse(s)}catch(a){Me.error("error while parsing gitGraph options",a.message)}},getOptions:function(){return ec},commit:function(s,a,d,f){Me.debug("Entering commit:",s,a,d,f),a=tr.sanitizeText(a,ut()),s=tr.sanitizeText(s,ut()),f=tr.sanitizeText(f,ut());const p={id:a||ar+"-"+on(),message:s,seq:ar++,type:d||Kf.NORMAL,tag:f||"",parents:null==Xr?[]:[Xr.id],branch:No};Xr=p,Rr[p.id]=p,ho[No]=p.id,Me.debug("in pushCommit "+p.id)},branch:function(s,a){if(s=tr.sanitizeText(s,ut()),void 0!==ho[s]){let d=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+s+'")');throw d.hash={text:"branch "+s,token:"branch "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+s+'"']},d}ho[s]=null!=Xr?Xr.id:null,qs[s]={name:s,order:a?parseInt(a,10):null},Cc(s),Me.debug("in createBranch")},merge:function(s,a,d,f){s=tr.sanitizeText(s,ut()),a=tr.sanitizeText(a,ut());const p=Rr[ho[No]],y=Rr[ho[s]];if(No===s){let w=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw w.hash={text:"merge "+s,token:"merge "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},w}if(void 0===p||!p){let w=new Error('Incorrect usage of "merge". Current branch ('+No+")has no commits");throw w.hash={text:"merge "+s,token:"merge "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},w}if(void 0===ho[s]){let w=new Error('Incorrect usage of "merge". Branch to be merged ('+s+") does not exist");throw w.hash={text:"merge "+s,token:"merge "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+s]},w}if(void 0===y||!y){let w=new Error('Incorrect usage of "merge". Branch to be merged ('+s+") has no commits");throw w.hash={text:"merge "+s,token:"merge "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},w}if(p===y){let w=new Error('Incorrect usage of "merge". Both branches have same head');throw w.hash={text:"merge "+s,token:"merge "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},w}if(a&&void 0!==Rr[a]){let w=new Error('Incorrect usage of "merge". Commit with id:'+a+" already exists, use different custom Id");throw w.hash={text:"merge "+s+a+d+f,token:"merge "+s+a+d+f,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+s+" "+a+"_UNIQUE "+d+" "+f]},w}const v={id:a||ar+"-"+on(),message:"merged branch "+s+" into "+No,seq:ar++,parents:[null==Xr?null:Xr.id,ho[s]],branch:No,type:Kf.MERGE,customType:d,customId:!!a,tag:f||""};Xr=v,Rr[v.id]=v,ho[No]=v.id,Me.debug(ho),Me.debug("in mergeBranch")},cherryPick:function(s,a,d){if(Me.debug("Entering cherryPick:",s,a,d),s=tr.sanitizeText(s,ut()),a=tr.sanitizeText(a,ut()),d=tr.sanitizeText(d,ut()),!s||void 0===Rr[s]){let y=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw y.hash={text:"cherryPick "+s+" "+a,token:"cherryPick "+s+" "+a,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},y}let f=Rr[s],p=f.branch;if(f.type===Kf.MERGE){let y=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw y.hash={text:"cherryPick "+s+" "+a,token:"cherryPick "+s+" "+a,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},y}if(!a||void 0===Rr[a]){if(p===No){let w=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw w.hash={text:"cherryPick "+s+" "+a,token:"cherryPick "+s+" "+a,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},w}const y=Rr[ho[No]];if(void 0===y||!y){let w=new Error('Incorrect usage of "cherry-pick". Current branch ('+No+")has no commits");throw w.hash={text:"cherryPick "+s+" "+a,token:"cherryPick "+s+" "+a,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},w}const v={id:ar+"-"+on(),message:"cherry-picked "+f+" into "+No,seq:ar++,parents:[null==Xr?null:Xr.id,f.id],branch:No,type:Kf.CHERRY_PICK,tag:d??"cherry-pick:"+f.id};Xr=v,Rr[v.id]=v,ho[No]=v.id,Me.debug(ho),Me.debug("in cherryPick")}},checkout:Cc,prettyPrint:function(){Me.debug(Rr),ry([Mb()[0]])},clear:function(){Rr={},Xr=null;let s=ut().gitGraph.mainBranchName,a=ut().gitGraph.mainBranchOrder;ho={},ho[s]=null,qs={},qs[s]={name:s,order:a},No=s,ar=0,je()},getBranchesAsObjArray:function(){return Object.values(qs).map((a,d)=>null!==a.order?a:{...a,order:parseFloat(`0.${d}`,10)}).sort((a,d)=>a.order-d.order).map(({name:a})=>({name:a}))},getBranches:function(){return ho},getCommits:function(){return Rr},getCommitsArray:Mb,getCurrentBranch:function(){return No},getDirection:function(){return tn},getHead:function(){return Xr},setAccTitle:Je,getAccTitle:pt,getAccDescription:Mt,setAccDescription:et,setDiagramTitle:Nt,getDiagramTitle:cn,commitType:Kf};let Xg={};let Dl={},qg={},Kg=[],Zu=0;const Zf=(s,a,d)=>{const f=cs().gitGraph,p=s.append("g").attr("class","commit-bullets"),y=s.append("g").attr("class","commit-labels");let v=0;Object.keys(a).sort((D,V)=>a[D].seq-a[V].seq).forEach(D=>{const V=a[D],W=Dl[V.branch].pos,j=v+10;if(d){let X,Ee=void 0!==V.customType&&""!==V.customType?V.customType:V.type;switch(Ee){case 0:default:X="commit-normal";break;case 1:X="commit-reverse";break;case 2:X="commit-highlight";break;case 3:X="commit-merge";break;case 4:X="commit-cherry-pick"}if(2===Ee){const Ie=p.append("rect");Ie.attr("x",j-10),Ie.attr("y",W-10),Ie.attr("height",20),Ie.attr("width",20),Ie.attr("class",`commit ${V.id} commit-highlight${Dl[V.branch].index%8} ${X}-outer`),p.append("rect").attr("x",j-6).attr("y",W-6).attr("height",12).attr("width",12).attr("class",`commit ${V.id} commit${Dl[V.branch].index%8} ${X}-inner`)}else if(4===Ee)p.append("circle").attr("cx",j).attr("cy",W).attr("r",10).attr("class",`commit ${V.id} ${X}`),p.append("circle").attr("cx",j-3).attr("cy",W+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${V.id} ${X}`),p.append("circle").attr("cx",j+3).attr("cy",W+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${V.id} ${X}`),p.append("line").attr("x1",j+3).attr("y1",W+1).attr("x2",j).attr("y2",W-5).attr("stroke","#fff").attr("class",`commit ${V.id} ${X}`),p.append("line").attr("x1",j-3).attr("y1",W+1).attr("x2",j).attr("y2",W-5).attr("stroke","#fff").attr("class",`commit ${V.id} ${X}`);else{const Ie=p.append("circle");if(Ie.attr("cx",j),Ie.attr("cy",W),Ie.attr("r",3===V.type?9:10),Ie.attr("class",`commit ${V.id} commit${Dl[V.branch].index%8}`),3===Ee){const Pe=p.append("circle");Pe.attr("cx",j),Pe.attr("cy",W),Pe.attr("r",6),Pe.attr("class",`commit ${X} ${V.id} commit${Dl[V.branch].index%8}`)}1===Ee&&p.append("path").attr("d",`M ${j-5},${W-5}L${j+5},${W+5}M${j-5},${W+5}L${j+5},${W-5}`).attr("class",`commit ${X} ${V.id} commit${Dl[V.branch].index%8}`)}}if(qg[V.id]={x:v+10,y:W},d){if(4!==V.type&&(V.customId&&3===V.type||3!==V.type)&&f.showCommitLabel){const Ie=y.append("g"),Pe=Ie.insert("rect").attr("class","commit-label-bkg"),Ve=Ie.append("text").attr("x",v).attr("y",W+25).attr("class","commit-label").text(V.id);let Ae=Ve.node().getBBox();Pe.attr("x",v+10-Ae.width/2-2).attr("y",W+13.5).attr("width",Ae.width+4).attr("height",Ae.height+4),Ve.attr("x",v+10-Ae.width/2),f.rotateCommitLabel&&Ie.attr("transform","translate("+(-7.5-(Ae.width+10)/25*9.5)+", "+(10+Ae.width/25*8.5)+") rotate(-45, "+v+", "+W+")")}if(V.tag){const Ie=y.insert("polygon"),Pe=y.append("circle"),Ve=y.append("text").attr("y",W-16).attr("class","tag-label").text(V.tag);let Ae=Ve.node().getBBox();Ve.attr("x",v+10-Ae.width/2);const Qe=Ae.height/2,vt=W-19.2;Ie.attr("class","tag-label-bkg").attr("points",`\n          ${v-Ae.width/2-2},${vt+2}\n          ${v-Ae.width/2-2},${vt-2}\n          ${v+10-Ae.width/2-4},${vt-Qe-2}\n          ${v+10+Ae.width/2+4},${vt-Qe-2}\n          ${v+10+Ae.width/2+4},${vt+Qe+2}\n          ${v+10-Ae.width/2-4},${vt+Qe+2}`),Pe.attr("cx",v-Ae.width/2+2).attr("cy",vt).attr("r",1.5).attr("class","tag-hole")}}v+=50,v>Zu&&(Zu=v)})},ly=(s,a,d=0)=>{const f=s+Math.abs(s-a)/2;if(d>5)return f;if(Kg.every(v=>Math.abs(v-f)>=10))return Kg.push(f),f;const y=Math.abs(s-a);return ly(s,a-y/5,d+1)},Gh={draw:function(s,a,d,f){Dl={},qg={},Xg={},Zu=0,Kg=[];const p=cs(),y=p.gitGraph;Me.debug("in gitgraph renderer",s+"\n","id:",a,d),Xg=f.db.getCommits();const v=f.db.getBranchesAsObjArray();let w=0;v.forEach((D,V)=>{Dl[D.name]={pos:w,index:V},w+=50+(y.rotateCommitLabel?40:0)});const C=(0,F.Ltv)(`[id="${a}"]`);Zf(C,Xg,!1),y.showBranches&&((s,a)=>{const d=cs().gitGraph,f=s.append("g");a.forEach((p,y)=>{const v=y%8,w=Dl[p.name].pos,C=f.append("line");C.attr("x1",0),C.attr("y1",w),C.attr("x2",Zu),C.attr("y2",w),C.attr("class","branch branch"+v),Kg.push(w);const V=(s=>{const a=document.createElementNS("http://www.w3.org/2000/svg","text");let d=[];d="string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[];for(const f of d){const p=document.createElementNS("http://www.w3.org/2000/svg","tspan");p.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),p.setAttribute("dy","1em"),p.setAttribute("x","0"),p.setAttribute("class","row"),p.textContent=f.trim(),a.appendChild(p)}return a})(p.name),W=f.insert("rect"),X=f.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+v);X.node().appendChild(V);let Ee=V.getBBox();W.attr("class","branchLabelBkg label"+v).attr("rx",4).attr("ry",4).attr("x",-Ee.width-4-(!0===d.rotateCommitLabel?30:0)).attr("y",-Ee.height/2+8).attr("width",Ee.width+18).attr("height",Ee.height+4),X.attr("transform","translate("+(-Ee.width-14-(!0===d.rotateCommitLabel?30:0))+", "+(w-Ee.height/2-1)+")"),W.attr("transform","translate(-19, "+(w-Ee.height/2)+")")})})(C,v),((s,a)=>{const d=s.append("g").attr("class","commit-arrows");Object.keys(a).forEach(f=>{const p=a[f];p.parents&&p.parents.length>0&&p.parents.forEach(y=>{((s,a,d,f)=>{const p=qg[a.id],y=qg[d.id],v=((s,a,d)=>Object.keys(d).filter(y=>d[y].branch===a.branch&&d[y].seq>s.seq&&d[y].seq<a.seq).length>0)(a,d,f);let j,w="",C="",D=0,V=0,W=Dl[d.branch].index;if(v){w="A 10 10, 0, 0, 0,",C="A 10 10, 0, 0, 1,",D=10,V=10,W=Dl[d.branch].index;const X=p.y<y.y?ly(p.y,y.y):ly(y.y,p.y);j=p.y<y.y?`M ${p.x} ${p.y} L ${p.x} ${X-D} ${w} ${p.x+V} ${X} L ${y.x-D} ${X} ${C} ${y.x} ${X+V} L ${y.x} ${y.y}`:`M ${p.x} ${p.y} L ${p.x} ${X+D} ${C} ${p.x+V} ${X} L ${y.x-D} ${X} ${w} ${y.x} ${X-V} L ${y.x} ${y.y}`}else p.y<y.y&&(w="A 20 20, 0, 0, 0,",D=20,V=20,W=Dl[d.branch].index,j=`M ${p.x} ${p.y} L ${p.x} ${y.y-D} ${w} ${p.x+V} ${y.y} L ${y.x} ${y.y}`),p.y>y.y&&(w="A 20 20, 0, 0, 0,",D=20,V=20,W=Dl[a.branch].index,j=`M ${p.x} ${p.y} L ${y.x-D} ${p.y} ${w} ${y.x} ${p.y-V} L ${y.x} ${y.y}`),p.y===y.y&&(W=Dl[a.branch].index,j=`M ${p.x} ${p.y} L ${p.x} ${y.y-D} ${w} ${p.x+V} ${y.y} L ${y.x} ${y.y}`);s.append("path").attr("d",j).attr("class","arrow arrow"+W%8)})(d,a[y],p,a)})})})(C,Xg),Zf(C,Xg,!0),Br.insertTitle(C,"gitTitleText",y.titleTopMargin,f.db.getDiagramTitle()),na(void 0,C,y.diagramPadding,y.useMaxWidth??p.useMaxWidth)}},ru=s=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map(a=>`\n        .branch-label${a} { fill: ${s["gitBranchLabel"+a]}; }\n        .commit${a} { stroke: ${s["git"+a]}; fill: ${s["git"+a]}; }\n        .commit-highlight${a} { stroke: ${s["gitInv"+a]}; fill: ${s["gitInv"+a]}; }\n        .label${a}  { fill: ${s["git"+a]}; }\n        .arrow${a} { stroke: ${s["git"+a]}; }\n        `).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${s.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${s.commitLabelFontSize}; fill: ${s.commitLabelColor};}\n  .commit-label-bkg { font-size: ${s.commitLabelFontSize}; fill: ${s.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${s.tagLabelFontSize}; fill: ${s.tagLabelColor};}\n  .tag-label-bkg { fill: ${s.tagLabelBackground}; stroke: ${s.tagLabelBorder}; }\n  .tag-hole { fill: ${s.textColor}; }\n\n  .commit-merge {\n    stroke: ${s.primaryColor};\n    fill: ${s.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${s.primaryColor};\n    fill: ${s.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${s.primaryColor};\n    fill: ${s.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${s.textColor};\n  }\n  }\n`;var em=function(){var s=function(Ei,jn,Pn,mi){for(Pn=Pn||{},mi=Ei.length;mi--;Pn[Ei[mi]]=jn);return Pn},a=[1,6],d=[1,7],f=[1,8],p=[1,9],y=[1,16],v=[1,11],w=[1,12],C=[1,13],D=[1,14],V=[1,15],W=[1,27],j=[1,33],X=[1,34],Ee=[1,35],Ie=[1,36],Pe=[1,37],Ve=[1,72],Ae=[1,73],Qe=[1,74],vt=[1,75],Ft=[1,76],Qt=[1,77],st=[1,78],rt=[1,38],Ue=[1,39],qe=[1,40],$e=[1,41],pe=[1,42],Ke=[1,43],J=[1,44],dt=[1,45],ae=[1,46],Ct=[1,47],Jn=[1,48],Xt=[1,49],Jt=[1,50],L=[1,51],P=[1,52],it=[1,53],Hn=[1,54],Dn=[1,55],Pt=[1,56],nr=[1,57],xt=[1,59],Tn=[1,60],Wt=[1,61],Ht=[1,62],lt=[1,63],Ye=[1,64],ct=[1,65],Oe=[1,66],bn=[1,67],xe=[1,68],gr=[1,69],Ut=[24,52],ui=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],qn=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],gn=[1,94],Sn=[1,95],Rn=[1,96],En=[1,97],Bn=[15,24,52],Sr=[7,8,9,10,18,22,25,26,27,28],js=[15,24,43,52],wr=[15,24,43,52,86,87,89,90],yr=[15,43],es=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Oa={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(jn,Pn,mi,wn,er,Kt,Ts){var an=Kt.length-1;switch(er){case 4:wn.setDirection("TB");break;case 5:wn.setDirection("BT");break;case 6:wn.setDirection("RL");break;case 7:wn.setDirection("LR");break;case 11:wn.parseDirective("%%{","open_directive");break;case 12:break;case 13:Kt[an]=Kt[an].trim().replace(/'/g,'"'),wn.parseDirective(Kt[an],"arg_directive");break;case 14:wn.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:wn.setC4Type(Kt[an-3]);break;case 26:wn.setTitle(Kt[an].substring(6)),this.$=Kt[an].substring(6);break;case 27:wn.setAccDescription(Kt[an].substring(15)),this.$=Kt[an].substring(15);break;case 28:this.$=Kt[an].trim(),wn.setTitle(this.$);break;case 29:case 30:this.$=Kt[an].trim(),wn.setAccDescription(this.$);break;case 35:case 36:Kt[an].splice(2,0,"ENTERPRISE"),wn.addPersonOrSystemBoundary(...Kt[an]),this.$=Kt[an];break;case 37:wn.addPersonOrSystemBoundary(...Kt[an]),this.$=Kt[an];break;case 38:Kt[an].splice(2,0,"CONTAINER"),wn.addContainerBoundary(...Kt[an]),this.$=Kt[an];break;case 39:wn.addDeploymentNode("node",...Kt[an]),this.$=Kt[an];break;case 40:wn.addDeploymentNode("nodeL",...Kt[an]),this.$=Kt[an];break;case 41:wn.addDeploymentNode("nodeR",...Kt[an]),this.$=Kt[an];break;case 42:wn.popBoundaryParseStack();break;case 46:wn.addPersonOrSystem("person",...Kt[an]),this.$=Kt[an];break;case 47:wn.addPersonOrSystem("external_person",...Kt[an]),this.$=Kt[an];break;case 48:wn.addPersonOrSystem("system",...Kt[an]),this.$=Kt[an];break;case 49:wn.addPersonOrSystem("system_db",...Kt[an]),this.$=Kt[an];break;case 50:wn.addPersonOrSystem("system_queue",...Kt[an]),this.$=Kt[an];break;case 51:wn.addPersonOrSystem("external_system",...Kt[an]),this.$=Kt[an];break;case 52:wn.addPersonOrSystem("external_system_db",...Kt[an]),this.$=Kt[an];break;case 53:wn.addPersonOrSystem("external_system_queue",...Kt[an]),this.$=Kt[an];break;case 54:wn.addContainer("container",...Kt[an]),this.$=Kt[an];break;case 55:wn.addContainer("container_db",...Kt[an]),this.$=Kt[an];break;case 56:wn.addContainer("container_queue",...Kt[an]),this.$=Kt[an];break;case 57:wn.addContainer("external_container",...Kt[an]),this.$=Kt[an];break;case 58:wn.addContainer("external_container_db",...Kt[an]),this.$=Kt[an];break;case 59:wn.addContainer("external_container_queue",...Kt[an]),this.$=Kt[an];break;case 60:wn.addComponent("component",...Kt[an]),this.$=Kt[an];break;case 61:wn.addComponent("component_db",...Kt[an]),this.$=Kt[an];break;case 62:wn.addComponent("component_queue",...Kt[an]),this.$=Kt[an];break;case 63:wn.addComponent("external_component",...Kt[an]),this.$=Kt[an];break;case 64:wn.addComponent("external_component_db",...Kt[an]),this.$=Kt[an];break;case 65:wn.addComponent("external_component_queue",...Kt[an]),this.$=Kt[an];break;case 67:wn.addRel("rel",...Kt[an]),this.$=Kt[an];break;case 68:wn.addRel("birel",...Kt[an]),this.$=Kt[an];break;case 69:wn.addRel("rel_u",...Kt[an]),this.$=Kt[an];break;case 70:wn.addRel("rel_d",...Kt[an]),this.$=Kt[an];break;case 71:wn.addRel("rel_l",...Kt[an]),this.$=Kt[an];break;case 72:wn.addRel("rel_r",...Kt[an]),this.$=Kt[an];break;case 73:wn.addRel("rel_b",...Kt[an]),this.$=Kt[an];break;case 74:Kt[an].splice(0,1),wn.addRel("rel",...Kt[an]),this.$=Kt[an];break;case 75:wn.updateElStyle("update_el_style",...Kt[an]),this.$=Kt[an];break;case 76:wn.updateRelStyle("update_rel_style",...Kt[an]),this.$=Kt[an];break;case 77:wn.updateLayoutConfig("update_layout_config",...Kt[an]),this.$=Kt[an];break;case 78:this.$=[Kt[an]];break;case 79:Kt[an].unshift(Kt[an-1]),this.$=Kt[an];break;case 80:case 82:this.$=Kt[an].trim();break;case 81:let hs={};hs[Kt[an-1].trim()]=Kt[an].trim(),this.$=hs;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:a,8:d,9:f,10:p,11:5,12:10,18:y,22:v,25:w,26:C,27:D,28:V},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:a,8:d,9:f,10:p,11:5,12:10,18:y,22:v,25:w,26:C,27:D,28:V},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:W},s([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:j,33:X,34:Ee,36:Ie,38:Pe,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{23:79,29:29,30:30,31:31,32:j,33:X,34:Ee,36:Ie,38:Pe,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{23:80,29:29,30:30,31:31,32:j,33:X,34:Ee,36:Ie,38:Pe,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{23:81,29:29,30:30,31:31,32:j,33:X,34:Ee,36:Ie,38:Pe,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{23:82,29:29,30:30,31:31,32:j,33:X,34:Ee,36:Ie,38:Pe,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},s(Ut,[2,20],{53:32,39:58,40:70,42:71,30:87,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr}),s(Ut,[2,21]),s(ui,[2,23],{15:[1,88]}),s(Ut,[2,43],{15:[1,89]}),s(qn,[2,26]),s(qn,[2,27]),{35:[1,90]},{37:[1,91]},s(qn,[2,30]),{45:92,85:93,86:gn,87:Sn,89:Rn,90:En},{45:98,85:93,86:gn,87:Sn,89:Rn,90:En},{45:99,85:93,86:gn,87:Sn,89:Rn,90:En},{45:100,85:93,86:gn,87:Sn,89:Rn,90:En},{45:101,85:93,86:gn,87:Sn,89:Rn,90:En},{45:102,85:93,86:gn,87:Sn,89:Rn,90:En},{45:103,85:93,86:gn,87:Sn,89:Rn,90:En},{45:104,85:93,86:gn,87:Sn,89:Rn,90:En},{45:105,85:93,86:gn,87:Sn,89:Rn,90:En},{45:106,85:93,86:gn,87:Sn,89:Rn,90:En},{45:107,85:93,86:gn,87:Sn,89:Rn,90:En},{45:108,85:93,86:gn,87:Sn,89:Rn,90:En},{45:109,85:93,86:gn,87:Sn,89:Rn,90:En},{45:110,85:93,86:gn,87:Sn,89:Rn,90:En},{45:111,85:93,86:gn,87:Sn,89:Rn,90:En},{45:112,85:93,86:gn,87:Sn,89:Rn,90:En},{45:113,85:93,86:gn,87:Sn,89:Rn,90:En},{45:114,85:93,86:gn,87:Sn,89:Rn,90:En},{45:115,85:93,86:gn,87:Sn,89:Rn,90:En},{45:116,85:93,86:gn,87:Sn,89:Rn,90:En},s(Bn,[2,66]),{45:117,85:93,86:gn,87:Sn,89:Rn,90:En},{45:118,85:93,86:gn,87:Sn,89:Rn,90:En},{45:119,85:93,86:gn,87:Sn,89:Rn,90:En},{45:120,85:93,86:gn,87:Sn,89:Rn,90:En},{45:121,85:93,86:gn,87:Sn,89:Rn,90:En},{45:122,85:93,86:gn,87:Sn,89:Rn,90:En},{45:123,85:93,86:gn,87:Sn,89:Rn,90:En},{45:124,85:93,86:gn,87:Sn,89:Rn,90:En},{45:125,85:93,86:gn,87:Sn,89:Rn,90:En},{45:126,85:93,86:gn,87:Sn,89:Rn,90:En},{45:127,85:93,86:gn,87:Sn,89:Rn,90:En},{30:128,39:58,40:70,42:71,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,53:32,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr},{15:[1,130],43:[1,129]},{45:131,85:93,86:gn,87:Sn,89:Rn,90:En},{45:132,85:93,86:gn,87:Sn,89:Rn,90:En},{45:133,85:93,86:gn,87:Sn,89:Rn,90:En},{45:134,85:93,86:gn,87:Sn,89:Rn,90:En},{45:135,85:93,86:gn,87:Sn,89:Rn,90:En},{45:136,85:93,86:gn,87:Sn,89:Rn,90:En},{45:137,85:93,86:gn,87:Sn,89:Rn,90:En},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},s(Sr,[2,9]),{14:142,21:W},{21:[2,13]},{1:[2,15]},s(Ut,[2,22]),s(ui,[2,24],{31:31,29:143,32:j,33:X,34:Ee,36:Ie,38:Pe}),s(Ut,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:j,33:X,34:Ee,36:Ie,38:Pe,44:Ve,46:Ae,47:Qe,48:vt,49:Ft,50:Qt,51:st,54:rt,55:Ue,56:qe,57:$e,58:pe,59:Ke,60:J,61:dt,62:ae,63:Ct,64:Jn,65:Xt,66:Jt,67:L,68:P,69:it,70:Hn,71:Dn,72:Pt,73:nr,74:xt,75:Tn,76:Wt,77:Ht,78:lt,79:Ye,80:ct,81:Oe,82:bn,83:xe,84:gr}),s(qn,[2,28]),s(qn,[2,29]),s(Bn,[2,46]),s(js,[2,78],{85:93,45:145,86:gn,87:Sn,89:Rn,90:En}),s(wr,[2,80]),{88:[1,146]},s(wr,[2,82]),s(wr,[2,83]),s(Bn,[2,47]),s(Bn,[2,48]),s(Bn,[2,49]),s(Bn,[2,50]),s(Bn,[2,51]),s(Bn,[2,52]),s(Bn,[2,53]),s(Bn,[2,54]),s(Bn,[2,55]),s(Bn,[2,56]),s(Bn,[2,57]),s(Bn,[2,58]),s(Bn,[2,59]),s(Bn,[2,60]),s(Bn,[2,61]),s(Bn,[2,62]),s(Bn,[2,63]),s(Bn,[2,64]),s(Bn,[2,65]),s(Bn,[2,67]),s(Bn,[2,68]),s(Bn,[2,69]),s(Bn,[2,70]),s(Bn,[2,71]),s(Bn,[2,72]),s(Bn,[2,73]),s(Bn,[2,74]),s(Bn,[2,75]),s(Bn,[2,76]),s(Bn,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},s(yr,[2,35]),s(yr,[2,36]),s(yr,[2,37]),s(yr,[2,38]),s(yr,[2,39]),s(yr,[2,40]),s(yr,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},s(ui,[2,25]),s(Ut,[2,45]),s(js,[2,79]),s(wr,[2,81]),s(Bn,[2,31]),s(Bn,[2,42]),s(es,[2,32]),s(es,[2,33],{15:[1,152]}),s(Sr,[2,10]),s(es,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(jn,Pn){if(!Pn.recoverable){var mi=new Error(jn);throw mi.hash=Pn,mi}this.trace(jn)},parse:function(jn){var mi=[0],wn=[],er=[null],Kt=[],Ts=this.table,an="",hs=0,$s=0,Zs=Kt.slice.call(arguments,1),kr=Object.create(this.lexer),Qr={yy:{}};for(var Is in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Is)&&(Qr.yy[Is]=this.yy[Is]);kr.setInput(jn,Qr.yy),Qr.yy.lexer=kr,Qr.yy.parser=this,typeof kr.yylloc>"u"&&(kr.yylloc={});var Ns=kr.yylloc;Kt.push(Ns);var nl,Gm=kr.options&&kr.options.ranges;this.parseError="function"==typeof Qr.yy.parseError?Qr.yy.parseError:Object.getPrototypeOf(this).parseError;for(var _a,Kr,au,Ym,Nl,ml,jc,Gl={};;){if(this.defaultActions[Kr=mi[mi.length-1]]?au=this.defaultActions[Kr]:((null===_a||typeof _a>"u")&&(nl=void 0,"number"!=typeof(nl=wn.pop()||kr.lex()||1)&&(nl instanceof Array&&(nl=(wn=nl).pop()),nl=this.symbols_[nl]||nl),_a=nl),au=Ts[Kr]&&Ts[Kr][_a]),typeof au>"u"||!au.length||!au[0]){var $c;for(Nl in jc=[],Ts[Kr])this.terminals_[Nl]&&Nl>2&&jc.push("'"+this.terminals_[Nl]+"'");$c=kr.showPosition?"Parse error on line "+(hs+1)+":\n"+kr.showPosition()+"\nExpecting "+jc.join(", ")+", got '"+(this.terminals_[_a]||_a)+"'":"Parse error on line "+(hs+1)+": Unexpected "+(1==_a?"end of input":"'"+(this.terminals_[_a]||_a)+"'"),this.parseError($c,{text:kr.match,token:this.terminals_[_a]||_a,line:kr.yylineno,loc:Ns,expected:jc})}if(au[0]instanceof Array&&au.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Kr+", token: "+_a);switch(au[0]){case 1:mi.push(_a),er.push(kr.yytext),Kt.push(kr.yylloc),mi.push(au[1]),_a=null,$s=kr.yyleng,an=kr.yytext,hs=kr.yylineno,Ns=kr.yylloc;break;case 2:if(Gl.$=er[er.length-(ml=this.productions_[au[1]][1])],Gl._$={first_line:Kt[Kt.length-(ml||1)].first_line,last_line:Kt[Kt.length-1].last_line,first_column:Kt[Kt.length-(ml||1)].first_column,last_column:Kt[Kt.length-1].last_column},Gm&&(Gl._$.range=[Kt[Kt.length-(ml||1)].range[0],Kt[Kt.length-1].range[1]]),typeof(Ym=this.performAction.apply(Gl,[an,$s,hs,Qr.yy,au[1],er,Kt].concat(Zs)))<"u")return Ym;ml&&(mi=mi.slice(0,-1*ml*2),er=er.slice(0,-1*ml),Kt=Kt.slice(0,-1*ml)),mi.push(this.productions_[au[1]][0]),er.push(Gl.$),Kt.push(Gl._$),mi.push(Ts[mi[mi.length-2]][mi[mi.length-1]]);break;case 3:return!0}}return!0}};function Ar(){this.yy={}}return Oa.lexer=function(){return{EOF:1,parseError:function(Pn,mi){if(!this.yy.parser)throw new Error(Pn);this.yy.parser.parseError(Pn,mi)},setInput:function(jn,Pn){return this.yy=Pn||this.yy||{},this._input=jn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var jn=this._input[0];return this.yytext+=jn,this.yyleng++,this.offset++,this.match+=jn,this.matched+=jn,jn.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),jn},unput:function(jn){var Pn=jn.length,mi=jn.split(/(?:\r\n?|\n)/g);this._input=jn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pn),this.offset-=Pn;var wn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),mi.length-1&&(this.yylineno-=mi.length-1);var er=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:mi?(mi.length===wn.length?this.yylloc.first_column:0)+wn[wn.length-mi.length].length-mi[0].length:this.yylloc.first_column-Pn},this.options.ranges&&(this.yylloc.range=[er[0],er[0]+this.yyleng-Pn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(jn){this.unput(this.match.slice(jn))},pastInput:function(){var jn=this.matched.substr(0,this.matched.length-this.match.length);return(jn.length>20?"...":"")+jn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var jn=this.match;return jn.length<20&&(jn+=this._input.substr(0,20-jn.length)),(jn.substr(0,20)+(jn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var jn=this.pastInput(),Pn=new Array(jn.length+1).join("-");return jn+this.upcomingInput()+"\n"+Pn+"^"},test_match:function(jn,Pn){var mi,wn,er;if(this.options.backtrack_lexer&&(er={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(er.yylloc.range=this.yylloc.range.slice(0))),(wn=jn[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=wn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wn?wn[wn.length-1].length-wn[wn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+jn[0].length},this.yytext+=jn[0],this.match+=jn[0],this.matches=jn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(jn[0].length),this.matched+=jn[0],mi=this.performAction.call(this,this.yy,this,Pn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),mi)return mi;if(this._backtrack){for(var Kt in er)this[Kt]=er[Kt];return!1}return!1},next:function(){if(this.done)return this.EOF;var jn,Pn,mi,wn;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var er=this._currentRules(),Kt=0;Kt<er.length;Kt++)if((mi=this._input.match(this.rules[er[Kt]]))&&(!Pn||mi[0].length>Pn[0].length)){if(Pn=mi,wn=Kt,this.options.backtrack_lexer){if(!1!==(jn=this.test_match(mi,er[Kt])))return jn;if(this._backtrack){Pn=!1;continue}return!1}if(!this.options.flex)break}return Pn?!1!==(jn=this.test_match(Pn,er[wn]))&&jn:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Pn){this.conditionStack.push(Pn)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Pn){return(Pn=this.conditionStack.length-1-Math.abs(Pn||0))>=0?this.conditionStack[Pn]:"INITIAL"},pushState:function(Pn){this.begin(Pn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Pn,mi,wn,er){switch(wn){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 78:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:case 21:case 75:break;case 19:c;break;case 20:return 15;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:case 84:this.popState(),this.popState();break;case 74:case 76:return 90;case 77:this.begin("string");break;case 79:case 85:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}}}(),Ar.prototype=Oa,Oa.Parser=Ar,new Ar}();em.parser=em;const tm=em,ah=s=>null!==s.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let Vc=[],Cd=[""],Tc="global",Qu="",lh=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ch=[],Qp="",cy=!1,Zg=4,Qf=2;var Nb;const Jg=function(s){return null==s?Vc:Vc.filter(a=>a.parentBoundary===s)},Xh=function(){return cy},Jf={addPersonOrSystem:function(s,a,d,f,p,y,v){if(null===a||null===d)return;let w={};const C=Vc.find(D=>D.alias===a);if(C&&a===C.alias?w=C:(w.alias=a,Vc.push(w)),w.label=null==d?{text:""}:{text:d},null==f)w.descr={text:""};else if("object"==typeof f){let[D,V]=Object.entries(f)[0];w[D]={text:V}}else w.descr={text:f};if("object"==typeof p){let[D,V]=Object.entries(p)[0];w[D]=V}else w.sprite=p;if("object"==typeof y){let[D,V]=Object.entries(y)[0];w[D]=V}else w.tags=y;if("object"==typeof v){let[D,V]=Object.entries(v)[0];w[D]=V}else w.link=v;w.typeC4Shape={text:s},w.parentBoundary=Tc,w.wrap=Xh()},addPersonOrSystemBoundary:function(s,a,d,f,p){if(null===s||null===a)return;let y={};const v=lh.find(w=>w.alias===s);if(v&&s===v.alias?y=v:(y.alias=s,lh.push(y)),y.label=null==a?{text:""}:{text:a},null==d)y.type={text:"system"};else if("object"==typeof d){let[w,C]=Object.entries(d)[0];y[w]={text:C}}else y.type={text:d};if("object"==typeof f){let[w,C]=Object.entries(f)[0];y[w]=C}else y.tags=f;if("object"==typeof p){let[w,C]=Object.entries(p)[0];y[w]=C}else y.link=p;y.parentBoundary=Tc,y.wrap=Xh(),Qu=Tc,Tc=s,Cd.push(Qu)},addContainer:function(s,a,d,f,p,y,v,w){if(null===a||null===d)return;let C={};const D=Vc.find(V=>V.alias===a);if(D&&a===D.alias?C=D:(C.alias=a,Vc.push(C)),C.label=null==d?{text:""}:{text:d},null==f)C.techn={text:""};else if("object"==typeof f){let[V,W]=Object.entries(f)[0];C[V]={text:W}}else C.techn={text:f};if(null==p)C.descr={text:""};else if("object"==typeof p){let[V,W]=Object.entries(p)[0];C[V]={text:W}}else C.descr={text:p};if("object"==typeof y){let[V,W]=Object.entries(y)[0];C[V]=W}else C.sprite=y;if("object"==typeof v){let[V,W]=Object.entries(v)[0];C[V]=W}else C.tags=v;if("object"==typeof w){let[V,W]=Object.entries(w)[0];C[V]=W}else C.link=w;C.wrap=Xh(),C.typeC4Shape={text:s},C.parentBoundary=Tc},addContainerBoundary:function(s,a,d,f,p){if(null===s||null===a)return;let y={};const v=lh.find(w=>w.alias===s);if(v&&s===v.alias?y=v:(y.alias=s,lh.push(y)),y.label=null==a?{text:""}:{text:a},null==d)y.type={text:"container"};else if("object"==typeof d){let[w,C]=Object.entries(d)[0];y[w]={text:C}}else y.type={text:d};if("object"==typeof f){let[w,C]=Object.entries(f)[0];y[w]=C}else y.tags=f;if("object"==typeof p){let[w,C]=Object.entries(p)[0];y[w]=C}else y.link=p;y.parentBoundary=Tc,y.wrap=Xh(),Qu=Tc,Tc=s,Cd.push(Qu)},addComponent:function(s,a,d,f,p,y,v,w){if(null===a||null===d)return;let C={};const D=Vc.find(V=>V.alias===a);if(D&&a===D.alias?C=D:(C.alias=a,Vc.push(C)),C.label=null==d?{text:""}:{text:d},null==f)C.techn={text:""};else if("object"==typeof f){let[V,W]=Object.entries(f)[0];C[V]={text:W}}else C.techn={text:f};if(null==p)C.descr={text:""};else if("object"==typeof p){let[V,W]=Object.entries(p)[0];C[V]={text:W}}else C.descr={text:p};if("object"==typeof y){let[V,W]=Object.entries(y)[0];C[V]=W}else C.sprite=y;if("object"==typeof v){let[V,W]=Object.entries(v)[0];C[V]=W}else C.tags=v;if("object"==typeof w){let[V,W]=Object.entries(w)[0];C[V]=W}else C.link=w;C.wrap=Xh(),C.typeC4Shape={text:s},C.parentBoundary=Tc},addDeploymentNode:function(s,a,d,f,p,y,v,w){if(null===a||null===d)return;let C={};const D=lh.find(V=>V.alias===a);if(D&&a===D.alias?C=D:(C.alias=a,lh.push(C)),C.label=null==d?{text:""}:{text:d},null==f)C.type={text:"node"};else if("object"==typeof f){let[V,W]=Object.entries(f)[0];C[V]={text:W}}else C.type={text:f};if(null==p)C.descr={text:""};else if("object"==typeof p){let[V,W]=Object.entries(p)[0];C[V]={text:W}}else C.descr={text:p};if("object"==typeof v){let[V,W]=Object.entries(v)[0];C[V]=W}else C.tags=v;if("object"==typeof w){let[V,W]=Object.entries(w)[0];C[V]=W}else C.link=w;C.nodeType=s,C.parentBoundary=Tc,C.wrap=Xh(),Qu=Tc,Tc=a,Cd.push(Qu)},popBoundaryParseStack:function(){Tc=Qu,Cd.pop(),Qu=Cd.pop(),Cd.push(Qu)},addRel:function(s,a,d,f,p,y,v,w,C){if(null==s||null==a||null==d||null==f)return;let D={};const V=ch.find(W=>W.from===a&&W.to===d);if(V?D=V:ch.push(D),D.type=s,D.from=a,D.to=d,D.label={text:f},null==p)D.techn={text:""};else if("object"==typeof p){let[W,j]=Object.entries(p)[0];D[W]={text:j}}else D.techn={text:p};if(null==y)D.descr={text:""};else if("object"==typeof y){let[W,j]=Object.entries(y)[0];D[W]={text:j}}else D.descr={text:y};if("object"==typeof v){let[W,j]=Object.entries(v)[0];D[W]=j}else D.sprite=v;if("object"==typeof w){let[W,j]=Object.entries(w)[0];D[W]=j}else D.tags=w;if("object"==typeof C){let[W,j]=Object.entries(C)[0];D[W]=j}else D.link=C;D.wrap=Xh()},updateElStyle:function(s,a,d,f,p,y,v,w,C,D,V){let W=Vc.find(j=>j.alias===a);if(void 0!==W||(W=lh.find(j=>j.alias===a),void 0!==W)){if(null!=d)if("object"==typeof d){let[j,X]=Object.entries(d)[0];W[j]=X}else W.bgColor=d;if(null!=f)if("object"==typeof f){let[j,X]=Object.entries(f)[0];W[j]=X}else W.fontColor=f;if(null!=p)if("object"==typeof p){let[j,X]=Object.entries(p)[0];W[j]=X}else W.borderColor=p;if(null!=y)if("object"==typeof y){let[j,X]=Object.entries(y)[0];W[j]=X}else W.shadowing=y;if(null!=v)if("object"==typeof v){let[j,X]=Object.entries(v)[0];W[j]=X}else W.shape=v;if(null!=w)if("object"==typeof w){let[j,X]=Object.entries(w)[0];W[j]=X}else W.sprite=w;if(null!=C)if("object"==typeof C){let[j,X]=Object.entries(C)[0];W[j]=X}else W.techn=C;if(null!=D)if("object"==typeof D){let[j,X]=Object.entries(D)[0];W[j]=X}else W.legendText=D;if(null!=V)if("object"==typeof V){let[j,X]=Object.entries(V)[0];W[j]=X}else W.legendSprite=V}},updateRelStyle:function(s,a,d,f,p,y,v){const w=ch.find(C=>C.from===a&&C.to===d);if(void 0!==w){if(null!=f)if("object"==typeof f){let[C,D]=Object.entries(f)[0];w[C]=D}else w.textColor=f;if(null!=p)if("object"==typeof p){let[C,D]=Object.entries(p)[0];w[C]=D}else w.lineColor=p;if(null!=y)if("object"==typeof y){let[C,D]=Object.entries(y)[0];w[C]=parseInt(D)}else w.offsetX=parseInt(y);if(null!=v)if("object"==typeof v){let[C,D]=Object.entries(v)[0];w[C]=parseInt(D)}else w.offsetY=parseInt(v)}},updateLayoutConfig:function(s,a,d){let f=Zg,p=Qf;if("object"==typeof a){const y=Object.values(a)[0];f=parseInt(y)}else f=parseInt(a);if("object"==typeof d){const y=Object.values(d)[0];p=parseInt(y)}else p=parseInt(d);f>=1&&(Zg=f),p>=1&&(Qf=p)},autoWrap:Xh,setWrap:function(s){cy=s},getC4ShapeArray:Jg,getC4Shape:function(s){return Vc.find(a=>a.alias===s)},getC4ShapeKeys:function(s){return Object.keys(Jg(s))},getBoundarys:function(s){return null==s?lh:lh.filter(a=>a.parentBoundary===s)},getCurrentBoundaryParse:function(){return Tc},getParentBoundaryParse:function(){return Qu},getRels:function(){return ch},getTitle:function(){return Qp},getC4Type:function(){return Nb},getC4ShapeInRow:function(){return Zg},getC4BoundaryInRow:function(){return Qf},setAccTitle:Je,getAccTitle:pt,getAccDescription:Mt,setAccDescription:et,parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().c4,clear:function(){Vc=[],lh=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Qu="",Tc="global",Cd=[""],ch=[],Cd=[""],Qp="",cy=!1,Zg=4,Qf=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(s){Qp=An(s,ut())},setC4Type:function(s){Nb=An(s,ut())}},qh=function(s,a){const d=s.append("rect");if(d.attr("x",a.x),d.attr("y",a.y),d.attr("fill",a.fill),d.attr("stroke",a.stroke),d.attr("width",a.width),d.attr("height",a.height),d.attr("rx",a.rx),d.attr("ry",a.ry),"undefined"!==a.attrs&&null!==a.attrs)for(let f in a.attrs)d.attr(f,a.attrs[f]);return"undefined"!==a.class&&d.attr("class",a.class),d},Td=function(){function s(p,y,v,w,C,D,V){f(y.append("text").attr("x",v+C/2).attr("y",w+D/2+5).style("text-anchor","middle").text(p),V)}function a(p,y,v,w,C,D,V,W){const{fontSize:j,fontFamily:X,fontWeight:Ee}=W,Ie=p.split(tr.lineBreakRegex);for(let Pe=0;Pe<Ie.length;Pe++){const Ve=Pe*j-j*(Ie.length-1)/2,Ae=y.append("text").attr("x",v+C/2).attr("y",w).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",j).style("font-weight",Ee).style("font-family",X);Ae.append("tspan").attr("dy",Ve).text(Ie[Pe]).attr("alignment-baseline","mathematical"),f(Ae,V)}}function d(p,y,v,w,C,D,V,W){const j=y.append("switch"),Ee=j.append("foreignObject").attr("x",v).attr("y",w).attr("width",C).attr("height",D).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ee.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(p),a(p,j,v,w,C,0,V,W),f(Ee,V)}function f(p,y){for(const v in y)y.hasOwnProperty(v)&&p.attr(v,y[v])}return function(p){return"fo"===p.textPlacement?d:"old"===p.textPlacement?s:a}}(),Ju_drawC4Shape=function(s,a,d){var f;let p=a.bgColor?a.bgColor:d[a.typeC4Shape.text+"_bg_color"],y=a.borderColor?a.borderColor:d[a.typeC4Shape.text+"_border_color"],v=a.fontColor?a.fontColor:"#FFFFFF",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(a.typeC4Shape.text){case"person":w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const C=s.append("g");C.attr("class","person-man");const D={x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0};switch(a.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":D.x=a.x,D.y=a.y,D.fill=p,D.width=a.width,D.height=a.height,D.stroke=y,D.rx=2.5,D.ry=2.5,D.attrs={"stroke-width":.5},qh(C,D);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":C.append("path").attr("fill",p).attr("stroke-width","0.5").attr("stroke",y).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",a.x).replaceAll("starty",a.y).replaceAll("half",a.width/2).replaceAll("height",a.height)),C.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",y).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",a.x).replaceAll("starty",a.y).replaceAll("half",a.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":C.append("path").attr("fill",p).attr("stroke-width","0.5").attr("stroke",y).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",a.x).replaceAll("starty",a.y).replaceAll("width",a.width).replaceAll("half",a.height/2)),C.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",y).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",a.x+a.width).replaceAll("starty",a.y).replaceAll("half",a.height/2))}let V=((s,a)=>({fontFamily:s[a+"FontFamily"],fontSize:s[a+"FontSize"],fontWeight:s[a+"FontWeight"]}))(d,a.typeC4Shape.text);switch(C.append("text").attr("fill",v).attr("font-family",V.fontFamily).attr("font-size",V.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",a.typeC4Shape.width).attr("x",a.x+a.width/2-a.typeC4Shape.width/2).attr("y",a.y+a.typeC4Shape.Y).text("<<"+a.typeC4Shape.text+">>"),a.typeC4Shape.text){case"person":case"external_person":!function(s,a,d,f,p,y){const v=s.append("image");v.attr("width",a),v.attr("height",d),v.attr("x",f),v.attr("y",p);let w=y.startsWith("data:image/png;base64")?y:(0,A.J)(y);v.attr("xlink:href",w)}(C,48,48,a.x+a.width/2-24,a.y+a.image.Y,w)}let W=d[a.typeC4Shape.text+"Font"]();return W.fontWeight="bold",W.fontSize=W.fontSize+2,W.fontColor=v,Td(d)(a.label.text,C,a.x,a.y+a.label.Y,a.width,a.height,{fill:v},W),W=d[a.typeC4Shape.text+"Font"](),W.fontColor=v,a.techn&&""!==(null==(f=a.techn)?void 0:f.text)?Td(d)(a.techn.text,C,a.x,a.y+a.techn.Y,a.width,a.height,{fill:v,"font-style":"italic"},W):a.type&&""!==a.type.text&&Td(d)(a.type.text,C,a.x,a.y+a.type.Y,a.width,a.height,{fill:v,"font-style":"italic"},W),a.descr&&""!==a.descr.text&&(W=d.personFont(),W.fontColor=v,Td(d)(a.descr.text,C,a.x,a.y+a.descr.Y,a.width,a.height,{fill:v},W)),a.height};let im=0,t0=0,Cy=4,x1=2;em.yy=Jf;let fr={};class rm{constructor(a){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,sm(a.db.getConfig())}setData(a,d,f,p){this.nextData.startx=this.data.startx=a,this.nextData.stopx=this.data.stopx=d,this.nextData.starty=this.data.starty=f,this.nextData.stopy=this.data.stopy=p}updateVal(a,d,f,p){a[d]=void 0===a[d]?f:p(f,a[d])}insert(a){this.nextData.cnt=this.nextData.cnt+1;let d=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+a.margin:this.nextData.stopx+2*a.margin,f=d+a.width,p=this.nextData.starty+2*a.margin,y=p+a.height;(d>=this.data.widthLimit||f>=this.data.widthLimit||this.nextData.cnt>Cy)&&(d=this.nextData.startx+a.margin+fr.nextLinePaddingX,p=this.nextData.stopy+2*a.margin,this.nextData.stopx=f=d+a.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=y=p+a.height,this.nextData.cnt=1),a.x=d,a.y=p,this.updateVal(this.data,"startx",d,Math.min),this.updateVal(this.data,"starty",p,Math.min),this.updateVal(this.data,"stopx",f,Math.max),this.updateVal(this.data,"stopy",y,Math.max),this.updateVal(this.nextData,"startx",d,Math.min),this.updateVal(this.nextData,"starty",p,Math.min),this.updateVal(this.nextData,"stopx",f,Math.max),this.updateVal(this.nextData,"stopy",y,Math.max)}init(a){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},sm(a.db.getConfig())}bumpLastMargin(a){this.data.stopx+=a,this.data.stopy+=a}}const sm=function(s){Re(fr,s),s.fontFamily&&(fr.personFontFamily=fr.systemFontFamily=fr.messageFontFamily=s.fontFamily),s.fontSize&&(fr.personFontSize=fr.systemFontSize=fr.messageFontSize=s.fontSize),s.fontWeight&&(fr.personFontWeight=fr.systemFontWeight=fr.messageFontWeight=s.fontWeight)},fa=(s,a)=>({fontFamily:s[a+"FontFamily"],fontSize:s[a+"FontSize"],fontWeight:s[a+"FontWeight"]}),E1=s=>({fontFamily:s.boundaryFontFamily,fontSize:s.boundaryFontSize,fontWeight:s.boundaryFontWeight}),Ty=s=>({fontFamily:s.messageFontFamily,fontSize:s.messageFontSize,fontWeight:s.messageFontWeight});function xd(s,a,d,f,p){if(!a[s].width)if(d)a[s].text=Lr(a[s].text,p,f),a[s].textLines=a[s].text.split(tr.lineBreakRegex).length,a[s].width=p,a[s].height=Yp(a[s].text,f);else{let y=a[s].text.split(tr.lineBreakRegex);a[s].textLines=y.length;let v=0;a[s].height=0,a[s].width=0;for(const w of y)a[s].width=Math.max(Vl(w,f),a[s].width),v=Yp(w,f),a[s].height=a[s].height+v}}const om=function(s,a,d){a.x=d.data.startx,a.y=d.data.starty,a.width=d.data.stopx-d.data.startx,a.height=d.data.stopy-d.data.starty,a.label.y=fr.c4ShapeMargin-35;let f=a.wrap&&fr.wrap,p=E1(fr);p.fontSize=p.fontSize+2,p.fontWeight="bold",xd("label",a,f,p,Vl(a.label.text,p)),function(s,a,d){const f=s.append("g");let v=a.fontColor?a.fontColor:"black",w={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};a.nodeType&&(w={"stroke-width":1}),qh(f,{x:a.x,y:a.y,fill:a.bgColor?a.bgColor:"none",stroke:a.borderColor?a.borderColor:"#444444",width:a.width,height:a.height,rx:2.5,ry:2.5,attrs:w});let D=d.boundaryFont();D.fontWeight="bold",D.fontSize=D.fontSize+2,D.fontColor=v,Td(d)(a.label.text,f,a.x,a.y+a.label.Y,a.width,a.height,{fill:"#444444"},D),a.type&&""!==a.type.text&&(D=d.boundaryFont(),D.fontColor=v,Td(d)(a.type.text,f,a.x,a.y+a.type.Y,a.width,a.height,{fill:"#444444"},D)),a.descr&&""!==a.descr.text&&(D=d.boundaryFont(),D.fontSize=D.fontSize-2,D.fontColor=v,Td(d)(a.descr.text,f,a.x,a.y+a.descr.Y,a.width,a.height,{fill:"#444444"},D))}(s,a,fr)},ed=function(s,a,d,f){let p=0;for(const y of f){p=0;const v=d[y];let w=fa(fr,v.typeC4Shape.text);switch(w.fontSize=w.fontSize-2,v.typeC4Shape.width=Vl("<<"+v.typeC4Shape.text+">>",w),v.typeC4Shape.height=w.fontSize+2,v.typeC4Shape.Y=fr.c4ShapePadding,p=v.typeC4Shape.Y+v.typeC4Shape.height-4,v.image={width:0,height:0,Y:0},v.typeC4Shape.text){case"person":case"external_person":v.image.width=48,v.image.height=48,v.image.Y=p,p=v.image.Y+v.image.height}v.sprite&&(v.image.width=48,v.image.height=48,v.image.Y=p,p=v.image.Y+v.image.height);let C=v.wrap&&fr.wrap,D=fr.width-2*fr.c4ShapePadding,V=fa(fr,v.typeC4Shape.text);V.fontSize=V.fontSize+2,V.fontWeight="bold",xd("label",v,C,V,D),v.label.Y=p+8,p=v.label.Y+v.label.height,v.type&&""!==v.type.text?(v.type.text="["+v.type.text+"]",xd("type",v,C,fa(fr,v.typeC4Shape.text),D),v.type.Y=p+5,p=v.type.Y+v.type.height):v.techn&&""!==v.techn.text&&(v.techn.text="["+v.techn.text+"]",xd("techn",v,C,fa(fr,v.techn.text),D),v.techn.Y=p+5,p=v.techn.Y+v.techn.height);let W=p,j=v.label.width;v.descr&&""!==v.descr.text&&(xd("descr",v,C,fa(fr,v.typeC4Shape.text),D),v.descr.Y=p+20,p=v.descr.Y+v.descr.height,j=Math.max(v.label.width,v.descr.width),W=p-5*v.descr.textLines),j+=fr.c4ShapePadding,v.width=Math.max(v.width||fr.width,j,fr.width),v.height=Math.max(v.height||fr.height,W,fr.height),v.margin=v.margin||fr.c4ShapeMargin,s.insert(v),Ju_drawC4Shape(a,v,fr)}s.bumpLastMargin(fr.c4ShapeMargin)};class su{constructor(a,d){this.x=a,this.y=d}}let ku=function(s,a){let d=s.x,f=s.y,p=a.x,y=a.y,v=d+s.width/2,w=f+s.height/2,C=Math.abs(d-p),D=Math.abs(f-y),V=D/C,W=s.height/s.width,j=null;return f==y&&d<p?j=new su(d+s.width,w):f==y&&d>p?j=new su(d,w):d==p&&f<y?j=new su(v,f+s.height):d==p&&f>y&&(j=new su(v,f)),d>p&&f<y?j=W>=V?new su(d,w+V*s.width/2):new su(v-C/D*s.height/2,f+s.height):d<p&&f<y?j=W>=V?new su(d+s.width,w+V*s.width/2):new su(v+C/D*s.height/2,f+s.height):d<p&&f>y?j=W>=V?new su(d+s.width,w-V*s.width/2):new su(v+s.height/2*C/D,f):d>p&&f>y&&(j=W>=V?new su(d,w-s.width/2*V):new su(v-s.height/2*C/D,f)),j},zb=function(s,a){let d={x:0,y:0};d.x=a.x+a.width/2,d.y=a.y+a.height/2;let f=ku(s,d);return d.x=s.x+s.width/2,d.y=s.y+s.height/2,{startPoint:f,endPoint:ku(a,d)}};function S1(s,a,d,f,p){let y=new rm(p);y.data.widthLimit=d.data.widthLimit/Math.min(x1,f.length);for(let[v,w]of f.entries()){let C=0;w.image={width:0,height:0,Y:0},w.sprite&&(w.image.width=48,w.image.height=48,w.image.Y=C,C=w.image.Y+w.image.height);let D=w.wrap&&fr.wrap,V=E1(fr);if(V.fontSize=V.fontSize+2,V.fontWeight="bold",xd("label",w,D,V,y.data.widthLimit),w.label.Y=C+8,C=w.label.Y+w.label.height,w.type&&""!==w.type.text&&(w.type.text="["+w.type.text+"]",xd("type",w,D,E1(fr),y.data.widthLimit),w.type.Y=C+5,C=w.type.Y+w.type.height),w.descr&&""!==w.descr.text){let Ee=E1(fr);Ee.fontSize=Ee.fontSize-2,xd("descr",w,D,Ee,y.data.widthLimit),w.descr.Y=C+20,C=w.descr.Y+w.descr.height}if(0==v||v%x1==0){let Ee=d.data.startx+fr.diagramMarginX,Ie=d.data.stopy+fr.diagramMarginY+C;y.setData(Ee,Ee,Ie,Ie)}else{let Ee=y.data.stopx!==y.data.startx?y.data.stopx+fr.diagramMarginX:y.data.startx,Ie=y.data.starty;y.setData(Ee,Ee,Ie,Ie)}y.name=w.alias;let W=p.db.getC4ShapeArray(w.alias),j=p.db.getC4ShapeKeys(w.alias);j.length>0&&ed(y,s,W,j);let X=p.db.getBoundarys(a=w.alias);X.length>0&&S1(s,a,y,X,p),"global"!==w.alias&&om(s,w,y),d.data.stopy=Math.max(y.data.stopy+fr.c4ShapeMargin,d.data.stopy),d.data.stopx=Math.max(y.data.stopx+fr.c4ShapeMargin,d.data.stopx),im=Math.max(im,d.data.stopx),t0=Math.max(t0,d.data.stopy)}}const jb={drawPersonOrSystemArray:ed,drawBoundary:om,setConf:sm,draw:function(s,a,d,f){fr=ut().c4;const p=ut().securityLevel;let y;"sandbox"===p&&(y=(0,F.Ltv)("#i"+a));const v=(0,F.Ltv)("sandbox"===p?y.nodes()[0].contentDocument.body:"body");let w=f.db;f.db.setWrap(fr.wrap),Cy=w.getC4ShapeInRow(),x1=w.getC4BoundaryInRow(),Me.debug(`C:${JSON.stringify(fr,null,2)}`);const C="sandbox"===p?v.select(`[id="${a}"]`):(0,F.Ltv)(`[id="${a}"]`);(function(s){s.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")})(C),function(s){s.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")}(C),function(s){s.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")}(C);let D=new rm(f);D.setData(fr.diagramMarginX,fr.diagramMarginX,fr.diagramMarginY,fr.diagramMarginY),D.data.widthLimit=screen.availWidth,im=fr.diagramMarginX,t0=fr.diagramMarginY;const V=f.db.getTitle();S1(C,"",D,f.db.getBoundarys(""),f),function(s){s.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")}(C),function(s){s.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")}(C),function(s){const d=s.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);d.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),d.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")}(C),function(s){s.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}(C),function(s,a,d,f){let p=0;for(let y of a){p+=1;let v=y.wrap&&fr.wrap,w=Ty(fr);"C4Dynamic"===f.db.getC4Type()&&(y.label.text=p+": "+y.label.text);let D=Vl(y.label.text,w);xd("label",y,v,w,D),y.techn&&""!==y.techn.text&&(D=Vl(y.techn.text,w),xd("techn",y,v,w,D)),y.descr&&""!==y.descr.text&&(D=Vl(y.descr.text,w),xd("descr",y,v,w,D));let V=d(y.from),W=d(y.to),j=zb(V,W);y.startPoint=j.startPoint,y.endPoint=j.endPoint}((s,a,d)=>{const f=s.append("g");let p=0;for(let y of a){let v=y.textColor?y.textColor:"#444444",w=y.lineColor?y.lineColor:"#444444",C=y.offsetX?parseInt(y.offsetX):0,D=y.offsetY?parseInt(y.offsetY):0,V="";if(0===p){let j=f.append("line");j.attr("x1",y.startPoint.x),j.attr("y1",y.startPoint.y),j.attr("x2",y.endPoint.x),j.attr("y2",y.endPoint.y),j.attr("stroke-width","1"),j.attr("stroke",w),j.style("fill","none"),"rel_b"!==y.type&&j.attr("marker-end","url("+V+"#arrowhead)"),("birel"===y.type||"rel_b"===y.type)&&j.attr("marker-start","url("+V+"#arrowend)"),p=-1}else{let j=f.append("path");j.attr("fill","none").attr("stroke-width","1").attr("stroke",w).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",y.startPoint.x).replaceAll("starty",y.startPoint.y).replaceAll("controlx",y.startPoint.x+(y.endPoint.x-y.startPoint.x)/2-(y.endPoint.x-y.startPoint.x)/4).replaceAll("controly",y.startPoint.y+(y.endPoint.y-y.startPoint.y)/2).replaceAll("stopx",y.endPoint.x).replaceAll("stopy",y.endPoint.y)),"rel_b"!==y.type&&j.attr("marker-end","url("+V+"#arrowhead)"),("birel"===y.type||"rel_b"===y.type)&&j.attr("marker-start","url("+V+"#arrowend)")}let W=d.messageFont();Td(d)(y.label.text,f,Math.min(y.startPoint.x,y.endPoint.x)+Math.abs(y.endPoint.x-y.startPoint.x)/2+C,Math.min(y.startPoint.y,y.endPoint.y)+Math.abs(y.endPoint.y-y.startPoint.y)/2+D,y.label.width,y.label.height,{fill:v},W),y.techn&&""!==y.techn.text&&(W=d.messageFont(),Td(d)("["+y.techn.text+"]",f,Math.min(y.startPoint.x,y.endPoint.x)+Math.abs(y.endPoint.x-y.startPoint.x)/2+C,Math.min(y.startPoint.y,y.endPoint.y)+Math.abs(y.endPoint.y-y.startPoint.y)/2+d.messageFontSize+5+D,Math.max(y.label.width,y.techn.width),y.techn.height,{fill:v,"font-style":"italic"},W))}})(s,a,fr)}(C,f.db.getRels(),f.db.getC4Shape,f),D.data.stopx=im,D.data.stopy=t0;const j=D.data;let Ee=j.stopy-j.starty+2*fr.diagramMarginY;const Pe=j.stopx-j.startx+2*fr.diagramMarginX;V&&C.append("text").text(V).attr("x",(j.stopx-j.startx)/2-4*fr.diagramMarginX).attr("y",j.starty+fr.diagramMarginY),tu(C,Ee,Pe,fr.useMaxWidth);const Ve=V?60:0;C.attr("viewBox",j.startx-fr.diagramMarginX+" -"+(fr.diagramMarginY+Ve)+" "+Pe+" "+(Ee+Ve)),Me.debug("models:",j)}};var xy=function(){var s=function(Ht,lt,Ye,ct){for(Ye=Ye||{},ct=Ht.length;ct--;Ye[Ht[ct]]=lt);return Ye},a=[1,3],d=[1,7],f=[1,8],p=[1,9],y=[1,10],v=[1,13],w=[1,12],C=[1,16,25],D=[1,20],V=[1,32],W=[1,33],j=[1,34],X=[1,36],Ee=[1,39],Ie=[1,37],Pe=[1,38],Ve=[1,44],Ae=[1,45],Qe=[1,40],vt=[1,41],Ft=[1,42],Qt=[1,43],st=[1,48],rt=[1,49],Ue=[1,50],qe=[1,51],$e=[16,25],pe=[1,65],Ke=[1,66],J=[1,67],dt=[1,68],ae=[1,69],Ct=[1,70],Jn=[1,71],Xt=[1,80],Jt=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],L=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],P=[5,8,9,10,11,16,19,23,25],it=[54,88,89,90,91],Hn=[54,65,66,88,89,90,91],Dn=[54,60,61,62,63,64,88,89,90,91],Pt=[16,25,32],nr=[1,107],xt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(lt,Ye,ct,Oe,bn,xe,gr){var Ut=xe.length-1;switch(bn){case 5:Oe.setDirection("TB");break;case 6:Oe.setDirection("BT");break;case 7:Oe.setDirection("RL");break;case 8:Oe.setDirection("LR");break;case 12:Oe.parseDirective("%%{","open_directive");break;case 13:Oe.parseDirective(xe[Ut],"type_directive");break;case 14:xe[Ut]=xe[Ut].trim().replace(/'/g,'"'),Oe.parseDirective(xe[Ut],"arg_directive");break;case 15:Oe.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=xe[Ut];break;case 22:this.$=xe[Ut-1]+xe[Ut];break;case 23:case 24:this.$=xe[Ut-1]+"~"+xe[Ut];break;case 25:Oe.addRelation(xe[Ut]);break;case 26:xe[Ut-1].title=Oe.cleanupLabel(xe[Ut]),Oe.addRelation(xe[Ut-1]);break;case 35:this.$=xe[Ut].trim(),Oe.setAccTitle(this.$);break;case 36:case 37:this.$=xe[Ut].trim(),Oe.setAccDescription(this.$);break;case 38:Oe.addClass(xe[Ut]);break;case 39:Oe.addClass(xe[Ut-2]),Oe.setCssClass(xe[Ut-2],xe[Ut]);break;case 40:Oe.addClass(xe[Ut-3]),Oe.addMembers(xe[Ut-3],xe[Ut-1]);break;case 41:Oe.addClass(xe[Ut-5]),Oe.setCssClass(xe[Ut-5],xe[Ut-3]),Oe.addMembers(xe[Ut-5],xe[Ut-1]);break;case 42:Oe.addAnnotation(xe[Ut],xe[Ut-2]);break;case 43:this.$=[xe[Ut]];break;case 44:xe[Ut].push(xe[Ut-1]),this.$=xe[Ut];break;case 45:case 47:case 48:break;case 46:Oe.addMember(xe[Ut-1],Oe.cleanupLabel(xe[Ut]));break;case 49:this.$={id1:xe[Ut-2],id2:xe[Ut],relation:xe[Ut-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:xe[Ut-3],id2:xe[Ut],relation:xe[Ut-1],relationTitle1:xe[Ut-2],relationTitle2:"none"};break;case 51:this.$={id1:xe[Ut-3],id2:xe[Ut],relation:xe[Ut-2],relationTitle1:"none",relationTitle2:xe[Ut-1]};break;case 52:this.$={id1:xe[Ut-4],id2:xe[Ut],relation:xe[Ut-2],relationTitle1:xe[Ut-3],relationTitle2:xe[Ut-1]};break;case 53:Oe.addNote(xe[Ut],xe[Ut-1]);break;case 54:Oe.addNote(xe[Ut]);break;case 55:this.$={type1:xe[Ut-2],type2:xe[Ut],lineType:xe[Ut-1]};break;case 56:this.$={type1:"none",type2:xe[Ut],lineType:xe[Ut-1]};break;case 57:this.$={type1:xe[Ut-1],type2:"none",lineType:xe[Ut]};break;case 58:this.$={type1:"none",type2:"none",lineType:xe[Ut]};break;case 59:this.$=Oe.relationType.AGGREGATION;break;case 60:this.$=Oe.relationType.EXTENSION;break;case 61:this.$=Oe.relationType.COMPOSITION;break;case 62:this.$=Oe.relationType.DEPENDENCY;break;case 63:this.$=Oe.relationType.LOLLIPOP;break;case 64:this.$=Oe.lineType.LINE;break;case 65:this.$=Oe.lineType.DOTTED_LINE;break;case 66:case 72:this.$=xe[Ut-2],Oe.setClickEvent(xe[Ut-1],xe[Ut]);break;case 67:case 73:this.$=xe[Ut-3],Oe.setClickEvent(xe[Ut-2],xe[Ut-1]),Oe.setTooltip(xe[Ut-2],xe[Ut]);break;case 68:case 76:this.$=xe[Ut-2],Oe.setLink(xe[Ut-1],xe[Ut]);break;case 69:case 77:this.$=xe[Ut-3],Oe.setLink(xe[Ut-2],xe[Ut-1],xe[Ut]);break;case 70:case 78:this.$=xe[Ut-3],Oe.setLink(xe[Ut-2],xe[Ut-1]),Oe.setTooltip(xe[Ut-2],xe[Ut]);break;case 71:case 79:this.$=xe[Ut-4],Oe.setLink(xe[Ut-3],xe[Ut-2],xe[Ut]),Oe.setTooltip(xe[Ut-3],xe[Ut-1]);break;case 74:this.$=xe[Ut-3],Oe.setClickEvent(xe[Ut-2],xe[Ut-1],xe[Ut]);break;case 75:this.$=xe[Ut-4],Oe.setClickEvent(xe[Ut-3],xe[Ut-2],xe[Ut-1]),Oe.setTooltip(xe[Ut-3],xe[Ut]);break;case 80:Oe.setCssClass(xe[Ut-1],xe[Ut])}},table:[{3:1,4:2,5:a,6:4,7:5,8:d,9:f,10:p,11:y,12:6,13:11,19:v,23:w},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:a,6:4,7:5,8:d,9:f,10:p,11:y,12:6,13:11,19:v,23:w},{1:[2,9]},s(C,[2,5]),s(C,[2,6]),s(C,[2,7]),s(C,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:D},s([17,22],[2,13]),{6:31,7:30,8:d,9:f,10:p,11:y,13:11,19:v,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:W,43:j,44:X,49:Ee,51:Ie,52:Pe,55:Ve,57:Ae,67:Qe,68:vt,70:Ft,74:Qt,88:st,89:rt,90:Ue,91:qe},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},s($e,[2,25],{32:[1,57]}),s($e,[2,27]),s($e,[2,28]),s($e,[2,29]),s($e,[2,30]),s($e,[2,31]),s($e,[2,32]),s($e,[2,33]),s($e,[2,34]),{40:[1,58]},{42:[1,59]},s($e,[2,37]),s($e,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:pe,61:Ke,62:J,63:dt,64:ae,65:Ct,66:Jn}),{27:72,28:46,29:47,88:st,89:rt,90:Ue,91:qe},s($e,[2,47]),s($e,[2,48]),{28:73,88:st,89:rt,90:Ue},{27:74,28:46,29:47,88:st,89:rt,90:Ue,91:qe},{27:75,28:46,29:47,88:st,89:rt,90:Ue,91:qe},{27:76,28:46,29:47,88:st,89:rt,90:Ue,91:qe},{54:[1,77]},{27:78,28:46,29:47,88:st,89:rt,90:Ue,91:qe},{54:Xt,56:79},s(Jt,[2,20],{28:46,29:47,27:81,30:[1,82],88:st,89:rt,90:Ue,91:qe}),s(Jt,[2,21],{30:[1,83]}),s(L,[2,94]),s(L,[2,95]),s(L,[2,96]),s([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),s(P,[2,10]),{15:84,22:D},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:d,9:f,10:p,11:y,13:11,19:v,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:W,43:j,44:X,49:Ee,51:Ie,52:Pe,55:Ve,57:Ae,67:Qe,68:vt,70:Ft,74:Qt,88:st,89:rt,90:Ue,91:qe},s($e,[2,26]),s($e,[2,35]),s($e,[2,36]),{27:86,28:46,29:47,54:[1,87],88:st,89:rt,90:Ue,91:qe},{53:88,58:63,59:64,60:pe,61:Ke,62:J,63:dt,64:ae,65:Ct,66:Jn},s($e,[2,46]),{59:89,65:Ct,66:Jn},s(it,[2,58],{58:90,60:pe,61:Ke,62:J,63:dt,64:ae}),s(Hn,[2,59]),s(Hn,[2,60]),s(Hn,[2,61]),s(Hn,[2,62]),s(Hn,[2,63]),s(Dn,[2,64]),s(Dn,[2,65]),s($e,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:st,89:rt,90:Ue},{54:Xt,56:99},s($e,[2,54]),s($e,[2,98]),s(Jt,[2,22]),s(Jt,[2,23]),s(Jt,[2,24]),{16:[1,100]},{25:[2,19]},s(Pt,[2,49]),{27:101,28:46,29:47,88:st,89:rt,90:Ue,91:qe},{27:102,28:46,29:47,54:[1,103],88:st,89:rt,90:Ue,91:qe},s(it,[2,57],{58:104,60:pe,61:Ke,62:J,63:dt,64:ae}),s(it,[2,56]),{28:105,88:st,89:rt,90:Ue},{47:106,51:nr},{27:108,28:46,29:47,88:st,89:rt,90:Ue,91:qe},s($e,[2,66],{54:[1,109]}),s($e,[2,68],{54:[1,111],69:[1,110]}),s($e,[2,72],{54:[1,112],72:[1,113]}),s($e,[2,76],{54:[1,115],69:[1,114]}),s($e,[2,80]),s($e,[2,53]),s(P,[2,11]),s(Pt,[2,51]),s(Pt,[2,50]),{27:116,28:46,29:47,88:st,89:rt,90:Ue,91:qe},s(it,[2,55]),s($e,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:nr},s($e,[2,42]),s($e,[2,67]),s($e,[2,69]),s($e,[2,70],{69:[1,120]}),s($e,[2,73]),s($e,[2,74],{54:[1,121]}),s($e,[2,77]),s($e,[2,78],{69:[1,122]}),s(Pt,[2,52]),{47:123,51:nr},s($e,[2,40]),{48:[2,44]},s($e,[2,71]),s($e,[2,75]),s($e,[2,79]),{48:[1,124]},s($e,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(lt,Ye){if(!Ye.recoverable){var ct=new Error(lt);throw ct.hash=Ye,ct}this.trace(lt)},parse:function(lt){var ct=[0],Oe=[],bn=[null],xe=[],gr=this.table,Ut="",ui=0,qn=0,Rn=xe.slice.call(arguments,1),En=Object.create(this.lexer),Bn={yy:{}};for(var Sr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Sr)&&(Bn.yy[Sr]=this.yy[Sr]);En.setInput(lt,Bn.yy),Bn.yy.lexer=En,Bn.yy.parser=this,typeof En.yylloc>"u"&&(En.yylloc={});var js=En.yylloc;xe.push(js);var Kt,wr=En.options&&En.options.ranges;this.parseError="function"==typeof Bn.yy.parseError?Bn.yy.parseError:Object.getPrototypeOf(this).parseError;for(var es,Oa,Vs,Ar,jn,Pn,wn,Ei={};;){if(this.defaultActions[Oa=ct[ct.length-1]]?Vs=this.defaultActions[Oa]:((null===es||typeof es>"u")&&(Kt=void 0,"number"!=typeof(Kt=Oe.pop()||En.lex()||1)&&(Kt instanceof Array&&(Kt=(Oe=Kt).pop()),Kt=this.symbols_[Kt]||Kt),es=Kt),Vs=gr[Oa]&&gr[Oa][es]),typeof Vs>"u"||!Vs.length||!Vs[0]){var er;for(jn in wn=[],gr[Oa])this.terminals_[jn]&&jn>2&&wn.push("'"+this.terminals_[jn]+"'");er=En.showPosition?"Parse error on line "+(ui+1)+":\n"+En.showPosition()+"\nExpecting "+wn.join(", ")+", got '"+(this.terminals_[es]||es)+"'":"Parse error on line "+(ui+1)+": Unexpected "+(1==es?"end of input":"'"+(this.terminals_[es]||es)+"'"),this.parseError(er,{text:En.match,token:this.terminals_[es]||es,line:En.yylineno,loc:js,expected:wn})}if(Vs[0]instanceof Array&&Vs.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Oa+", token: "+es);switch(Vs[0]){case 1:ct.push(es),bn.push(En.yytext),xe.push(En.yylloc),ct.push(Vs[1]),es=null,qn=En.yyleng,Ut=En.yytext,ui=En.yylineno,js=En.yylloc;break;case 2:if(Ei.$=bn[bn.length-(Pn=this.productions_[Vs[1]][1])],Ei._$={first_line:xe[xe.length-(Pn||1)].first_line,last_line:xe[xe.length-1].last_line,first_column:xe[xe.length-(Pn||1)].first_column,last_column:xe[xe.length-1].last_column},wr&&(Ei._$.range=[xe[xe.length-(Pn||1)].range[0],xe[xe.length-1].range[1]]),typeof(Ar=this.performAction.apply(Ei,[Ut,qn,ui,Bn.yy,Vs[1],bn,xe].concat(Rn)))<"u")return Ar;Pn&&(ct=ct.slice(0,-1*Pn*2),bn=bn.slice(0,-1*Pn),xe=xe.slice(0,-1*Pn)),ct.push(this.productions_[Vs[1]][0]),bn.push(Ei.$),xe.push(Ei._$),ct.push(gr[ct[ct.length-2]][ct[ct.length-1]]);break;case 3:return!0}}return!0}};function Wt(){this.yy={}}return xt.lexer=function(){return{EOF:1,parseError:function(Ye,ct){if(!this.yy.parser)throw new Error(Ye);this.yy.parser.parseError(Ye,ct)},setInput:function(lt,Ye){return this.yy=Ye||this.yy||{},this._input=lt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var lt=this._input[0];return this.yytext+=lt,this.yyleng++,this.offset++,this.match+=lt,this.matched+=lt,lt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),lt},unput:function(lt){var Ye=lt.length,ct=lt.split(/(?:\r\n?|\n)/g);this._input=lt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ye),this.offset-=Ye;var Oe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ct.length-1&&(this.yylineno-=ct.length-1);var bn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ct?(ct.length===Oe.length?this.yylloc.first_column:0)+Oe[Oe.length-ct.length].length-ct[0].length:this.yylloc.first_column-Ye},this.options.ranges&&(this.yylloc.range=[bn[0],bn[0]+this.yyleng-Ye]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(lt){this.unput(this.match.slice(lt))},pastInput:function(){var lt=this.matched.substr(0,this.matched.length-this.match.length);return(lt.length>20?"...":"")+lt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var lt=this.match;return lt.length<20&&(lt+=this._input.substr(0,20-lt.length)),(lt.substr(0,20)+(lt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var lt=this.pastInput(),Ye=new Array(lt.length+1).join("-");return lt+this.upcomingInput()+"\n"+Ye+"^"},test_match:function(lt,Ye){var ct,Oe,bn;if(this.options.backtrack_lexer&&(bn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(bn.yylloc.range=this.yylloc.range.slice(0))),(Oe=lt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Oe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Oe?Oe[Oe.length-1].length-Oe[Oe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+lt[0].length},this.yytext+=lt[0],this.match+=lt[0],this.matches=lt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(lt[0].length),this.matched+=lt[0],ct=this.performAction.call(this,this.yy,this,Ye,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ct)return ct;if(this._backtrack){for(var xe in bn)this[xe]=bn[xe];return!1}return!1},next:function(){if(this.done)return this.EOF;var lt,Ye,ct,Oe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var bn=this._currentRules(),xe=0;xe<bn.length;xe++)if((ct=this._input.match(this.rules[bn[xe]]))&&(!Ye||ct[0].length>Ye[0].length)){if(Ye=ct,Oe=xe,this.options.backtrack_lexer){if(!1!==(lt=this.test_match(ct,bn[xe])))return lt;if(this._backtrack){Ye=!1;continue}return!1}if(!this.options.flex)break}return Ye?!1!==(lt=this.test_match(Ye,bn[Oe]))&&lt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ye){this.conditionStack.push(Ye)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ye){return(Ye=this.conditionStack.length-1-Math.abs(Ye||0))>=0?this.conditionStack[Ye]:"INITIAL"},pushState:function(Ye){this.begin(Ye)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ye,ct,Oe,bn){switch(Oe){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:case 19:case 27:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 39:case 42:case 45:case 48:case 51:case 54:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 20:case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 43:return"STR";case 44:this.begin("bqstring");break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 49:return 73;case 50:this.begin("callback_name");break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 55:return 72;case 56:case 57:case 58:case 59:return 69;case 60:case 61:return 61;case 62:case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}}}(),Wt.prototype=xt,xt.Parser=Wt,new Wt}();xy.parser=xy;const $b=xy,eT=(s,a)=>{var d;return"dagre-wrapper"!==(null==(d=a?.class)?void 0:d.defaultRenderer)&&null!==s.match(/^\s*classDiagram/)},Wb=(s,a)=>{var d;return null!==s.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(d=a?.class)?void 0:d.defaultRenderer)||null!==s.match(/^\s*classDiagram-v2/)},Kh="classid-";let Ks=[],Ma={},am=[],lm=0,mr=[];const n0=s=>tr.sanitizeText(s,ut()),uh=function(s){let a="",d=s;if(s.indexOf("~")>0){let f=s.split("~");d=f[0],a=tr.sanitizeText(f[1],ut())}return{className:d,type:a}},k1=function(s){let a=uh(s);void 0===Ma[a.className]&&(Ma[a.className]={id:a.className,type:a.type,cssClasses:[],methods:[],members:[],annotations:[],domId:Kh+a.className+"-"+lm},lm++)},cm=function(s){const a=Object.keys(Ma);for(const d of a)if(Ma[d].id===s)return Ma[d].domId},M1=function(s,a){const d=uh(s).className,f=Ma[d];if("string"==typeof a){const p=a.trim();p.startsWith("<<")&&p.endsWith(">>")?f.annotations.push(n0(p.substring(2,p.length-2))):p.indexOf(")")>0?f.methods.push(n0(p)):p&&f.members.push(n0(p))}},ig=function(s,a){s.split(",").forEach(function(d){let f=d;d[0].match(/\d/)&&(f=Kh+f),void 0!==Ma[f]&&Ma[f].cssClasses.push(a)})},um=function(s){let a=(0,F.Ltv)(".mermaidTooltip");null===(a._groups||a)[0][0]&&(a=(0,F.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,F.Ltv)(s).select("svg").selectAll("g.node").on("mouseover",function(){const p=(0,F.Ltv)(this);if(null===p.attr("title"))return;const v=this.getBoundingClientRect();a.transition().duration(200).style("opacity",".9"),a.text(p.attr("title")).style("left",window.scrollX+v.left+(v.right-v.left)/2+"px").style("top",window.scrollY+v.top-14+document.body.scrollTop+"px"),a.html(a.html().replace(/&lt;br\/&gt;/g,"<br/>")),p.classed("hover",!0)}).on("mouseout",function(){a.transition().duration(500).style("opacity",0),(0,F.Ltv)(this).classed("hover",!1)})};mr.push(um);let Du="TB";const Ed={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},setAccTitle:Je,getAccTitle:pt,getAccDescription:Mt,setAccDescription:et,getConfig:()=>ut().class,addClass:k1,bindFunctions:function(s){mr.forEach(function(a){a(s)})},clear:function(){Ks=[],Ma={},am=[],mr=[],mr.push(um),je()},getClass:function(s){return Ma[s]},getClasses:function(){return Ma},getNotes:function(){return am},addAnnotation:function(s,a){const d=uh(s).className;Ma[d].annotations.push(a)},addNote:function(s,a){am.push({id:`note${am.length}`,class:a,text:s})},getRelations:function(){return Ks},addRelation:function(s){Me.debug("Adding relation: "+JSON.stringify(s)),k1(s.id1),k1(s.id2),s.id1=uh(s.id1).className,s.id2=uh(s.id2).className,s.relationTitle1=tr.sanitizeText(s.relationTitle1.trim(),ut()),s.relationTitle2=tr.sanitizeText(s.relationTitle2.trim(),ut()),Ks.push(s)},getDirection:()=>Du,setDirection:s=>{Du=s},addMember:M1,addMembers:function(s,a){Array.isArray(a)&&(a.reverse(),a.forEach(d=>M1(s,d)))},cleanupLabel:function(s){return":"===s.substring(0,1)?tr.sanitizeText(s.substr(1).trim(),ut()):n0(s.trim())},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setClickEvent:function(s,a,d){s.split(",").forEach(function(f){(function(s,a,d){const f=ut();let p=s,y=cm(p);if("loose"===f.securityLevel&&void 0!==a&&void 0!==Ma[p]){let v=[];if("string"==typeof d){v=d.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let w=0;w<v.length;w++){let C=v[w].trim();'"'===C.charAt(0)&&'"'===C.charAt(C.length-1)&&(C=C.substr(1,C.length-2)),v[w]=C}}0===v.length&&v.push(y),mr.push(function(){const w=document.querySelector(`[id="${y}"]`);null!==w&&w.addEventListener("click",function(){Br.runFunc(a,...v)},!1)})}})(f,a,d),Ma[f].haveCallback=!0}),ig(s,"clickable")},setCssClass:ig,setLink:function(s,a,d){const f=ut();s.split(",").forEach(function(p){let y=p;p[0].match(/\d/)&&(y=Kh+y),void 0!==Ma[y]&&(Ma[y].link=Br.formatUrl(a,f),Ma[y].linkTarget="sandbox"===f.securityLevel?"_top":"string"==typeof d?n0(d):"_blank")}),ig(s,"clickable")},getTooltip:function(s){return Ma[s].tooltip},setTooltip:function(s,a){const d=ut();s.split(",").forEach(function(f){void 0!==a&&(Ma[f].tooltip=tr.sanitizeText(a,d))})},lookUpDomId:cm,setDiagramTitle:Nt,getDiagramTitle:cn};let a0=0;const np=function(s){let f=s.match(/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/),p=s.match(/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/);return f&&!p?hm(f):p?Sd(p):Ay(s)},hm=function(s){let a="",d="";try{let f=s[1]?s[1].trim():"",p=s[2]?s[2].trim():"",y=s[3]?vl(s[3].trim()):"",v=s[4]?s[4].trim():"",w=s[5]?s[5].trim():"";d=f+p+y+" "+v,a=pm(w)}catch{d=s}return{displayText:d,cssStyle:a}},Sd=function(s){let a="",d="";try{let f=s[1]?s[1].trim():"",p=s[2]?s[2].trim():"",y=s[3]?vl(s[3].trim()):"",v=s[4]?s[4].trim():"";d=f+p+"("+y+")"+(s[5]?" : "+vl(s[5]).trim():""),a=pm(v)}catch{d=s}return{displayText:d,cssStyle:a}},Ay=function(s){let a="",d="",f="",p=s.indexOf("("),y=s.indexOf(")");if(p>1&&y>p&&y<=s.length){let v="",w="",C=s.substring(0,1);C.match(/\w/)?w=s.substring(0,p).trim():(C.match(/[#+~-]/)&&(v=C),w=s.substring(1,p).trim());const D=s.substring(p+1,y);s.substring(y+1,1),d=pm(s.substring(y+1,y+2)),a=v+w+"("+vl(D.trim())+")",y<s.length&&(f=s.substring(y+2).trim(),""!==f&&(f=" : "+vl(f),a+=f))}else a=vl(s);return{displayText:a,cssStyle:d}},fm=function(s,a,d,f){let p=np(a);const y=s.append("tspan").attr("x",f.padding).text(p.displayText);""!==p.cssStyle&&y.attr("style",p.cssStyle),d||y.attr("dy",f.textHeight)},pm=function(s){switch(s){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},ip_drawClass=function(s,a,d,f){Me.debug("Rendering class ",a,d);const p=a.id,y={id:p,label:a.id,width:0,height:0},v=s.append("g").attr("id",f.db.lookUpDomId(p)).attr("class","classGroup");let w;w=a.link?v.append("svg:a").attr("xlink:href",a.link).attr("target",a.linkTarget).append("text").attr("y",d.textHeight+d.padding).attr("x",0):v.append("text").attr("y",d.textHeight+d.padding).attr("x",0);let C=!0;a.annotations.forEach(function(Ft){const Qt=w.append("tspan").text("\xab"+Ft+"\xbb");C||Qt.attr("dy",d.textHeight),C=!1});let D=a.id;void 0!==a.type&&""!==a.type&&(D+="<"+a.type+">");const V=w.append("tspan").text(D).attr("class","title");C||V.attr("dy",d.textHeight);const W=w.node().getBBox().height,j=v.append("line").attr("x1",0).attr("y1",d.padding+W+d.dividerMargin/2).attr("y2",d.padding+W+d.dividerMargin/2),X=v.append("text").attr("x",d.padding).attr("y",W+d.dividerMargin+d.textHeight).attr("fill","white").attr("class","classText");C=!0,a.members.forEach(function(Ft){fm(X,Ft,C,d),C=!1});const Ee=X.node().getBBox(),Ie=v.append("line").attr("x1",0).attr("y1",d.padding+W+d.dividerMargin+Ee.height).attr("y2",d.padding+W+d.dividerMargin+Ee.height),Pe=v.append("text").attr("x",d.padding).attr("y",W+2*d.dividerMargin+Ee.height+d.textHeight).attr("fill","white").attr("class","classText");C=!0,a.methods.forEach(function(Ft){fm(Pe,Ft,C,d),C=!1});const Ve=v.node().getBBox();var Ae=" ";a.cssClasses.length>0&&(Ae+=a.cssClasses.join(" "));const vt=v.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Ve.width+2*d.padding).attr("height",Ve.height+d.padding+.5*d.dividerMargin).attr("class",Ae).node().getBBox().width;return w.node().childNodes.forEach(function(Ft){Ft.setAttribute("x",(vt-Ft.getBBox().width)/2)}),a.tooltip&&w.insert("title").text(a.tooltip),j.attr("x2",vt),Ie.attr("x2",vt),y.width=vt,y.height=Ve.height+d.padding+.5*d.dividerMargin,y};let gm={};const rg=function(s){const a=Object.entries(gm).find(d=>d[1].label===s);if(a)return a[0]},tT={draw:function(s,a,d,f){const p=ut().class;gm={},Me.info("Rendering diagram "+s);const y=ut().securityLevel;let v;"sandbox"===y&&(v=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===y?v.nodes()[0].contentDocument.body:"body"),C=w.select(`[id='${a}']`);!function(s){s.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),s.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),s.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}(C);const D=new Ki.T({multigraph:!0});D.setGraph({isMultiGraph:!0}),D.setDefaultEdgeLabel(function(){return{}});const V=f.db.getClasses(),W=Object.keys(V);for(const Ae of W){const vt=ip_drawClass(C,V[Ae],p,f);gm[vt.id]=vt,D.setNode(vt.id,vt),Me.info("Org height: "+vt.height)}f.db.getRelations().forEach(function(Ae){Me.info("tjoho"+rg(Ae.id1)+rg(Ae.id2)+JSON.stringify(Ae)),D.setEdge(rg(Ae.id1),rg(Ae.id2),{relation:Ae},Ae.title||"DEFAULT")}),f.db.getNotes().forEach(function(Ae){Me.debug(`Adding note: ${JSON.stringify(Ae)}`);const Qe=function(s,a,d,f){Me.debug("Rendering note ",a,d);const p=a.id,y={id:p,text:a.text,width:0,height:0},v=s.append("g").attr("id",p).attr("class","classGroup");let w=v.append("text").attr("y",d.textHeight+d.padding).attr("x",0);const C=JSON.parse(`"${a.text}"`).split("\n");C.forEach(function(j){Me.debug(`Adding line: ${j}`),w.append("tspan").text(j).attr("class","title").attr("dy",d.textHeight)});const D=v.node().getBBox(),W=v.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",D.width+2*d.padding).attr("height",D.height+C.length*d.textHeight+d.padding+.5*d.dividerMargin).node().getBBox().width;return w.node().childNodes.forEach(function(j){j.setAttribute("x",(W-j.getBBox().width)/2)}),y.width=W,y.height=D.height+C.length*d.textHeight+d.padding+.5*d.dividerMargin,y}(C,Ae,p);gm[Qe.id]=Qe,D.setNode(Qe.id,Qe),Ae.class&&Ae.class in V&&D.setEdge(Ae.id,rg(Ae.class),{relation:{id1:Ae.id,id2:Ae.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),(0,li.Zp)(D),D.nodes().forEach(function(Ae){void 0!==Ae&&void 0!==D.node(Ae)&&(Me.debug("Node "+Ae+": "+JSON.stringify(D.node(Ae))),w.select("#"+(f.db.lookUpDomId(Ae)||Ae)).attr("transform","translate("+(D.node(Ae).x-D.node(Ae).width/2)+","+(D.node(Ae).y-D.node(Ae).height/2)+" )"))}),D.edges().forEach(function(Ae){void 0!==Ae&&void 0!==D.edge(Ae)&&(Me.debug("Edge "+Ae.v+" -> "+Ae.w+": "+JSON.stringify(D.edge(Ae))),function(s,a,d,f,p){const y=function(Ae){switch(Ae){case p.db.relationType.AGGREGATION:return"aggregation";case p.db.relationType.EXTENSION:return"extension";case p.db.relationType.COMPOSITION:return"composition";case p.db.relationType.DEPENDENCY:return"dependency";case p.db.relationType.LOLLIPOP:return"lollipop"}};a.points=a.points.filter(Ae=>!Number.isNaN(Ae.y));const v=a.points,w=(0,F.n8j)().x(function(Ae){return Ae.x}).y(function(Ae){return Ae.y}).curve(F.qrM),C=s.append("path").attr("d",w(v)).attr("id","edge"+a0).attr("class","relation");let V,W,D="";f.arrowMarkerAbsolute&&(D=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,D=D.replace(/\(/g,"\\("),D=D.replace(/\)/g,"\\)")),1==d.relation.lineType&&C.attr("class","relation dashed-line"),10==d.relation.lineType&&C.attr("class","relation dotted-line"),"none"!==d.relation.type1&&C.attr("marker-start","url("+D+"#"+y(d.relation.type1)+"Start)"),"none"!==d.relation.type2&&C.attr("marker-end","url("+D+"#"+y(d.relation.type2)+"End)");const j=a.points.length;let Ee,Ie,Pe,Ve,X=Br.calcLabelPosition(a.points);if(V=X.x,W=X.y,j%2!=0&&j>1){let Ae=Br.calcCardinalityPosition("none"!==d.relation.type1,a.points,a.points[0]),Qe=Br.calcCardinalityPosition("none"!==d.relation.type2,a.points,a.points[j-1]);Me.debug("cardinality_1_point "+JSON.stringify(Ae)),Me.debug("cardinality_2_point "+JSON.stringify(Qe)),Ee=Ae.x,Ie=Ae.y,Pe=Qe.x,Ve=Qe.y}if(void 0!==d.title){const Ae=s.append("g").attr("class","classLabel"),Qe=Ae.append("text").attr("class","label").attr("x",V).attr("y",W).attr("fill","red").attr("text-anchor","middle").text(d.title);window.label=Qe;const vt=Qe.node().getBBox();Ae.insert("rect",":first-child").attr("class","box").attr("x",vt.x-f.padding/2).attr("y",vt.y-f.padding/2).attr("width",vt.width+f.padding).attr("height",vt.height+f.padding)}Me.info("Rendering relation "+JSON.stringify(d)),void 0!==d.relationTitle1&&"none"!==d.relationTitle1&&s.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",Ee).attr("y",Ie).attr("fill","black").attr("font-size","6").text(d.relationTitle1),void 0!==d.relationTitle2&&"none"!==d.relationTitle2&&s.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",Pe).attr("y",Ve).attr("fill","black").attr("font-size","6").text(d.relationTitle2),a0++}(C,D.edge(Ae),D.edge(Ae).relation,p,f))});const Ee=C.node().getBBox(),Ie=Ee.width+40,Pe=Ee.height+40;tu(C,Pe,Ie,p.useMaxWidth);const Ve=`${Ee.x-20} ${Ee.y-20} ${Ie} ${Pe}`;Me.debug(`viewBox ${Ve}`),C.attr("viewBox",Ve)}},t2={extension:(s,a,d)=>{Me.trace("Making markers for ",d),s.append("defs").append("marker").attr("id",a+"-extensionStart").attr("class","marker extension "+a).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),s.append("defs").append("marker").attr("id",a+"-extensionEnd").attr("class","marker extension "+a).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(s,a)=>{s.append("defs").append("marker").attr("id",a+"-compositionStart").attr("class","marker composition "+a).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id",a+"-compositionEnd").attr("class","marker composition "+a).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(s,a)=>{s.append("defs").append("marker").attr("id",a+"-aggregationStart").attr("class","marker aggregation "+a).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id",a+"-aggregationEnd").attr("class","marker aggregation "+a).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(s,a)=>{s.append("defs").append("marker").attr("id",a+"-dependencyStart").attr("class","marker dependency "+a).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),s.append("defs").append("marker").attr("id",a+"-dependencyEnd").attr("class","marker dependency "+a).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(s,a)=>{s.append("defs").append("marker").attr("id",a+"-lollipopStart").attr("class","marker lollipop "+a).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(s,a)=>{s.append("marker").attr("id",a+"-pointEnd").attr("class","marker "+a).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),s.append("marker").attr("id",a+"-pointStart").attr("class","marker "+a).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(s,a)=>{s.append("marker").attr("id",a+"-circleEnd").attr("class","marker "+a).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),s.append("marker").attr("id",a+"-circleStart").attr("class","marker "+a).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(s,a)=>{s.append("marker").attr("id",a+"-crossEnd").attr("class","marker cross "+a).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),s.append("marker").attr("id",a+"-crossStart").attr("class","marker cross "+a).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(s,a)=>{s.append("defs").append("marker").attr("id",a+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},L1=(s,a,d,f)=>{a.forEach(p=>{t2[p](s,d,f)})},Ia=(s,a,d,f)=>{let p=s||"";if("object"==typeof p&&(p=p[0]),Io(ut().flowchart.htmlLabels))return p=p.replace(/\\n|\n/g,"<br />"),Me.info("vertexText"+p),function oT(s){const a=(0,F.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),d=a.append("xhtml:div");return d.html('<span class="'+(s.isNode?"nodeLabel":"edgeLabel")+'" '+(s.labelStyle?'style="'+s.labelStyle+'"':"")+">"+s.label+"</span>"),function hh(s,a){a&&s.attr("style",a)}(d,s.labelStyle),d.style("display","inline-block"),d.style("white-space","nowrap"),d.attr("xmlns","http://www.w3.org/1999/xhtml"),a.node()}({isNode:f,label:Fw(p).replace(/fa[blrs]?:fa-[\w-]+/g,w=>`<i class='${w.replace(":"," ")}'></i>`),labelStyle:a.replace("fill:","color:")});{const y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("style",a.replace("color:","fill:"));let v=[];v="string"==typeof p?p.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(p)?p:[];for(const w of v){const C=document.createElementNS("http://www.w3.org/2000/svg","tspan");C.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),C.setAttribute("dy","1em"),C.setAttribute("x","0"),C.setAttribute("class",d?"title-row":"row"),C.textContent=w.trim(),y.appendChild(C)}return y}},ul=(s,a,d,f)=>{let p;p=d||"node default";const y=s.insert("g").attr("class",p).attr("id",a.domId||a.id),v=y.insert("g").attr("class","label").attr("style",a.labelStyle);let w;w=void 0===a.labelText?"":"string"==typeof a.labelText?a.labelText:a.labelText[0];const C=v.node().appendChild(Ia(An(Fw(w),ut()),a.labelStyle,!1,f));let D=C.getBBox();if(Io(ut().flowchart.htmlLabels)){const W=C.children[0],j=(0,F.Ltv)(C);D=W.getBoundingClientRect(),j.attr("width",D.width),j.attr("height",D.height)}const V=a.padding/2;return v.attr("transform","translate("+-D.width/2+", "+-D.height/2+")"),{shapeSvg:y,bbox:D,halfPadding:V,label:v}},ia=(s,a)=>{const d=a.node().getBBox();s.width=d.width,s.height=d.height};function Qh(s,a,d,f){return s.insert("polygon",":first-child").attr("points",f.map(function(p){return p.x+","+p.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-a/2+","+d/2+")")}let Hs={},Hc={},B1={};const rp=(s,a)=>(Me.trace("In isDecendant",a," ",s," = ",Hc[a].includes(s)),!!Hc[a].includes(s)),mm=(s,a,d,f)=>{Me.warn("Copying children of ",s,"root",f,"data",a.node(s),f);const p=a.children(s)||[];s!==f&&p.push(s),Me.warn("Copying (nodes) clusterId",s,"nodes",p),p.forEach(y=>{if(a.children(y).length>0)mm(y,a,d,f);else{const v=a.node(y);Me.info("cp ",y," to ",f," with parent ",s),d.setNode(y,v),f!==a.parent(y)&&(Me.warn("Setting parent",y,a.parent(y)),d.setParent(y,a.parent(y))),s!==f&&y!==s?(Me.debug("Setting parent",y,s),d.setParent(y,s)):(Me.info("In copy ",s,"root",f,"data",a.node(s),f),Me.debug("Not Setting parent for node=",y,"cluster!==rootId",s!==f,"node!==clusterId",y!==s));const w=a.edges(y);Me.debug("Copying Edges",w),w.forEach(C=>{Me.info("Edge",C);const D=a.edge(C.v,C.w,C.name);Me.info("Edge data",D,f);try{((s,a)=>(Me.info("Decendants of ",a," is ",Hc[a]),Me.info("Edge is ",s),s.v!==a&&s.w!==a&&(Hc[a]?Hc[a].includes(s.v)||rp(s.v,a)||rp(s.w,a)||Hc[a].includes(s.w):(Me.debug("Tilt, ",a,",not in decendants"),!1))))(C,f)?(Me.info("Copying as ",C.v,C.w,D,C.name),d.setEdge(C.v,C.w,D,C.name),Me.info("newGraph edges ",d.edges(),d.edge(d.edges()[0]))):Me.info("Skipping copy of edge ",C.v,"--\x3e",C.w," rootId: ",f," clusterId:",s)}catch(V){Me.error(V)}})}Me.debug("Removing node",y),a.removeNode(y)})},_m=(s,a)=>{const d=a.children(s);let f=[...d];for(const p of d)B1[p]=s,f=[...f,..._m(p,a)];return f},Jh=(s,a)=>{Me.trace("Searching",s);const d=a.children(s);if(Me.trace("Searching children of id ",s,d),d.length<1)return Me.trace("This is a valid node",s),s;for(const f of d){const p=Jh(f,a);if(p)return Me.trace("Found replacement for",s," => ",p),p}},ef=s=>Hs[s]&&Hs[s].externalConnections&&Hs[s]?Hs[s].id:s,sp=(s,a)=>{if(Me.warn("extractor - ",a,Xi.M(s),s.children("D")),a>10)return void Me.error("Bailing out");let d=s.nodes(),f=!1;for(const p of d){const y=s.children(p);f=f||y.length>0}if(f){Me.debug("Nodes = ",d,a);for(const p of d)if(Me.debug("Extracting node",p,Hs,Hs[p]&&!Hs[p].externalConnections,!s.parent(p),s.node(p),s.children("D")," Depth ",a),Hs[p])if(!Hs[p].externalConnections&&s.children(p)&&s.children(p).length>0){Me.warn("Cluster without external connections, without a parent and with children",p,a);let v="TB"===s.graph().rankdir?"LR":"TB";Hs[p]&&Hs[p].clusterData&&Hs[p].clusterData.dir&&(v=Hs[p].clusterData.dir,Me.warn("Fixing dir",Hs[p].clusterData.dir,v));const w=new Ki.T({multigraph:!0,compound:!0}).setGraph({rankdir:v,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});Me.warn("Old graph before copy",Xi.M(s)),mm(p,s,w,p),s.setNode(p,{clusterNode:!0,id:p,clusterData:Hs[p].clusterData,labelText:Hs[p].labelText,graph:w}),Me.warn("New graph after copy node: (",p,")",Xi.M(w)),Me.debug("Old graph after copy",Xi.M(s))}else Me.warn("Cluster ** ",p," **not meeting the criteria !externalConnections:",!Hs[p].externalConnections," no parent: ",!s.parent(p)," children ",s.children(p)&&s.children(p).length>0,s.children("D"),a),Me.debug(Hs);else Me.debug("Not a cluster",p,a);d=s.nodes(),Me.warn("New list of nodes",d);for(const p of d){const y=s.node(p);Me.warn(" Now next level",p,y),y.clusterNode&&sp(y.graph,a+1)}}else Me.debug("Done, no node has children",s.nodes())},ag=(s,a)=>{if(0===a.length)return[];let d=Object.assign(a);return a.forEach(f=>{const p=s.children(f),y=ag(s,p);d=[...d,...y]}),d};function vm(s,a,d,f){var p=s.x,y=s.y,v=p-f.x,w=y-f.y,C=Math.sqrt(a*a*w*w+d*d*v*v),D=Math.abs(a*d*v/C);f.x<p&&(D=-D);var V=Math.abs(a*d*w/C);return f.y<y&&(V=-V),{x:p+D,y:y+V}}function i2(s,a,d,f){var p,y,v,w,C,D,V,W,j,X,Ee,Ie,Pe;if(X=(p=a.y-s.y)*f.x+(v=s.x-a.x)*f.y+(C=a.x*s.y-s.x*a.y),!(0!==(j=p*d.x+v*d.y+C)&&0!==X&&l0(j,X)||(y=f.y-d.y,w=d.x-f.x,D=f.x*d.y-d.x*f.y,V=y*s.x+w*s.y+D,W=y*a.x+w*a.y+D,0!==V&&0!==W&&l0(V,W)||(Ee=p*w-y*v,0===Ee))))return Ie=Math.abs(Ee/2),{x:(Pe=v*D-w*C)<0?(Pe-Ie)/Ee:(Pe+Ie)/Ee,y:(Pe=y*C-p*D)<0?(Pe-Ie)/Ee:(Pe+Ie)/Ee}}function l0(s,a){return s*a>0}const tf=(s,a)=>{var C,D,d=s.x,f=s.y,p=a.x-d,y=a.y-f,v=s.width/2,w=s.height/2;return Math.abs(y)*v>Math.abs(p)*w?(y<0&&(w=-w),C=0===y?0:w*p/y,D=w):(p<0&&(v=-v),C=v,D=0===p?0:v*y/p),{x:d+C,y:f+D}},pa_circle=function op(s,a,d){return vm(s,a,a,d)},pa_polygon=function Iy(s,a,d){var f=s.x,p=s.y,y=[],v=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY;"function"==typeof a.forEach?a.forEach(function(Ee){v=Math.min(v,Ee.x),w=Math.min(w,Ee.y)}):(v=Math.min(v,a.x),w=Math.min(w,a.y));for(var C=f-s.width/2-v,D=p-s.height/2-w,V=0;V<a.length;V++){var W=a[V],j=a[V<a.length-1?V+1:0],X=i2(s,d,{x:C+W.x,y:D+W.y},{x:C+j.x,y:D+j.y});X&&y.push(X)}return y.length?(y.length>1&&y.sort(function(Ee,Ie){var Pe=Ee.x-d.x,Ve=Ee.y-d.y,Ae=Math.sqrt(Pe*Pe+Ve*Ve),Qe=Ie.x-d.x,vt=Ie.y-d.y,Ft=Math.sqrt(Qe*Qe+vt*vt);return Ae<Ft?-1:Ae===Ft?0:1}),y[0]):s},pa_rect=tf,ap=(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),v=f.width+a.padding+(f.height+a.padding),w=[{x:v/2,y:0},{x:v,y:-v/2},{x:v/2,y:-v},{x:0,y:-v/2}];Me.info("Question main (Circle)");const C=Qh(d,v,v,w);return C.attr("style",a.style),ia(a,C),a.intersect=function(D){return Me.warn("Intersect called"),pa_polygon(a,w,D)},d};function u0(s,a,d,f){const p=[],y=w=>{p.push(w,0)},v=w=>{p.push(0,w)};a.includes("t")?(Me.debug("add top border"),y(d)):v(d),a.includes("r")?(Me.debug("add right border"),y(f)):v(f),a.includes("b")?(Me.debug("add bottom border"),y(d)):v(d),a.includes("l")?(Me.debug("add left border"),y(f)):v(f),s.attr("stroke-dasharray",p.join(" "))}const Cm=(s,a,d)=>{const f=s.insert("g").attr("class","node default").attr("id",a.domId||a.id);let p=70,y=10;"LR"===d&&(p=10,y=70);const v=f.append("rect").attr("x",-1*p/2).attr("y",-1*y/2).attr("width",p).attr("height",y).attr("class","fork-join");return ia(a,v),a.height=a.height+a.padding/2,a.width=a.width+a.padding/2,a.intersect=function(w){return pa_rect(a,w)},f},Vy={rhombus:ap,question:ap,rect:(s,a)=>{const{shapeSvg:d,bbox:f,halfPadding:p}=ul(s,a,"node "+a.classes,!0);Me.trace("Classes = ",a.classes);const y=d.insert("rect",":first-child"),v=f.width+a.padding,w=f.height+a.padding;if(y.attr("class","basic label-container").attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("x",-f.width/2-p).attr("y",-f.height/2-p).attr("width",v).attr("height",w),a.props){const C=new Set(Object.keys(a.props));a.props.borders&&(u0(y,a.props.borders,v,w),C.delete("borders")),C.forEach(D=>{Me.warn(`Unknown node property ${D}`)})}return ia(a,y),a.intersect=function(C){return pa_rect(a,C)},d},labelRect:(s,a)=>{const{shapeSvg:d}=ul(s,a,"label",!0);Me.trace("Classes = ",a.classes);const f=d.insert("rect",":first-child");if(f.attr("width",0).attr("height",0),d.attr("class","label edgeLabel"),a.props){const v=new Set(Object.keys(a.props));a.props.borders&&(u0(f,a.props.borders,0,0),v.delete("borders")),v.forEach(w=>{Me.warn(`Unknown node property ${w}`)})}return ia(a,f),a.intersect=function(v){return pa_rect(a,v)},d},rectWithTitle:(s,a)=>{let d;d=a.classes?"node "+a.classes:"node default";const f=s.insert("g").attr("class",d).attr("id",a.domId||a.id),p=f.insert("rect",":first-child"),y=f.insert("line"),v=f.insert("g").attr("class","label"),w=a.labelText.flat?a.labelText.flat():a.labelText;let C="";C="object"==typeof w?w[0]:w,Me.info("Label text abc79",C,w,"object"==typeof w);const D=v.node().appendChild(Ia(C,a.labelStyle,!0,!0));let V={width:0,height:0};if(Io(ut().flowchart.htmlLabels)){const Ie=D.children[0],Pe=(0,F.Ltv)(D);V=Ie.getBoundingClientRect(),Pe.attr("width",V.width),Pe.attr("height",V.height)}Me.info("Text 2",w);const W=w.slice(1,w.length);let j=D.getBBox();const X=v.node().appendChild(Ia(W.join?W.join("<br/>"):W,a.labelStyle,!0,!0));if(Io(ut().flowchart.htmlLabels)){const Ie=X.children[0],Pe=(0,F.Ltv)(X);V=Ie.getBoundingClientRect(),Pe.attr("width",V.width),Pe.attr("height",V.height)}const Ee=a.padding/2;return(0,F.Ltv)(X).attr("transform","translate( "+(V.width>j.width?0:(j.width-V.width)/2)+", "+(j.height+Ee+5)+")"),(0,F.Ltv)(D).attr("transform","translate( "+(V.width<j.width?0:-(j.width-V.width)/2)+", 0)"),V=v.node().getBBox(),v.attr("transform","translate("+-V.width/2+", "+(-V.height/2-Ee+3)+")"),p.attr("class","outer title-state").attr("x",-V.width/2-Ee).attr("y",-V.height/2-Ee).attr("width",V.width+a.padding).attr("height",V.height+a.padding),y.attr("class","divider").attr("x1",-V.width/2-Ee).attr("x2",V.width/2+Ee).attr("y1",-V.height/2-Ee+j.height+Ee).attr("y2",-V.height/2-Ee+j.height+Ee),ia(a,p),a.intersect=function(Ie){return pa_rect(a,Ie)},f},choice:(s,a)=>{const d=s.insert("g").attr("class","node default").attr("id",a.domId||a.id);return d.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(v){return v.x+","+v.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),a.width=28,a.height=28,a.intersect=function(v){return pa_circle(a,14,v)},d},circle:(s,a)=>{const{shapeSvg:d,bbox:f,halfPadding:p}=ul(s,a,void 0,!0),y=d.insert("circle",":first-child");return y.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",f.width/2+p).attr("width",f.width+a.padding).attr("height",f.height+a.padding),Me.info("Circle main"),ia(a,y),a.intersect=function(v){return Me.info("Circle intersect",a,f.width/2+p,v),pa_circle(a,f.width/2+p,v)},d},doublecircle:(s,a)=>{const{shapeSvg:d,bbox:f,halfPadding:p}=ul(s,a,void 0,!0),v=d.insert("g",":first-child"),w=v.insert("circle"),C=v.insert("circle");return w.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",f.width/2+p+5).attr("width",f.width+a.padding+10).attr("height",f.height+a.padding+10),C.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",f.width/2+p).attr("width",f.width+a.padding).attr("height",f.height+a.padding),Me.info("DoubleCircle main"),ia(a,w),a.intersect=function(D){return Me.info("DoubleCircle intersect",a,f.width/2+p+5,D),pa_circle(a,f.width/2+p+5,D)},d},stadium:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.height+a.padding,y=f.width+p/4+a.padding,v=d.insert("rect",":first-child").attr("style",a.style).attr("rx",p/2).attr("ry",p/2).attr("x",-y/2).attr("y",-p/2).attr("width",y).attr("height",p);return ia(a,v),a.intersect=function(w){return pa_rect(a,w)},d},hexagon:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),y=f.height+a.padding,v=y/4,w=f.width+2*v+a.padding,C=[{x:v,y:0},{x:w-v,y:0},{x:w,y:-y/2},{x:w-v,y:-y},{x:v,y:-y},{x:0,y:-y/2}],D=Qh(d,w,y,C);return D.attr("style",a.style),ia(a,D),a.intersect=function(V){return pa_polygon(a,C,V)},d},rect_left_inv_arrow:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:-y/2,y:0},{x:p,y:0},{x:p,y:-y},{x:-y/2,y:-y},{x:0,y:-y/2}];return Qh(d,p,y,v).attr("style",a.style),a.width=p+y,a.height=y,a.intersect=function(C){return pa_polygon(a,v,C)},d},lean_right:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:-2*y/6,y:0},{x:p-y/6,y:0},{x:p+2*y/6,y:-y},{x:y/6,y:-y}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},lean_left:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:2*y/6,y:0},{x:p+y/6,y:0},{x:p-2*y/6,y:-y},{x:-y/6,y:-y}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},trapezoid:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:-2*y/6,y:0},{x:p+2*y/6,y:0},{x:p-y/6,y:-y},{x:y/6,y:-y}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},inv_trapezoid:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:y/6,y:0},{x:p-y/6,y:0},{x:p+2*y/6,y:-y},{x:-2*y/6,y:-y}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},rect_right_inv_arrow:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:0,y:0},{x:p+y/2,y:0},{x:p,y:-y/2},{x:p+y/2,y:-y},{x:0,y:-y}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},cylinder:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=p/2,v=y/(2.5+p/50),w=f.height+v+a.padding,C="M 0,"+v+" a "+y+","+v+" 0,0,0 "+p+" 0 a "+y+","+v+" 0,0,0 "+-p+" 0 l 0,"+w+" a "+y+","+v+" 0,0,0 "+p+" 0 l 0,"+-w,D=d.attr("label-offset-y",v).insert("path",":first-child").attr("style",a.style).attr("d",C).attr("transform","translate("+-p/2+","+-(w/2+v)+")");return ia(a,D),a.intersect=function(V){const W=pa_rect(a,V),j=W.x-a.x;if(0!=y&&(Math.abs(j)<a.width/2||Math.abs(j)==a.width/2&&Math.abs(W.y-a.y)>a.height/2-v)){let X=v*v*(1-j*j/(y*y));0!=X&&(X=Math.sqrt(X)),X=v-X,V.y-a.y>0&&(X=-X),W.y+=X}return W},d},start:(s,a)=>{const d=s.insert("g").attr("class","node default").attr("id",a.domId||a.id),f=d.insert("circle",":first-child");return f.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),ia(a,f),a.intersect=function(p){return pa_circle(a,7,p)},d},end:(s,a)=>{const d=s.insert("g").attr("class","node default").attr("id",a.domId||a.id),f=d.insert("circle",":first-child"),p=d.insert("circle",":first-child");return p.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),f.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),ia(a,p),a.intersect=function(y){return pa_circle(a,7,y)},d},note:(s,a)=>{const{shapeSvg:d,bbox:f,halfPadding:p}=ul(s,a,"node "+a.classes,!0);Me.info("Classes = ",a.classes);const y=d.insert("rect",":first-child");return y.attr("rx",a.rx).attr("ry",a.ry).attr("x",-f.width/2-p).attr("y",-f.height/2-p).attr("width",f.width+a.padding).attr("height",f.height+a.padding),ia(a,y),a.intersect=function(v){return pa_rect(a,v)},d},subroutine:(s,a)=>{const{shapeSvg:d,bbox:f}=ul(s,a,void 0,!0),p=f.width+a.padding,y=f.height+a.padding,v=[{x:0,y:0},{x:p,y:0},{x:p,y:-y},{x:0,y:-y},{x:0,y:0},{x:-8,y:0},{x:p+8,y:0},{x:p+8,y:-y},{x:-8,y:-y},{x:-8,y:0}],w=Qh(d,p,y,v);return w.attr("style",a.style),ia(a,w),a.intersect=function(C){return pa_polygon(a,v,C)},d},fork:Cm,join:Cm,class_box:(s,a)=>{const d=a.padding/2;let y;y=a.classes?"node "+a.classes:"node default";const v=s.insert("g").attr("class",y).attr("id",a.domId||a.id),w=v.insert("rect",":first-child"),C=v.insert("line"),D=v.insert("line");let V=0,W=4;const j=v.insert("g").attr("class","label");let X=0;const Ee=a.classData.annotations&&a.classData.annotations[0],Ie=a.classData.annotations[0]?"\xab"+a.classData.annotations[0]+"\xbb":"",Pe=j.node().appendChild(Ia(Ie,a.labelStyle,!0,!0));let Ve=Pe.getBBox();if(Io(ut().flowchart.htmlLabels)){const rt=Pe.children[0],Ue=(0,F.Ltv)(Pe);Ve=rt.getBoundingClientRect(),Ue.attr("width",Ve.width),Ue.attr("height",Ve.height)}a.classData.annotations[0]&&(W+=Ve.height+4,V+=Ve.width);let Ae=a.classData.id;void 0!==a.classData.type&&""!==a.classData.type&&(ut().flowchart.htmlLabels?Ae+="&lt;"+a.classData.type+"&gt;":Ae+="<"+a.classData.type+">");const Qe=j.node().appendChild(Ia(Ae,a.labelStyle,!0,!0));(0,F.Ltv)(Qe).attr("class","classTitle");let vt=Qe.getBBox();if(Io(ut().flowchart.htmlLabels)){const rt=Qe.children[0],Ue=(0,F.Ltv)(Qe);vt=rt.getBoundingClientRect(),Ue.attr("width",vt.width),Ue.attr("height",vt.height)}W+=vt.height+4,vt.width>V&&(V=vt.width);const Ft=[];a.classData.members.forEach(rt=>{const Ue=np(rt);let qe=Ue.displayText;ut().flowchart.htmlLabels&&(qe=qe.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const $e=j.node().appendChild(Ia(qe,Ue.cssStyle?Ue.cssStyle:a.labelStyle,!0,!0));let pe=$e.getBBox();if(Io(ut().flowchart.htmlLabels)){const Ke=$e.children[0],J=(0,F.Ltv)($e);pe=Ke.getBoundingClientRect(),J.attr("width",pe.width),J.attr("height",pe.height)}pe.width>V&&(V=pe.width),W+=pe.height+4,Ft.push($e)}),W+=8;const Qt=[];if(a.classData.methods.forEach(rt=>{const Ue=np(rt);let qe=Ue.displayText;ut().flowchart.htmlLabels&&(qe=qe.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const $e=j.node().appendChild(Ia(qe,Ue.cssStyle?Ue.cssStyle:a.labelStyle,!0,!0));let pe=$e.getBBox();if(Io(ut().flowchart.htmlLabels)){const Ke=$e.children[0],J=(0,F.Ltv)($e);pe=Ke.getBoundingClientRect(),J.attr("width",pe.width),J.attr("height",pe.height)}pe.width>V&&(V=pe.width),W+=pe.height+4,Qt.push($e)}),W+=8,Ee){let rt=(V-Ve.width)/2;(0,F.Ltv)(Pe).attr("transform","translate( "+(-1*V/2+rt)+", "+-1*W/2+")"),X=Ve.height+4}let st=(V-vt.width)/2;return(0,F.Ltv)(Qe).attr("transform","translate( "+(-1*V/2+st)+", "+(-1*W/2+X)+")"),X+=vt.height+4,C.attr("class","divider").attr("x1",-V/2-d).attr("x2",V/2+d).attr("y1",-W/2-d+8+X).attr("y2",-W/2-d+8+X),X+=8,Ft.forEach(rt=>{(0,F.Ltv)(rt).attr("transform","translate( "+-V/2+", "+(-1*W/2+X+4)+")"),X+=vt.height+4}),X+=8,D.attr("class","divider").attr("x1",-V/2-d).attr("x2",V/2+d).attr("y1",-W/2-d+8+X).attr("y2",-W/2-d+8+X),X+=8,Qt.forEach(rt=>{(0,F.Ltv)(rt).attr("transform","translate( "+-V/2+", "+(-1*W/2+X)+")"),X+=vt.height+4}),w.attr("class","outer title-state").attr("x",-V/2-d).attr("y",-W/2-d).attr("width",V+a.padding).attr("height",W+a.padding),ia(a,w),a.intersect=function(rt){return pa_rect(a,rt)},v}};let lg={};const h0=(s,a,d)=>{let f,p;if(a.link){let y;"sandbox"===ut().securityLevel?y="_top":a.linkTarget&&(y=a.linkTarget||"_blank"),f=s.insert("svg:a").attr("xlink:href",a.link).attr("target",y),p=Vy[a.shape](f,a,d)}else p=Vy[a.shape](s,a,d),f=p;return a.tooltip&&p.attr("title",a.tooltip),a.class&&p.attr("class","node default "+a.class),lg[a.id]=f,a.haveCallback&&lg[a.id].attr("class",lg[a.id].attr("class")+" clickable"),f},zy=s=>{const a=lg[s.id];Me.trace("Transforming node",s.diff,s,"translate("+(s.x-s.width/2-5)+", "+s.width/2+")");const f=s.diff||0;return a.attr("transform",s.clusterNode?"translate("+(s.x+f-s.width/2)+", "+(s.y-s.height/2-8)+")":"translate("+s.x+", "+s.y+")"),f},oe={rect:(s,a)=>{Me.trace("Creating subgraph rect for ",a.id,a);const d=s.insert("g").attr("class","cluster"+(a.class?" "+a.class:"")).attr("id",a.id),f=d.insert("rect",":first-child"),p=d.insert("g").attr("class","cluster-label"),y=p.node().appendChild(Ia(a.labelText,a.labelStyle,void 0,!0));let v=y.getBBox();if(Io(ut().flowchart.htmlLabels)){const W=y.children[0],j=(0,F.Ltv)(y);v=W.getBoundingClientRect(),j.attr("width",v.width),j.attr("height",v.height)}const w=0*a.padding,C=w/2,D=a.width<=v.width+w?v.width+w:a.width;a.diff=a.width<=v.width+w?(v.width-a.width)/2-a.padding/2:-a.padding/2,Me.trace("Data ",a,JSON.stringify(a)),f.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("x",a.x-D/2).attr("y",a.y-a.height/2-C).attr("width",D).attr("height",a.height+w),p.attr("transform","translate("+(a.x-v.width/2)+", "+(a.y-a.height/2)+")");const V=f.node().getBBox();return a.width=V.width,a.height=V.height,a.intersect=function(W){return tf(a,W)},d},roundedWithTitle:(s,a)=>{const d=s.insert("g").attr("class",a.classes).attr("id",a.id),f=d.insert("rect",":first-child"),p=d.insert("g").attr("class","cluster-label"),y=d.append("rect"),v=p.node().appendChild(Ia(a.labelText,a.labelStyle,void 0,!0));let w=v.getBBox();if(Io(ut().flowchart.htmlLabels)){const j=v.children[0],X=(0,F.Ltv)(v);w=j.getBoundingClientRect(),X.attr("width",w.width),X.attr("height",w.height)}w=v.getBBox();const C=0*a.padding,D=C/2,V=a.width<=w.width+a.padding?w.width+a.padding:a.width;a.diff=a.width<=w.width+a.padding?(w.width+0*a.padding-a.width)/2:-a.padding/2,f.attr("class","outer").attr("x",a.x-V/2-D).attr("y",a.y-a.height/2-D).attr("width",V+C).attr("height",a.height+C),y.attr("class","inner").attr("x",a.x-V/2-D).attr("y",a.y-a.height/2-D+w.height-1).attr("width",V+C).attr("height",a.height+C-w.height-3),p.attr("transform","translate("+(a.x-w.width/2)+", "+(a.y-a.height/2-a.padding/3+(Io(ut().flowchart.htmlLabels)?5:3))+")");const W=f.node().getBBox();return a.height=W.height,a.intersect=function(j){return tf(a,j)},d},noteGroup:(s,a)=>{const d=s.insert("g").attr("class","note-cluster").attr("id",a.id),f=d.insert("rect",":first-child"),p=0*a.padding,y=p/2;f.attr("rx",a.rx).attr("ry",a.ry).attr("x",a.x-a.width/2-y).attr("y",a.y-a.height/2-y).attr("width",a.width+p).attr("height",a.height+p).attr("fill","none");const v=f.node().getBBox();return a.width=v.width,a.height=v.height,a.intersect=function(w){return tf(a,w)},d},divider:(s,a)=>{const d=s.insert("g").attr("class",a.classes).attr("id",a.id),f=d.insert("rect",":first-child"),p=0*a.padding,y=p/2;f.attr("class","divider").attr("x",a.x-a.width/2-y).attr("y",a.y-a.height/2).attr("width",a.width+p).attr("height",a.height+p);const v=f.node().getBBox();return a.width=v.width,a.height=v.height,a.diff=-a.padding/2,a.intersect=function(w){return tf(a,w)},d}};let ue={},ze={},Be={};const qt=(s,a)=>{const d=Ia(a.label,a.labelStyle),f=s.insert("g").attr("class","edgeLabel"),p=f.insert("g").attr("class","label");p.node().appendChild(d);let v,y=d.getBBox();if(Io(ut().flowchart.htmlLabels)){const w=d.children[0],C=(0,F.Ltv)(d);y=w.getBoundingClientRect(),C.attr("width",y.width),C.attr("height",y.height)}if(p.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),ze[a.id]=f,a.width=y.width,a.height=y.height,a.startLabelLeft){const w=Ia(a.startLabelLeft,a.labelStyle),C=s.insert("g").attr("class","edgeTerminals"),D=C.insert("g").attr("class","inner");v=D.node().appendChild(w);const V=w.getBBox();D.attr("transform","translate("+-V.width/2+", "+-V.height/2+")"),Be[a.id]||(Be[a.id]={}),Be[a.id].startLeft=C,Ot(v,a.startLabelLeft)}if(a.startLabelRight){const w=Ia(a.startLabelRight,a.labelStyle),C=s.insert("g").attr("class","edgeTerminals"),D=C.insert("g").attr("class","inner");v=C.node().appendChild(w),D.node().appendChild(w);const V=w.getBBox();D.attr("transform","translate("+-V.width/2+", "+-V.height/2+")"),Be[a.id]||(Be[a.id]={}),Be[a.id].startRight=C,Ot(v,a.startLabelRight)}if(a.endLabelLeft){const w=Ia(a.endLabelLeft,a.labelStyle),C=s.insert("g").attr("class","edgeTerminals"),D=C.insert("g").attr("class","inner");v=D.node().appendChild(w);const V=w.getBBox();D.attr("transform","translate("+-V.width/2+", "+-V.height/2+")"),C.node().appendChild(w),Be[a.id]||(Be[a.id]={}),Be[a.id].endLeft=C,Ot(v,a.endLabelLeft)}if(a.endLabelRight){const w=Ia(a.endLabelRight,a.labelStyle),C=s.insert("g").attr("class","edgeTerminals"),D=C.insert("g").attr("class","inner");v=D.node().appendChild(w);const V=w.getBBox();D.attr("transform","translate("+-V.width/2+", "+-V.height/2+")"),C.node().appendChild(w),Be[a.id]||(Be[a.id]={}),Be[a.id].endRight=C,Ot(v,a.endLabelRight)}return d};function Ot(s,a){ut().flowchart.htmlLabels&&s&&(s.style.width=9*a.length+"px",s.style.height="12px")}const Nn=(s,a)=>{Me.warn("abc88 cutPathAtIntersect",s,a);let d=[],f=s[0],p=!1;return s.forEach(y=>{if(Me.info("abc88 checking point",y,a),((s,a)=>{const f=s.y,p=Math.abs(a.x-s.x),y=Math.abs(a.y-f);return p>=s.width/2||y>=s.height/2})(a,y)||p)Me.warn("abc88 outside",y,f),f=y,p||d.push(y);else{const v=((s,a,d)=>{Me.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(a)}\n  insidePoint : ${JSON.stringify(d)}\n  node        : x:${s.x} y:${s.y} w:${s.width} h:${s.height}`);const f=s.x,p=s.y,y=Math.abs(f-d.x),v=s.width/2;let w=d.x<a.x?v-y:v+y;const C=s.height/2,D=Math.abs(a.y-d.y),V=Math.abs(a.x-d.x);if(Math.abs(p-a.y)*v>Math.abs(f-a.x)*C){let W=d.y<a.y?a.y-C-p:p-C-a.y;w=V*W/D;const j={x:d.x<a.x?d.x+w:d.x-V+w,y:d.y<a.y?d.y+D-W:d.y-D+W};return 0===w&&(j.x=a.x,j.y=a.y),0===V&&(j.x=a.x),0===D&&(j.y=a.y),Me.warn(`abc89 topp/bott calc, Q ${D}, q ${W}, R ${V}, r ${w}`,j),j}{w=d.x<a.x?a.x-v-f:f-v-a.x;let W=D*w/V,j=d.x<a.x?d.x+V-w:d.x-V+w,X=d.y<a.y?d.y+W:d.y-W;return Me.warn(`sides calc abc89, Q ${D}, q ${W}, R ${V}, r ${w}`,{_x:j,_y:X}),0===w&&(j=a.x,X=a.y),0===V&&(j=a.x),0===D&&(X=a.y),{x:j,y:X}}})(a,f,y);Me.warn("abc88 inside",y,f,v),Me.warn("abc88 intersection",v);let w=!1;d.forEach(C=>{w=w||C.x===v.x&&C.y===v.y}),d.some(C=>C.x===v.x&&C.y===v.y)?Me.warn("abc88 no intersect",v,d):d.push(v),p=!0}}),Me.warn("abc88 returning points",d),d},pi=(s,a,d,f)=>{Me.info("Graph in recursive render: XXX",Xi.M(a),f);const p=a.graph().rankdir;Me.trace("Dir in recursive render - dir:",p);const y=s.insert("g").attr("class","root");a.nodes()?Me.info("Recursive render XXX",a.nodes()):Me.info("No nodes found for",a),a.edges().length>0&&Me.trace("Recursive edges",a.edge(a.edges()[0]));const v=y.insert("g").attr("class","clusters"),w=y.insert("g").attr("class","edgePaths"),C=y.insert("g").attr("class","edgeLabels"),D=y.insert("g").attr("class","nodes");a.nodes().forEach(function(W){const j=a.node(W);if(void 0!==f){const X=JSON.parse(JSON.stringify(f.clusterData));Me.info("Setting data for cluster XXX (",W,") ",X,f),a.setNode(f.id,X),a.parent(W)||(Me.trace("Setting parent",W,f.id),a.setParent(W,f.id,X))}if(Me.info("(Insert) Node XXX"+W+": "+JSON.stringify(a.node(W))),j&&j.clusterNode){Me.info("Cluster identified",W,j.width,a.node(W));const X=pi(D,j.graph,d,a.node(W)),Ee=X.elem;ia(j,Ee),j.diff=X.diff||0,Me.info("Node bounds (abc123)",W,j,j.width,j.x,j.y),((s,a)=>{lg[a.id]=s})(Ee,j),Me.warn("Recursive render complete ",Ee,j)}else a.children(W).length>0?(Me.info("Cluster - the non recursive path XXX",W,j.id,j,a),Me.info(Jh(j.id,a)),Hs[j.id]={id:Jh(j.id,a),node:j}):(Me.info("Node - the non recursive path",W,j.id,j),h0(D,a.node(W),p))}),a.edges().forEach(function(W){const j=a.edge(W.v,W.w,W.name);Me.info("Edge "+W.v+" -> "+W.w+": "+JSON.stringify(W)),Me.info("Edge "+W.v+" -> "+W.w+": ",W," ",JSON.stringify(a.edge(W))),Me.info("Fix",Hs,"ids:",W.v,W.w,"Translateing: ",Hs[W.v],Hs[W.w]),qt(C,j)}),a.edges().forEach(function(W){Me.info("Edge "+W.v+" -> "+W.w+": "+JSON.stringify(W))}),Me.info("#############################################"),Me.info("###                Layout                 ###"),Me.info("#############################################"),Me.info(a),(0,li.Zp)(a),Me.info("Graph after layout:",Xi.M(a));let V=0;return(s=>ag(s,s.children()))(a).forEach(function(W){const j=a.node(W);Me.info("Position "+W+": "+JSON.stringify(a.node(W))),Me.info("Position "+W+": ("+j.x,","+j.y,") width: ",j.width," height: ",j.height),j&&j.clusterNode?zy(j):a.children(W).length>0?(((s,a)=>{Me.trace("Inserting cluster"),ue[a.id]=oe[a.shape||"rect"](s,a)})(v,j),Hs[j.id].node=j):zy(j)}),a.edges().forEach(function(W){const j=a.edge(W);Me.info("Edge "+W.v+" -> "+W.w+": "+JSON.stringify(j),j);const X=function(s,a,d,f,p,y){let v=d.points,w=!1;const C=y.node(a.v);var D=y.node(a.w);Me.info("abc88 InsertEdge: ",d),D.intersect&&C.intersect&&(v=v.slice(1,d.points.length-1),v.unshift(C.intersect(v[0])),Me.info("Last point",v[v.length-1],D,D.intersect(v[v.length-1])),v.push(D.intersect(v[v.length-1]))),d.toCluster&&(Me.info("to cluster abc88",f[d.toCluster]),v=Nn(d.points,f[d.toCluster].node),w=!0),d.fromCluster&&(Me.info("from cluster abc88",f[d.fromCluster]),v=Nn(v.reverse(),f[d.fromCluster].node).reverse(),w=!0);const V=v.filter(Ve=>!Number.isNaN(Ve.y));let W;W=("graph"===p||"flowchart"===p)&&d.curve||F.qrM;const j=(0,F.n8j)().x(function(Ve){return Ve.x}).y(function(Ve){return Ve.y}).curve(W);let X;switch(d.thickness){case"normal":X="edge-thickness-normal";break;case"thick":X="edge-thickness-thick";break;default:X=""}switch(d.pattern){case"solid":X+=" edge-pattern-solid";break;case"dotted":X+=" edge-pattern-dotted";break;case"dashed":X+=" edge-pattern-dashed"}const Ee=s.append("path").attr("d",j(V)).attr("id",d.id).attr("class"," "+X+(d.classes?" "+d.classes:"")).attr("style",d.style);let Ie="";switch((ut().flowchart.arrowMarkerAbsolute||ut().state.arrowMarkerAbsolute)&&(Ie=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Ie=Ie.replace(/\(/g,"\\("),Ie=Ie.replace(/\)/g,"\\)")),Me.info("arrowTypeStart",d.arrowTypeStart),Me.info("arrowTypeEnd",d.arrowTypeEnd),d.arrowTypeStart){case"arrow_cross":Ee.attr("marker-start","url("+Ie+"#"+p+"-crossStart)");break;case"arrow_point":Ee.attr("marker-start","url("+Ie+"#"+p+"-pointStart)");break;case"arrow_barb":Ee.attr("marker-start","url("+Ie+"#"+p+"-barbStart)");break;case"arrow_circle":Ee.attr("marker-start","url("+Ie+"#"+p+"-circleStart)");break;case"aggregation":Ee.attr("marker-start","url("+Ie+"#"+p+"-aggregationStart)");break;case"extension":Ee.attr("marker-start","url("+Ie+"#"+p+"-extensionStart)");break;case"composition":Ee.attr("marker-start","url("+Ie+"#"+p+"-compositionStart)");break;case"dependency":Ee.attr("marker-start","url("+Ie+"#"+p+"-dependencyStart)");break;case"lollipop":Ee.attr("marker-start","url("+Ie+"#"+p+"-lollipopStart)")}switch(d.arrowTypeEnd){case"arrow_cross":Ee.attr("marker-end","url("+Ie+"#"+p+"-crossEnd)");break;case"arrow_point":Ee.attr("marker-end","url("+Ie+"#"+p+"-pointEnd)");break;case"arrow_barb":Ee.attr("marker-end","url("+Ie+"#"+p+"-barbEnd)");break;case"arrow_circle":Ee.attr("marker-end","url("+Ie+"#"+p+"-circleEnd)");break;case"aggregation":Ee.attr("marker-end","url("+Ie+"#"+p+"-aggregationEnd)");break;case"extension":Ee.attr("marker-end","url("+Ie+"#"+p+"-extensionEnd)");break;case"composition":Ee.attr("marker-end","url("+Ie+"#"+p+"-compositionEnd)");break;case"dependency":Ee.attr("marker-end","url("+Ie+"#"+p+"-dependencyEnd)");break;case"lollipop":Ee.attr("marker-end","url("+Ie+"#"+p+"-lollipopEnd)")}let Pe={};return w&&(Pe.updatedPath=v),Pe.originalPath=d.points,Pe}(w,W,j,Hs,d,a);((s,a)=>{Me.info("Moving label abc78 ",s.id,s.label,ze[s.id]);let d=a.updatedPath?a.updatedPath:a.originalPath;if(s.label){const f=ze[s.id];let p=s.x,y=s.y;if(d){const v=Br.calcLabelPosition(d);Me.info("Moving label "+s.label+" from (",p,",",y,") to (",v.x,",",v.y,") abc78"),a.updatedPath&&(p=v.x,y=v.y)}f.attr("transform","translate("+p+", "+y+")")}if(s.startLabelLeft){const f=Be[s.id].startLeft;let p=s.x,y=s.y;if(d){const v=Br.calcTerminalLabelPosition(s.arrowTypeStart?10:0,"start_left",d);p=v.x,y=v.y}f.attr("transform","translate("+p+", "+y+")")}if(s.startLabelRight){const f=Be[s.id].startRight;let p=s.x,y=s.y;if(d){const v=Br.calcTerminalLabelPosition(s.arrowTypeStart?10:0,"start_right",d);p=v.x,y=v.y}f.attr("transform","translate("+p+", "+y+")")}if(s.endLabelLeft){const f=Be[s.id].endLeft;let p=s.x,y=s.y;if(d){const v=Br.calcTerminalLabelPosition(s.arrowTypeEnd?10:0,"end_left",d);p=v.x,y=v.y}f.attr("transform","translate("+p+", "+y+")")}if(s.endLabelRight){const f=Be[s.id].endRight;let p=s.x,y=s.y;if(d){const v=Br.calcTerminalLabelPosition(s.arrowTypeEnd?10:0,"end_right",d);p=v.x,y=v.y}f.attr("transform","translate("+p+", "+y+")")}})(j,X)}),a.nodes().forEach(function(W){const j=a.node(W);Me.info(W,j.type,j.diff),"group"===j.type&&(V=j.diff)}),{elem:y,diff:V}},$n=(s,a,d,f,p)=>{L1(s,d,f,p),lg={},ze={},Be={},ue={},Hc={},B1={},Hs={},Me.warn("Graph at first:",Xi.M(a)),((s,a)=>{s?(Me.debug("Opting in, graph "),s.nodes().forEach(function(d){s.children(d).length>0&&(Me.warn("Cluster identified",d," Replacement id in edges: ",Jh(d,s)),Hc[d]=_m(d,s),Hs[d]={id:Jh(d,s),clusterData:s.node(d)})}),s.nodes().forEach(function(d){const f=s.children(d),p=s.edges();f.length>0?(Me.debug("Cluster identified",d,Hc),p.forEach(y=>{y.v!==d&&y.w!==d&&rp(y.v,d)^rp(y.w,d)&&(Me.warn("Edge: ",y," leaves cluster ",d),Me.warn("Decendants of XXX ",d,": ",Hc[d]),Hs[d].externalConnections=!0)})):Me.debug("Not a cluster ",d,Hc)}),s.edges().forEach(function(d){const f=s.edge(d);Me.warn("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(d)),Me.warn("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(s.edge(d)));let p=d.v,y=d.w;if(Me.warn("Fix XXX",Hs,"ids:",d.v,d.w,"Translating: ",Hs[d.v]," --- ",Hs[d.w]),Hs[d.v]&&Hs[d.w]&&Hs[d.v]===Hs[d.w]){Me.warn("Fixing and trixing link to self - removing XXX",d.v,d.w,d.name),Me.warn("Fixing and trixing - removing XXX",d.v,d.w,d.name),p=ef(d.v),y=ef(d.w),s.removeEdge(d.v,d.w,d.name);const v=d.w+"---"+d.v;s.setNode(v,{domId:v,id:v,labelStyle:"",labelText:f.label,padding:0,shape:"labelRect",style:""});const w=JSON.parse(JSON.stringify(f)),C=JSON.parse(JSON.stringify(f));w.label="",w.arrowTypeEnd="none",C.label="",w.fromCluster=d.v,C.toCluster=d.v,s.setEdge(p,v,w,d.name+"-cyclic-special"),s.setEdge(v,y,C,d.name+"-cyclic-special")}else(Hs[d.v]||Hs[d.w])&&(Me.warn("Fixing and trixing - removing XXX",d.v,d.w,d.name),p=ef(d.v),y=ef(d.w),s.removeEdge(d.v,d.w,d.name),p!==d.v&&(f.fromCluster=d.v),y!==d.w&&(f.toCluster=d.w),Me.warn("Fix Replacing with XXX",p,y,d.name),s.setEdge(p,y,f,d.name))}),Me.warn("Adjusted Graph",Xi.M(s)),sp(s,0),Me.trace(Hs)):Me.debug("Opting out, no graph ")})(a),Me.warn("Graph after:",Xi.M(a)),pi(s,a,f)},gi=s=>tr.sanitizeText(s,ut());let di={dividerMargin:10,padding:5,textHeight:10};function Ni(s){let a;switch(s){case 0:a="aggregation";break;case 1:a="extension";break;case 2:a="composition";break;case 3:a="dependency";break;case 4:a="lollipop";break;default:a="none"}return a}const ws={setConf:function(s){Object.keys(s).forEach(function(d){di[d]=s[d]})},draw:function(s,a,d,f){Me.info("Drawing class - ",a);const p=ut().flowchart,y=ut().securityLevel;Me.info("config:",p);const v=p.nodeSpacing||50,w=p.rankSpacing||50,C=new Ki.T({multigraph:!0,compound:!0}).setGraph({rankdir:f.db.getDirection(),nodesep:v,ranksep:w,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),D=f.db.getClasses(),V=f.db.getRelations(),W=f.db.getNotes();let j;Me.info(V),function(s,a,d,f){const p=Object.keys(s);Me.info("keys:",p),Me.info(s),p.forEach(function(y){const v=s[y];let w="";v.cssClasses.length>0&&(w=w+" "+v.cssClasses.join(" "));const C={labelStyle:""};let D=void 0!==v.text?v.text:v.id,W="";W="class_box",a.setNode(v.id,{labelStyle:C.labelStyle,shape:W,labelText:gi(D),classData:v,rx:0,ry:0,class:w,style:C.style,id:v.id,domId:v.domId,tooltip:f.db.getTooltip(v.id)||"",haveCallback:v.haveCallback,link:v.link,width:"group"===v.type?500:void 0,type:v.type,padding:ut().flowchart.padding}),Me.info("setNode",{labelStyle:C.labelStyle,shape:W,labelText:D,rx:0,ry:0,class:w,style:C.style,id:v.id,width:"group"===v.type?500:void 0,type:v.type,padding:ut().flowchart.padding})})}(D,C,0,f),function(s,a){const d=ut().flowchart;let f=0;s.forEach(function(p){f++;const y={classes:"relation"};y.pattern=1==p.relation.lineType?"dashed":"solid",y.id="id"+f,y.arrowhead="arrow_open"===p.type?"none":"normal",Me.info(y,p),y.startLabelRight="none"===p.relationTitle1?"":p.relationTitle1,y.endLabelLeft="none"===p.relationTitle2?"":p.relationTitle2,y.arrowTypeStart=Ni(p.relation.type1),y.arrowTypeEnd=Ni(p.relation.type2);let v="",w="";if(void 0!==p.style){const C=qa(p.style);v=C.style,w=C.labelStyle}else v="fill:none";y.style=v,y.labelStyle=w,y.curve=Qi(void 0!==p.interpolate?p.interpolate:void 0!==s.defaultInterpolate?s.defaultInterpolate:d.curve,F.lUB),p.text=p.title,void 0===p.text?void 0!==p.style&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c",ut().flowchart.htmlLabels?(y.labelType="html",y.label='<span class="edgeLabel">'+p.text+"</span>"):(y.labelType="text",y.label=p.text.replace(tr.lineBreakRegex,"\n"),void 0===p.style&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none"),y.labelStyle=y.labelStyle.replace("color:","fill:"))),a.setEdge(p.id1,p.id2,y,f)})}(V,C),function(s,a,d,f){Me.info(s),s.forEach(function(p,y){const v=p;let D=v.text,W="note";if(a.setNode(v.id,{labelStyle:"",shape:W,labelText:gi(D),noteData:v,rx:0,ry:0,class:"",style:"",id:v.id,domId:v.id,tooltip:"",type:"note",padding:ut().flowchart.padding}),Me.info("setNode",{labelStyle:"",shape:W,labelText:D,rx:0,ry:0,style:"",id:v.id,type:"note",padding:ut().flowchart.padding}),!v.class||!(v.class in f))return;const j=d+y,X={classes:"relation",pattern:"dotted"};X.id=`edgeNote${j}`,X.arrowhead="none",Me.info(`Note edge: ${JSON.stringify(X)}, ${JSON.stringify(v)}`),X.startLabelRight="",X.endLabelLeft="",X.arrowTypeStart="none",X.arrowTypeEnd="none",X.style="fill:none",X.labelStyle="",X.curve=Qi(di.curve,F.lUB),a.setEdge(v.id,v.class,X,j)})}(W,C,V.length+1,D),"sandbox"===y&&(j=(0,F.Ltv)("#i"+a));const X=(0,F.Ltv)("sandbox"===y?j.nodes()[0].contentDocument.body:"body"),Ee=X.select(`[id="${a}"]`),Ie=X.select("#"+a+" g");if($n(Ie,C,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",a),Br.insertTitle(Ee,"classTitleText",p.titleTopMargin,f.db.getDiagramTitle()),ih(C,Ee,p.diagramPadding,p.useMaxWidth),!p.htmlLabels){const Pe="sandbox"===y?j.nodes()[0].contentDocument:document,Ve=Pe.querySelectorAll('[id="'+a+'"] .edgeLabel .label');for(const Ae of Ve){const Qe=Ae.getBBox(),vt=Pe.createElementNS("http://www.w3.org/2000/svg","rect");vt.setAttribute("rx",0),vt.setAttribute("ry",0),vt.setAttribute("width",Qe.width),vt.setAttribute("height",Qe.height),Ae.insertBefore(vt,Ae.firstChild)}}}};var ci=function(){var s=function($e,pe,Ke,J){for(Ke=Ke||{},J=$e.length;J--;Ke[$e[J]]=pe);return Ke},a=[1,2],d=[1,5],f=[6,9,11,23,25,27,29,30,31,51],p=[1,17],y=[1,18],v=[1,19],w=[1,20],C=[1,21],D=[1,22],V=[1,25],W=[1,30],j=[1,31],X=[1,32],Ee=[1,33],Ie=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,51],Pe=[1,45],Ve=[30,31,48,49],Ae=[4,6,9,11,23,25,27,29,30,31,51],Qe=[44,45,46,47],vt=[22,37],Ft=[1,65],Qt=[1,64],st=[22,37,39,41],rt={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,NON_IDENTIFYING:48,IDENTIFYING:49,WORD:50,open_directive:51,type_directive:52,arg_directive:53,close_directive:54,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"NON_IDENTIFYING",49:"IDENTIFYING",50:"WORD",51:"open_directive",52:"type_directive",53:"arg_directive",54:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(pe,Ke,J,dt,ae,Ct,Jn){var Xt=Ct.length-1;switch(ae){case 1:break;case 3:case 7:case 8:this.$=[];break;case 4:Ct[Xt-1].push(Ct[Xt]),this.$=Ct[Xt-1];break;case 5:case 6:case 20:case 43:case 28:case 29:case 32:this.$=Ct[Xt];break;case 12:dt.addEntity(Ct[Xt-4]),dt.addEntity(Ct[Xt-2]),dt.addRelationship(Ct[Xt-4],Ct[Xt],Ct[Xt-2],Ct[Xt-3]);break;case 13:dt.addEntity(Ct[Xt-3]),dt.addAttributes(Ct[Xt-3],Ct[Xt-1]);break;case 14:dt.addEntity(Ct[Xt-2]);break;case 15:dt.addEntity(Ct[Xt]);break;case 16:case 17:this.$=Ct[Xt].trim(),dt.setAccTitle(this.$);break;case 18:case 19:this.$=Ct[Xt].trim(),dt.setAccDescription(this.$);break;case 21:case 41:case 42:case 33:this.$=Ct[Xt].replace(/"/g,"");break;case 22:case 30:this.$=[Ct[Xt]];break;case 23:Ct[Xt].push(Ct[Xt-1]),this.$=Ct[Xt];break;case 24:this.$={attributeType:Ct[Xt-1],attributeName:Ct[Xt]};break;case 25:this.$={attributeType:Ct[Xt-2],attributeName:Ct[Xt-1],attributeKeyTypeList:Ct[Xt]};break;case 26:this.$={attributeType:Ct[Xt-2],attributeName:Ct[Xt-1],attributeComment:Ct[Xt]};break;case 27:this.$={attributeType:Ct[Xt-3],attributeName:Ct[Xt-2],attributeKeyTypeList:Ct[Xt-1],attributeComment:Ct[Xt]};break;case 31:Ct[Xt-2].push(Ct[Xt]),this.$=Ct[Xt-2];break;case 34:this.$={cardA:Ct[Xt],relType:Ct[Xt-1],cardB:Ct[Xt-2]};break;case 35:this.$=dt.Cardinality.ZERO_OR_ONE;break;case 36:this.$=dt.Cardinality.ZERO_OR_MORE;break;case 37:this.$=dt.Cardinality.ONE_OR_MORE;break;case 38:this.$=dt.Cardinality.ONLY_ONE;break;case 39:this.$=dt.Identification.NON_IDENTIFYING;break;case 40:this.$=dt.Identification.IDENTIFYING;break;case 44:dt.parseDirective("%%{","open_directive");break;case 45:dt.parseDirective(Ct[Xt],"type_directive");break;case 46:Ct[Xt]=Ct[Xt].trim().replace(/'/g,'"'),dt.parseDirective(Ct[Xt],"arg_directive");break;case 47:dt.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:a,7:3,12:4,51:d},{1:[3]},s(f,[2,3],{5:6}),{3:7,4:a,7:3,12:4,51:d},{13:8,52:[1,9]},{52:[2,44]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:p,25:y,27:v,29:w,30:C,31:D,51:d},{1:[2,2]},{14:23,15:[1,24],54:V},s([15,54],[2,45]),s(f,[2,8],{1:[2,1]}),s(f,[2,4]),{7:15,10:26,12:4,17:16,23:p,25:y,27:v,29:w,30:C,31:D,51:d},s(f,[2,6]),s(f,[2,7]),s(f,[2,11]),s(f,[2,15],{18:27,42:29,20:[1,28],44:W,45:j,46:X,47:Ee}),{24:[1,34]},{26:[1,35]},{28:[1,36]},s(f,[2,19]),s(Ie,[2,20]),s(Ie,[2,21]),{11:[1,37]},{16:38,53:[1,39]},{11:[2,47]},s(f,[2,5]),{17:40,30:C,31:D},{21:41,22:[1,42],32:43,33:44,37:Pe},{43:46,48:[1,47],49:[1,48]},s(Ve,[2,35]),s(Ve,[2,36]),s(Ve,[2,37]),s(Ve,[2,38]),s(f,[2,16]),s(f,[2,17]),s(f,[2,18]),s(Ae,[2,9]),{14:49,54:V},{54:[2,46]},{15:[1,50]},{22:[1,51]},s(f,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Pe},{34:53,37:[1,54]},{37:[2,28]},{42:55,44:W,45:j,46:X,47:Ee},s(Qe,[2,39]),s(Qe,[2,40]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],50:[1,58]},s(f,[2,13]),{22:[2,23]},s(vt,[2,24],{35:61,36:62,38:63,40:Ft,41:Qt}),s([22,37,40,41],[2,29]),s([30,31],[2,34]),s(Ae,[2,10]),s(f,[2,12]),s(f,[2,41]),s(f,[2,42]),s(f,[2,43]),s(vt,[2,25],{36:66,39:[1,67],41:Qt}),s(vt,[2,26]),s(st,[2,30]),s(vt,[2,33]),s(st,[2,32]),s(vt,[2,27]),{38:68,40:Ft},s(st,[2,31])],defaultActions:{5:[2,44],7:[2,2],25:[2,47],39:[2,46],45:[2,28],52:[2,23]},parseError:function(pe,Ke){if(!Ke.recoverable){var J=new Error(pe);throw J.hash=Ke,J}this.trace(pe)},parse:function(pe){var J=[0],dt=[],ae=[null],Ct=[],Jn=this.table,Xt="",Jt=0,L=0,Hn=Ct.slice.call(arguments,1),Dn=Object.create(this.lexer),Pt={yy:{}};for(var nr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nr)&&(Pt.yy[nr]=this.yy[nr]);Dn.setInput(pe,Pt.yy),Pt.yy.lexer=Dn,Pt.yy.parser=this,typeof Dn.yylloc>"u"&&(Dn.yylloc={});var xt=Dn.yylloc;Ct.push(xt);var qn,Tn=Dn.options&&Dn.options.ranges;this.parseError="function"==typeof Pt.yy.parseError?Pt.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Ht,lt,Ye,ct,bn,xe,Ut,Oe={};;){if(this.defaultActions[lt=J[J.length-1]]?Ye=this.defaultActions[lt]:((null===Ht||typeof Ht>"u")&&(qn=void 0,"number"!=typeof(qn=dt.pop()||Dn.lex()||1)&&(qn instanceof Array&&(qn=(dt=qn).pop()),qn=this.symbols_[qn]||qn),Ht=qn),Ye=Jn[lt]&&Jn[lt][Ht]),typeof Ye>"u"||!Ye.length||!Ye[0]){var ui;for(bn in Ut=[],Jn[lt])this.terminals_[bn]&&bn>2&&Ut.push("'"+this.terminals_[bn]+"'");ui=Dn.showPosition?"Parse error on line "+(Jt+1)+":\n"+Dn.showPosition()+"\nExpecting "+Ut.join(", ")+", got '"+(this.terminals_[Ht]||Ht)+"'":"Parse error on line "+(Jt+1)+": Unexpected "+(1==Ht?"end of input":"'"+(this.terminals_[Ht]||Ht)+"'"),this.parseError(ui,{text:Dn.match,token:this.terminals_[Ht]||Ht,line:Dn.yylineno,loc:xt,expected:Ut})}if(Ye[0]instanceof Array&&Ye.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+Ht);switch(Ye[0]){case 1:J.push(Ht),ae.push(Dn.yytext),Ct.push(Dn.yylloc),J.push(Ye[1]),Ht=null,L=Dn.yyleng,Xt=Dn.yytext,Jt=Dn.yylineno,xt=Dn.yylloc;break;case 2:if(Oe.$=ae[ae.length-(xe=this.productions_[Ye[1]][1])],Oe._$={first_line:Ct[Ct.length-(xe||1)].first_line,last_line:Ct[Ct.length-1].last_line,first_column:Ct[Ct.length-(xe||1)].first_column,last_column:Ct[Ct.length-1].last_column},Tn&&(Oe._$.range=[Ct[Ct.length-(xe||1)].range[0],Ct[Ct.length-1].range[1]]),typeof(ct=this.performAction.apply(Oe,[Xt,L,Jt,Pt.yy,Ye[1],ae,Ct].concat(Hn)))<"u")return ct;xe&&(J=J.slice(0,-1*xe*2),ae=ae.slice(0,-1*xe),Ct=Ct.slice(0,-1*xe)),J.push(this.productions_[Ye[1]][0]),ae.push(Oe.$),Ct.push(Oe._$),J.push(Jn[J[J.length-2]][J[J.length-1]]);break;case 3:return!0}}return!0}};function qe(){this.yy={}}return rt.lexer=function(){return{EOF:1,parseError:function(Ke,J){if(!this.yy.parser)throw new Error(Ke);this.yy.parser.parseError(Ke,J)},setInput:function(pe,Ke){return this.yy=Ke||this.yy||{},this._input=pe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pe=this._input[0];return this.yytext+=pe,this.yyleng++,this.offset++,this.match+=pe,this.matched+=pe,pe.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pe},unput:function(pe){var Ke=pe.length,J=pe.split(/(?:\r\n?|\n)/g);this._input=pe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ke),this.offset-=Ke;var dt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),J.length-1&&(this.yylineno-=J.length-1);var ae=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:J?(J.length===dt.length?this.yylloc.first_column:0)+dt[dt.length-J.length].length-J[0].length:this.yylloc.first_column-Ke},this.options.ranges&&(this.yylloc.range=[ae[0],ae[0]+this.yyleng-Ke]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(pe){this.unput(this.match.slice(pe))},pastInput:function(){var pe=this.matched.substr(0,this.matched.length-this.match.length);return(pe.length>20?"...":"")+pe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pe=this.match;return pe.length<20&&(pe+=this._input.substr(0,20-pe.length)),(pe.substr(0,20)+(pe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pe=this.pastInput(),Ke=new Array(pe.length+1).join("-");return pe+this.upcomingInput()+"\n"+Ke+"^"},test_match:function(pe,Ke){var J,dt,ae;if(this.options.backtrack_lexer&&(ae={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ae.yylloc.range=this.yylloc.range.slice(0))),(dt=pe[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=dt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:dt?dt[dt.length-1].length-dt[dt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pe[0].length},this.yytext+=pe[0],this.match+=pe[0],this.matches=pe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pe[0].length),this.matched+=pe[0],J=this.performAction.call(this,this.yy,this,Ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),J)return J;if(this._backtrack){for(var Ct in ae)this[Ct]=ae[Ct];return!1}return!1},next:function(){if(this.done)return this.EOF;var pe,Ke,J,dt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ae=this._currentRules(),Ct=0;Ct<ae.length;Ct++)if((J=this._input.match(this.rules[ae[Ct]]))&&(!Ke||J[0].length>Ke[0].length)){if(Ke=J,dt=Ct,this.options.backtrack_lexer){if(!1!==(pe=this.test_match(J,ae[Ct])))return pe;if(this._backtrack){Ke=!1;continue}return!1}if(!this.options.flex)break}return Ke?!1!==(pe=this.test_match(Ke,ae[dt]))&&pe:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ke){this.conditionStack.push(Ke)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ke){return(Ke=this.conditionStack.length-1-Math.abs(Ke||0))>=0?this.conditionStack[Ke]:"INITIAL"},pushState:function(Ke){this.begin(Ke)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Ke,J,dt,ae){switch(dt){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),51;case 8:return this.begin("type_directive"),52;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),54;case 11:return 53;case 12:case 13:case 15:case 22:case 27:break;case 14:return 11;case 16:return 9;case 17:return 31;case 18:return 50;case 19:return 4;case 20:return this.begin("block"),20;case 21:return 39;case 23:return 40;case 24:case 25:return 37;case 26:return 41;case 28:return this.popState(),22;case 29:case 58:return J.yytext[0];case 30:case 34:case 35:case 48:return 44;case 31:case 32:case 33:case 41:case 43:case 50:return 46;case 36:case 37:case 38:case 39:case 40:case 42:case 49:return 45;case 44:case 45:case 46:case 47:return 47;case 51:case 54:case 55:case 56:return 48;case 52:case 53:return 49;case 57:return 30;case 59:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28,29],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}}}(),qe.prototype=rt,rt.Parser=qe,new qe}();ci.parser=ci;const Dt=ci,Si=s=>null!==s.match(/^\s*erDiagram/);let xn={},ni=[];const Tr=function(s){return void 0===xn[s]&&(xn[s]={attributes:[]},Me.info("Added new entity :",s)),xn[s]},fo={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().er,addEntity:Tr,addAttributes:function(s,a){let f,d=Tr(s);for(f=a.length-1;f>=0;f--)d.attributes.push(a[f]),Me.debug("Added attribute ",a[f].attributeName)},getEntities:()=>xn,addRelationship:function(s,a,d,f){let p={entityA:s,roleA:a,entityB:d,relSpec:f};ni.push(p),Me.debug("Added new relationship :",p)},getRelationships:()=>ni,clear:function(){xn={},ni=[],je()},setAccTitle:Je,getAccTitle:pt,setAccDescription:et,getAccDescription:Mt,setDiagramTitle:Nt,getDiagramTitle:cn},_o={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},br_ERMarkers=_o,Ls=/[^\dA-Za-z](\W)*/g;let vn={},po=new Map;const ga=function(s){return(s.entityA+s.roleA+s.entityB).replace(/\s/g,"")};let ph=0;const sM="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function cT(s=""){return s.length>0?`${s}-`:""}const o3={setConf:function(s){const a=Object.keys(s);for(const d of a)vn[d]=s[d]},draw:function(s,a,d,f){vn=ut().er,Me.info("Drawing ER diagram");const p=ut().securityLevel;let y;"sandbox"===p&&(y=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===p?y.nodes()[0].contentDocument.body:"body").select(`[id='${a}']`);let C;(function(s,a){let d;s.append("defs").append("marker").attr("id",_o.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),s.append("defs").append("marker").attr("id",_o.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),d=s.append("defs").append("marker").attr("id",_o.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),d.append("circle").attr("stroke",a.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),d.append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M9,0 L9,18"),d=s.append("defs").append("marker").attr("id",_o.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),d.append("circle").attr("stroke",a.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),d.append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M21,0 L21,18"),s.append("defs").append("marker").attr("id",_o.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),s.append("defs").append("marker").attr("id",_o.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),d=s.append("defs").append("marker").attr("id",_o.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),d.append("circle").attr("stroke",a.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),d.append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),d=s.append("defs").append("marker").attr("id",_o.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),d.append("circle").attr("stroke",a.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),d.append("path").attr("stroke",a.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")})(w,vn),C=new Ki.T({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:vn.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const D=function(s,a,d){let p;return Object.keys(a).forEach(function(y){const v=function j1(s="",a=""){const d=s.replace(Ls,"");return`${cT(a)}${cT(d)}${Ta(s,sM)}`}(y,"entity");po.set(y,v);const w=s.append("g").attr("id",v);p=void 0===p?v:p;const C="text-"+v,D=w.append("text").classed("er entityLabel",!0).attr("id",C).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",ut().fontFamily).style("font-size",vn.fontSize+"px").text(y),{width:V,height:W}=((s,a,d)=>{const f=vn.entityPadding/3,p=vn.entityPadding/3,y=.85*vn.fontSize,v=a.node().getBBox(),w=[];let C=!1,D=!1,V=0,W=0,j=0,X=0,Ee=v.height+2*f,Ie=1;d.forEach(Qe=>{void 0!==Qe.attributeKeyTypeList&&Qe.attributeKeyTypeList.length>0&&(C=!0),void 0!==Qe.attributeComment&&(D=!0)}),d.forEach(Qe=>{const vt=`${a.node().id}-attr-${Ie}`;let Ft=0;const Qt=vl(Qe.attributeType),st=s.append("text").classed("er entityLabel",!0).attr("id",`${vt}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",ut().fontFamily).style("font-size",y+"px").text(Qt),rt=s.append("text").classed("er entityLabel",!0).attr("id",`${vt}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",ut().fontFamily).style("font-size",y+"px").text(Qe.attributeName),Ue={};Ue.tn=st,Ue.nn=rt;const qe=st.node().getBBox(),$e=rt.node().getBBox();if(V=Math.max(V,qe.width),W=Math.max(W,$e.width),Ft=Math.max(qe.height,$e.height),C){const pe=void 0!==Qe.attributeKeyTypeList?Qe.attributeKeyTypeList.join(","):"",Ke=s.append("text").classed("er entityLabel",!0).attr("id",`${vt}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",ut().fontFamily).style("font-size",y+"px").text(pe);Ue.kn=Ke;const J=Ke.node().getBBox();j=Math.max(j,J.width),Ft=Math.max(Ft,J.height)}if(D){const pe=s.append("text").classed("er entityLabel",!0).attr("id",`${vt}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",ut().fontFamily).style("font-size",y+"px").text(Qe.attributeComment||"");Ue.cn=pe;const Ke=pe.node().getBBox();X=Math.max(X,Ke.width),Ft=Math.max(Ft,Ke.height)}Ue.height=Ft,w.push(Ue),Ee+=Ft+2*f,Ie+=1});let Pe=4;C&&(Pe+=2),D&&(Pe+=2);const Ve=V+W+j+X,Ae={width:Math.max(vn.minEntityWidth,Math.max(v.width+2*vn.entityPadding,Ve+p*Pe)),height:d.length>0?Ee:Math.max(vn.minEntityHeight,v.height+2*vn.entityPadding)};if(d.length>0){const Qe=Math.max(0,(Ae.width-Ve-p*Pe)/(Pe/2));a.attr("transform","translate("+Ae.width/2+","+(f+v.height/2)+")");let vt=v.height+2*f,Ft="attributeBoxOdd";w.forEach(Qt=>{const st=vt+f+Qt.height/2;Qt.tn.attr("transform","translate("+p+","+st+")");const rt=s.insert("rect","#"+Qt.tn.node().id).classed(`er ${Ft}`,!0).attr("x",0).attr("y",vt).attr("width",V+2*p+Qe).attr("height",Qt.height+2*f),Ue=parseFloat(rt.attr("x"))+parseFloat(rt.attr("width"));Qt.nn.attr("transform","translate("+(Ue+p)+","+st+")");const qe=s.insert("rect","#"+Qt.nn.node().id).classed(`er ${Ft}`,!0).attr("x",Ue).attr("y",vt).attr("width",W+2*p+Qe).attr("height",Qt.height+2*f);let $e=parseFloat(qe.attr("x"))+parseFloat(qe.attr("width"));if(C){Qt.kn.attr("transform","translate("+($e+p)+","+st+")");const pe=s.insert("rect","#"+Qt.kn.node().id).classed(`er ${Ft}`,!0).attr("x",$e).attr("y",vt).attr("width",j+2*p+Qe).attr("height",Qt.height+2*f);$e=parseFloat(pe.attr("x"))+parseFloat(pe.attr("width"))}D&&(Qt.cn.attr("transform","translate("+($e+p)+","+st+")"),s.insert("rect","#"+Qt.cn.node().id).classed(`er ${Ft}`,"true").attr("x",$e).attr("y",vt).attr("width",X+2*p+Qe).attr("height",Qt.height+2*f)),vt+=Qt.height+2*f,Ft="attributeBoxOdd"===Ft?"attributeBoxEven":"attributeBoxOdd"})}else Ae.height=Math.max(vn.minEntityHeight,Ee),a.attr("transform","translate("+Ae.width/2+","+Ae.height/2+")");return Ae})(w,D,a[y].attributes),X=w.insert("rect","#"+C).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",V).attr("height",W).node().getBBox();d.setNode(v,{width:X.width,height:X.height,shape:"rect",id:v})}),p}(w,f.db.getEntities(),C),V=function(s,a){return s.forEach(function(d){a.setEdge(po.get(d.entityA),po.get(d.entityB),{relationship:d},ga(d))}),s}(f.db.getRelationships(),C);(0,li.Zp)(C),function(s,a){a.nodes().forEach(function(d){void 0!==d&&void 0!==a.node(d)&&s.select("#"+d).attr("transform","translate("+(a.node(d).x-a.node(d).width/2)+","+(a.node(d).y-a.node(d).height/2)+" )")})}(w,C),V.forEach(function(Ie){!function(s,a,d,f,p){ph++;const y=d.edge(po.get(a.entityA),po.get(a.entityB),ga(a)),v=(0,F.n8j)().x(function(Ee){return Ee.x}).y(function(Ee){return Ee.y}).curve(F.qrM),w=s.insert("path","#"+f).classed("er relationshipLine",!0).attr("d",v(y.points)).style("stroke",vn.stroke).style("fill","none");a.relSpec.relType===p.db.Identification.NON_IDENTIFYING&&w.attr("stroke-dasharray","8,8");let C="";switch(vn.arrowMarkerAbsolute&&(C=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,C=C.replace(/\(/g,"\\("),C=C.replace(/\)/g,"\\)")),a.relSpec.cardA){case p.db.Cardinality.ZERO_OR_ONE:w.attr("marker-end","url("+C+"#"+br_ERMarkers.ZERO_OR_ONE_END+")");break;case p.db.Cardinality.ZERO_OR_MORE:w.attr("marker-end","url("+C+"#"+br_ERMarkers.ZERO_OR_MORE_END+")");break;case p.db.Cardinality.ONE_OR_MORE:w.attr("marker-end","url("+C+"#"+br_ERMarkers.ONE_OR_MORE_END+")");break;case p.db.Cardinality.ONLY_ONE:w.attr("marker-end","url("+C+"#"+br_ERMarkers.ONLY_ONE_END+")")}switch(a.relSpec.cardB){case p.db.Cardinality.ZERO_OR_ONE:w.attr("marker-start","url("+C+"#"+br_ERMarkers.ZERO_OR_ONE_START+")");break;case p.db.Cardinality.ZERO_OR_MORE:w.attr("marker-start","url("+C+"#"+br_ERMarkers.ZERO_OR_MORE_START+")");break;case p.db.Cardinality.ONE_OR_MORE:w.attr("marker-start","url("+C+"#"+br_ERMarkers.ONE_OR_MORE_START+")");break;case p.db.Cardinality.ONLY_ONE:w.attr("marker-start","url("+C+"#"+br_ERMarkers.ONLY_ONE_START+")")}const D=w.node().getTotalLength(),V=w.node().getPointAtLength(.5*D),W="rel"+ph,X=s.append("text").classed("er relationshipLabel",!0).attr("id",W).attr("x",V.x).attr("y",V.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",ut().fontFamily).style("font-size",vn.fontSize+"px").text(a.roleA).node().getBBox();s.insert("rect","#"+W).classed("er relationshipLabelBox",!0).attr("x",V.x-X.width/2).attr("y",V.y-X.height/2).attr("width",X.width).attr("height",X.height)}(w,Ie,C,D,f)});const W=vn.diagramPadding;Br.insertTitle(w,"entityTitleText",vn.titleTopMargin,f.db.getDiagramTitle());const j=w.node().getBBox(),X=j.width+2*W,Ee=j.height+2*W;tu(w,Ee,X,vn.useMaxWidth),w.attr("viewBox",`${j.x-W} ${j.y-W} ${X} ${Ee}`)}};var l2=function(){var s=function(Th,Cr,$r,Os){for($r=$r||{},Os=Th.length;Os--;$r[Th[Os]]=Cr);return $r},a=[1,9],d=[1,7],f=[1,6],p=[1,8],y=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],v=[2,10],w=[1,20],C=[1,21],D=[1,22],V=[1,23],W=[1,30],j=[1,32],X=[1,33],Ee=[1,34],Ie=[1,62],Pe=[1,48],Ve=[1,52],Ae=[1,36],Qe=[1,37],vt=[1,38],Ft=[1,39],Qt=[1,40],st=[1,56],rt=[1,63],Ue=[1,51],qe=[1,53],$e=[1,55],pe=[1,59],Ke=[1,60],J=[1,41],dt=[1,42],ae=[1,43],Ct=[1,44],Jn=[1,61],Xt=[1,50],Jt=[1,54],L=[1,57],P=[1,58],it=[1,49],Hn=[1,66],Dn=[1,71],Pt=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],nr=[1,75],xt=[1,74],Tn=[1,76],Wt=[20,21,23,81,82],Ht=[1,99],lt=[1,104],Ye=[1,107],ct=[1,108],Oe=[1,101],bn=[1,106],xe=[1,109],gr=[1,102],Ut=[1,114],ui=[1,113],qn=[1,103],gn=[1,105],Sn=[1,110],Rn=[1,111],En=[1,112],Bn=[1,115],Sr=[20,21,22,23,81,82],js=[20,21,22,23,53,81,82],wr=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],yr=[20,21,23],es=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Oa=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Vs=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Ar=[1,149],Ei=[1,157],jn=[1,158],Pn=[1,159],mi=[1,160],wn=[1,144],er=[1,145],Kt=[1,141],Ts=[1,152],an=[1,153],hs=[1,154],$s=[1,155],Ss=[1,156],Ws=[1,161],Zs=[1,162],kr=[1,147],Qr=[1,150],Is=[1,146],Ns=[1,143],Gm=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],nb=[1,165],_a=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Kr=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],au=[12,21,22,24],Ym=[22,106],Gl=[1,250],Nl=[1,245],ml=[1,246],Fu=[1,254],jc=[1,251],$c=[1,248],nl=[1,247],Dd=[1,249],wh=[1,252],Md=[1,253],Ch=[1,255],vg=[1,273],uk=[20,21,23,106],Id=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],_E={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(Cr,$r,Os,wi,ja,gt,k_){var kt=gt.length-1;switch(ja){case 5:wi.parseDirective("%%{","open_directive");break;case 6:wi.parseDirective(gt[kt],"type_directive");break;case 7:gt[kt]=gt[kt].trim().replace(/'/g,'"'),wi.parseDirective(gt[kt],"arg_directive");break;case 8:wi.parseDirective("}%%","close_directive","flowchart");break;case 10:case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 11:(!Array.isArray(gt[kt])||gt[kt].length>0)&&gt[kt-1].push(gt[kt]),this.$=gt[kt-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:case 78:case 150:this.$=gt[kt];break;case 19:wi.setDirection("TB"),this.$="TB";break;case 20:wi.setDirection(gt[kt-1]),this.$=gt[kt-1];break;case 35:this.$=gt[kt-1].nodes;break;case 41:this.$=wi.addSubGraph(gt[kt-6],gt[kt-1],gt[kt-4]);break;case 42:this.$=wi.addSubGraph(gt[kt-3],gt[kt-1],gt[kt-3]);break;case 43:this.$=wi.addSubGraph(void 0,gt[kt-1],void 0);break;case 45:this.$=gt[kt].trim(),wi.setAccTitle(this.$);break;case 46:case 47:this.$=gt[kt].trim(),wi.setAccDescription(this.$);break;case 51:wi.addLink(gt[kt-2].stmt,gt[kt],gt[kt-1]),this.$={stmt:gt[kt],nodes:gt[kt].concat(gt[kt-2].nodes)};break;case 52:wi.addLink(gt[kt-3].stmt,gt[kt-1],gt[kt-2]),this.$={stmt:gt[kt-1],nodes:gt[kt-1].concat(gt[kt-3].nodes)};break;case 53:this.$={stmt:gt[kt-1],nodes:gt[kt-1]};break;case 54:this.$={stmt:gt[kt],nodes:gt[kt]};break;case 55:case 123:case 125:this.$=[gt[kt]];break;case 56:this.$=gt[kt-4].concat(gt[kt]);break;case 57:this.$=[gt[kt-2]],wi.setClass(gt[kt-2],gt[kt]);break;case 58:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"square");break;case 59:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"doublecircle");break;case 60:this.$=gt[kt-5],wi.addVertex(gt[kt-5],gt[kt-2],"circle");break;case 61:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"ellipse");break;case 62:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"stadium");break;case 63:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"subroutine");break;case 64:this.$=gt[kt-7],wi.addVertex(gt[kt-7],gt[kt-1],"rect",void 0,void 0,void 0,Object.fromEntries([[gt[kt-5],gt[kt-3]]]));break;case 65:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"cylinder");break;case 66:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"round");break;case 67:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"diamond");break;case 68:this.$=gt[kt-5],wi.addVertex(gt[kt-5],gt[kt-2],"hexagon");break;case 69:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"odd");break;case 70:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"trapezoid");break;case 71:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"inv_trapezoid");break;case 72:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"lean_right");break;case 73:this.$=gt[kt-3],wi.addVertex(gt[kt-3],gt[kt-1],"lean_left");break;case 74:this.$=gt[kt],wi.addVertex(gt[kt]);break;case 75:gt[kt-1].text=gt[kt],this.$=gt[kt-1];break;case 76:case 77:gt[kt-2].text=gt[kt-1],this.$=gt[kt-2];break;case 79:var xh=wi.destructLink(gt[kt],gt[kt-2]);this.$={type:xh.type,stroke:xh.stroke,length:xh.length,text:gt[kt-1]};break;case 80:xh=wi.destructLink(gt[kt]),this.$={type:xh.type,stroke:xh.stroke,length:xh.length};break;case 81:this.$=gt[kt-1];break;case 83:case 97:case 153:case 151:this.$=gt[kt-1]+""+gt[kt];break;case 98:case 99:this.$=gt[kt-4],wi.addClass(gt[kt-2],gt[kt]);break;case 100:this.$=gt[kt-4],wi.setClass(gt[kt-2],gt[kt]);break;case 101:case 109:this.$=gt[kt-1],wi.setClickEvent(gt[kt-1],gt[kt]);break;case 102:case 110:this.$=gt[kt-3],wi.setClickEvent(gt[kt-3],gt[kt-2]),wi.setTooltip(gt[kt-3],gt[kt]);break;case 103:this.$=gt[kt-2],wi.setClickEvent(gt[kt-2],gt[kt-1],gt[kt]);break;case 104:this.$=gt[kt-4],wi.setClickEvent(gt[kt-4],gt[kt-3],gt[kt-2]),wi.setTooltip(gt[kt-4],gt[kt]);break;case 105:case 111:this.$=gt[kt-1],wi.setLink(gt[kt-1],gt[kt]);break;case 106:case 112:this.$=gt[kt-3],wi.setLink(gt[kt-3],gt[kt-2]),wi.setTooltip(gt[kt-3],gt[kt]);break;case 107:case 113:this.$=gt[kt-3],wi.setLink(gt[kt-3],gt[kt-2],gt[kt]);break;case 108:case 114:this.$=gt[kt-5],wi.setLink(gt[kt-5],gt[kt-4],gt[kt]),wi.setTooltip(gt[kt-5],gt[kt-2]);break;case 115:this.$=gt[kt-4],wi.addVertex(gt[kt-2],void 0,void 0,gt[kt]);break;case 116:case 118:this.$=gt[kt-4],wi.updateLink(gt[kt-2],gt[kt]);break;case 117:this.$=gt[kt-4],wi.updateLink([gt[kt-2]],gt[kt]);break;case 119:this.$=gt[kt-8],wi.updateLinkInterpolate([gt[kt-6]],gt[kt-2]),wi.updateLink([gt[kt-6]],gt[kt]);break;case 120:this.$=gt[kt-8],wi.updateLinkInterpolate(gt[kt-6],gt[kt-2]),wi.updateLink(gt[kt-6],gt[kt]);break;case 121:this.$=gt[kt-6],wi.updateLinkInterpolate([gt[kt-4]],gt[kt]);break;case 122:this.$=gt[kt-6],wi.updateLinkInterpolate(gt[kt-4],gt[kt]);break;case 124:case 126:gt[kt-2].push(gt[kt]),this.$=gt[kt-2];break;case 128:this.$=gt[kt-1]+gt[kt];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:a,16:4,21:d,22:f,24:p},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:a,16:4,21:d,22:f,24:p},s(y,v,{17:11}),{7:12,13:[1,13]},{16:14,21:d,22:f,24:p},{16:15,21:d,22:f,24:p},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:w,21:C,22:D,23:V,32:24,33:25,34:26,35:27,36:28,37:29,38:W,43:31,44:j,46:X,48:Ee,50:35,51:45,52:Ie,54:46,66:Pe,67:Ve,86:Ae,87:Qe,88:vt,89:Ft,90:Qt,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,118:J,119:dt,120:ae,121:Ct,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},{8:64,10:[1,65],15:Hn},s([10,15],[2,6]),s(y,[2,17]),s(y,[2,18]),s(y,[2,19]),{20:[1,68],21:[1,69],22:Dn,27:67,30:70},s(Pt,[2,11]),s(Pt,[2,12]),s(Pt,[2,13]),s(Pt,[2,14]),s(Pt,[2,15]),s(Pt,[2,16]),{9:72,20:nr,21:xt,23:Tn,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:nr,21:xt,23:Tn},{9:81,20:nr,21:xt,23:Tn},{9:82,20:nr,21:xt,23:Tn},{9:83,20:nr,21:xt,23:Tn},{9:84,20:nr,21:xt,23:Tn},{9:86,20:nr,21:xt,22:[1,85],23:Tn},s(Pt,[2,44]),{45:[1,87]},{47:[1,88]},s(Pt,[2,47]),s(Wt,[2,54],{30:89,22:Dn}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:Ht,52:lt,66:Ye,67:ct,84:[1,97],91:Oe,97:96,98:[1,94],100:[1,95],105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(Pt,[2,158]),s(Pt,[2,159]),s(Pt,[2,160]),s(Pt,[2,161]),s(Sr,[2,55],{53:[1,116]}),s(js,[2,74],{116:129,40:[1,117],52:Ie,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Pe,67:Ve,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it}),s(wr,[2,150]),s(wr,[2,175]),s(wr,[2,176]),s(wr,[2,177]),s(wr,[2,178]),s(wr,[2,179]),s(wr,[2,180]),s(wr,[2,181]),s(wr,[2,182]),s(wr,[2,183]),s(wr,[2,184]),s(wr,[2,185]),s(wr,[2,186]),s(wr,[2,187]),s(wr,[2,188]),s(wr,[2,189]),s(wr,[2,190]),{9:130,20:nr,21:xt,23:Tn},{11:131,14:[1,132]},s(yr,[2,8]),s(y,[2,20]),s(y,[2,26]),s(y,[2,27]),{21:[1,133]},s(es,[2,34],{30:134,22:Dn}),s(Pt,[2,35]),{50:135,51:45,52:Ie,54:46,66:Pe,67:Ve,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},s(Oa,[2,48]),s(Oa,[2,49]),s(Oa,[2,50]),s(Vs,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Ar,24:Ei,26:jn,38:Pn,39:139,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),s(Pt,[2,36]),s(Pt,[2,37]),s(Pt,[2,38]),s(Pt,[2,39]),s(Pt,[2,40]),{22:Ar,24:Ei,26:jn,38:Pn,39:163,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(Gm,v,{17:164}),s(Pt,[2,45]),s(Pt,[2,46]),s(Wt,[2,53],{52:nb}),{26:Ht,52:lt,66:Ye,67:ct,91:Oe,97:166,102:[1,167],105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{95:[1,168],103:169,105:[1,170]},{26:Ht,52:lt,66:Ye,67:ct,91:Oe,95:[1,171],97:172,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{26:Ht,52:lt,66:Ye,67:ct,91:Oe,97:173,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(yr,[2,101],{22:[1,174],99:[1,175]}),s(yr,[2,105],{22:[1,176]}),s(yr,[2,109],{115:100,117:178,22:[1,177],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn}),s(yr,[2,111],{22:[1,179]}),s(_a,[2,152]),s(_a,[2,154]),s(_a,[2,155]),s(_a,[2,156]),s(_a,[2,157]),s(Kr,[2,162]),s(Kr,[2,163]),s(Kr,[2,164]),s(Kr,[2,165]),s(Kr,[2,166]),s(Kr,[2,167]),s(Kr,[2,168]),s(Kr,[2,169]),s(Kr,[2,170]),s(Kr,[2,171]),s(Kr,[2,172]),s(Kr,[2,173]),s(Kr,[2,174]),{52:Ie,54:180,66:Pe,67:Ve,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},{22:Ar,24:Ei,26:jn,38:Pn,39:181,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:182,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:184,42:mi,52:lt,57:[1,183],66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:185,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:186,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:187,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{66:[1,188]},{22:Ar,24:Ei,26:jn,38:Pn,39:189,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:190,42:mi,52:lt,66:Ye,67:ct,71:[1,191],73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:192,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:193,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:194,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(wr,[2,151]),s(au,[2,3]),{8:195,15:Hn},{15:[2,7]},s(y,[2,28]),s(es,[2,33]),s(Wt,[2,51],{30:196,22:Dn}),s(Vs,[2,75],{22:[1,197]}),{22:[1,198]},{22:Ar,24:Ei,26:jn,38:Pn,39:199,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,82:[1,200],83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(Kr,[2,82]),s(Kr,[2,84]),s(Kr,[2,140]),s(Kr,[2,141]),s(Kr,[2,142]),s(Kr,[2,143]),s(Kr,[2,144]),s(Kr,[2,145]),s(Kr,[2,146]),s(Kr,[2,147]),s(Kr,[2,148]),s(Kr,[2,149]),s(Kr,[2,85]),s(Kr,[2,86]),s(Kr,[2,87]),s(Kr,[2,88]),s(Kr,[2,89]),s(Kr,[2,90]),s(Kr,[2,91]),s(Kr,[2,92]),s(Kr,[2,93]),s(Kr,[2,94]),s(Kr,[2,95]),{9:203,20:nr,21:xt,22:Ar,23:Tn,24:Ei,26:jn,38:Pn,40:[1,202],42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{18:18,19:19,20:w,21:C,22:D,23:V,32:24,33:25,34:26,35:27,36:28,37:29,38:W,42:[1,204],43:31,44:j,46:X,48:Ee,50:35,51:45,52:Ie,54:46,66:Pe,67:Ve,86:Ae,87:Qe,88:vt,89:Ft,90:Qt,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,118:J,119:dt,120:ae,121:Ct,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},{22:Dn,30:205},{22:[1,206],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:178,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},s(Ym,[2,123]),{22:[1,211]},{22:[1,212],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:178,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:[1,213],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:178,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{84:[1,214]},s(yr,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},s(_a,[2,153]),{84:[1,219],101:[1,220]},s(Sr,[2,57],{116:129,52:Ie,66:Pe,67:Ve,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it}),{22:Ar,24:Ei,26:jn,38:Pn,41:[1,221],42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,56:[1,222],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:223,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,58:[1,224],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,60:[1,225],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,62:[1,226],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,64:[1,227],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{67:[1,228]},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,70:[1,229],73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,72:[1,230],73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,39:231,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,41:[1,232],42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,73:wn,75:[1,233],77:[1,234],81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,73:wn,75:[1,236],77:[1,235],81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{9:237,20:nr,21:xt,23:Tn},s(Wt,[2,52],{52:nb}),s(Vs,[2,77]),s(Vs,[2,76]),{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,68:[1,238],73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(Vs,[2,79]),s(Kr,[2,83]),{22:Ar,24:Ei,26:jn,38:Pn,39:239,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(Gm,v,{17:240}),s(Pt,[2,43]),{51:241,52:Ie,54:46,66:Pe,67:Ve,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},{22:Gl,66:Nl,67:ml,86:Fu,96:242,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{22:Gl,66:Nl,67:ml,86:Fu,96:256,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{22:Gl,66:Nl,67:ml,86:Fu,96:257,102:jc,104:[1,258],105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{22:Gl,66:Nl,67:ml,86:Fu,96:259,102:jc,104:[1,260],105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{105:[1,261]},{22:Gl,66:Nl,67:ml,86:Fu,96:262,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{22:Gl,66:Nl,67:ml,86:Fu,96:263,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{26:Ht,52:lt,66:Ye,67:ct,91:Oe,97:264,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(yr,[2,102]),{84:[1,265]},s(yr,[2,106],{22:[1,266]}),s(yr,[2,107]),s(yr,[2,110]),s(yr,[2,112],{22:[1,267]}),s(yr,[2,113]),s(js,[2,58]),s(js,[2,59]),{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,58:[1,268],66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(js,[2,66]),s(js,[2,61]),s(js,[2,62]),s(js,[2,63]),{66:[1,269]},s(js,[2,65]),s(js,[2,67]),{22:Ar,24:Ei,26:jn,38:Pn,42:mi,52:lt,66:Ye,67:ct,72:[1,270],73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(js,[2,69]),s(js,[2,70]),s(js,[2,72]),s(js,[2,71]),s(js,[2,73]),s(au,[2,4]),s([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Ar,24:Ei,26:jn,38:Pn,41:[1,271],42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{18:18,19:19,20:w,21:C,22:D,23:V,32:24,33:25,34:26,35:27,36:28,37:29,38:W,42:[1,272],43:31,44:j,46:X,48:Ee,50:35,51:45,52:Ie,54:46,66:Pe,67:Ve,86:Ae,87:Qe,88:vt,89:Ft,90:Qt,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,118:J,119:dt,120:ae,121:Ct,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},s(Sr,[2,56]),s(yr,[2,115],{106:vg}),s(uk,[2,125],{108:274,22:Gl,66:Nl,67:ml,86:Fu,102:jc,105:$c,109:nl,110:Dd,111:wh,112:Md,113:Ch}),s(Id,[2,127]),s(Id,[2,129]),s(Id,[2,130]),s(Id,[2,131]),s(Id,[2,132]),s(Id,[2,133]),s(Id,[2,134]),s(Id,[2,135]),s(Id,[2,136]),s(Id,[2,137]),s(Id,[2,138]),s(Id,[2,139]),s(yr,[2,116],{106:vg}),s(yr,[2,117],{106:vg}),{22:[1,275]},s(yr,[2,118],{106:vg}),{22:[1,276]},s(Ym,[2,124]),s(yr,[2,98],{106:vg}),s(yr,[2,99],{106:vg}),s(yr,[2,100],{115:100,117:178,26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn}),s(yr,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:nr,21:xt,23:Tn},s(Pt,[2,42]),{22:Gl,66:Nl,67:ml,86:Fu,102:jc,105:$c,107:283,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},s(Id,[2,128]),{26:Ht,52:lt,66:Ye,67:ct,91:Oe,97:284,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{26:Ht,52:lt,66:Ye,67:ct,91:Oe,97:285,105:bn,106:xe,109:gr,111:Ut,112:ui,115:100,117:98,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(yr,[2,108]),s(yr,[2,114]),s(js,[2,60]),{22:Ar,24:Ei,26:jn,38:Pn,39:286,42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:140,84:Kt,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},s(js,[2,68]),s(Gm,v,{17:287}),s(uk,[2,126],{108:274,22:Gl,66:Nl,67:ml,86:Fu,102:jc,105:$c,109:nl,110:Dd,111:wh,112:Md,113:Ch}),s(yr,[2,121],{115:100,117:178,22:[1,288],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn}),s(yr,[2,122],{115:100,117:178,22:[1,289],26:Ht,52:lt,66:Ye,67:ct,91:Oe,105:bn,106:xe,109:gr,111:Ut,112:ui,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn}),{22:Ar,24:Ei,26:jn,38:Pn,41:[1,290],42:mi,52:lt,66:Ye,67:ct,73:wn,81:er,83:201,85:151,86:Ts,87:an,88:hs,89:$s,90:Ss,91:Ws,92:Zs,94:142,95:kr,105:bn,106:xe,109:Qr,111:Ut,112:ui,113:Is,114:Ns,115:148,122:qn,123:gn,124:Sn,125:Rn,126:En,127:Bn},{18:18,19:19,20:w,21:C,22:D,23:V,32:24,33:25,34:26,35:27,36:28,37:29,38:W,42:[1,291],43:31,44:j,46:X,48:Ee,50:35,51:45,52:Ie,54:46,66:Pe,67:Ve,86:Ae,87:Qe,88:vt,89:Ft,90:Qt,91:st,95:rt,105:Ue,106:qe,109:$e,111:pe,112:Ke,116:47,118:J,119:dt,120:ae,121:Ct,122:Jn,123:Xt,124:Jt,125:L,126:P,127:it},{22:Gl,66:Nl,67:ml,86:Fu,96:292,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},{22:Gl,66:Nl,67:ml,86:Fu,96:293,102:jc,105:$c,107:243,108:244,109:nl,110:Dd,111:wh,112:Md,113:Ch},s(js,[2,64]),s(Pt,[2,41]),s(yr,[2,119],{106:vg}),s(yr,[2,120],{106:vg})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(Cr,$r){if(!$r.recoverable){var Os=new Error(Cr);throw Os.hash=$r,Os}this.trace(Cr)},parse:function(Cr){var Os=[0],wi=[],ja=[null],gt=[],k_=this.table,kt="",xh=0,yE=0,dk=gt.slice.call(arguments,1),il=Object.create(this.lexer),F0={yy:{}};for(var rb in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rb)&&(F0.yy[rb]=this.yy[rb]);il.setInput(Cr,F0.yy),F0.yy.lexer=il,F0.yy.parser=this,typeof il.yylloc>"u"&&(il.yylloc={});var Hw=il.yylloc;gt.push(Hw);var xp,wE=il.options&&il.options.ranges;this.parseError="function"==typeof F0.yy.parseError?F0.yy.parseError:Object.getPrototypeOf(this).parseError;for(var lu,L0,Lu,jw,D_,Tp,sb,B0={};;){if(this.defaultActions[L0=Os[Os.length-1]]?Lu=this.defaultActions[L0]:((null===lu||typeof lu>"u")&&(xp=void 0,"number"!=typeof(xp=wi.pop()||il.lex()||1)&&(xp instanceof Array&&(xp=(wi=xp).pop()),xp=this.symbols_[xp]||xp),lu=xp),Lu=k_[L0]&&k_[L0][lu]),typeof Lu>"u"||!Lu.length||!Lu[0]){var M_;for(D_ in sb=[],k_[L0])this.terminals_[D_]&&D_>2&&sb.push("'"+this.terminals_[D_]+"'");M_=il.showPosition?"Parse error on line "+(xh+1)+":\n"+il.showPosition()+"\nExpecting "+sb.join(", ")+", got '"+(this.terminals_[lu]||lu)+"'":"Parse error on line "+(xh+1)+": Unexpected "+(1==lu?"end of input":"'"+(this.terminals_[lu]||lu)+"'"),this.parseError(M_,{text:il.match,token:this.terminals_[lu]||lu,line:il.yylineno,loc:Hw,expected:sb})}if(Lu[0]instanceof Array&&Lu.length>1)throw new Error("Parse Error: multiple actions possible at state: "+L0+", token: "+lu);switch(Lu[0]){case 1:Os.push(lu),ja.push(il.yytext),gt.push(il.yylloc),Os.push(Lu[1]),lu=null,yE=il.yyleng,kt=il.yytext,xh=il.yylineno,Hw=il.yylloc;break;case 2:if(B0.$=ja[ja.length-(Tp=this.productions_[Lu[1]][1])],B0._$={first_line:gt[gt.length-(Tp||1)].first_line,last_line:gt[gt.length-1].last_line,first_column:gt[gt.length-(Tp||1)].first_column,last_column:gt[gt.length-1].last_column},wE&&(B0._$.range=[gt[gt.length-(Tp||1)].range[0],gt[gt.length-1].range[1]]),typeof(jw=this.performAction.apply(B0,[kt,yE,xh,F0.yy,Lu[1],ja,gt].concat(dk)))<"u")return jw;Tp&&(Os=Os.slice(0,-1*Tp*2),ja=ja.slice(0,-1*Tp),gt=gt.slice(0,-1*Tp)),Os.push(this.productions_[Lu[1]][0]),ja.push(B0.$),gt.push(B0._$),Os.push(k_[Os[Os.length-2]][Os[Os.length-1]]);break;case 3:return!0}}return!0}};function ib(){this.yy={}}return _E.lexer=function(){return{EOF:1,parseError:function($r,Os){if(!this.yy.parser)throw new Error($r);this.yy.parser.parseError($r,Os)},setInput:function(Cr,$r){return this.yy=$r||this.yy||{},this._input=Cr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cr=this._input[0];return this.yytext+=Cr,this.yyleng++,this.offset++,this.match+=Cr,this.matched+=Cr,Cr.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cr},unput:function(Cr){var $r=Cr.length,Os=Cr.split(/(?:\r\n?|\n)/g);this._input=Cr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$r),this.offset-=$r;var wi=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Os.length-1&&(this.yylineno-=Os.length-1);var ja=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Os?(Os.length===wi.length?this.yylloc.first_column:0)+wi[wi.length-Os.length].length-Os[0].length:this.yylloc.first_column-$r},this.options.ranges&&(this.yylloc.range=[ja[0],ja[0]+this.yyleng-$r]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Cr){this.unput(this.match.slice(Cr))},pastInput:function(){var Cr=this.matched.substr(0,this.matched.length-this.match.length);return(Cr.length>20?"...":"")+Cr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cr=this.match;return Cr.length<20&&(Cr+=this._input.substr(0,20-Cr.length)),(Cr.substr(0,20)+(Cr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cr=this.pastInput(),$r=new Array(Cr.length+1).join("-");return Cr+this.upcomingInput()+"\n"+$r+"^"},test_match:function(Cr,$r){var Os,wi,ja;if(this.options.backtrack_lexer&&(ja={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ja.yylloc.range=this.yylloc.range.slice(0))),(wi=Cr[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=wi.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wi?wi[wi.length-1].length-wi[wi.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cr[0].length},this.yytext+=Cr[0],this.match+=Cr[0],this.matches=Cr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cr[0].length),this.matched+=Cr[0],Os=this.performAction.call(this,this.yy,this,$r,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Os)return Os;if(this._backtrack){for(var gt in ja)this[gt]=ja[gt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Cr,$r,Os,wi;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ja=this._currentRules(),gt=0;gt<ja.length;gt++)if((Os=this._input.match(this.rules[ja[gt]]))&&(!$r||Os[0].length>$r[0].length)){if($r=Os,wi=gt,this.options.backtrack_lexer){if(!1!==(Cr=this.test_match(Os,ja[gt])))return Cr;if(this._backtrack){$r=!1;continue}return!1}if(!this.options.flex)break}return $r?!1!==(Cr=this.test_match($r,ja[wi]))&&Cr:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function($r){this.conditionStack.push($r)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function($r){return($r=this.conditionStack.length-1-Math.abs($r||0))>=0?this.conditionStack[$r]:"INITIAL"},pushState:function($r){this.begin($r)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function($r,Os,wi,ja){switch(wi){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:case 15:case 24:case 27:case 30:case 33:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 25:return 100;case 26:this.begin("callbackname");break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 31:return 99;case 32:this.begin("click");break;case 34:return 90;case 35:case 36:case 37:return $r.lex.firstGraph()&&this.begin("dir"),24;case 38:return 38;case 39:return 42;case 40:case 41:case 42:case 43:return 101;case 44:return this.popState(),25;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),26;case 55:return 118;case 56:return 119;case 57:return 120;case 58:return 121;case 59:return 105;case 60:return 111;case 61:return 53;case 62:return 67;case 63:return 52;case 64:return 20;case 65:return 106;case 66:return 126;case 67:case 68:case 69:return 82;case 70:case 71:case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[44,45,46,47,48,49,50,51,52,53,54],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}}}(),ib.prototype=_E,_E.Parser=ib,new ib}();l2.parser=l2;const Hy=l2,a3=(s,a)=>{var d,f;return"dagre-wrapper"!==(null==(d=a?.flowchart)?void 0:d.defaultRenderer)&&"elk"!==(null==(f=a?.flowchart)?void 0:f.defaultRenderer)&&null!==s.match(/^\s*graph/)},l3=(s,a)=>{var d,f;return"dagre-d3"!==(null==(d=a?.flowchart)?void 0:d.defaultRenderer)&&"elk"!==(null==(f=a?.flowchart)?void 0:f.defaultRenderer)&&(null!==s.match(/^\s*graph/)||null!==s.match(/^\s*flowchart/))};let gh,d2,uT=0,c2=ut(),Na={},cp=[],$1={},cg=[],Tm={},dT={},u2=0,hT=!0,jy=[];const p0=s=>tr.sanitizeText(s,c2),W1=function(s,a,d){_r.parseDirective(this,s,a,d)},g0=function(s){const a=Object.keys(Na);for(const d of a)if(Na[d].id===s)return Na[d].domId;return s},h2=function(s,a,d,f,p,y,v={}){let w,C=s;void 0!==C&&0!==C.trim().length&&(void 0===Na[C]&&(Na[C]={id:C,domId:"flowchart-"+C+"-"+uT,styles:[],classes:[]}),uT++,void 0!==a?(c2=ut(),w=p0(a.trim()),'"'===w[0]&&'"'===w[w.length-1]&&(w=w.substring(1,w.length-1)),Na[C].text=w):void 0===Na[C].text&&(Na[C].text=s),void 0!==d&&(Na[C].type=d),f?.forEach(function(D){Na[C].styles.push(D)}),p?.forEach(function(D){Na[C].classes.push(D)}),void 0!==y&&(Na[C].dir=y),void 0===Na[C].props?Na[C].props=v:void 0!==v&&Object.assign(Na[C].props,v))},f2=function(s,a,d,f){const v={start:s,end:a,type:void 0,text:""};void 0!==(f=d.text)&&(v.text=p0(f.trim()),'"'===v.text[0]&&'"'===v.text[v.text.length-1]&&(v.text=v.text.substring(1,v.text.length-1))),void 0!==d&&(v.type=d.type,v.stroke=d.stroke,v.length=d.length),cp.push(v)},fT=function(s,a,d,f){let p,y;for(p=0;p<s.length;p++)for(y=0;y<a.length;y++)f2(s[p],a[y],d,f)},$y=function(s,a){s.forEach(function(d){"default"===d?cp.defaultInterpolate=a:cp[d].interpolate=a})},p2=function(s,a){s.forEach(function(d){"default"===d?cp.defaultStyle=a:(-1===Br.isSubstringInArray("fill",a)&&a.push("fill:none"),cp[d].style=a)})},m0=function(s,a){void 0===$1[s]&&($1[s]={id:s,styles:[],textStyles:[]}),a?.forEach(function(d){if(d.match("color")){const p=d.replace("fill","bgFill").replace("color","fill");$1[s].textStyles.push(p)}$1[s].styles.push(d)})},Mu=function(s){gh=s,gh.match(/.*</)&&(gh="RL"),gh.match(/.*\^/)&&(gh="BT"),gh.match(/.*>/)&&(gh="LR"),gh.match(/.*v/)&&(gh="TB"),"TD"===gh&&(gh="TB")},Ad=function(s,a){s.split(",").forEach(function(d){let f=d;void 0!==Na[f]&&Na[f].classes.push(a),void 0!==Tm[f]&&Tm[f].classes.push(a)})},gT=function(s,a,d){s.split(",").forEach(function(f){void 0!==Na[f]&&(Na[f].link=Br.formatUrl(a,c2),Na[f].linkTarget=d)}),Ad(s,"clickable")},u3=function(s){return dT[s]},d3=function(s,a,d){s.split(",").forEach(function(f){!function(s,a,d){let f=g0(s);if("loose"!==ut().securityLevel||void 0===a)return;let p=[];if("string"==typeof d){p=d.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let y=0;y<p.length;y++){let v=p[y].trim();'"'===v.charAt(0)&&'"'===v.charAt(v.length-1)&&(v=v.substr(1,v.length-2)),p[y]=v}}0===p.length&&p.push(s),void 0!==Na[s]&&(Na[s].haveCallback=!0,jy.push(function(){const y=document.querySelector(`[id="${f}"]`);null!==y&&y.addEventListener("click",function(){Br.runFunc(a,...p)},!1)}))}(f,a,d)}),Ad(s,"clickable")},g2=function(s){jy.forEach(function(a){a(s)})},m2=function(){return gh.trim()},h3=function(){return Na},up=function(){return cp},Wy=function(){return $1},Gy=function(s){let a=(0,F.Ltv)(".mermaidTooltip");null===(a._groups||a)[0][0]&&(a=(0,F.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,F.Ltv)(s).select("svg").selectAll("g.node").on("mouseover",function(){const p=(0,F.Ltv)(this);if(null===p.attr("title"))return;const v=this.getBoundingClientRect();a.transition().duration(200).style("opacity",".9"),a.text(p.attr("title")).style("left",window.scrollX+v.left+(v.right-v.left)/2+"px").style("top",window.scrollY+v.top-14+document.body.scrollTop+"px"),a.html(a.html().replace(/&lt;br\/&gt;/g,"<br/>")),p.classed("hover",!0)}).on("mouseout",function(){a.transition().duration(500).style("opacity",0),(0,F.Ltv)(this).classed("hover",!1)})};jy.push(Gy);const mT=function(s="gen-1"){Na={},$1={},cp=[],jy=[Gy],cg=[],Tm={},u2=0,dT=[],hT=!0,d2=s,je()},_0=s=>{d2=s||"gen-2"},Yy=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},_2=function(s,a,d){let f=s.trim(),p=d;s===d&&d.match(/\s/)&&(f=void 0);let v=[];const{nodeList:w,dir:C}=function y(V){const W={boolean:{},number:{},string:{}},j=[];let X;return{nodeList:V.filter(function(Ie){const Pe=typeof Ie;return Ie.stmt&&"dir"===Ie.stmt?(X=Ie.value,!1):""!==Ie.trim()&&(Pe in W?!W[Pe].hasOwnProperty(Ie)&&(W[Pe][Ie]=!0):!j.includes(Ie)&&j.push(Ie))}),dir:X}}(v.concat.apply(v,a));if(v=w,"gen-1"===d2)for(let V=0;V<v.length;V++)v[V]=g0(v[V]);f=f||"subGraph"+u2,p=p||"",p=p0(p),u2+=1;const D={id:f,nodes:v,title:p.trim(),classes:[],dir:C};return Me.info("Adding",D.id,D.nodes,D.dir),D.nodes=xT(D,cg).nodes,cg.push(D),Tm[f]=D,f},y2=function(s){for(const[a,d]of cg.entries())if(d.id===s)return a;return-1};let ug=-1;const _T=[],yT=function(s,a){const d=cg[a].nodes;if(ug+=1,ug>2e3)return;if(_T[ug]=a,cg[a].id===s)return{result:!0,count:0};let f=0,p=1;for(;f<d.length;){const y=y2(d[f]);if(y>=0){const v=yT(s,y);if(v.result)return{result:!0,count:p+v.count};p+=v.count}f+=1}return{result:!1,count:p}},v2=function(s){return _T[s]},vT=function(){ug=-1,cg.length>0&&yT("none",cg.length-1)},bT=function(){return cg},wT=()=>!!hT&&(hT=!1,!0),qy=(s,a)=>{const d=(s=>{const a=s.trim();let d=a.slice(0,-1),f="arrow_open";switch(a.slice(-1)){case"x":f="arrow_cross","x"===a[0]&&(f="double_"+f,d=d.slice(1));break;case">":f="arrow_point","<"===a[0]&&(f="double_"+f,d=d.slice(1));break;case"o":f="arrow_circle","o"===a[0]&&(f="double_"+f,d=d.slice(1))}let p="normal",y=d.length-1;"="===d[0]&&(p="thick");let v=((s,a)=>{const d=a.length;let f=0;for(let p=0;p<d;++p)"."===a[p]&&++f;return f})(0,d);return v&&(p="dotted",y=v),{type:f,stroke:p,length:y}})(s);let f;if(a){if(f=(s=>{let a=s.trim(),d="arrow_open";switch(a[0]){case"<":d="arrow_point",a=a.slice(1);break;case"x":d="arrow_cross",a=a.slice(1);break;case"o":d="arrow_circle",a=a.slice(1)}let f="normal";return a.includes("=")&&(f="thick"),a.includes(".")&&(f="dotted"),{type:d,stroke:f}})(a),f.stroke!==d.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===f.type)f.type=d.type;else{if(f.type!==d.type)return{type:"INVALID",stroke:"INVALID"};f.type="double_"+f.type}return"double_arrow"===f.type&&(f.type="double_arrow_point"),f.length=d.length,f}return d},TT=(s,a)=>{let d=!1;return s.forEach(f=>{f.nodes.indexOf(a)>=0&&(d=!0)}),d},xT=(s,a)=>{const d=[];return s.nodes.forEach((f,p)=>{TT(a,f)||d.push(s.nodes[p])}),{nodes:d}},Ky={firstGraph:wT},mh={parseDirective:W1,defaultConfig:()=>Fo.flowchart,setAccTitle:Je,getAccTitle:pt,getAccDescription:Mt,setAccDescription:et,addVertex:h2,lookUpDomId:g0,addLink:fT,updateLinkInterpolate:$y,updateLink:p2,addClass:m0,setDirection:Mu,setClass:Ad,setTooltip:function(s,a){s.split(",").forEach(function(d){void 0!==a&&(dT["gen-1"===d2?g0(d):d]=p0(a))})},getTooltip:u3,setClickEvent:d3,setLink:gT,bindFunctions:g2,getDirection:m2,getVertices:h3,getEdges:up,getClasses:Wy,clear:mT,setGen:_0,defaultStyle:Yy,addSubGraph:_2,getDepthFirstPos:v2,indexNodes:vT,getSubGraphs:bT,destructLink:qy,lex:Ky,exists:TT,makeUniq:xT,setDiagramTitle:Nt,getDiagramTitle:cn},y0=Object.freeze(Object.defineProperty({__proto__:null,addClass:m0,addLink:fT,addSingleLink:f2,addSubGraph:_2,addVertex:h2,bindFunctions:g2,clear:mT,default:mh,defaultStyle:Yy,destructLink:qy,firstGraph:wT,getClasses:Wy,getDepthFirstPos:v2,getDirection:m2,getEdges:up,getSubGraphs:bT,getTooltip:u3,getVertices:h3,indexNodes:vT,lex:Ky,lookUpDomId:g0,parseDirective:W1,setClass:Ad,setClickEvent:d3,setDirection:Mu,setGen:_0,setLink:gT,updateLink:p2,updateLinkInterpolate:$y},Symbol.toStringTag,{value:"Module"})),xm={},kT={},A2=function(s,a,d,f,p,y){const v=f.select(`[id="${d}"]`);Object.keys(s).forEach(function(C){const D=s[C];let V="default";D.classes.length>0&&(V=D.classes.join(" "));const W=qa(D.styles);let X,j=void 0!==D.text?D.text:D.id;if(Io(ut().flowchart.htmlLabels)){const Pe={label:j.replace(/fa[blrs]?:fa-[\w-]+/g,Ve=>`<i class='${Ve.replace(":"," ")}'></i>`)};X=(0,gs.H)(v,Pe).node(),X.parentNode.removeChild(X)}else{const Pe=p.createElementNS("http://www.w3.org/2000/svg","text");Pe.setAttribute("style",W.labelStyle.replace("color:","fill:"));const Ve=j.split(tr.lineBreakRegex);for(const Ae of Ve){const Qe=p.createElementNS("http://www.w3.org/2000/svg","tspan");Qe.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Qe.setAttribute("dy","1em"),Qe.setAttribute("x","1"),Qe.textContent=Ae,Pe.appendChild(Qe)}X=Pe}let Ee=0,Ie="";switch(D.type){case"round":Ee=5,Ie="rect";break;case"square":case"group":default:Ie="rect";break;case"diamond":Ie="question";break;case"hexagon":Ie="hexagon";break;case"odd":case"odd_right":Ie="rect_left_inv_arrow";break;case"lean_right":Ie="lean_right";break;case"lean_left":Ie="lean_left";break;case"trapezoid":Ie="trapezoid";break;case"inv_trapezoid":Ie="inv_trapezoid";break;case"circle":Ie="circle";break;case"ellipse":Ie="ellipse";break;case"stadium":Ie="stadium";break;case"subroutine":Ie="subroutine";break;case"cylinder":Ie="cylinder";break;case"doublecircle":Ie="doublecircle"}a.setNode(D.id,{labelStyle:W.labelStyle,shape:Ie,labelText:j,rx:Ee,ry:Ee,class:V,style:W.style,id:D.id,link:D.link,linkTarget:D.linkTarget,tooltip:y.db.getTooltip(D.id)||"",domId:y.db.lookUpDomId(D.id),haveCallback:D.haveCallback,width:"group"===D.type?500:void 0,dir:D.dir,type:D.type,props:D.props,padding:ut().flowchart.padding}),Me.info("setNode",{labelStyle:W.labelStyle,shape:Ie,labelText:j,rx:Ee,ry:Ee,class:V,style:W.style,id:D.id,domId:y.db.lookUpDomId(D.id),width:"group"===D.type?500:void 0,type:D.type,dir:D.dir,props:D.props,padding:ut().flowchart.padding})})},k2=function(s,a,d){Me.info("abc78 edges = ",s);let y,v,f=0,p={};if(void 0!==s.defaultStyle){const w=qa(s.defaultStyle);y=w.style,v=w.labelStyle}s.forEach(function(w){f++;var C="L-"+w.start+"-"+w.end;void 0===p[C]?(p[C]=0,Me.info("abc78 new entry",C,p[C])):(p[C]++,Me.info("abc78 new entry",C,p[C]));let D=C+"-"+p[C];Me.info("abc78 new link id to be used is",C,D,p[C]);var V="LS-"+w.start,W="LE-"+w.end;const j={style:"",labelStyle:""};switch(j.minlen=w.length||1,j.arrowhead="arrow_open"===w.type?"none":"normal",j.arrowTypeStart="arrow_open",j.arrowTypeEnd="arrow_open",w.type){case"double_arrow_cross":j.arrowTypeStart="arrow_cross";case"arrow_cross":j.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":j.arrowTypeStart="arrow_point";case"arrow_point":j.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":j.arrowTypeStart="arrow_circle";case"arrow_circle":j.arrowTypeEnd="arrow_circle"}let X="",Ee="";switch(w.stroke){case"normal":X="fill:none;",void 0!==y&&(X=y),void 0!==v&&(Ee=v),j.thickness="normal",j.pattern="solid";break;case"dotted":j.thickness="normal",j.pattern="dotted",j.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":j.thickness="thick",j.pattern="solid",j.style="stroke-width: 3.5px;fill:none;"}if(void 0!==w.style){const Ie=qa(w.style);X=Ie.style,Ee=Ie.labelStyle}j.style=j.style+=X,j.labelStyle=j.labelStyle+=Ee,j.curve=Qi(void 0!==w.interpolate?w.interpolate:void 0!==s.defaultInterpolate?s.defaultInterpolate:kT.curve,F.lUB),void 0===w.text?void 0!==w.style&&(j.arrowheadStyle="fill: #333"):(j.arrowheadStyle="fill: #333",j.labelpos="c"),j.labelType="text",j.label=w.text.replace(tr.lineBreakRegex,"\n"),void 0===w.style&&(j.style=j.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),j.labelStyle=j.labelStyle.replace("color:","fill:"),j.id=D,j.classes="flowchart-link "+V+" "+W,a.setEdge(w.start,w.end,j,f)})},ev={setConf:function(s){const a=Object.keys(s);for(const d of a)kT[d]=s[d]},addVertices:A2,addEdges:k2,getClasses:function(s,a){Me.info("Extracting classes"),a.db.clear();try{return a.parse(s),a.db.getClasses()}catch{return}},draw:function(s,a,d,f){Me.info("Drawing flowchart"),f.db.clear(),mh.setGen("gen-2"),f.parser.parse(s);let p=f.db.getDirection();void 0===p&&(p="TD");const{securityLevel:y,flowchart:v}=ut(),w=v.nodeSpacing||50,C=v.rankSpacing||50;let D;"sandbox"===y&&(D=(0,F.Ltv)("#i"+a));const V=(0,F.Ltv)("sandbox"===y?D.nodes()[0].contentDocument.body:"body"),W="sandbox"===y?D.nodes()[0].contentDocument:document,j=new Ki.T({multigraph:!0,compound:!0}).setGraph({rankdir:p,nodesep:w,ranksep:C,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let X;const Ee=f.db.getSubGraphs();Me.info("Subgraphs - ",Ee);for(let Ft=Ee.length-1;Ft>=0;Ft--)X=Ee[Ft],Me.info("Subgraph - ",X),f.db.addVertex(X.id,X.title,"group",void 0,X.classes,X.dir);const Ie=f.db.getVertices(),Pe=f.db.getEdges();Me.info("Edges",Pe);let Ve=0;for(Ve=Ee.length-1;Ve>=0;Ve--){X=Ee[Ve],(0,F.Ubm)("cluster").append("text");for(let Ft=0;Ft<X.nodes.length;Ft++)Me.info("Setting up subgraphs",X.nodes[Ft],X.id),j.setParent(X.nodes[Ft],X.id)}A2(Ie,j,a,V,W,f),k2(Pe,j);const Ae=V.select(`[id="${a}"]`),Qe=V.select("#"+a+" g");if($n(Qe,j,["point","circle","cross"],"flowchart",a),Br.insertTitle(Ae,"flowchartTitleText",v.titleTopMargin,f.db.getDiagramTitle()),ih(j,Ae,v.diagramPadding,v.useMaxWidth),f.db.indexNodes("subGraph"+Ve),!v.htmlLabels){const Ft=W.querySelectorAll('[id="'+a+'"] .edgeLabel .label');for(const Qt of Ft){const st=Qt.getBBox(),rt=W.createElementNS("http://www.w3.org/2000/svg","rect");rt.setAttribute("rx",0),rt.setAttribute("ry",0),rt.setAttribute("width",st.width),rt.setAttribute("height",st.height),Qt.insertBefore(rt,Qt.firstChild)}}Object.keys(Ie).forEach(function(Ft){const Qt=Ie[Ft];if(Qt.link){const st=(0,F.Ltv)("#"+a+' [id="'+Ft+'"]');if(st){const rt=W.createElementNS("http://www.w3.org/2000/svg","a");rt.setAttributeNS("http://www.w3.org/2000/svg","class",Qt.classes.join(" ")),rt.setAttributeNS("http://www.w3.org/2000/svg","href",Qt.link),rt.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===y?rt.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):Qt.linkTarget&&rt.setAttributeNS("http://www.w3.org/2000/svg","target",Qt.linkTarget);const Ue=st.insert(function(){return rt},":first-child"),qe=st.select(".label-container");qe&&Ue.append(function(){return qe.node()});const $e=st.select(".label");$e&&Ue.append(function(){return $e.node()})}}})}};var St=function(){var s=function(rt,Ue,qe,$e){for(qe=qe||{},$e=rt.length;$e--;qe[rt[$e]]=Ue);return qe},a=[1,3],d=[1,5],f=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],p=[1,15],y=[1,16],v=[1,17],w=[1,18],C=[1,19],D=[1,20],V=[1,21],W=[1,22],j=[1,23],X=[1,24],Ee=[1,25],Ie=[1,26],Pe=[1,27],Ve=[1,29],Ae=[1,31],Qe=[1,34],vt=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],Ft={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(Ue,qe,$e,pe,Ke,J,dt){var ae=J.length-1;switch(Ke){case 2:return J[ae-1];case 3:case 7:case 8:this.$=[];break;case 4:J[ae-1].push(J[ae]),this.$=J[ae-1];break;case 5:case 6:this.$=J[ae];break;case 9:pe.setDateFormat(J[ae].substr(11)),this.$=J[ae].substr(11);break;case 10:pe.enableInclusiveEndDates(),this.$=J[ae].substr(18);break;case 11:pe.TopAxis(),this.$=J[ae].substr(8);break;case 12:pe.setAxisFormat(J[ae].substr(11)),this.$=J[ae].substr(11);break;case 13:pe.setTickInterval(J[ae].substr(13)),this.$=J[ae].substr(13);break;case 14:pe.setExcludes(J[ae].substr(9)),this.$=J[ae].substr(9);break;case 15:pe.setIncludes(J[ae].substr(9)),this.$=J[ae].substr(9);break;case 16:pe.setTodayMarker(J[ae].substr(12)),this.$=J[ae].substr(12);break;case 17:pe.setDiagramTitle(J[ae].substr(6)),this.$=J[ae].substr(6);break;case 18:this.$=J[ae].trim(),pe.setAccTitle(this.$);break;case 19:case 20:this.$=J[ae].trim(),pe.setAccDescription(this.$);break;case 21:pe.addSection(J[ae].substr(8)),this.$=J[ae].substr(8);break;case 23:pe.addTask(J[ae-1],J[ae]),this.$="task";break;case 27:this.$=J[ae-1],pe.setClickEvent(J[ae-1],J[ae],null);break;case 28:this.$=J[ae-2],pe.setClickEvent(J[ae-2],J[ae-1],J[ae]);break;case 29:this.$=J[ae-2],pe.setClickEvent(J[ae-2],J[ae-1],null),pe.setLink(J[ae-2],J[ae]);break;case 30:this.$=J[ae-3],pe.setClickEvent(J[ae-3],J[ae-2],J[ae-1]),pe.setLink(J[ae-3],J[ae]);break;case 31:this.$=J[ae-2],pe.setClickEvent(J[ae-2],J[ae],null),pe.setLink(J[ae-2],J[ae-1]);break;case 32:this.$=J[ae-3],pe.setClickEvent(J[ae-3],J[ae-1],J[ae]),pe.setLink(J[ae-3],J[ae-2]);break;case 33:this.$=J[ae-1],pe.setLink(J[ae-1],J[ae]);break;case 34:case 40:this.$=J[ae-1]+" "+J[ae];break;case 35:case 36:case 38:this.$=J[ae-2]+" "+J[ae-1]+" "+J[ae];break;case 37:case 39:this.$=J[ae-3]+" "+J[ae-2]+" "+J[ae-1]+" "+J[ae];break;case 41:pe.parseDirective("%%{","open_directive");break;case 42:pe.parseDirective(J[ae],"type_directive");break;case 43:J[ae]=J[ae].trim().replace(/'/g,'"'),pe.parseDirective(J[ae],"arg_directive");break;case 44:pe.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:a,30:4,40:d},{1:[3]},{3:6,4:2,5:a,30:4,40:d},s(f,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:p,13:y,14:v,15:w,16:C,17:D,18:V,19:W,20:j,21:X,23:Ee,25:Ie,26:Pe,27:28,28:Ve,30:4,35:Ae,40:d},{32:32,33:[1,33],43:Qe},s([33,43],[2,42]),s(f,[2,8],{1:[2,2]}),s(f,[2,4]),{4:30,10:35,12:p,13:y,14:v,15:w,16:C,17:D,18:V,19:W,20:j,21:X,23:Ee,25:Ie,26:Pe,27:28,28:Ve,30:4,35:Ae,40:d},s(f,[2,6]),s(f,[2,7]),s(f,[2,9]),s(f,[2,10]),s(f,[2,11]),s(f,[2,12]),s(f,[2,13]),s(f,[2,14]),s(f,[2,15]),s(f,[2,16]),s(f,[2,17]),{22:[1,36]},{24:[1,37]},s(f,[2,20]),s(f,[2,21]),s(f,[2,22]),{29:[1,38]},s(f,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},s(f,[2,5]),s(f,[2,18]),s(f,[2,19]),s(f,[2,23]),s(f,[2,27],{37:[1,44],38:[1,45]}),s(f,[2,33],{36:[1,46]}),s(vt,[2,25]),{32:47,43:Qe},{43:[2,43]},s(f,[2,28],{38:[1,48]}),s(f,[2,29]),s(f,[2,31],{37:[1,49]}),{11:[1,50]},s(f,[2,30]),s(f,[2,32]),s(vt,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(Ue,qe){if(!qe.recoverable){var $e=new Error(Ue);throw $e.hash=qe,$e}this.trace(Ue)},parse:function(Ue){var $e=[0],pe=[],Ke=[null],J=[],dt=this.table,ae="",Ct=0,Jn=0,L=J.slice.call(arguments,1),P=Object.create(this.lexer),it={yy:{}};for(var Hn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Hn)&&(it.yy[Hn]=this.yy[Hn]);P.setInput(Ue,it.yy),it.yy.lexer=P,it.yy.parser=this,typeof P.yylloc>"u"&&(P.yylloc={});var Dn=P.yylloc;J.push(Dn);var gr,Pt=P.options&&P.options.ranges;this.parseError="function"==typeof it.yy.parseError?it.yy.parseError:Object.getPrototypeOf(this).parseError;for(var xt,Tn,Wt,Ht,Ye,ct,bn,lt={};;){if(this.defaultActions[Tn=$e[$e.length-1]]?Wt=this.defaultActions[Tn]:((null===xt||typeof xt>"u")&&(gr=void 0,"number"!=typeof(gr=pe.pop()||P.lex()||1)&&(gr instanceof Array&&(gr=(pe=gr).pop()),gr=this.symbols_[gr]||gr),xt=gr),Wt=dt[Tn]&&dt[Tn][xt]),typeof Wt>"u"||!Wt.length||!Wt[0]){var xe;for(Ye in bn=[],dt[Tn])this.terminals_[Ye]&&Ye>2&&bn.push("'"+this.terminals_[Ye]+"'");xe=P.showPosition?"Parse error on line "+(Ct+1)+":\n"+P.showPosition()+"\nExpecting "+bn.join(", ")+", got '"+(this.terminals_[xt]||xt)+"'":"Parse error on line "+(Ct+1)+": Unexpected "+(1==xt?"end of input":"'"+(this.terminals_[xt]||xt)+"'"),this.parseError(xe,{text:P.match,token:this.terminals_[xt]||xt,line:P.yylineno,loc:Dn,expected:bn})}if(Wt[0]instanceof Array&&Wt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Tn+", token: "+xt);switch(Wt[0]){case 1:$e.push(xt),Ke.push(P.yytext),J.push(P.yylloc),$e.push(Wt[1]),xt=null,Jn=P.yyleng,ae=P.yytext,Ct=P.yylineno,Dn=P.yylloc;break;case 2:if(lt.$=Ke[Ke.length-(ct=this.productions_[Wt[1]][1])],lt._$={first_line:J[J.length-(ct||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(ct||1)].first_column,last_column:J[J.length-1].last_column},Pt&&(lt._$.range=[J[J.length-(ct||1)].range[0],J[J.length-1].range[1]]),typeof(Ht=this.performAction.apply(lt,[ae,Jn,Ct,it.yy,Wt[1],Ke,J].concat(L)))<"u")return Ht;ct&&($e=$e.slice(0,-1*ct*2),Ke=Ke.slice(0,-1*ct),J=J.slice(0,-1*ct)),$e.push(this.productions_[Wt[1]][0]),Ke.push(lt.$),J.push(lt._$),$e.push(dt[$e[$e.length-2]][$e[$e.length-1]]);break;case 3:return!0}}return!0}};function st(){this.yy={}}return Ft.lexer=function(){return{EOF:1,parseError:function(qe,$e){if(!this.yy.parser)throw new Error(qe);this.yy.parser.parseError(qe,$e)},setInput:function(Ue,qe){return this.yy=qe||this.yy||{},this._input=Ue,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ue=this._input[0];return this.yytext+=Ue,this.yyleng++,this.offset++,this.match+=Ue,this.matched+=Ue,Ue.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ue},unput:function(Ue){var qe=Ue.length,$e=Ue.split(/(?:\r\n?|\n)/g);this._input=Ue+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-qe),this.offset-=qe;var pe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$e.length-1&&(this.yylineno-=$e.length-1);var Ke=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$e?($e.length===pe.length?this.yylloc.first_column:0)+pe[pe.length-$e.length].length-$e[0].length:this.yylloc.first_column-qe},this.options.ranges&&(this.yylloc.range=[Ke[0],Ke[0]+this.yyleng-qe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ue){this.unput(this.match.slice(Ue))},pastInput:function(){var Ue=this.matched.substr(0,this.matched.length-this.match.length);return(Ue.length>20?"...":"")+Ue.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ue=this.match;return Ue.length<20&&(Ue+=this._input.substr(0,20-Ue.length)),(Ue.substr(0,20)+(Ue.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ue=this.pastInput(),qe=new Array(Ue.length+1).join("-");return Ue+this.upcomingInput()+"\n"+qe+"^"},test_match:function(Ue,qe){var $e,pe,Ke;if(this.options.backtrack_lexer&&(Ke={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ke.yylloc.range=this.yylloc.range.slice(0))),(pe=Ue[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=pe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pe?pe[pe.length-1].length-pe[pe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ue[0].length},this.yytext+=Ue[0],this.match+=Ue[0],this.matches=Ue,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ue[0].length),this.matched+=Ue[0],$e=this.performAction.call(this,this.yy,this,qe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$e)return $e;if(this._backtrack){for(var J in Ke)this[J]=Ke[J];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ue,qe,$e,pe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ke=this._currentRules(),J=0;J<Ke.length;J++)if(($e=this._input.match(this.rules[Ke[J]]))&&(!qe||$e[0].length>qe[0].length)){if(qe=$e,pe=J,this.options.backtrack_lexer){if(!1!==(Ue=this.test_match($e,Ke[J])))return Ue;if(this._backtrack){qe=!1;continue}return!1}if(!this.options.flex)break}return qe?!1!==(Ue=this.test_match(qe,Ke[pe]))&&Ue:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(qe){this.conditionStack.push(qe)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(qe){return(qe=this.conditionStack.length-1-Math.abs(qe||0))>=0?this.conditionStack[qe]:"INITIAL"},pushState:function(qe){this.begin(qe)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(qe,$e,pe,Ke){switch(pe){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 20:case 23:case 26:case 29:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:case 16:case 17:case 18:break;case 15:return 11;case 19:this.begin("href");break;case 21:return 38;case 22:this.begin("callbackname");break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 27:return 37;case 28:this.begin("click");break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}}}(),st.prototype=Ft,Ft.Parser=st,new st}();St.parser=St;const _3=St,DT=s=>null!==s.match(/^\s*gantt/);re().extend(_s()),re().extend(Ui()),re().extend(co());let dg,sf="",Em="",K1="",dp=[],Sm=[],Z1={},Q1=[],Am=[],v0="";const tv=["active","done","crit","milestone"];let D2=[],J1=!1,M2=!1,nv=0;const RT=function(s,a,d,f){return!f.includes(s.format(a.trim()))&&(!!(s.isoWeekday()>=6&&d.includes("weekends")||d.includes(s.format("dddd").toLowerCase()))||d.includes(s.format(a.trim())))},PT=function(s,a,d,f){if(!d.length||s.manualEndTime)return;let p,y;p=s.startTime instanceof Date?re()(s.startTime):re()(s.startTime,a,!0),p=p.add(1,"d"),y=s.endTime instanceof Date?re()(s.endTime):re()(s.endTime,a,!0);const[v,w]=N3(p,y,a,d,f);s.endTime=v.toDate(),s.renderEndTime=w},N3=function(s,a,d,f,p){let y=!1,v=null;for(;s<=a;)y||(v=a.toDate()),y=RT(s,d,f,p),y&&(a=a.add(1,"d")),s=s.add(1,"d");return[a,v]},O2=function(s,a,d){d=d.trim();const p=/^after\s+([\d\w- ]+)/.exec(d.trim());if(null!==p){let v=null;if(p[1].split(" ").forEach(function(w){let C=b0(w);void 0!==C&&(v?C.endTime>v.endTime&&(v=C):v=C)}),v)return v.endTime;{const w=new Date;return w.setHours(0,0,0,0),w}}let y=re()(d,a.trim(),!0);if(y.isValid())return y.toDate();{Me.debug("Invalid date:"+d),Me.debug("With date format:"+a.trim());const v=new Date(d);if(void 0===v||isNaN(v.getTime()))throw new Error("Invalid date:"+d);return v}},_h=function(s){const a=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(s.trim());return null!==a?[Number.parseFloat(a[1]),a[2]]:[NaN,"ms"]},iv=function(s,a,d,f=!1){d=d.trim();let p=re()(d,a.trim(),!0);if(p.isValid())return f&&(p=p.add(1,"d")),p.toDate();let y=re()(s);const[v,w]=_h(d);if(!Number.isNaN(v)){const C=y.add(v,w);C.isValid()&&(y=C)}return y.toDate()};let rv=0;const km=function(s){return void 0===s?(rv+=1,"task"+rv):s};let Dm,Mm,oc=[];const R2={},b0=function(s){return oc[R2[s]]},ov=function(){const s=function(d){const f=oc[d];let p="";switch(oc[d].raw.startTime.type){case"prevTaskEnd":{const y=b0(f.prevTaskId);f.startTime=y.endTime;break}case"getStartDate":p=O2(0,sf,oc[d].raw.startTime.startData),p&&(oc[d].startTime=p)}return oc[d].startTime&&(oc[d].endTime=iv(oc[d].startTime,sf,oc[d].raw.endTime.data,J1),oc[d].endTime&&(oc[d].processed=!0,oc[d].manualEndTime=re()(oc[d].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),PT(oc[d],sf,Sm,dp))),oc[d].processed};let a=!0;for(const[d,f]of oc.entries())s(d),a=a&&f.processed;return a},VT=function(s,a){s.split(",").forEach(function(d){let f=b0(d);void 0!==f&&f.classes.push(a)})},av=function(s,a){D2.push(function(){const d=document.querySelector(`[id="${s}"]`);null!==d&&d.addEventListener("click",function(){a()})},function(){const d=document.querySelector(`[id="${s}-text"]`);null!==d&&d.addEventListener("click",function(){a()})})},cv={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().gantt,clear:function(){Q1=[],Am=[],v0="",D2=[],rv=0,Dm=void 0,Mm=void 0,oc=[],sf="",Em="",dg=void 0,K1="",dp=[],Sm=[],J1=!1,M2=!1,nv=0,Z1={},je()},setDateFormat:function(s){sf=s},getDateFormat:function(){return sf},enableInclusiveEndDates:function(){J1=!0},endDatesAreInclusive:function(){return J1},enableTopAxis:function(){M2=!0},topAxisEnabled:function(){return M2},setAxisFormat:function(s){Em=s},getAxisFormat:function(){return Em},setTickInterval:function(s){dg=s},getTickInterval:function(){return dg},setTodayMarker:function(s){K1=s},getTodayMarker:function(){return K1},setAccTitle:Je,getAccTitle:pt,setDiagramTitle:Nt,getDiagramTitle:cn,setAccDescription:et,getAccDescription:Mt,addSection:function(s){v0=s,Q1.push(s)},getSections:function(){return Q1},getTasks:function(){let s=ov(),d=0;for(;!s&&d<10;)s=ov(),d++;return Am=oc,Am},addTask:function(s,a){const d={section:v0,type:v0,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:a},task:s,classes:[]},f=function(s,a){let d;d=":"===a.substr(0,1)?a.substr(1,a.length):a;const f=d.split(","),p={};w0(f,p,tv);for(let y=0;y<f.length;y++)f[y]=f[y].trim();switch(f.length){case 1:p.id=km(),p.startTime={type:"prevTaskEnd",id:s},p.endTime={data:f[0]};break;case 2:p.id=km(),p.startTime={type:"getStartDate",startData:f[0]},p.endTime={data:f[1]};break;case 3:p.id=km(f[0]),p.startTime={type:"getStartDate",startData:f[1]},p.endTime={data:f[2]}}return p}(Mm,a);d.raw.startTime=f.startTime,d.raw.endTime=f.endTime,d.id=f.id,d.prevTaskId=Mm,d.active=f.active,d.done=f.done,d.crit=f.crit,d.milestone=f.milestone,d.order=nv,nv++;const p=oc.push(d);Mm=d.id,R2[d.id]=p-1},findTaskById:b0,addTaskOrg:function(s,a){const d={section:v0,type:v0,description:s,task:s,classes:[]},f=function(s,a){let d;d=":"===a.substr(0,1)?a.substr(1,a.length):a;const f=d.split(","),p={};w0(f,p,tv);for(let v=0;v<f.length;v++)f[v]=f[v].trim();let y="";switch(f.length){case 1:p.id=km(),p.startTime=s.endTime,y=f[0];break;case 2:p.id=km(),p.startTime=O2(0,sf,f[0]),y=f[1];break;case 3:p.id=km(f[0]),p.startTime=O2(0,sf,f[1]),y=f[2]}return y&&(p.endTime=iv(p.startTime,sf,y,J1),p.manualEndTime=re()(y,"YYYY-MM-DD",!0).isValid(),PT(p,sf,Sm,dp)),p}(Dm,a);d.startTime=f.startTime,d.endTime=f.endTime,d.id=f.id,d.active=f.active,d.done=f.done,d.crit=f.crit,d.milestone=f.milestone,Dm=d,Am.push(d)},setIncludes:function(s){dp=s.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return dp},setExcludes:function(s){Sm=s.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return Sm},setClickEvent:function(s,a,d){s.split(",").forEach(function(f){!function(s,a,d){if("loose"!==ut().securityLevel||void 0===a)return;let f=[];if("string"==typeof d){f=d.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let y=0;y<f.length;y++){let v=f[y].trim();'"'===v.charAt(0)&&'"'===v.charAt(v.length-1)&&(v=v.substr(1,v.length-2)),f[y]=v}}0===f.length&&f.push(s),void 0!==b0(s)&&av(s,()=>{Br.runFunc(a,...f)})}(f,a,d)}),VT(s,"clickable")},setLink:function(s,a){let d=a;"loose"!==ut().securityLevel&&(d=(0,A.J)(a)),s.split(",").forEach(function(f){void 0!==b0(f)&&(av(f,()=>{window.open(d,"_self")}),Z1[f]=d)}),VT(s,"clickable")},getLinks:function(){return Z1},bindFunctions:function(s){D2.forEach(function(a){a(s)})},parseDuration:_h,isInvalidDate:RT};function w0(s,a,d){let f=!0;for(;f;)f=!1,d.forEach(function(p){const v=new RegExp("^\\s*"+p+"\\s*$");s[0].match(v)&&(a[p]=!0,s.shift(1),f=!0)})}let yh;const UT={setConf:function(){Me.debug("Something is calling, setConf, remove the call")},draw:function(s,a,d,f){const p=ut().gantt,y=ut().securityLevel;let v;"sandbox"===y&&(v=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===y?v.nodes()[0].contentDocument.body:"body"),C="sandbox"===y?v.nodes()[0].contentDocument:document,D=C.getElementById(a);yh=D.parentElement.offsetWidth,void 0===yh&&(yh=1200),void 0!==p.useWidth&&(yh=p.useWidth);const V=f.db.getTasks(),W=V.length*(p.barHeight+p.barGap)+2*p.topPadding;D.setAttribute("viewBox","0 0 "+yh+" "+W);const j=w.select(`[id="${a}"]`),X=(0,F.w7C)().domain([(0,F.jkA)(V,function(qe){return qe.startTime}),(0,F.T9B)(V,function(qe){return qe.endTime})]).rangeRound([0,yh-p.leftPadding-p.rightPadding]);let Ee=[];for(const qe of V)Ee.push(qe.type);const Ie=Ee;function Ue(qe,$e){return function rt(qe){let $e=qe.length;const pe={};for(;$e;)pe[qe[--$e]]=(pe[qe[$e]]||0)+1;return pe}($e)[qe]||0}Ee=function st(qe){const $e={},pe=[];for(let Ke=0,J=qe.length;Ke<J;++Ke)Object.prototype.hasOwnProperty.call($e,qe[Ke])||($e[qe[Ke]]=!0,pe.push(qe[Ke]));return pe}(Ee),V.sort(function Pe(qe,$e){const pe=qe.startTime,Ke=$e.startTime;let J=0;return pe>Ke?J=1:pe<Ke&&(J=-1),J}),function Ve(qe,$e,pe){const Ke=p.barHeight,J=Ke+p.barGap,dt=p.topPadding,ae=p.leftPadding;(0,F.m4Y)().domain([0,Ee.length]).range(["#00B9FA","#F95002"]).interpolate(F.bEH),function Qe(qe,$e,pe,Ke,J,dt,ae,Ct){const Jn=dt.reduce((Dn,{startTime:Pt})=>Dn?Math.min(Dn,Pt):Pt,0),Xt=dt.reduce((Dn,{endTime:Pt})=>Dn?Math.max(Dn,Pt):Pt,0),Jt=f.db.getDateFormat();if(!Jn||!Xt)return;const L=[];let P=null,it=re()(Jn);for(;it.valueOf()<=Xt;)f.db.isInvalidDate(it,Jt,ae,Ct)?P?P.end=it:P={start:it,end:it}:P&&(L.push(P),P=null),it=it.add(1,"d");j.append("g").selectAll("rect").data(L).enter().append("rect").attr("id",function(Dn){return"exclude-"+Dn.start.format("YYYY-MM-DD")}).attr("x",function(Dn){return X(Dn.start)+pe}).attr("y",p.gridLineStartPadding).attr("width",function(Dn){const Pt=Dn.end.add(1,"day");return X(Pt)-X(Dn.start)}).attr("height",J-$e-p.gridLineStartPadding).attr("transform-origin",function(Dn,Pt){return(X(Dn.start)+pe+.5*(X(Dn.end)-X(Dn.start))).toString()+"px "+(Pt*qe+.5*J).toString()+"px"}).attr("class","exclude-range")}(J,dt,ae,0,pe,qe,f.db.getExcludes(),f.db.getIncludes()),function vt(qe,$e,pe,Ke){let J=(0,F.l78)(X).tickSize(-Ke+$e+p.gridLineStartPadding).tickFormat((0,F.DCK)(f.db.getAxisFormat()||p.axisFormat||"%Y-%m-%d"));const ae=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(f.db.getTickInterval()||p.tickInterval);if(null!==ae){const Ct=ae[1];switch(ae[2]){case"minute":J.ticks(F.wXd.every(Ct));break;case"hour":J.ticks(F.Agd.every(Ct));break;case"day":J.ticks(F.UAC.every(Ct));break;case"week":J.ticks(F.Kgo.every(Ct));break;case"month":J.ticks(F.Ui6.every(Ct))}}if(j.append("g").attr("class","grid").attr("transform","translate("+qe+", "+(Ke-50)+")").call(J).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),f.db.topAxisEnabled()||p.topAxis){let Ct=(0,F.tlR)(X).tickSize(-Ke+$e+p.gridLineStartPadding).tickFormat((0,F.DCK)(f.db.getAxisFormat()||p.axisFormat||"%Y-%m-%d"));if(null!==ae){const Jn=ae[1];switch(ae[2]){case"minute":Ct.ticks(F.wXd.every(Jn));break;case"hour":Ct.ticks(F.Agd.every(Jn));break;case"day":Ct.ticks(F.UAC.every(Jn));break;case"week":Ct.ticks(F.Kgo.every(Jn));break;case"month":Ct.ticks(F.Ui6.every(Jn))}}j.append("g").attr("class","grid").attr("transform","translate("+qe+", "+$e+")").call(Ct).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}(ae,dt,0,pe),function Ae(qe,$e,pe,Ke,J,dt,ae){j.append("g").selectAll("rect").data(qe).enter().append("rect").attr("x",0).attr("y",function(Jt,L){return Jt.order*$e+pe-2}).attr("width",function(){return ae-p.rightPadding/2}).attr("height",$e).attr("class",function(Jt){for(const[L,P]of Ee.entries())if(Jt.type===P)return"section section"+L%p.numberSectionStyles;return"section section0"});const Ct=j.append("g").selectAll("rect").data(qe).enter(),Jn=f.db.getLinks();if(Ct.append("rect").attr("id",function(Jt){return Jt.id}).attr("rx",3).attr("ry",3).attr("x",function(Jt){return Jt.milestone?X(Jt.startTime)+Ke+.5*(X(Jt.endTime)-X(Jt.startTime))-.5*J:X(Jt.startTime)+Ke}).attr("y",function(Jt,L){return Jt.order*$e+pe}).attr("width",function(Jt){return Jt.milestone?J:X(Jt.renderEndTime||Jt.endTime)-X(Jt.startTime)}).attr("height",J).attr("transform-origin",function(Jt,L){return L=Jt.order,(X(Jt.startTime)+Ke+.5*(X(Jt.endTime)-X(Jt.startTime))).toString()+"px "+(L*$e+pe+.5*J).toString()+"px"}).attr("class",function(Jt){let P="";Jt.classes.length>0&&(P=Jt.classes.join(" "));let it=0;for(const[Dn,Pt]of Ee.entries())Jt.type===Pt&&(it=Dn%p.numberSectionStyles);let Hn="";return Jt.active?Jt.crit?Hn+=" activeCrit":Hn=" active":Jt.done?Hn=Jt.crit?" doneCrit":" done":Jt.crit&&(Hn+=" crit"),0===Hn.length&&(Hn=" task"),Jt.milestone&&(Hn=" milestone "+Hn),Hn+=it,Hn+=" "+P,"task"+Hn}),Ct.append("text").attr("id",function(Jt){return Jt.id+"-text"}).text(function(Jt){return Jt.task}).attr("font-size",p.fontSize).attr("x",function(Jt){let L=X(Jt.startTime),P=X(Jt.renderEndTime||Jt.endTime);Jt.milestone&&(L+=.5*(X(Jt.endTime)-X(Jt.startTime))-.5*J),Jt.milestone&&(P=L+J);const it=this.getBBox().width;return it>P-L?P+it+1.5*p.leftPadding>ae?L+Ke-5:P+Ke+5:(P-L)/2+L+Ke}).attr("y",function(Jt,L){return Jt.order*$e+p.barHeight/2+(p.fontSize/2-2)+pe}).attr("text-height",J).attr("class",function(Jt){const L=X(Jt.startTime);let P=X(Jt.endTime);Jt.milestone&&(P=L+J);const it=this.getBBox().width;let Hn="";Jt.classes.length>0&&(Hn=Jt.classes.join(" "));let Dn=0;for(const[nr,xt]of Ee.entries())Jt.type===xt&&(Dn=nr%p.numberSectionStyles);let Pt="";return Jt.active&&(Pt=Jt.crit?"activeCritText"+Dn:"activeText"+Dn),Jt.done?Pt=Jt.crit?Pt+" doneCritText"+Dn:Pt+" doneText"+Dn:Jt.crit&&(Pt=Pt+" critText"+Dn),Jt.milestone&&(Pt+=" milestoneText"),it>P-L?P+it+1.5*p.leftPadding>ae?Hn+" taskTextOutsideLeft taskTextOutside"+Dn+" "+Pt:Hn+" taskTextOutsideRight taskTextOutside"+Dn+" "+Pt+" width-"+it:Hn+" taskText taskText"+Dn+" "+Pt+" width-"+it}),"sandbox"===ut().securityLevel){let Jt;Jt=(0,F.Ltv)("#i"+a);const L=Jt.nodes()[0].contentDocument;Ct.filter(function(P){return void 0!==Jn[P.id]}).each(function(P){var it=L.querySelector("#"+P.id),Hn=L.querySelector("#"+P.id+"-text");const Dn=it.parentNode;var Pt=L.createElement("a");Pt.setAttribute("xlink:href",Jn[P.id]),Pt.setAttribute("target","_top"),Dn.appendChild(Pt),Pt.appendChild(it),Pt.appendChild(Hn)})}}(qe,J,dt,ae,Ke,0,$e),function Ft(qe,$e){const pe=[];let Ke=0;for(const[J,dt]of Ee.entries())pe[J]=[dt,Ue(dt,Ie)];j.append("g").selectAll("text").data(pe).enter().append(function(J){const dt=J[0].split(tr.lineBreakRegex),ae=-(dt.length-1)/2,Ct=C.createElementNS("http://www.w3.org/2000/svg","text");Ct.setAttribute("dy",ae+"em");for(const[Jn,Xt]of dt.entries()){const Jt=C.createElementNS("http://www.w3.org/2000/svg","tspan");Jt.setAttribute("alignment-baseline","central"),Jt.setAttribute("x","10"),Jn>0&&Jt.setAttribute("dy","1em"),Jt.textContent=Xt,Ct.appendChild(Jt)}return Ct}).attr("x",10).attr("y",function(J,dt){if(!(dt>0))return J[1]*qe/2+$e;for(let ae=0;ae<dt;ae++)return Ke+=pe[dt-1][1],J[1]*qe/2+Ke*qe+$e}).attr("font-size",p.sectionFontSize).attr("font-size",p.sectionFontSize).attr("class",function(J){for(const[dt,ae]of Ee.entries())if(J[0]===ae)return"sectionTitle sectionTitle"+dt%p.numberSectionStyles;return"sectionTitle"})}(J,dt),function Qt(qe,$e,pe,Ke){const J=f.db.getTodayMarker();if("off"===J)return;const dt=j.append("g").attr("class","today"),ae=new Date,Ct=dt.append("line");Ct.attr("x1",X(ae)+qe).attr("x2",X(ae)+qe).attr("y1",p.titleTopMargin).attr("y2",Ke-p.titleTopMargin).attr("class","today"),""!==J&&Ct.attr("style",J.replace(/,/g,";"))}(ae,0,0,pe)}(V,yh,W),tu(j,W,yh,p.useMaxWidth),j.append("text").text(f.db.getDiagramTitle()).attr("x",yh/2).attr("y",p.titleTopMargin).attr("class","titleText")}};var dv=function(){var s=function(y,v,w,C){for(w=w||{},C=y.length;C--;w[y[C]]=v);return w},a=[6,9,10],d={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(v,w,C,D,V,W,j){switch(V){case 1:return D;case 4:break;case 6:D.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},s(a,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},s(a,[2,3]),s(a,[2,4]),s(a,[2,5]),s(a,[2,6])],defaultActions:{4:[2,1]},parseError:function(v,w){if(!w.recoverable){var C=new Error(v);throw C.hash=w,C}this.trace(v)},parse:function(v){var C=[0],D=[],V=[null],W=[],j=this.table,X="",Ee=0,Ie=0,Ae=W.slice.call(arguments,1),Qe=Object.create(this.lexer),vt={yy:{}};for(var Ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ft)&&(vt.yy[Ft]=this.yy[Ft]);Qe.setInput(v,vt.yy),vt.yy.lexer=Qe,vt.yy.parser=this,typeof Qe.yylloc>"u"&&(Qe.yylloc={});var Qt=Qe.yylloc;W.push(Qt);var Xt,st=Qe.options&&Qe.options.ranges;this.parseError="function"==typeof vt.yy.parseError?vt.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Ue,qe,$e,pe,J,dt,Ct,Ke={};;){if(this.defaultActions[qe=C[C.length-1]]?$e=this.defaultActions[qe]:((null===Ue||typeof Ue>"u")&&(Xt=void 0,"number"!=typeof(Xt=D.pop()||Qe.lex()||1)&&(Xt instanceof Array&&(Xt=(D=Xt).pop()),Xt=this.symbols_[Xt]||Xt),Ue=Xt),$e=j[qe]&&j[qe][Ue]),typeof $e>"u"||!$e.length||!$e[0]){var Jn;for(J in Ct=[],j[qe])this.terminals_[J]&&J>2&&Ct.push("'"+this.terminals_[J]+"'");Jn=Qe.showPosition?"Parse error on line "+(Ee+1)+":\n"+Qe.showPosition()+"\nExpecting "+Ct.join(", ")+", got '"+(this.terminals_[Ue]||Ue)+"'":"Parse error on line "+(Ee+1)+": Unexpected "+(1==Ue?"end of input":"'"+(this.terminals_[Ue]||Ue)+"'"),this.parseError(Jn,{text:Qe.match,token:this.terminals_[Ue]||Ue,line:Qe.yylineno,loc:Qt,expected:Ct})}if($e[0]instanceof Array&&$e.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qe+", token: "+Ue);switch($e[0]){case 1:C.push(Ue),V.push(Qe.yytext),W.push(Qe.yylloc),C.push($e[1]),Ue=null,Ie=Qe.yyleng,X=Qe.yytext,Ee=Qe.yylineno,Qt=Qe.yylloc;break;case 2:if(Ke.$=V[V.length-(dt=this.productions_[$e[1]][1])],Ke._$={first_line:W[W.length-(dt||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(dt||1)].first_column,last_column:W[W.length-1].last_column},st&&(Ke._$.range=[W[W.length-(dt||1)].range[0],W[W.length-1].range[1]]),typeof(pe=this.performAction.apply(Ke,[X,Ie,Ee,vt.yy,$e[1],V,W].concat(Ae)))<"u")return pe;dt&&(C=C.slice(0,-1*dt*2),V=V.slice(0,-1*dt),W=W.slice(0,-1*dt)),C.push(this.productions_[$e[1]][0]),V.push(Ke.$),W.push(Ke._$),C.push(j[C[C.length-2]][C[C.length-1]]);break;case 3:return!0}}return!0}};function p(){this.yy={}}return d.lexer=function(){return{EOF:1,parseError:function(w,C){if(!this.yy.parser)throw new Error(w);this.yy.parser.parseError(w,C)},setInput:function(v,w){return this.yy=w||this.yy||{},this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];return this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v,v.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var w=v.length,C=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-w),this.offset-=w;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),C.length-1&&(this.yylineno-=C.length-1);var V=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:C?(C.length===D.length?this.yylloc.first_column:0)+D[D.length-C.length].length-C[0].length:this.yylloc.first_column-w},this.options.ranges&&(this.yylloc.range=[V[0],V[0]+this.yyleng-w]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),w=new Array(v.length+1).join("-");return v+this.upcomingInput()+"\n"+w+"^"},test_match:function(v,w){var C,D,V;if(this.options.backtrack_lexer&&(V={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(V.yylloc.range=this.yylloc.range.slice(0))),(D=v[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],C=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),C)return C;if(this._backtrack){for(var W in V)this[W]=V[W];return!1}return!1},next:function(){if(this.done)return this.EOF;var v,w,C,D;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var V=this._currentRules(),W=0;W<V.length;W++)if((C=this._input.match(this.rules[V[W]]))&&(!w||C[0].length>w[0].length)){if(w=C,D=W,this.options.backtrack_lexer){if(!1!==(v=this.test_match(C,V[W])))return v;if(this._backtrack){w=!1;continue}return!1}if(!this.options.flex)break}return w?!1!==(v=this.test_match(w,V[D]))&&v:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(w){this.conditionStack.push(w)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(w){return(w=this.conditionStack.length-1-Math.abs(w||0))>=0?this.conditionStack[w]:"INITIAL"},pushState:function(w){this.begin(w)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(w,C,D,V){switch(D){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}}}(),p.prototype=d,d.Parser=p,new p}();dv.parser=dv;const R3=dv;var zT="",HT=!1;const hM={setMessage:s=>{Me.debug("Setting message to: "+s),zT=s},getMessage:()=>zT,setInfo:s=>{HT=s},getInfo:()=>HT,clear:je},F3={draw:(s,a,d)=>{try{Me.debug("Rendering info diagram\n"+s);const f=ut().securityLevel;let p;"sandbox"===f&&(p=(0,F.Ltv)("#i"+a));const v=(0,F.Ltv)("sandbox"===f?p.nodes()[0].contentDocument.body:"body").select("#"+a);v.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+d),v.attr("height",100),v.attr("width",400)}catch(f){Me.error("Error while rendering info diagram"),Me.error(f.message)}}},jT=s=>null!==s.match(/^\s*info/);var F2=function(){var s=function(Qt,st,rt,Ue){for(rt=rt||{},Ue=Qt.length;Ue--;rt[Qt[Ue]]=st);return rt},a=[1,4],d=[1,5],f=[1,6],p=[1,7],y=[1,9],v=[1,11,13,15,17,19,20,26,27,28,29],w=[2,5],C=[1,6,11,13,15,17,19,20,26,27,28,29],D=[26,27,28],V=[2,8],W=[1,18],j=[1,19],X=[1,20],Ee=[1,21],Ie=[1,22],Pe=[1,23],Ve=[1,28],Ae=[6,26,27,28,29],Qe={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(st,rt,Ue,qe,$e,pe,Ke){var J=pe.length-1;switch($e){case 4:qe.setShowData(!0);break;case 7:this.$=pe[J-1];break;case 9:qe.addSection(pe[J-1],qe.cleanupValue(pe[J]));break;case 10:this.$=pe[J].trim(),qe.setDiagramTitle(this.$);break;case 11:this.$=pe[J].trim(),qe.setAccTitle(this.$);break;case 12:case 13:this.$=pe[J].trim(),qe.setAccDescription(this.$);break;case 14:qe.addSection(pe[J].substr(8)),this.$=pe[J].substr(8);break;case 21:qe.parseDirective("%%{","open_directive");break;case 22:qe.parseDirective(pe[J],"type_directive");break;case 23:pe[J]=pe[J].trim().replace(/'/g,'"'),qe.parseDirective(pe[J],"arg_directive");break;case 24:qe.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:a,21:8,26:d,27:f,28:p,29:y},{1:[3]},{3:10,4:2,5:3,6:a,21:8,26:d,27:f,28:p,29:y},{3:11,4:2,5:3,6:a,21:8,26:d,27:f,28:p,29:y},s(v,w,{7:12,8:[1,13]}),s(C,[2,18]),s(C,[2,19]),s(C,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},s(D,V,{21:8,9:16,10:17,5:24,1:[2,3],11:W,13:j,15:X,17:Ee,19:Ie,20:Pe,29:y}),s(v,w,{7:25}),{23:26,24:[1,27],32:Ve},s([24,32],[2,22]),s(v,[2,6]),{4:29,26:d,27:f,28:p},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},s(D,[2,13]),s(D,[2,14]),s(D,[2,15]),s(D,V,{21:8,9:16,10:17,5:24,1:[2,4],11:W,13:j,15:X,17:Ee,19:Ie,20:Pe,29:y}),s(Ae,[2,16]),{25:34,31:[1,35]},s(Ae,[2,24]),s(v,[2,7]),s(D,[2,9]),s(D,[2,10]),s(D,[2,11]),s(D,[2,12]),{23:36,32:Ve},{32:[2,23]},s(Ae,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(st,rt){if(!rt.recoverable){var Ue=new Error(st);throw Ue.hash=rt,Ue}this.trace(st)},parse:function(st){var Ue=[0],qe=[],$e=[null],pe=[],Ke=this.table,J="",dt=0,ae=0,Xt=pe.slice.call(arguments,1),Jt=Object.create(this.lexer),L={yy:{}};for(var P in this.yy)Object.prototype.hasOwnProperty.call(this.yy,P)&&(L.yy[P]=this.yy[P]);Jt.setInput(st,L.yy),L.yy.lexer=Jt,L.yy.parser=this,typeof Jt.yylloc>"u"&&(Jt.yylloc={});var it=Jt.yylloc;pe.push(it);var bn,Hn=Jt.options&&Jt.options.ranges;this.parseError="function"==typeof L.yy.parseError?L.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Pt,nr,xt,Tn,Ht,lt,ct,Wt={};;){if(this.defaultActions[nr=Ue[Ue.length-1]]?xt=this.defaultActions[nr]:((null===Pt||typeof Pt>"u")&&(bn=void 0,"number"!=typeof(bn=qe.pop()||Jt.lex()||1)&&(bn instanceof Array&&(bn=(qe=bn).pop()),bn=this.symbols_[bn]||bn),Pt=bn),xt=Ke[nr]&&Ke[nr][Pt]),typeof xt>"u"||!xt.length||!xt[0]){var Oe;for(Ht in ct=[],Ke[nr])this.terminals_[Ht]&&Ht>2&&ct.push("'"+this.terminals_[Ht]+"'");Oe=Jt.showPosition?"Parse error on line "+(dt+1)+":\n"+Jt.showPosition()+"\nExpecting "+ct.join(", ")+", got '"+(this.terminals_[Pt]||Pt)+"'":"Parse error on line "+(dt+1)+": Unexpected "+(1==Pt?"end of input":"'"+(this.terminals_[Pt]||Pt)+"'"),this.parseError(Oe,{text:Jt.match,token:this.terminals_[Pt]||Pt,line:Jt.yylineno,loc:it,expected:ct})}if(xt[0]instanceof Array&&xt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nr+", token: "+Pt);switch(xt[0]){case 1:Ue.push(Pt),$e.push(Jt.yytext),pe.push(Jt.yylloc),Ue.push(xt[1]),Pt=null,ae=Jt.yyleng,J=Jt.yytext,dt=Jt.yylineno,it=Jt.yylloc;break;case 2:if(Wt.$=$e[$e.length-(lt=this.productions_[xt[1]][1])],Wt._$={first_line:pe[pe.length-(lt||1)].first_line,last_line:pe[pe.length-1].last_line,first_column:pe[pe.length-(lt||1)].first_column,last_column:pe[pe.length-1].last_column},Hn&&(Wt._$.range=[pe[pe.length-(lt||1)].range[0],pe[pe.length-1].range[1]]),typeof(Tn=this.performAction.apply(Wt,[J,ae,dt,L.yy,xt[1],$e,pe].concat(Xt)))<"u")return Tn;lt&&(Ue=Ue.slice(0,-1*lt*2),$e=$e.slice(0,-1*lt),pe=pe.slice(0,-1*lt)),Ue.push(this.productions_[xt[1]][0]),$e.push(Wt.$),pe.push(Wt._$),Ue.push(Ke[Ue[Ue.length-2]][Ue[Ue.length-1]]);break;case 3:return!0}}return!0}};function Ft(){this.yy={}}return Qe.lexer=function(){return{EOF:1,parseError:function(rt,Ue){if(!this.yy.parser)throw new Error(rt);this.yy.parser.parseError(rt,Ue)},setInput:function(st,rt){return this.yy=rt||this.yy||{},this._input=st,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var st=this._input[0];return this.yytext+=st,this.yyleng++,this.offset++,this.match+=st,this.matched+=st,st.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),st},unput:function(st){var rt=st.length,Ue=st.split(/(?:\r\n?|\n)/g);this._input=st+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-rt),this.offset-=rt;var qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ue.length-1&&(this.yylineno-=Ue.length-1);var $e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ue?(Ue.length===qe.length?this.yylloc.first_column:0)+qe[qe.length-Ue.length].length-Ue[0].length:this.yylloc.first_column-rt},this.options.ranges&&(this.yylloc.range=[$e[0],$e[0]+this.yyleng-rt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(st){this.unput(this.match.slice(st))},pastInput:function(){var st=this.matched.substr(0,this.matched.length-this.match.length);return(st.length>20?"...":"")+st.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var st=this.match;return st.length<20&&(st+=this._input.substr(0,20-st.length)),(st.substr(0,20)+(st.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var st=this.pastInput(),rt=new Array(st.length+1).join("-");return st+this.upcomingInput()+"\n"+rt+"^"},test_match:function(st,rt){var Ue,qe,$e;if(this.options.backtrack_lexer&&($e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($e.yylloc.range=this.yylloc.range.slice(0))),(qe=st[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:qe?qe[qe.length-1].length-qe[qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+st[0].length},this.yytext+=st[0],this.match+=st[0],this.matches=st,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(st[0].length),this.matched+=st[0],Ue=this.performAction.call(this,this.yy,this,rt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ue)return Ue;if(this._backtrack){for(var pe in $e)this[pe]=$e[pe];return!1}return!1},next:function(){if(this.done)return this.EOF;var st,rt,Ue,qe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),pe=0;pe<$e.length;pe++)if((Ue=this._input.match(this.rules[$e[pe]]))&&(!rt||Ue[0].length>rt[0].length)){if(rt=Ue,qe=pe,this.options.backtrack_lexer){if(!1!==(st=this.test_match(Ue,$e[pe])))return st;if(this._backtrack){rt=!1;continue}return!1}if(!this.options.flex)break}return rt?!1!==(st=this.test_match(rt,$e[qe]))&&st:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(rt){this.conditionStack.push(rt)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(rt){return(rt=this.conditionStack.length-1-Math.abs(rt||0))>=0?this.conditionStack[rt]:"INITIAL"},pushState:function(rt){this.begin(rt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(rt,Ue,qe,$e){switch(qe){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:case 8:case 9:break;case 7:return 26;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:case 20:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}}}(),Ft.prototype=Qe,Qe.Parser=Ft,new Ft}();F2.parser=F2;const L3=F2,$T=s=>null!==s.match(/^\s*pie/)||null!==s.match(/^\s*bar/);let Im={},hv=!1;const B2={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().pie,addSection:function(s,a){s=tr.sanitizeText(s,ut()),void 0===Im[s]&&(Im[s]=a,Me.debug("Added new section :",s))},getSections:()=>Im,cleanupValue:function(s){return":"===s.substring(0,1)&&(s=s.substring(1).trim()),Number(s.trim())},clear:function(){Im={},hv=!1,je()},setAccTitle:Je,getAccTitle:pt,setDiagramTitle:Nt,getDiagramTitle:cn,setShowData:function(s){hv=s},getShowData:function(){return hv},getAccDescription:Mt,setAccDescription:et};let hg,fp=ut();const B3={draw:(s,a,d,f)=>{try{fp=ut(),Me.debug("Rendering info diagram\n"+s);const Ae=ut().securityLevel;let Qe;"sandbox"===Ae&&(Qe=(0,F.Ltv)("#i"+a));const vt=(0,F.Ltv)("sandbox"===Ae?Qe.nodes()[0].contentDocument.body:"body"),Ft="sandbox"===Ae?Qe.nodes()[0].contentDocument:document;f.db.clear(),f.parser.parse(s),Me.debug("Parsed info diagram");const Qt=Ft.getElementById(a);hg=Qt.parentElement.offsetWidth,void 0===hg&&(hg=1200),void 0!==fp.useWidth&&(hg=fp.useWidth),void 0!==fp.pie.useWidth&&(hg=fp.pie.useWidth);const st=vt.select("#"+a);tu(st,450,hg,fp.pie.useMaxWidth),Qt.setAttribute("viewBox","0 0 "+hg+" 450");var w=Math.min(hg,450)/2-40,C=st.append("g").attr("transform","translate("+hg/2+",225)"),D=f.db.getSections(),V=0;Object.keys(D).forEach(function(Ue){V+=D[Ue]});const rt=fp.themeVariables;var W=[rt.pie1,rt.pie2,rt.pie3,rt.pie4,rt.pie5,rt.pie6,rt.pie7,rt.pie8,rt.pie9,rt.pie10,rt.pie11,rt.pie12],j=(0,F.UMr)().range(W),X=Object.entries(D).map(function(Ue,qe){return{order:qe,name:Ue[0],value:Ue[1]}}),Ie=(0,F.rLf)().value(function(Ue){return Ue.value}).sort(function(Ue,qe){return Ue.order-qe.order})(X),Pe=(0,F.JLW)().innerRadius(0).outerRadius(w);C.selectAll("mySlices").data(Ie).enter().append("path").attr("d",Pe).attr("fill",function(Ue){return j(Ue.data.name)}).attr("class","pieCircle"),C.selectAll("mySlices").data(Ie).enter().append("text").text(function(Ue){return(Ue.data.value/V*100).toFixed(0)+"%"}).attr("transform",function(Ue){return"translate("+Pe.centroid(Ue)+")"}).style("text-anchor","middle").attr("class","slice"),C.append("text").text(f.db.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");var Ve=C.selectAll(".legend").data(j.domain()).enter().append("g").attr("class","legend").attr("transform",function(Ue,qe){return"translate(216,"+(22*qe-22*j.domain().length/2)+")"});Ve.append("rect").attr("width",18).attr("height",18).style("fill",j).style("stroke",j),Ve.data(Ie).append("text").attr("x",22).attr("y",14).text(function(Ue){return f.db.getShowData()||fp.showData||fp.pie.showData?Ue.data.name+" ["+Ue.data.value+"]":Ue.data.name})}catch(Ae){Me.error("Error while rendering info diagram"),Me.error(Ae)}}};var WT=function(){var s=function(nr,xt,Tn,Wt){for(Tn=Tn||{},Wt=nr.length;Wt--;Tn[nr[Wt]]=xt);return Tn},a=[1,3],d=[1,5],f=[1,6],p=[1,7],y=[1,8],v=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],w=[1,22],C=[2,13],D=[1,26],V=[1,27],W=[1,28],j=[1,29],X=[1,30],Ee=[1,31],Ie=[1,24],Pe=[1,32],Ve=[1,33],Ae=[1,36],Qe=[71,72],vt=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],Ft=[1,56],Qt=[1,57],st=[1,58],rt=[1,59],Ue=[1,60],qe=[1,61],$e=[1,62],pe=[62,63],Ke=[1,74],J=[1,70],dt=[1,71],ae=[1,72],Ct=[1,73],Jn=[1,75],Xt=[1,79],Jt=[1,80],L=[1,77],P=[1,78],it=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Hn={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(xt,Tn,Wt,Ht,lt,Ye,ct){var Oe=Ye.length-1;switch(lt){case 6:this.$=Ye[Oe].trim(),Ht.setAccTitle(this.$);break;case 7:case 8:this.$=Ye[Oe].trim(),Ht.setAccDescription(this.$);break;case 9:Ht.parseDirective("%%{","open_directive");break;case 10:Ht.parseDirective(Ye[Oe],"type_directive");break;case 11:Ye[Oe]=Ye[Oe].trim().replace(/'/g,'"'),Ht.parseDirective(Ye[Oe],"arg_directive");break;case 12:Ht.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:Ht.addRequirement(Ye[Oe-3],Ye[Oe-4]);break;case 20:Ht.setNewReqId(Ye[Oe-2]);break;case 21:Ht.setNewReqText(Ye[Oe-2]);break;case 22:Ht.setNewReqRisk(Ye[Oe-2]);break;case 23:Ht.setNewReqVerifyMethod(Ye[Oe-2]);break;case 26:this.$=Ht.RequirementType.REQUIREMENT;break;case 27:this.$=Ht.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=Ht.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=Ht.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=Ht.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=Ht.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=Ht.RiskLevel.LOW_RISK;break;case 33:this.$=Ht.RiskLevel.MED_RISK;break;case 34:this.$=Ht.RiskLevel.HIGH_RISK;break;case 35:this.$=Ht.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=Ht.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=Ht.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=Ht.VerifyType.VERIFY_TEST;break;case 39:Ht.addElement(Ye[Oe-3]);break;case 40:Ht.setNewElementType(Ye[Oe-2]);break;case 41:Ht.setNewElementDocRef(Ye[Oe-2]);break;case 44:Ht.addRelationship(Ye[Oe-2],Ye[Oe],Ye[Oe-4]);break;case 45:Ht.addRelationship(Ye[Oe-2],Ye[Oe-4],Ye[Oe]);break;case 46:this.$=Ht.Relationships.CONTAINS;break;case 47:this.$=Ht.Relationships.COPIES;break;case 48:this.$=Ht.Relationships.DERIVES;break;case 49:this.$=Ht.Relationships.SATISFIES;break;case 50:this.$=Ht.Relationships.VERIFIES;break;case 51:this.$=Ht.Relationships.REFINES;break;case 52:this.$=Ht.Relationships.TRACES}},table:[{3:1,4:2,6:a,9:4,14:d,16:f,18:p,19:y},{1:[3]},{3:10,4:2,5:[1,9],6:a,9:4,14:d,16:f,18:p,19:y},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},s(v,[2,8]),{20:[2,9]},{3:16,4:2,6:a,9:4,14:d,16:f,18:p,19:y},{1:[2,2]},{4:21,5:w,7:17,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{11:34,12:[1,35],22:Ae},s([12,22],[2,10]),s(v,[2,6]),s(v,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:w,7:38,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{4:21,5:w,7:39,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{4:21,5:w,7:40,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{4:21,5:w,7:41,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{4:21,5:w,7:42,8:C,9:4,14:d,16:f,18:p,19:y,23:18,24:19,25:20,26:23,32:25,40:D,41:V,42:W,43:j,44:X,45:Ee,53:Ie,71:Pe,72:Ve},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},s(Qe,[2,26]),s(Qe,[2,27]),s(Qe,[2,28]),s(Qe,[2,29]),s(Qe,[2,30]),s(Qe,[2,31]),s(vt,[2,55]),s(vt,[2,56]),s(v,[2,4]),{13:51,21:[1,52]},s(v,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:Ft,65:Qt,66:st,67:rt,68:Ue,69:qe,70:$e},{61:63,64:Ft,65:Qt,66:st,67:rt,68:Ue,69:qe,70:$e},{11:64,22:Ae},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},s(pe,[2,46]),s(pe,[2,47]),s(pe,[2,48]),s(pe,[2,49]),s(pe,[2,50]),s(pe,[2,51]),s(pe,[2,52]),{63:[1,68]},s(v,[2,5]),{5:Ke,29:69,30:J,33:dt,35:ae,37:Ct,39:Jn},{5:Xt,39:Jt,55:76,56:L,58:P},{32:81,71:Pe,72:Ve},{32:82,71:Pe,72:Ve},s(it,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:Ke,29:87,30:J,33:dt,35:ae,37:Ct,39:Jn},s(it,[2,25]),s(it,[2,39]),{31:[1,88]},{31:[1,89]},{5:Xt,39:Jt,55:90,56:L,58:P},s(it,[2,43]),s(it,[2,44]),s(it,[2,45]),{32:91,71:Pe,72:Ve},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},s(it,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},s(it,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:Ke,29:116,30:J,33:dt,35:ae,37:Ct,39:Jn},{5:Ke,29:117,30:J,33:dt,35:ae,37:Ct,39:Jn},{5:Ke,29:118,30:J,33:dt,35:ae,37:Ct,39:Jn},{5:Ke,29:119,30:J,33:dt,35:ae,37:Ct,39:Jn},{5:Xt,39:Jt,55:120,56:L,58:P},{5:Xt,39:Jt,55:121,56:L,58:P},s(it,[2,20]),s(it,[2,21]),s(it,[2,22]),s(it,[2,23]),s(it,[2,40]),s(it,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(xt,Tn){if(!Tn.recoverable){var Wt=new Error(xt);throw Wt.hash=Tn,Wt}this.trace(xt)},parse:function(xt){var Wt=[0],Ht=[],lt=[null],Ye=[],ct=this.table,Oe="",bn=0,xe=0,ui=Ye.slice.call(arguments,1),qn=Object.create(this.lexer),gn={yy:{}};for(var Sn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Sn)&&(gn.yy[Sn]=this.yy[Sn]);qn.setInput(xt,gn.yy),gn.yy.lexer=qn,gn.yy.parser=this,typeof qn.yylloc>"u"&&(qn.yylloc={});var Rn=qn.yylloc;Ye.push(Rn);var Pn,En=qn.options&&qn.options.ranges;this.parseError="function"==typeof gn.yy.parseError?gn.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Sr,js,wr,yr,Oa,Vs,Ei,es={};;){if(this.defaultActions[js=Wt[Wt.length-1]]?wr=this.defaultActions[js]:((null===Sr||typeof Sr>"u")&&(Pn=void 0,"number"!=typeof(Pn=Ht.pop()||qn.lex()||1)&&(Pn instanceof Array&&(Pn=(Ht=Pn).pop()),Pn=this.symbols_[Pn]||Pn),Sr=Pn),wr=ct[js]&&ct[js][Sr]),typeof wr>"u"||!wr.length||!wr[0]){var jn;for(Oa in Ei=[],ct[js])this.terminals_[Oa]&&Oa>2&&Ei.push("'"+this.terminals_[Oa]+"'");jn=qn.showPosition?"Parse error on line "+(bn+1)+":\n"+qn.showPosition()+"\nExpecting "+Ei.join(", ")+", got '"+(this.terminals_[Sr]||Sr)+"'":"Parse error on line "+(bn+1)+": Unexpected "+(1==Sr?"end of input":"'"+(this.terminals_[Sr]||Sr)+"'"),this.parseError(jn,{text:qn.match,token:this.terminals_[Sr]||Sr,line:qn.yylineno,loc:Rn,expected:Ei})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+js+", token: "+Sr);switch(wr[0]){case 1:Wt.push(Sr),lt.push(qn.yytext),Ye.push(qn.yylloc),Wt.push(wr[1]),Sr=null,xe=qn.yyleng,Oe=qn.yytext,bn=qn.yylineno,Rn=qn.yylloc;break;case 2:if(es.$=lt[lt.length-(Vs=this.productions_[wr[1]][1])],es._$={first_line:Ye[Ye.length-(Vs||1)].first_line,last_line:Ye[Ye.length-1].last_line,first_column:Ye[Ye.length-(Vs||1)].first_column,last_column:Ye[Ye.length-1].last_column},En&&(es._$.range=[Ye[Ye.length-(Vs||1)].range[0],Ye[Ye.length-1].range[1]]),typeof(yr=this.performAction.apply(es,[Oe,xe,bn,gn.yy,wr[1],lt,Ye].concat(ui)))<"u")return yr;Vs&&(Wt=Wt.slice(0,-1*Vs*2),lt=lt.slice(0,-1*Vs),Ye=Ye.slice(0,-1*Vs)),Wt.push(this.productions_[wr[1]][0]),lt.push(es.$),Ye.push(es._$),Wt.push(ct[Wt[Wt.length-2]][Wt[Wt.length-1]]);break;case 3:return!0}}return!0}};function Pt(){this.yy={}}return Hn.lexer=function(){return{EOF:1,parseError:function(Tn,Wt){if(!this.yy.parser)throw new Error(Tn);this.yy.parser.parseError(Tn,Wt)},setInput:function(xt,Tn){return this.yy=Tn||this.yy||{},this._input=xt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var xt=this._input[0];return this.yytext+=xt,this.yyleng++,this.offset++,this.match+=xt,this.matched+=xt,xt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),xt},unput:function(xt){var Tn=xt.length,Wt=xt.split(/(?:\r\n?|\n)/g);this._input=xt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Tn),this.offset-=Tn;var Ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Wt.length-1&&(this.yylineno-=Wt.length-1);var lt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Wt?(Wt.length===Ht.length?this.yylloc.first_column:0)+Ht[Ht.length-Wt.length].length-Wt[0].length:this.yylloc.first_column-Tn},this.options.ranges&&(this.yylloc.range=[lt[0],lt[0]+this.yyleng-Tn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(xt){this.unput(this.match.slice(xt))},pastInput:function(){var xt=this.matched.substr(0,this.matched.length-this.match.length);return(xt.length>20?"...":"")+xt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var xt=this.match;return xt.length<20&&(xt+=this._input.substr(0,20-xt.length)),(xt.substr(0,20)+(xt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var xt=this.pastInput(),Tn=new Array(xt.length+1).join("-");return xt+this.upcomingInput()+"\n"+Tn+"^"},test_match:function(xt,Tn){var Wt,Ht,lt;if(this.options.backtrack_lexer&&(lt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(lt.yylloc.range=this.yylloc.range.slice(0))),(Ht=xt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ht?Ht[Ht.length-1].length-Ht[Ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+xt[0].length},this.yytext+=xt[0],this.match+=xt[0],this.matches=xt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(xt[0].length),this.matched+=xt[0],Wt=this.performAction.call(this,this.yy,this,Tn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Wt)return Wt;if(this._backtrack){for(var Ye in lt)this[Ye]=lt[Ye];return!1}return!1},next:function(){if(this.done)return this.EOF;var xt,Tn,Wt,Ht;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var lt=this._currentRules(),Ye=0;Ye<lt.length;Ye++)if((Wt=this._input.match(this.rules[lt[Ye]]))&&(!Tn||Wt[0].length>Tn[0].length)){if(Tn=Wt,Ht=Ye,this.options.backtrack_lexer){if(!1!==(xt=this.test_match(Wt,lt[Ye])))return xt;if(this._backtrack){Tn=!1;continue}return!1}if(!this.options.flex)break}return Tn?!1!==(xt=this.test_match(Tn,lt[Ht]))&&xt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Tn){this.conditionStack.push(Tn)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Tn){return(Tn=this.conditionStack.length-1-Math.abs(Tn||0))>=0?this.conditionStack[Tn]:"INITIAL"},pushState:function(Tn){this.begin(Tn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Tn,Wt,Ht,lt){switch(Ht){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 53:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 54:return"qString";case 55:return Wt.yytext=Wt.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}}}(),Pt.prototype=Hn,Hn.Parser=Pt,new Pt}();WT.parser=WT;const V3=WT,yM=s=>null!==s.match(/^\s*requirement(Diagram)?/);let V2=[],Nu={},t_={},af={},pp={};const n_={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().req,addRequirement:(s,a)=>(void 0===t_[s]&&(t_[s]={name:s,type:a,id:Nu.id,text:Nu.text,risk:Nu.risk,verifyMethod:Nu.verifyMethod}),Nu={},t_[s]),getRequirements:()=>t_,setNewReqId:s=>{void 0!==Nu&&(Nu.id=s)},setNewReqText:s=>{void 0!==Nu&&(Nu.text=s)},setNewReqRisk:s=>{void 0!==Nu&&(Nu.risk=s)},setNewReqVerifyMethod:s=>{void 0!==Nu&&(Nu.verifyMethod=s)},setAccTitle:Je,getAccTitle:pt,setAccDescription:et,getAccDescription:Mt,addElement:s=>(void 0===pp[s]&&(pp[s]={name:s,type:af.type,docRef:af.docRef},Me.info("Added new requirement: ",s)),af={},pp[s]),getElements:()=>pp,setNewElementType:s=>{void 0!==af&&(af.type=s)},setNewElementDocRef:s=>{void 0!==af&&(af.docRef=s)},addRelationship:(s,a,d)=>{V2.push({type:s,src:a,dst:d})},getRelationships:()=>V2,clear:()=>{V2=[],Nu={},t_={},af={},pp={},je()}},H2={CONTAINS:"contains",ARROW:"arrow"},i__ReqMarkers=H2;let hl={},XT=0;const qT=(s,a)=>s.insert("rect","#"+a).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",hl.rect_min_width+"px").attr("height",hl.rect_min_height+"px"),yv=(s,a,d)=>{let f=hl.rect_min_width/2,p=s.append("text").attr("class","req reqLabel reqTitle").attr("id",a).attr("x",f).attr("y",hl.rect_padding).attr("dominant-baseline","hanging"),y=0;d.forEach(D=>{0==y?p.append("tspan").attr("text-anchor","middle").attr("x",hl.rect_min_width/2).attr("dy",0).text(D):p.append("tspan").attr("text-anchor","middle").attr("x",hl.rect_min_width/2).attr("dy",.75*hl.line_height).text(D),y++});let C=1.5*hl.rect_padding+y*hl.line_height*.75;return s.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",hl.rect_min_width).attr("y1",C).attr("y2",C),{titleNode:p,y:C}},KT=(s,a,d,f)=>{let p=s.append("text").attr("class","req reqLabel").attr("id",a).attr("x",hl.rect_padding).attr("y",f).attr("dominant-baseline","hanging"),y=0,w=[];return d.forEach(C=>{let D=C.length;for(;D>30&&y<3;){let V=C.substring(0,30);D=(C=C.substring(30,C.length)).length,w[w.length]=V,y++}if(3==y){let V=w[w.length-1];w[w.length-1]=V.substring(0,V.length-4)+"..."}else w[w.length]=C;y=0}),w.forEach(C=>{p.append("tspan").attr("x",hl.rect_padding).attr("dy",hl.line_height).text(C)}),p},vh=s=>s.replace(/\s/g,"").replace(/\./g,"_"),X3={draw:(s,a,d,f)=>{hl=ut().requirement,f.db.clear(),f.parser.parse(s);const p=hl.securityLevel;let y;"sandbox"===p&&(y=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===p?y.nodes()[0].contentDocument.body:"body").select(`[id='${a}']`);((s,a)=>{let d=s.append("defs").append("marker").attr("id",H2.CONTAINS+"_line_ending").attr("refX",0).attr("refY",a.line_height/2).attr("markerWidth",a.line_height).attr("markerHeight",a.line_height).attr("orient","auto").append("g");d.append("circle").attr("cx",a.line_height/2).attr("cy",a.line_height/2).attr("r",a.line_height/2).attr("fill","none"),d.append("line").attr("x1",0).attr("x2",a.line_height).attr("y1",a.line_height/2).attr("y2",a.line_height/2).attr("stroke-width",1),d.append("line").attr("y1",0).attr("y2",a.line_height).attr("x1",a.line_height/2).attr("x2",a.line_height/2).attr("stroke-width",1),s.append("defs").append("marker").attr("id",H2.ARROW+"_line_ending").attr("refX",a.line_height).attr("refY",.5*a.line_height).attr("markerWidth",a.line_height).attr("markerHeight",a.line_height).attr("orient","auto").append("path").attr("d",`M0,0\n      L${a.line_height},${a.line_height/2}\n      M${a.line_height},${a.line_height/2}\n      L0,${a.line_height}`).attr("stroke-width",1)})(w,hl);const C=new Ki.T({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:hl.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let D=f.db.getRequirements(),V=f.db.getElements(),W=f.db.getRelationships();((s,a,d)=>{Object.keys(s).forEach(f=>{let p=s[f];f=vh(f),Me.info("Added new requirement: ",f);const y=d.append("g").attr("id",f),w=qT(y,"req-"+f);let C=yv(y,f+"_title",[`<<${p.type}>>`,`${p.name}`]);KT(y,f+"_body",[`Id: ${p.id}`,`Text: ${p.text}`,`Risk: ${p.risk}`,`Verification: ${p.verifyMethod}`],C.y);const D=w.node().getBBox();a.setNode(f,{width:D.width,height:D.height,shape:"rect",id:f})})})(D,C,w),((s,a,d)=>{Object.keys(s).forEach(f=>{let p=s[f];const y=vh(f),v=d.append("g").attr("id",y),w="element-"+y,C=qT(v,w);let D=yv(v,w+"_title",["<<Element>>",`${f}`]);KT(v,w+"_body",[`Type: ${p.type||"Not Specified"}`,`Doc Ref: ${p.docRef||"None"}`],D.y);const V=C.node().getBBox();a.setNode(y,{width:V.width,height:V.height,shape:"rect",id:y})})})(V,C,w),((s,a)=>{s.forEach(function(d){let f=vh(d.src),p=vh(d.dst);a.setEdge(f,p,{relationship:d})})})(W,C),(0,li.Zp)(C),function(s,a){a.nodes().forEach(function(d){void 0!==d&&void 0!==a.node(d)&&(s.select("#"+d),s.select("#"+d).attr("transform","translate("+(a.node(d).x-a.node(d).width/2)+","+(a.node(d).y-a.node(d).height/2)+" )"))})}(w,C),W.forEach(function(Pe){!function(s,a,d,f,p){const y=d.edge(vh(a.src),vh(a.dst)),v=(0,F.n8j)().x(function(C){return C.x}).y(function(C){return C.y}),w=s.insert("path","#"+f).attr("class","er relationshipLine").attr("d",v(y.points)).attr("fill","none");a.type==p.db.Relationships.CONTAINS?w.attr("marker-start","url("+tr.getUrl(hl.arrowMarkerAbsolute)+"#"+a.type+"_line_ending)"):(w.attr("stroke-dasharray","10,7"),w.attr("marker-end","url("+tr.getUrl(hl.arrowMarkerAbsolute)+"#"+i__ReqMarkers.ARROW+"_line_ending)")),((s,a,d,f)=>{const p=a.node().getTotalLength(),y=a.node().getPointAtLength(.5*p),v="rel"+XT;XT++;const C=s.append("text").attr("class","req relationshipLabel").attr("id",v).attr("x",y.x).attr("y",y.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(f).node().getBBox();s.insert("rect","#"+v).attr("class","req reqLabelBox").attr("x",y.x-C.width/2).attr("y",y.y-C.height/2).attr("width",C.width).attr("height",C.height).attr("fill","white").attr("fill-opacity","85%")})(s,w,0,`<<${a.type}>>`)}(w,Pe,C,a,f)});const j=hl.rect_padding,X=w.node().getBBox(),Ee=X.width+2*j,Ie=X.height+2*j;tu(w,Ie,Ee,hl.useMaxWidth),w.attr("viewBox",`${X.x-j} ${X.y-j} ${Ee} ${Ie}`)}};var vv=function(){var s=function(Tn,Wt,Ht,lt){for(Ht=Ht||{},lt=Tn.length;lt--;Ht[Tn[lt]]=Wt);return Ht},a=[1,2],d=[1,3],f=[1,5],p=[1,7],y=[2,5],v=[1,15],w=[1,17],C=[1,19],D=[1,21],V=[1,22],W=[1,23],j=[1,29],X=[1,30],Ee=[1,31],Ie=[1,32],Pe=[1,33],Ve=[1,34],Ae=[1,35],Qe=[1,36],vt=[1,37],Ft=[1,38],Qt=[1,39],st=[1,40],rt=[1,42],Ue=[1,43],qe=[1,45],$e=[1,46],pe=[1,47],Ke=[1,48],J=[1,49],dt=[1,50],ae=[1,53],Ct=[1,4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],Jn=[4,5,21,54,56],Xt=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],Jt=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,53,54,56,57,62,63,64,65,73,83],L=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,52,54,56,57,62,63,64,65,73,83],P=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,54,56,57,62,63,64,65,73,83],it=[71,72,73],Hn=[1,125],Dn=[1,4,5,7,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],Pt={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,box_section:11,box_line:12,participant_statement:13,openDirective:14,typeDirective:15,closeDirective:16,":":17,argDirective:18,box:19,restOfLine:20,end:21,signal:22,autonumber:23,NUM:24,off:25,activate:26,actor:27,deactivate:28,note_statement:29,links_statement:30,link_statement:31,properties_statement:32,details_statement:33,title:34,legacy_title:35,acc_title:36,acc_title_value:37,acc_descr:38,acc_descr_value:39,acc_descr_multiline_value:40,loop:41,rect:42,opt:43,alt:44,else_sections:45,par:46,par_sections:47,critical:48,option_sections:49,break:50,option:51,and:52,else:53,participant:54,AS:55,participant_actor:56,note:57,placement:58,text2:59,over:60,actor_pair:61,links:62,link:63,properties:64,details:65,spaceList:66,",":67,left_of:68,right_of:69,signaltype:70,"+":71,"-":72,ACTOR:73,SOLID_OPEN_ARROW:74,DOTTED_OPEN_ARROW:75,SOLID_ARROW:76,DOTTED_ARROW:77,SOLID_CROSS:78,DOTTED_CROSS:79,SOLID_POINT:80,DOTTED_POINT:81,TXT:82,open_directive:83,type_directive:84,arg_directive:85,close_directive:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",17:":",19:"box",20:"restOfLine",21:"end",23:"autonumber",24:"NUM",25:"off",26:"activate",28:"deactivate",34:"title",35:"legacy_title",36:"acc_title",37:"acc_title_value",38:"acc_descr",39:"acc_descr_value",40:"acc_descr_multiline_value",41:"loop",42:"rect",43:"opt",44:"alt",46:"par",48:"critical",50:"break",51:"option",52:"and",53:"else",54:"participant",55:"AS",56:"participant_actor",57:"note",60:"over",62:"links",63:"link",64:"properties",65:"details",67:",",68:"left_of",69:"right_of",71:"+",72:"-",73:"ACTOR",74:"SOLID_OPEN_ARROW",75:"DOTTED_OPEN_ARROW",76:"SOLID_ARROW",77:"DOTTED_ARROW",78:"SOLID_CROSS",79:"DOTTED_CROSS",80:"SOLID_POINT",81:"DOTTED_POINT",82:"TXT",83:"open_directive",84:"type_directive",85:"arg_directive",86:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[11,0],[11,2],[12,2],[12,1],[12,1],[6,4],[6,6],[10,1],[10,4],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[49,1],[49,4],[47,1],[47,4],[45,1],[45,4],[13,5],[13,3],[13,5],[13,3],[29,4],[29,4],[30,3],[31,3],[32,3],[33,3],[66,2],[66,1],[61,3],[61,1],[58,1],[58,1],[22,5],[22,5],[22,4],[27,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[59,1],[14,1],[15,1],[18,1],[16,1]],performAction:function(Wt,Ht,lt,Ye,ct,Oe,bn){var xe=Oe.length-1;switch(ct){case 4:return Ye.apply(Oe[xe]),Oe[xe];case 5:case 10:case 9:case 14:this.$=[];break;case 6:case 11:Oe[xe-1].push(Oe[xe]),this.$=Oe[xe-1];break;case 7:case 8:case 12:case 13:case 63:this.$=Oe[xe];break;case 18:Oe[xe-1].unshift({type:"boxStart",boxData:Ye.parseBoxData(Oe[xe-2])}),Oe[xe-1].push({type:"boxEnd",boxText:Oe[xe-2]}),this.$=Oe[xe-1];break;case 20:this.$={type:"sequenceIndex",sequenceIndex:Number(Oe[xe-2]),sequenceIndexStep:Number(Oe[xe-1]),sequenceVisible:!0,signalType:Ye.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceIndex:Number(Oe[xe-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:Ye.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:Ye.LINETYPE.AUTONUMBER};break;case 23:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:Ye.LINETYPE.AUTONUMBER};break;case 24:this.$={type:"activeStart",signalType:Ye.LINETYPE.ACTIVE_START,actor:Oe[xe-1]};break;case 25:this.$={type:"activeEnd",signalType:Ye.LINETYPE.ACTIVE_END,actor:Oe[xe-1]};break;case 31:Ye.setDiagramTitle(Oe[xe].substring(6)),this.$=Oe[xe].substring(6);break;case 32:Ye.setDiagramTitle(Oe[xe].substring(7)),this.$=Oe[xe].substring(7);break;case 33:this.$=Oe[xe].trim(),Ye.setAccTitle(this.$);break;case 34:case 35:this.$=Oe[xe].trim(),Ye.setAccDescription(this.$);break;case 36:Oe[xe-1].unshift({type:"loopStart",loopText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.LOOP_START}),Oe[xe-1].push({type:"loopEnd",loopText:Oe[xe-2],signalType:Ye.LINETYPE.LOOP_END}),this.$=Oe[xe-1];break;case 37:Oe[xe-1].unshift({type:"rectStart",color:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.RECT_START}),Oe[xe-1].push({type:"rectEnd",color:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.RECT_END}),this.$=Oe[xe-1];break;case 38:Oe[xe-1].unshift({type:"optStart",optText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.OPT_START}),Oe[xe-1].push({type:"optEnd",optText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.OPT_END}),this.$=Oe[xe-1];break;case 39:Oe[xe-1].unshift({type:"altStart",altText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.ALT_START}),Oe[xe-1].push({type:"altEnd",signalType:Ye.LINETYPE.ALT_END}),this.$=Oe[xe-1];break;case 40:Oe[xe-1].unshift({type:"parStart",parText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.PAR_START}),Oe[xe-1].push({type:"parEnd",signalType:Ye.LINETYPE.PAR_END}),this.$=Oe[xe-1];break;case 41:Oe[xe-1].unshift({type:"criticalStart",criticalText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.CRITICAL_START}),Oe[xe-1].push({type:"criticalEnd",signalType:Ye.LINETYPE.CRITICAL_END}),this.$=Oe[xe-1];break;case 42:Oe[xe-1].unshift({type:"breakStart",breakText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.BREAK_START}),Oe[xe-1].push({type:"breakEnd",optText:Ye.parseMessage(Oe[xe-2]),signalType:Ye.LINETYPE.BREAK_END}),this.$=Oe[xe-1];break;case 45:this.$=Oe[xe-3].concat([{type:"option",optionText:Ye.parseMessage(Oe[xe-1]),signalType:Ye.LINETYPE.CRITICAL_OPTION},Oe[xe]]);break;case 47:this.$=Oe[xe-3].concat([{type:"and",parText:Ye.parseMessage(Oe[xe-1]),signalType:Ye.LINETYPE.PAR_AND},Oe[xe]]);break;case 49:this.$=Oe[xe-3].concat([{type:"else",altText:Ye.parseMessage(Oe[xe-1]),signalType:Ye.LINETYPE.ALT_ELSE},Oe[xe]]);break;case 50:Oe[xe-3].type="addParticipant",Oe[xe-3].description=Ye.parseMessage(Oe[xe-1]),this.$=Oe[xe-3];break;case 51:Oe[xe-1].type="addParticipant",this.$=Oe[xe-1];break;case 52:Oe[xe-3].type="addActor",Oe[xe-3].description=Ye.parseMessage(Oe[xe-1]),this.$=Oe[xe-3];break;case 53:Oe[xe-1].type="addActor",this.$=Oe[xe-1];break;case 54:this.$=[Oe[xe-1],{type:"addNote",placement:Oe[xe-2],actor:Oe[xe-1].actor,text:Oe[xe]}];break;case 55:Oe[xe-2]=[].concat(Oe[xe-1],Oe[xe-1]).slice(0,2),Oe[xe-2][0]=Oe[xe-2][0].actor,Oe[xe-2][1]=Oe[xe-2][1].actor,this.$=[Oe[xe-1],{type:"addNote",placement:Ye.PLACEMENT.OVER,actor:Oe[xe-2].slice(0,2),text:Oe[xe]}];break;case 56:this.$=[Oe[xe-1],{type:"addLinks",actor:Oe[xe-1].actor,text:Oe[xe]}];break;case 57:this.$=[Oe[xe-1],{type:"addALink",actor:Oe[xe-1].actor,text:Oe[xe]}];break;case 58:this.$=[Oe[xe-1],{type:"addProperties",actor:Oe[xe-1].actor,text:Oe[xe]}];break;case 59:this.$=[Oe[xe-1],{type:"addDetails",actor:Oe[xe-1].actor,text:Oe[xe]}];break;case 62:this.$=[Oe[xe-2],Oe[xe]];break;case 64:this.$=Ye.PLACEMENT.LEFTOF;break;case 65:this.$=Ye.PLACEMENT.RIGHTOF;break;case 66:this.$=[Oe[xe-4],Oe[xe-1],{type:"addMessage",from:Oe[xe-4].actor,to:Oe[xe-1].actor,signalType:Oe[xe-3],msg:Oe[xe]},{type:"activeStart",signalType:Ye.LINETYPE.ACTIVE_START,actor:Oe[xe-1]}];break;case 67:this.$=[Oe[xe-4],Oe[xe-1],{type:"addMessage",from:Oe[xe-4].actor,to:Oe[xe-1].actor,signalType:Oe[xe-3],msg:Oe[xe]},{type:"activeEnd",signalType:Ye.LINETYPE.ACTIVE_END,actor:Oe[xe-4]}];break;case 68:this.$=[Oe[xe-3],Oe[xe-1],{type:"addMessage",from:Oe[xe-3].actor,to:Oe[xe-1].actor,signalType:Oe[xe-2],msg:Oe[xe]}];break;case 69:this.$={type:"addParticipant",actor:Oe[xe]};break;case 70:this.$=Ye.LINETYPE.SOLID_OPEN;break;case 71:this.$=Ye.LINETYPE.DOTTED_OPEN;break;case 72:this.$=Ye.LINETYPE.SOLID;break;case 73:this.$=Ye.LINETYPE.DOTTED;break;case 74:this.$=Ye.LINETYPE.SOLID_CROSS;break;case 75:this.$=Ye.LINETYPE.DOTTED_CROSS;break;case 76:this.$=Ye.LINETYPE.SOLID_POINT;break;case 77:this.$=Ye.LINETYPE.DOTTED_POINT;break;case 78:this.$=Ye.parseMessage(Oe[xe].trim().substring(1));break;case 79:Ye.parseDirective("%%{","open_directive");break;case 80:Ye.parseDirective(Oe[xe],"type_directive");break;case 81:Oe[xe]=Oe[xe].trim().replace(/'/g,'"'),Ye.parseDirective(Oe[xe],"arg_directive");break;case 82:Ye.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:a,5:d,6:4,7:f,14:6,83:p},{1:[3]},{3:8,4:a,5:d,6:4,7:f,14:6,83:p},{3:9,4:a,5:d,6:4,7:f,14:6,83:p},{3:10,4:a,5:d,6:4,7:f,14:6,83:p},s([1,4,5,19,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],y,{8:11}),{15:12,84:[1,13]},{84:[2,79]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{16:51,17:[1,52],86:ae},s([17,86],[2,80]),s(Ct,[2,6]),{6:41,10:54,13:18,14:6,19:C,22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},s(Ct,[2,8]),s(Ct,[2,9]),s(Ct,[2,17]),{20:[1,55]},{5:[1,56]},{5:[1,59],24:[1,57],25:[1,58]},{27:60,73:dt},{27:61,73:dt},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},{5:[1,66]},s(Ct,[2,31]),s(Ct,[2,32]),{37:[1,67]},{39:[1,68]},s(Ct,[2,35]),{20:[1,69]},{20:[1,70]},{20:[1,71]},{20:[1,72]},{20:[1,73]},{20:[1,74]},{20:[1,75]},s(Ct,[2,43]),{27:76,73:dt},{27:77,73:dt},{70:78,74:[1,79],75:[1,80],76:[1,81],77:[1,82],78:[1,83],79:[1,84],80:[1,85],81:[1,86]},{58:87,60:[1,88],68:[1,89],69:[1,90]},{27:91,73:dt},{27:92,73:dt},{27:93,73:dt},{27:94,73:dt},s([5,55,67,74,75,76,77,78,79,80,81,82],[2,69]),{5:[1,95]},{18:96,85:[1,97]},{5:[2,82]},s(Ct,[2,7]),s(Jn,[2,10],{11:98}),s(Ct,[2,19]),{5:[1,100],24:[1,99]},{5:[1,101]},s(Ct,[2,23]),{5:[1,102]},{5:[1,103]},s(Ct,[2,26]),s(Ct,[2,27]),s(Ct,[2,28]),s(Ct,[2,29]),s(Ct,[2,30]),s(Ct,[2,33]),s(Ct,[2,34]),s(Xt,y,{8:104}),s(Xt,y,{8:105}),s(Xt,y,{8:106}),s(Jt,y,{45:107,8:108}),s(L,y,{47:109,8:110}),s(P,y,{49:111,8:112}),s(Xt,y,{8:113}),{5:[1,115],55:[1,114]},{5:[1,117],55:[1,116]},{27:120,71:[1,118],72:[1,119],73:dt},s(it,[2,70]),s(it,[2,71]),s(it,[2,72]),s(it,[2,73]),s(it,[2,74]),s(it,[2,75]),s(it,[2,76]),s(it,[2,77]),{27:121,73:dt},{27:123,61:122,73:dt},{73:[2,64]},{73:[2,65]},{59:124,82:Hn},{59:126,82:Hn},{59:127,82:Hn},{59:128,82:Hn},s(Dn,[2,15]),{16:129,86:ae},{86:[2,81]},{4:[1,132],5:[1,134],12:131,13:133,21:[1,130],54:rt,56:Ue},{5:[1,135]},s(Ct,[2,21]),s(Ct,[2,22]),s(Ct,[2,24]),s(Ct,[2,25]),{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[1,136],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[1,137],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[1,138],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{21:[1,139]},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[2,48],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,53:[1,140],54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{21:[1,141]},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[2,46],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,52:[1,142],54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{21:[1,143]},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[2,44],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,51:[1,144],54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{4:v,5:w,6:41,9:14,10:16,13:18,14:6,19:C,21:[1,145],22:20,23:D,26:V,27:44,28:W,29:24,30:25,31:26,32:27,33:28,34:j,35:X,36:Ee,38:Ie,40:Pe,41:Ve,42:Ae,43:Qe,44:vt,46:Ft,48:Qt,50:st,54:rt,56:Ue,57:qe,62:$e,63:pe,64:Ke,65:J,73:dt,83:p},{20:[1,146]},s(Ct,[2,51]),{20:[1,147]},s(Ct,[2,53]),{27:148,73:dt},{27:149,73:dt},{59:150,82:Hn},{59:151,82:Hn},{59:152,82:Hn},{67:[1,153],82:[2,63]},{5:[2,56]},{5:[2,78]},{5:[2,57]},{5:[2,58]},{5:[2,59]},{5:[1,154]},s(Ct,[2,18]),s(Jn,[2,11]),{13:155,54:rt,56:Ue},s(Jn,[2,13]),s(Jn,[2,14]),s(Ct,[2,20]),s(Ct,[2,36]),s(Ct,[2,37]),s(Ct,[2,38]),s(Ct,[2,39]),{20:[1,156]},s(Ct,[2,40]),{20:[1,157]},s(Ct,[2,41]),{20:[1,158]},s(Ct,[2,42]),{5:[1,159]},{5:[1,160]},{59:161,82:Hn},{59:162,82:Hn},{5:[2,68]},{5:[2,54]},{5:[2,55]},{27:163,73:dt},s(Dn,[2,16]),s(Jn,[2,12]),s(Jt,y,{8:108,45:164}),s(L,y,{8:110,47:165}),s(P,y,{8:112,49:166}),s(Ct,[2,50]),s(Ct,[2,52]),{5:[2,66]},{5:[2,67]},{82:[2,62]},{21:[2,49]},{21:[2,47]},{21:[2,45]}],defaultActions:{7:[2,79],8:[2,1],9:[2,2],10:[2,3],53:[2,82],89:[2,64],90:[2,65],97:[2,81],124:[2,56],125:[2,78],126:[2,57],127:[2,58],128:[2,59],150:[2,68],151:[2,54],152:[2,55],161:[2,66],162:[2,67],163:[2,62],164:[2,49],165:[2,47],166:[2,45]},parseError:function(Wt,Ht){if(!Ht.recoverable){var lt=new Error(Wt);throw lt.hash=Ht,lt}this.trace(Wt)},parse:function(Wt){var lt=[0],Ye=[],ct=[null],Oe=[],bn=this.table,xe="",gr=0,Ut=0,gn=Oe.slice.call(arguments,1),Sn=Object.create(this.lexer),Rn={yy:{}};for(var En in this.yy)Object.prototype.hasOwnProperty.call(this.yy,En)&&(Rn.yy[En]=this.yy[En]);Sn.setInput(Wt,Rn.yy),Rn.yy.lexer=Sn,Rn.yy.parser=this,typeof Sn.yylloc>"u"&&(Sn.yylloc={});var Bn=Sn.yylloc;Oe.push(Bn);var wn,Sr=Sn.options&&Sn.options.ranges;this.parseError="function"==typeof Rn.yy.parseError?Rn.yy.parseError:Object.getPrototypeOf(this).parseError;for(var wr,yr,es,Oa,Ar,Ei,Pn,Vs={};;){if(this.defaultActions[yr=lt[lt.length-1]]?es=this.defaultActions[yr]:((null===wr||typeof wr>"u")&&(wn=void 0,"number"!=typeof(wn=Ye.pop()||Sn.lex()||1)&&(wn instanceof Array&&(wn=(Ye=wn).pop()),wn=this.symbols_[wn]||wn),wr=wn),es=bn[yr]&&bn[yr][wr]),typeof es>"u"||!es.length||!es[0]){var mi;for(Ar in Pn=[],bn[yr])this.terminals_[Ar]&&Ar>2&&Pn.push("'"+this.terminals_[Ar]+"'");mi=Sn.showPosition?"Parse error on line "+(gr+1)+":\n"+Sn.showPosition()+"\nExpecting "+Pn.join(", ")+", got '"+(this.terminals_[wr]||wr)+"'":"Parse error on line "+(gr+1)+": Unexpected "+(1==wr?"end of input":"'"+(this.terminals_[wr]||wr)+"'"),this.parseError(mi,{text:Sn.match,token:this.terminals_[wr]||wr,line:Sn.yylineno,loc:Bn,expected:Pn})}if(es[0]instanceof Array&&es.length>1)throw new Error("Parse Error: multiple actions possible at state: "+yr+", token: "+wr);switch(es[0]){case 1:lt.push(wr),ct.push(Sn.yytext),Oe.push(Sn.yylloc),lt.push(es[1]),wr=null,Ut=Sn.yyleng,xe=Sn.yytext,gr=Sn.yylineno,Bn=Sn.yylloc;break;case 2:if(Vs.$=ct[ct.length-(Ei=this.productions_[es[1]][1])],Vs._$={first_line:Oe[Oe.length-(Ei||1)].first_line,last_line:Oe[Oe.length-1].last_line,first_column:Oe[Oe.length-(Ei||1)].first_column,last_column:Oe[Oe.length-1].last_column},Sr&&(Vs._$.range=[Oe[Oe.length-(Ei||1)].range[0],Oe[Oe.length-1].range[1]]),typeof(Oa=this.performAction.apply(Vs,[xe,Ut,gr,Rn.yy,es[1],ct,Oe].concat(gn)))<"u")return Oa;Ei&&(lt=lt.slice(0,-1*Ei*2),ct=ct.slice(0,-1*Ei),Oe=Oe.slice(0,-1*Ei)),lt.push(this.productions_[es[1]][0]),ct.push(Vs.$),Oe.push(Vs._$),lt.push(bn[lt[lt.length-2]][lt[lt.length-1]]);break;case 3:return!0}}return!0}};function xt(){this.yy={}}return Pt.lexer=function(){return{EOF:1,parseError:function(Ht,lt){if(!this.yy.parser)throw new Error(Ht);this.yy.parser.parseError(Ht,lt)},setInput:function(Wt,Ht){return this.yy=Ht||this.yy||{},this._input=Wt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Wt=this._input[0];return this.yytext+=Wt,this.yyleng++,this.offset++,this.match+=Wt,this.matched+=Wt,Wt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Wt},unput:function(Wt){var Ht=Wt.length,lt=Wt.split(/(?:\r\n?|\n)/g);this._input=Wt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ht),this.offset-=Ht;var Ye=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lt.length-1&&(this.yylineno-=lt.length-1);var ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lt?(lt.length===Ye.length?this.yylloc.first_column:0)+Ye[Ye.length-lt.length].length-lt[0].length:this.yylloc.first_column-Ht},this.options.ranges&&(this.yylloc.range=[ct[0],ct[0]+this.yyleng-Ht]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Wt){this.unput(this.match.slice(Wt))},pastInput:function(){var Wt=this.matched.substr(0,this.matched.length-this.match.length);return(Wt.length>20?"...":"")+Wt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Wt=this.match;return Wt.length<20&&(Wt+=this._input.substr(0,20-Wt.length)),(Wt.substr(0,20)+(Wt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Wt=this.pastInput(),Ht=new Array(Wt.length+1).join("-");return Wt+this.upcomingInput()+"\n"+Ht+"^"},test_match:function(Wt,Ht){var lt,Ye,ct;if(this.options.backtrack_lexer&&(ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ct.yylloc.range=this.yylloc.range.slice(0))),(Ye=Wt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ye.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ye?Ye[Ye.length-1].length-Ye[Ye.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Wt[0].length},this.yytext+=Wt[0],this.match+=Wt[0],this.matches=Wt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Wt[0].length),this.matched+=Wt[0],lt=this.performAction.call(this,this.yy,this,Ht,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lt)return lt;if(this._backtrack){for(var Oe in ct)this[Oe]=ct[Oe];return!1}return!1},next:function(){if(this.done)return this.EOF;var Wt,Ht,lt,Ye;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ct=this._currentRules(),Oe=0;Oe<ct.length;Oe++)if((lt=this._input.match(this.rules[ct[Oe]]))&&(!Ht||lt[0].length>Ht[0].length)){if(Ht=lt,Ye=Oe,this.options.backtrack_lexer){if(!1!==(Wt=this.test_match(lt,ct[Oe])))return Wt;if(this._backtrack){Ht=!1;continue}return!1}if(!this.options.flex)break}return Ht?!1!==(Wt=this.test_match(Ht,ct[Ye]))&&Wt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ht){this.conditionStack.push(Ht)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ht){return(Ht=this.conditionStack.length-1-Math.abs(Ht||0))>=0?this.conditionStack[Ht]:"INITIAL"},pushState:function(Ht){this.begin(Ht)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Ht,lt,Ye,ct){switch(Ye){case 0:return this.begin("open_directive"),83;case 1:return this.begin("type_directive"),84;case 2:return this.popState(),this.begin("arg_directive"),17;case 3:return this.popState(),this.popState(),86;case 4:return 85;case 5:case 53:case 66:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 24;case 12:return this.begin("LINE"),19;case 13:return this.begin("ID"),54;case 14:return this.begin("ID"),56;case 15:return lt.yytext=lt.yytext.trim(),this.begin("ALIAS"),73;case 16:return this.popState(),this.popState(),this.begin("LINE"),55;case 17:return this.popState(),this.popState(),5;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),44;case 22:return this.begin("LINE"),53;case 23:return this.begin("LINE"),46;case 24:return this.begin("LINE"),52;case 25:return this.begin("LINE"),48;case 26:return this.begin("LINE"),51;case 27:return this.begin("LINE"),50;case 28:return this.popState(),20;case 29:return 21;case 30:return 68;case 31:return 69;case 32:return 62;case 33:return 63;case 34:return 64;case 35:return 65;case 36:return 60;case 37:return 57;case 38:return this.begin("ID"),26;case 39:return this.begin("ID"),28;case 40:return 34;case 41:return 35;case 42:return this.begin("acc_title"),36;case 43:return this.popState(),"acc_title_value";case 44:return this.begin("acc_descr"),38;case 45:return this.popState(),"acc_descr_value";case 46:this.begin("acc_descr_multiline");break;case 47:this.popState();break;case 48:return"acc_descr_multiline_value";case 49:return 7;case 50:return 23;case 51:return 25;case 52:return 67;case 54:return lt.yytext=lt.yytext.trim(),73;case 55:return 76;case 56:return 77;case 57:return 74;case 58:return 75;case 59:return 78;case 60:return 79;case 61:return 80;case 62:return 81;case 63:return 82;case 64:return 71;case 65:return 72;case 67:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[47,48],inclusive:!1},acc_descr:{rules:[45],inclusive:!1},acc_title:{rules:[43],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,15],inclusive:!1},ALIAS:{rules:[7,8,16,17],inclusive:!1},LINE:{rules:[7,8,28],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}}}(),xt.prototype=Pt,Pt.Parser=xt,new xt}();vv.parser=vv;const q3=vv,JT=s=>null!==s.match(/^\s*sequenceDiagram/);let bv,W2,gp,fg={},lf=[],td=[],Ou=!1;const wv=function(s,a,d,f){let p=gp;const y=fg[s];if(y){if(gp&&y.box&&gp!==y.box)throw new Error("A same participant should only be defined in one Box: "+y.name+" can't be in '"+y.box.name+"' and in '"+gp.name+"' at the same time.");if(p=y.box?y.box:gp,y.box=p,y&&a===y.name&&null==d)return}(null==d||null==d.text)&&(d={text:a,wrap:null,type:f}),(null==f||null==d.text)&&(d={text:a,wrap:null,type:f}),fg[s]={box:p,name:a,description:d.text,wrap:void 0===d.wrap&&C0()||!!d.wrap,prevActor:bv,links:{},properties:{},actorCnt:null,rectData:null,type:f||"participant"},bv&&fg[bv]&&(fg[bv].nextActor=s),gp&&gp.actorKeys.push(s),bv=s},fl=function(s,a,d={text:void 0,wrap:void 0},f){if(f===s_.ACTIVE_END&&(s=>{let a,d=0;for(a=0;a<td.length;a++)td[a].type===s_.ACTIVE_START&&td[a].from.actor===s&&d++,td[a].type===s_.ACTIVE_END&&td[a].from.actor===s&&d--;return d})(s.actor)<1){let y=new Error("Trying to inactivate an inactive participant ("+s.actor+")");throw y.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},y}return td.push({from:s,to:a,message:d.text,wrap:void 0===d.wrap&&C0()||!!d.wrap,type:f}),!0},r_=function(s){return fg[s]},C0=()=>void 0!==W2?W2:ut().sequence.wrap,s_={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},K2=function(s,a,d){void 0===d.wrap&&C0();const f=[].concat(s,s);td.push({from:f[0],to:f[1],message:d.text,wrap:void 0===d.wrap&&C0()||!!d.wrap,type:s_.NOTE,placement:a})},Nm=function(s,a){const d=r_(s);try{let f=An(a.text,ut());f=f.replace(/&amp;/g,"&"),f=f.replace(/&equals;/g,"="),mp(d,JSON.parse(f))}catch(f){Me.error("error while parsing actor link text",f)}};function mp(s,a){if(null==s.links)s.links=a;else for(let d in a)s.links[d]=a[d]}const o_=function(s,a){const d=r_(s);try{let f=An(a.text,ut());Q2(d,JSON.parse(f))}catch(f){Me.error("error while parsing actor properties text",f)}};function Q2(s,a){if(null==s.properties)s.properties=a;else for(let d in a)s.properties[d]=a[d]}const ox=function(s,a){const d=r_(s),f=document.getElementById(a.text);try{const y=JSON.parse(f.innerHTML);y.properties&&Q2(d,y.properties),y.links&&mp(d,y.links)}catch(p){Me.error("error while parsing actor details text",p)}},Cv=function(s){if(Array.isArray(s))s.forEach(function(a){Cv(a)});else switch(s.type){case"sequenceIndex":td.push({from:void 0,to:void 0,message:{start:s.sequenceIndex,step:s.sequenceIndexStep,visible:s.sequenceVisible},wrap:!1,type:s.signalType});break;case"addParticipant":wv(s.actor,s.actor,s.description,"participant");break;case"addActor":wv(s.actor,s.actor,s.description,"actor");break;case"activeStart":case"activeEnd":fl(s.actor,void 0,void 0,s.signalType);break;case"addNote":K2(s.actor,s.placement,s.text);break;case"addLinks":Nm(s.actor,s.text);break;case"addALink":!function(s,a){const d=r_(s);try{const v={};let w=An(a.text,ut());var f=w.indexOf("@");w=w.replace(/&amp;/g,"&"),w=w.replace(/&equals;/g,"=");var p=w.slice(0,f-1).trim(),y=w.slice(f+1).trim();v[p]=y,mp(d,v)}catch(v){Me.error("error while parsing actor link text",v)}}(s.actor,s.text);break;case"addProperties":o_(s.actor,s.text);break;case"addDetails":ox(s.actor,s.text);break;case"addMessage":fl(s.from,s.to,s.msg,s.signalType);break;case"boxStart":!function(s){lf.push({name:s.text,wrap:void 0===s.wrap&&C0()||!!s.wrap,fill:s.color,actorKeys:[]}),gp=lf.slice(-1)[0]}(s.boxData);break;case"boxEnd":!function a_(){gp=void 0}();break;case"loopStart":fl(void 0,void 0,s.loopText,s.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":fl(void 0,void 0,void 0,s.signalType);break;case"rectStart":fl(void 0,void 0,s.color,s.signalType);break;case"optStart":fl(void 0,void 0,s.optText,s.signalType);break;case"altStart":case"else":fl(void 0,void 0,s.altText,s.signalType);break;case"setAccTitle":Je(s.text);break;case"parStart":case"and":fl(void 0,void 0,s.parText,s.signalType);break;case"criticalStart":fl(void 0,void 0,s.criticalText,s.signalType);break;case"option":fl(void 0,void 0,s.optionText,s.signalType);break;case"breakStart":fl(void 0,void 0,s.breakText,s.signalType)}},J2={addActor:wv,addMessage:function(s,a,d,f){td.push({from:s,to:a,message:d.text,wrap:void 0===d.wrap&&C0()||!!d.wrap,answer:f})},addSignal:fl,addLinks:Nm,addDetails:ox,addProperties:o_,autoWrap:C0,setWrap:function(s){W2=s},enableSequenceNumbers:function(){Ou=!0},disableSequenceNumbers:function(){Ou=!1},showSequenceNumbers:()=>Ou,getMessages:function(){return td},getActors:function(){return fg},getActor:r_,getActorKeys:function(){return Object.keys(fg)},getActorProperty:function(s,a){if(void 0!==s&&void 0!==s.properties)return s.properties[a]},getAccTitle:pt,getBoxes:function(){return lf},getDiagramTitle:cn,setDiagramTitle:Nt,parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().sequence,clear:function(){fg={},lf=[],td=[],Ou=!1,je()},parseMessage:function(s){const a=s.trim(),d={text:a.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:null!==a.match(/^:?wrap:/)||null===a.match(/^:?nowrap:/)&&void 0};return Me.debug("parseMessage:",d),d},parseBoxData:function(s){const a=s.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let d=null!=a&&a[1]?a[1].trim():"transparent",f=null!=a&&a[2]?a[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",d)||(d="transparent",f=s.trim());else{const y=(new Option).style;y.color=d,y.color!==d&&(d="transparent",f=s.trim())}return{color:d,text:void 0!==f?An(f.replace(/^:?(?:no)?wrap:/,""),ut()):void 0,wrap:void 0!==f?null!==f.match(/^:?wrap:/)||null===f.match(/^:?nowrap:/)&&void 0:void 0}},LINETYPE:s_,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:K2,setAccTitle:Je,apply:Cv,setAccDescription:et,getAccDescription:Mt,hasAtLeastOneBox:function(){return lf.length>0},hasAtLeastOneBoxWithTitle:function(){return lf.some(s=>s.name)}};let uf=[];const tA=()=>{uf.forEach(s=>{s()}),uf=[]},x0=function(s,a){const d=s.append("rect");return d.attr("x",a.x),d.attr("y",a.y),d.attr("fill",a.fill),d.attr("stroke",a.stroke),d.attr("width",a.width),d.attr("height",a.height),d.attr("rx",a.rx),d.attr("ry",a.ry),void 0!==a.class&&d.attr("class",a.class),d},ew=(s,a)=>{(s=>{uf.push(s)})(()=>{const d=document.querySelectorAll(s);0!==d.length&&(d[0].addEventListener("mouseover",function(){iA("actor"+a+"_popup")}),d[0].addEventListener("mouseout",function(){rA("actor"+a+"_popup")}))})},lx=function(s,a,d,f){const p=s.append("image");p.attr("x",a),p.attr("y",d);var y=(0,A.J)(f);p.attr("xlink:href",y)},c_=function(s,a,d,f){const p=s.append("use");p.attr("x",a),p.attr("y",d);var y=(0,A.J)(f);p.attr("xlink:href","#"+y)},iA=function(s){var a=document.getElementById(s);null!=a&&(a.style.display="block")},rA=function(s){var a=document.getElementById(s);null!=a&&(a.style.display="none")},Om=function(s,a){let d=0,f=0;const p=a.text.split(tr.lineBreakRegex),[y,v]=Mr(a.fontSize);let w=[],C=0,D=()=>a.y;if(void 0!==a.valign&&void 0!==a.textMargin&&a.textMargin>0)switch(a.valign){case"top":case"start":D=()=>Math.round(a.y+a.textMargin);break;case"middle":case"center":D=()=>Math.round(a.y+(d+f+a.textMargin)/2);break;case"bottom":case"end":D=()=>Math.round(a.y+(d+f+2*a.textMargin)-a.textMargin)}if(void 0!==a.anchor&&void 0!==a.textMargin&&void 0!==a.width)switch(a.anchor){case"left":case"start":a.x=Math.round(a.x+a.textMargin),a.anchor="start",a.dominantBaseline="middle",a.alignmentBaseline="middle";break;case"middle":case"center":a.x=Math.round(a.x+a.width/2),a.anchor="middle",a.dominantBaseline="middle",a.alignmentBaseline="middle";break;case"right":case"end":a.x=Math.round(a.x+a.width-a.textMargin),a.anchor="end",a.dominantBaseline="middle",a.alignmentBaseline="middle"}for(let[V,W]of p.entries()){void 0!==a.textMargin&&0===a.textMargin&&void 0!==y&&(C=V*y);const j=s.append("text");if(j.attr("x",a.x),j.attr("y",D()),void 0!==a.anchor&&j.attr("text-anchor",a.anchor).attr("dominant-baseline",a.dominantBaseline).attr("alignment-baseline",a.alignmentBaseline),void 0!==a.fontFamily&&j.style("font-family",a.fontFamily),void 0!==v&&j.style("font-size",v),void 0!==a.fontWeight&&j.style("font-weight",a.fontWeight),void 0!==a.fill&&j.attr("fill",a.fill),void 0!==a.class&&j.attr("class",a.class),void 0!==a.dy?j.attr("dy",a.dy):0!==C&&j.attr("dy",C),a.tspan){const X=j.append("tspan");X.attr("x",a.x),void 0!==a.fill&&X.attr("fill",a.fill),X.text(W)}else j.text(W);void 0!==a.valign&&void 0!==a.textMargin&&a.textMargin>0&&(f+=(j._groups||j)[0][0].getBBox().height,d=f),w.push(j)}return w},cx=function(s,a){const f=s.append("polygon");return f.attr("points",function d(p,y,v,w,C){return p+","+y+" "+(p+v)+","+y+" "+(p+v)+","+(y+w-C)+" "+(p+v-1.2*C)+","+(y+w)+" "+p+","+(y+w)}(a.x,a.y,a.width,a.height,7)),f.attr("class","labelBox"),a.y=a.y+a.height/2,Om(s,a),f};let df=-1;const ux=(s,a)=>{s.selectAll&&s.selectAll(".actor-line").attr("class","200").attr("y2",a-55)},nw=function(s,a){x0(s,{x:a.startx,y:a.starty,width:a.stopx-a.startx,height:a.stopy-a.starty,fill:a.fill,stroke:a.stroke,class:"rect"}).lower()},rw=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},Rm=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},d_=function(){function s(p,y,v,w,C,D,V){f(y.append("text").attr("x",v+C/2).attr("y",w+D/2+5).style("text-anchor","middle").text(p),V)}function a(p,y,v,w,C,D,V,W){const{actorFontSize:j,actorFontFamily:X,actorFontWeight:Ee}=W,[Ie,Pe]=Mr(j),Ve=p.split(tr.lineBreakRegex);for(let Ae=0;Ae<Ve.length;Ae++){const Qe=Ae*Ie-Ie*(Ve.length-1)/2,vt=y.append("text").attr("x",v+C/2).attr("y",w).style("text-anchor","middle").style("font-size",Pe).style("font-weight",Ee).style("font-family",X);vt.append("tspan").attr("x",v+C/2).attr("dy",Qe).text(Ve[Ae]),vt.attr("y",w+D/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),f(vt,V)}}function d(p,y,v,w,C,D,V,W){const j=y.append("switch"),Ee=j.append("foreignObject").attr("x",v).attr("y",w).attr("width",C).attr("height",D).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ee.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(p),a(p,j,v,w,C,D,V,W),f(Ee,V)}function f(p,y){for(const v in y)y.hasOwnProperty(v)&&p.attr(v,y[v])}return function(p){return"fo"===p.textPlacement?d:"old"===p.textPlacement?s:a}}(),mx=function(){function s(p,y,v,w,C,D,V){f(y.append("text").attr("x",v).attr("y",w).style("text-anchor","start").text(p),V)}function a(p,y,v,w,C,D,V,W){const{actorFontSize:j,actorFontFamily:X,actorFontWeight:Ee}=W,Ie=p.split(tr.lineBreakRegex);for(let Pe=0;Pe<Ie.length;Pe++){const Ve=Pe*j-j*(Ie.length-1)/2,Ae=y.append("text").attr("x",v).attr("y",w).style("text-anchor","start").style("font-size",j).style("font-weight",Ee).style("font-family",X);Ae.append("tspan").attr("x",v).attr("dy",Ve).text(Ie[Pe]),Ae.attr("y",w+D/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),f(Ae,V)}}function d(p,y,v,w,C,D,V,W){const j=y.append("switch"),Ee=j.append("foreignObject").attr("x",v).attr("y",w).attr("width",C).attr("height",D).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ee.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(p),a(p,j,v,w,0,D,V,W),f(Ee,V)}function f(p,y){for(const v in y)y.hasOwnProperty(v)&&p.attr(v,y[v])}return function(p){return"fo"===p.textPlacement?d:"old"===p.textPlacement?s:a}}(),ma_drawRect=x0,ma_drawActor=function(s,a,d,f){switch(a.type){case"actor":return function(s,a,d,f){const p=a.x+a.width/2,y=a.y+80;f||(df++,s.append("line").attr("id","actor"+df).attr("x1",p).attr("y1",y).attr("x2",p).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const v=s.append("g");v.attr("class","actor-man");const w={x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0};w.x=a.x,w.y=a.y,w.fill="#eaeaea",w.width=a.width,w.height=a.height,w.class="actor",w.rx=3,w.ry=3,v.append("line").attr("id","actor-man-torso"+df).attr("x1",p).attr("y1",a.y+25).attr("x2",p).attr("y2",a.y+45),v.append("line").attr("id","actor-man-arms"+df).attr("x1",p-18).attr("y1",a.y+33).attr("x2",p+18).attr("y2",a.y+33),v.append("line").attr("x1",p-18).attr("y1",a.y+60).attr("x2",p).attr("y2",a.y+45),v.append("line").attr("x1",p).attr("y1",a.y+45).attr("x2",p+16).attr("y2",a.y+60);const C=v.append("circle");C.attr("cx",a.x+a.width/2),C.attr("cy",a.y+10),C.attr("r",15),C.attr("width",a.width),C.attr("height",a.height);const D=v.node().getBBox();return a.height=D.height,d_(d)(a.description,v,w.x,w.y+35,w.width,w.height,{class:"actor"},d),a.height}(s,a,d,f);case"participant":return function(s,a,d,f){const p=a.x+a.width/2,y=a.y+5,v=s.append("g");var w=v;f||(df++,w.append("line").attr("id","actor"+df).attr("x1",p).attr("y1",y).attr("x2",p).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),w=v.append("g"),a.actorCnt=df,null!=a.links&&(w.attr("id","root-"+df),ew("#root-"+df,df)));const C={x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0};var D="actor";null!=a.properties&&a.properties.class?D=a.properties.class:C.fill="#eaeaea",C.x=a.x,C.y=a.y,C.width=a.width,C.height=a.height,C.class=D,C.rx=3,C.ry=3;const V=x0(w,C);if(a.rectData=C,null!=a.properties&&a.properties.icon){const j=a.properties.icon.trim();"@"===j.charAt(0)?c_(w,C.x+C.width-20,C.y+10,j.substr(1)):lx(w,C.x+C.width-20,C.y+10,j)}d_(d)(a.description,w,C.x,C.y,C.width,C.height,{class:"actor"},d);let W=a.height;if(V.node){const j=V.node().getBBox();a.height=j.height,W=j.height}return W}(s,a,d,f)}},ma_drawBox=function(s,a,d){const p=s.append("g");nw(p,a),a.name&&d_(d)(a.name,p,a.x,a.y+(a.textMaxHeight||0)/2,a.width,0,{class:"text"},d),p.lower()},ma_drawPopup=function(s,a,d,f,p){if(null==a.links||0===Object.keys(a.links).length)return{height:0,width:0};const y=a.links,v=a.actorCnt,w=a.rectData;var C="none";p&&(C="block !important");const D=s.append("g");D.attr("id","actor"+v+"_popup"),D.attr("class","actorPopupMenu"),D.attr("display",C),ew("#actor"+v+"_popup",v);var V="";void 0!==w.class&&(V=" "+w.class);let W=w.width>d?w.width:d;const j=D.append("rect");if(j.attr("class","actorPopupMenuPanel"+V),j.attr("x",w.x),j.attr("y",w.height),j.attr("fill",w.fill),j.attr("stroke",w.stroke),j.attr("width",W),j.attr("height",w.height),j.attr("rx",w.rx),j.attr("ry",w.ry),null!=y){var X=20;for(let Pe in y){var Ee=D.append("a"),Ie=(0,A.J)(y[Pe]);Ee.attr("xlink:href",Ie),Ee.attr("target","_blank"),mx(f)(Pe,Ee,w.x+10,w.height+X,W,20,{class:"actor"},f),X+=30}}return j.attr("height",X),{height:w.height+X,width:W}},ma_anchorElement=function(s){return s.append("g")},ma_drawActivation=function(s,a,d,f,p){const y={x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0},v=a.anchored;y.x=a.startx,y.y=a.starty,y.class="activation"+p%3,y.width=a.stopx-a.startx,y.height=d-a.starty,x0(v,y)},ma_drawLoop=function(s,a,d,f){const{boxMargin:p,boxTextMargin:y,labelBoxHeight:v,labelBoxWidth:w,messageFontFamily:C,messageFontSize:D,messageFontWeight:V}=f,W=s.append("g"),j=function(Ie,Pe,Ve,Ae){return W.append("line").attr("x1",Ie).attr("y1",Pe).attr("x2",Ve).attr("y2",Ae).attr("class","loopLine")};j(a.startx,a.starty,a.stopx,a.starty),j(a.stopx,a.starty,a.stopx,a.stopy),j(a.startx,a.stopy,a.stopx,a.stopy),j(a.startx,a.starty,a.startx,a.stopy),void 0!==a.sections&&a.sections.forEach(function(Ie){j(a.startx,Ie.y,a.stopx,Ie.y).style("stroke-dasharray","3, 3")});let X={x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0};X.text=d,X.x=a.startx,X.y=a.starty,X.fontFamily=C,X.fontSize=D,X.fontWeight=V,X.anchor="middle",X.valign="middle",X.tspan=!1,X.width=w||50,X.height=v||20,X.textMargin=y,X.class="labelText",cx(W,X),X={x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0},X.text=a.title,X.x=a.startx+w/2+(a.stopx-a.startx)/2,X.y=a.starty+p+y,X.anchor="middle",X.valign="middle",X.textMargin=y,X.class="loopText",X.fontFamily=C,X.fontSize=D,X.fontWeight=V,X.wrap=!0;let Ee=Om(W,X);return void 0!==a.sectionTitles&&a.sectionTitles.forEach(function(Ie,Pe){if(Ie.message){X.text=Ie.message,X.x=a.startx+(a.stopx-a.startx)/2,X.y=a.sections[Pe].y+p+y,X.class="loopText",X.anchor="middle",X.valign="middle",X.tspan=!1,X.fontFamily=C,X.fontSize=D,X.fontWeight=V,X.wrap=a.wrap,Ee=Om(W,X);let Ve=Math.round(Ee.map(Ae=>(Ae._groups||Ae)[0][0].getBBox().height).reduce((Ae,Qe)=>Ae+Qe));a.sections[Pe].height+=Ve-(p+y)}}),a.height=Math.round(a.stopy-a.starty),W},ma_drawBackgroundRect=nw,ma_insertArrowHead=function(s){s.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},ma_insertArrowFilledHead=function(s){s.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},ma_insertSequenceNumber=function(s){s.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},ma_insertArrowCrossHead=function(s){s.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},ma_insertDatabaseIcon=function(s){s.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},ma_insertComputerIcon=function(s){s.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},ma_insertClockIcon=function(s){s.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},ma_getTextObj=rw,ma_getNoteRect=Rm;let Vt={};const Qn={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(s=>s.height||0))+(0===this.loops.length?0:this.loops.map(s=>s.height||0).reduce((s,a)=>s+a))+(0===this.messages.length?0:this.messages.map(s=>s.height||0).reduce((s,a)=>s+a))+(0===this.notes.length?0:this.notes.map(s=>s.height||0).reduce((s,a)=>s+a))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(s){this.boxes.push(s)},addActor:function(s){this.actors.push(s)},addLoop:function(s){this.loops.push(s)},addMessage:function(s){this.messages.push(s)},addNote:function(s){this.notes.push(s)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,lw(ut())},updateVal:function(s,a,d,f){s[a]=void 0===s[a]?d:f(d,s[a])},updateBounds:function(s,a,d,f){const p=this;let y=0;function v(w){return function(D){y++;const V=p.sequenceItems.length-y+1;p.updateVal(D,"starty",a-V*Vt.boxMargin,Math.min),p.updateVal(D,"stopy",f+V*Vt.boxMargin,Math.max),p.updateVal(Qn.data,"startx",s-V*Vt.boxMargin,Math.min),p.updateVal(Qn.data,"stopx",d+V*Vt.boxMargin,Math.max),"activation"!==w&&(p.updateVal(D,"startx",s-V*Vt.boxMargin,Math.min),p.updateVal(D,"stopx",d+V*Vt.boxMargin,Math.max),p.updateVal(Qn.data,"starty",a-V*Vt.boxMargin,Math.min),p.updateVal(Qn.data,"stopy",f+V*Vt.boxMargin,Math.max))}}this.sequenceItems.forEach(v()),this.activations.forEach(v("activation"))},insert:function(s,a,d,f){const p=Math.min(s,d),y=Math.max(s,d),v=Math.min(a,f),w=Math.max(a,f);this.updateVal(Qn.data,"startx",p,Math.min),this.updateVal(Qn.data,"starty",v,Math.min),this.updateVal(Qn.data,"stopx",y,Math.max),this.updateVal(Qn.data,"stopy",w,Math.max),this.updateBounds(p,v,y,w)},newActivation:function(s,a,d){const f=d[s.from.actor],p=Ev(s.from.actor).length||0,y=f.x+f.width/2+(p-1)*Vt.activationWidth/2;this.activations.push({startx:y,starty:this.verticalPos+2,stopx:y+Vt.activationWidth,stopy:void 0,actor:s.from.actor,anchored:ma_anchorElement(a)})},endActivation:function(s){const a=this.activations.map(function(d){return d.actor}).lastIndexOf(s.from.actor);return this.activations.splice(a,1)[0]},createLoop:function(s={message:void 0,wrap:!1,width:void 0},a){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:s.message,wrap:s.wrap,width:s.width,height:0,fill:a}},newLoop:function(s={message:void 0,wrap:!1,width:void 0},a){this.sequenceItems.push(this.createLoop(s,a))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(s){const a=this.sequenceItems.pop();a.sections=a.sections||[],a.sectionTitles=a.sectionTitles||[],a.sections.push({y:Qn.getVerticalPos(),height:0}),a.sectionTitles.push(s),this.sequenceItems.push(a)},bumpVerticalPos:function(s){this.verticalPos=this.verticalPos+s,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},E0=s=>({fontFamily:s.messageFontFamily,fontSize:s.messageFontSize,fontWeight:s.messageFontWeight}),Pm=s=>({fontFamily:s.noteFontFamily,fontSize:s.noteFontSize,fontWeight:s.noteFontWeight}),Tv=s=>({fontFamily:s.actorFontFamily,fontSize:s.actorFontSize,fontWeight:s.actorFontWeight}),xv=function(s,a,d,f,p,y,v){if(!0===p.hideUnusedParticipants){const W=new Set;y.forEach(j=>{W.add(j.from),W.add(j.to)}),d=d.filter(j=>W.has(j))}let V,w=0,C=0,D=0;for(const W of d){const j=a[W],X=j.box;V&&V!=X&&(v||Qn.models.addBox(V),C+=Vt.boxMargin+V.margin),X&&X!=V&&(v||(X.x=w+C,X.y=f),C+=X.margin),j.width=j.width||Vt.width,j.height=Math.max(j.height||Vt.height,Vt.height),j.margin=j.margin||Vt.actorMargin,j.x=w+C,j.y=Qn.getVerticalPos();const Ee=ma_drawActor(s,j,Vt,v);D=Math.max(D,Ee),Qn.insert(j.x,f,j.x+j.width,j.height),w+=j.width+C,j.box&&(j.box.width=w+X.margin-j.box.x),C=j.margin,V=j.box,Qn.models.addActor(j)}V&&!v&&Qn.models.addBox(V),Qn.bumpVerticalPos(D)},aw=function(s,a,d,f){let p=0,y=0;for(const v of d){const w=a[v],C=yx(w),D=ma_drawPopup(s,w,C,Vt,Vt.forceMenus,f);D.height>p&&(p=D.height),D.width+w.x>y&&(y=D.width+w.x)}return{maxHeight:p,maxWidth:y}},lw=function(s){Re(Vt,s),s.fontFamily&&(Vt.actorFontFamily=Vt.noteFontFamily=Vt.messageFontFamily=s.fontFamily),s.fontSize&&(Vt.actorFontSize=Vt.noteFontSize=Vt.messageFontSize=s.fontSize),s.fontWeight&&(Vt.actorFontWeight=Vt.noteFontWeight=Vt.messageFontWeight=s.fontWeight)},Ev=function(s){return Qn.activations.filter(function(a){return a.actor===s})},cw=function(s,a){const d=a[s],f=Ev(s);return[f.reduce(function(v,w){return Math.min(v,w.startx)},d.x+d.width/2),f.reduce(function(v,w){return Math.max(v,w.stopx)},d.x+d.width/2)]};function hf(s,a,d,f,p){Qn.bumpVerticalPos(d);let y=f;if(a.id&&a.message&&s[a.id]){const v=s[a.id].width,w=E0(Vt);a.message=Br.wrapLabel(`[${a.message}]`,v-2*Vt.wrapPadding,w),a.width=v,a.wrap=!0;const C=Br.calculateTextDimensions(a.message,w),D=Math.max(C.height,Vt.labelBoxHeight);y=f+D,Me.debug(`${D} - ${a.message}`)}p(a),Qn.bumpVerticalPos(y)}const yx=function(s){let a=0;const d=Tv(Vt);for(const f in s.links){const y=Br.calculateTextDimensions(f,d).width+2*Vt.wrapPadding+2*Vt.boxMargin;a<y&&(a=y)}return a},dw={bounds:Qn,drawActors:xv,drawActorsPopup:aw,setConf:lw,draw:function(s,a,d,f){const{securityLevel:p,sequence:y}=ut();let v;Vt=y,f.db.clear(),f.parser.parse(s),"sandbox"===p&&(v=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===p?v.nodes()[0].contentDocument.body:"body"),C="sandbox"===p?v.nodes()[0].contentDocument:document;Qn.init(),Me.debug(f.db);const D="sandbox"===p?w.select(`[id="${a}"]`):(0,F.Ltv)(`[id="${a}"]`),V=f.db.getActors(),W=f.db.getBoxes(),j=f.db.getActorKeys(),X=f.db.getMessages(),Ee=f.db.getDiagramTitle(),Ie=f.db.hasAtLeastOneBox(),Pe=f.db.hasAtLeastOneBoxWithTitle(),Ve=function _x(s,a,d){const f={};return a.forEach(function(p){if(s[p.to]&&s[p.from]){const y=s[p.to];if(p.placement===d.db.PLACEMENT.LEFTOF&&!y.prevActor||p.placement===d.db.PLACEMENT.RIGHTOF&&!y.nextActor)return;const v=void 0!==p.placement,w=!v,C=v?Pm(Vt):E0(Vt),D=p.wrap?Br.wrapLabel(p.message,Vt.width-2*Vt.wrapPadding,C):p.message,W=Br.calculateTextDimensions(D,C).width+2*Vt.wrapPadding;w&&p.from===y.nextActor?f[p.to]=Math.max(f[p.to]||0,W):w&&p.from===y.prevActor?f[p.from]=Math.max(f[p.from]||0,W):w&&p.from===p.to?(f[p.from]=Math.max(f[p.from]||0,W/2),f[p.to]=Math.max(f[p.to]||0,W/2)):p.placement===d.db.PLACEMENT.RIGHTOF?f[p.from]=Math.max(f[p.from]||0,W):p.placement===d.db.PLACEMENT.LEFTOF?f[y.prevActor]=Math.max(f[y.prevActor]||0,W):p.placement===d.db.PLACEMENT.OVER&&(y.prevActor&&(f[y.prevActor]=Math.max(f[y.prevActor]||0,W/2)),y.nextActor&&(f[p.from]=Math.max(f[p.from]||0,W/2)))}}),Me.debug("maxMessageWidthPerActor:",f),f}(V,X,f);Vt.height=function DM(s,a,d){let f=0;Object.keys(s).forEach(y=>{const v=s[y];v.wrap&&(v.description=Br.wrapLabel(v.description,Vt.width-2*Vt.wrapPadding,Tv(Vt)));const w=Br.calculateTextDimensions(v.description,Tv(Vt));v.width=v.wrap?Vt.width:Math.max(Vt.width,w.width+2*Vt.wrapPadding),v.height=v.wrap?Math.max(w.height,Vt.height):Vt.height,f=Math.max(f,v.height)});for(const y in a){const v=s[y];if(!v)continue;const w=s[v.nextActor];w?v.margin=Math.max(a[y]+Vt.actorMargin-v.width/2-w.width/2,Vt.actorMargin):v.margin=Math.max(a[y]+Vt.actorMargin-v.width/2,Vt.actorMargin)}let p=0;return d.forEach(y=>{const v=E0(Vt);let w=y.actorKeys.reduce((V,W)=>V+(s[W].width+(s[W].margin||0)),0);w-=2*Vt.boxTextMargin,y.wrap&&(y.name=Br.wrapLabel(y.name,w-2*Vt.wrapPadding,v));const C=Br.calculateTextDimensions(y.name,v);p=Math.max(C.height,p);const D=Math.max(w,C.width+2*Vt.wrapPadding);y.margin=Vt.boxTextMargin,w<D&&(y.margin+=(D-w)/2)}),d.forEach(y=>y.textMaxHeight=p),Math.max(f,Vt.height)}(V,Ve,W),ma_insertComputerIcon(D),ma_insertDatabaseIcon(D),ma_insertClockIcon(D),Ie&&(Qn.bumpVerticalPos(Vt.boxMargin),Pe&&Qn.bumpVerticalPos(W[0].textMaxHeight)),xv(D,V,j,0,Vt,X,!1);const Ae=function(s,a,d,f){const p={},y=[];let v,w,C;return s.forEach(function(D){switch(D.id=Br.random({length:10}),D.type){case f.db.LINETYPE.LOOP_START:case f.db.LINETYPE.ALT_START:case f.db.LINETYPE.OPT_START:case f.db.LINETYPE.PAR_START:case f.db.LINETYPE.CRITICAL_START:case f.db.LINETYPE.BREAK_START:y.push({id:D.id,msg:D.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case f.db.LINETYPE.ALT_ELSE:case f.db.LINETYPE.PAR_AND:case f.db.LINETYPE.CRITICAL_OPTION:D.message&&(v=y.pop(),p[v.id]=v,p[D.id]=v,y.push(v));break;case f.db.LINETYPE.LOOP_END:case f.db.LINETYPE.ALT_END:case f.db.LINETYPE.OPT_END:case f.db.LINETYPE.PAR_END:case f.db.LINETYPE.CRITICAL_END:case f.db.LINETYPE.BREAK_END:v=y.pop(),p[v.id]=v;break;case f.db.LINETYPE.ACTIVE_START:{const W=a[D.from?D.from.actor:D.to.actor],j=Ev(D.from?D.from.actor:D.to.actor).length,X=W.x+W.width/2+(j-1)*Vt.activationWidth/2;Qn.activations.push({startx:X,stopx:X+Vt.activationWidth,actor:D.from.actor,enabled:!0})}break;case f.db.LINETYPE.ACTIVE_END:{const W=Qn.activations.map(j=>j.actor).lastIndexOf(D.from.actor);delete Qn.activations.splice(W,1)[0]}}void 0!==D.placement?(w=function(s,a,d){const f=a[s.from].x,p=a[s.to].x,y=s.wrap&&s.message;let v=Br.calculateTextDimensions(y?Br.wrapLabel(s.message,Vt.width,Pm(Vt)):s.message,Pm(Vt));const w={width:y?Vt.width:Math.max(Vt.width,v.width+2*Vt.noteMargin),height:0,startx:a[s.from].x,stopx:0,starty:0,stopy:0,message:s.message};return s.placement===d.db.PLACEMENT.RIGHTOF?(w.width=y?Math.max(Vt.width,v.width):Math.max(a[s.from].width/2+a[s.to].width/2,v.width+2*Vt.noteMargin),w.startx=f+(a[s.from].width+Vt.actorMargin)/2):s.placement===d.db.PLACEMENT.LEFTOF?(w.width=Math.max(y?Vt.width:a[s.from].width/2+a[s.to].width/2,v.width+2*Vt.noteMargin),w.startx=f-w.width+(a[s.from].width-Vt.actorMargin)/2):s.to===s.from?(v=Br.calculateTextDimensions(y?Br.wrapLabel(s.message,Math.max(Vt.width,a[s.from].width),Pm(Vt)):s.message,Pm(Vt)),w.width=y?Math.max(Vt.width,a[s.from].width):Math.max(a[s.from].width,Vt.width,v.width+2*Vt.noteMargin),w.startx=f+(a[s.from].width-w.width)/2):(w.width=Math.abs(f+a[s.from].width/2-(p+a[s.to].width/2))+Vt.actorMargin,w.startx=f<p?f+a[s.from].width/2-Vt.actorMargin/2:p+a[s.to].width/2-Vt.actorMargin/2),y&&(w.message=Br.wrapLabel(s.message,w.width-2*Vt.wrapPadding,Pm(Vt))),Me.debug(`NM:[${w.startx},${w.stopx},${w.starty},${w.stopy}:${w.width},${w.height}=${s.message}]`),w}(D,a,f),D.noteModel=w,y.forEach(W=>{v=W,v.from=Math.min(v.from,w.startx),v.to=Math.max(v.to,w.startx+w.width),v.width=Math.max(v.width,Math.abs(v.from-v.to))-Vt.labelBoxWidth})):(C=function(s,a,d){let f=!1;if([d.db.LINETYPE.SOLID_OPEN,d.db.LINETYPE.DOTTED_OPEN,d.db.LINETYPE.SOLID,d.db.LINETYPE.DOTTED,d.db.LINETYPE.SOLID_CROSS,d.db.LINETYPE.DOTTED_CROSS,d.db.LINETYPE.SOLID_POINT,d.db.LINETYPE.DOTTED_POINT].includes(s.type)&&(f=!0),!f)return{};const p=cw(s.from,a),y=cw(s.to,a),v=p[0]<=y[0]?1:0,w=p[0]<y[0]?0:1,C=[...p,...y],D=Math.abs(y[w]-p[v]);s.wrap&&s.message&&(s.message=Br.wrapLabel(s.message,Math.max(D+2*Vt.wrapPadding,Vt.width),E0(Vt)));const V=Br.calculateTextDimensions(s.message,E0(Vt));return{width:Math.max(s.wrap?0:V.width+2*Vt.wrapPadding,D+2*Vt.wrapPadding,Vt.width),height:0,startx:p[v],stopx:y[w],starty:0,stopy:0,message:s.message,type:s.type,wrap:s.wrap,fromBounds:Math.min.apply(null,C),toBounds:Math.max.apply(null,C)}}(D,a,f),D.msgModel=C,C.startx&&C.stopx&&y.length>0&&y.forEach(W=>{if(v=W,C.startx===C.stopx){const j=a[D.from],X=a[D.to];v.from=Math.min(j.x-C.width/2,j.x-j.width/2,v.from),v.to=Math.max(X.x+C.width/2,X.x+j.width/2,v.to),v.width=Math.max(v.width,Math.abs(v.to-v.from))-Vt.labelBoxWidth}else v.from=Math.min(C.startx,v.from),v.to=Math.max(C.stopx,v.to),v.width=Math.max(v.width,C.width)-Vt.labelBoxWidth}))}),Qn.activations=[],Me.debug("Loop type widths:",p),p}(X,V,0,f);ma_insertArrowHead(D),ma_insertArrowCrossHead(D),ma_insertArrowFilledHead(D),ma_insertSequenceNumber(D);let vt=1,Ft=1;const Qt=[];X.forEach(function(dt){let ae,Ct,Jn;switch(dt.type){case f.db.LINETYPE.NOTE:Ct=dt.noteModel,function(s,a){Qn.bumpVerticalPos(Vt.boxMargin),a.height=Vt.boxMargin,a.starty=Qn.getVerticalPos();const d=ma_getNoteRect();d.x=a.startx,d.y=a.starty,d.width=a.width||Vt.width,d.class="note";const f=s.append("g"),p=ma_drawRect(f,d),y=ma_getTextObj();y.x=a.startx,y.y=a.starty,y.width=d.width,y.dy="1em",y.text=a.message,y.class="noteText",y.fontFamily=Vt.noteFontFamily,y.fontSize=Vt.noteFontSize,y.fontWeight=Vt.noteFontWeight,y.anchor=Vt.noteAlign,y.textMargin=Vt.noteMargin,y.valign="center";const v=Om(f,y),w=Math.round(v.map(C=>(C._groups||C)[0][0].getBBox().height).reduce((C,D)=>C+D));p.attr("height",w+2*Vt.noteMargin),a.height+=w+2*Vt.noteMargin,Qn.bumpVerticalPos(w+2*Vt.noteMargin),a.stopy=a.starty+w+2*Vt.noteMargin,a.stopx=a.startx+d.width,Qn.insert(a.startx,a.starty,a.stopx,a.stopy),Qn.models.addNote(a)}(D,Ct);break;case f.db.LINETYPE.ACTIVE_START:Qn.newActivation(dt,D,V);break;case f.db.LINETYPE.ACTIVE_END:!function Qe(dt,ae){const Ct=Qn.endActivation(dt);Ct.starty+18>ae&&(Ct.starty=ae-6,ae+=12),ma_drawActivation(D,Ct,ae,Vt,Ev(dt.from.actor).length),Qn.insert(Ct.startx,ae-10,Ct.stopx,ae)}(dt,Qn.getVerticalPos());break;case f.db.LINETYPE.LOOP_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.LOOP_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"loop",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;case f.db.LINETYPE.RECT_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin,Xt=>Qn.newLoop(void 0,Xt.message));break;case f.db.LINETYPE.RECT_END:ae=Qn.endLoop(),ma_drawBackgroundRect(D,ae),Qn.models.addLoop(ae),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos());break;case f.db.LINETYPE.OPT_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.OPT_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"opt",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;case f.db.LINETYPE.ALT_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.ALT_ELSE:hf(Ae,dt,Vt.boxMargin+Vt.boxTextMargin,Vt.boxMargin,Xt=>Qn.addSectionToLoop(Xt));break;case f.db.LINETYPE.ALT_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"alt",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;case f.db.LINETYPE.PAR_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.PAR_AND:hf(Ae,dt,Vt.boxMargin+Vt.boxTextMargin,Vt.boxMargin,Xt=>Qn.addSectionToLoop(Xt));break;case f.db.LINETYPE.PAR_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"par",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;case f.db.LINETYPE.AUTONUMBER:vt=dt.message.start||vt,Ft=dt.message.step||Ft,dt.message.visible?f.db.enableSequenceNumbers():f.db.disableSequenceNumbers();break;case f.db.LINETYPE.CRITICAL_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.CRITICAL_OPTION:hf(Ae,dt,Vt.boxMargin+Vt.boxTextMargin,Vt.boxMargin,Xt=>Qn.addSectionToLoop(Xt));break;case f.db.LINETYPE.CRITICAL_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"critical",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;case f.db.LINETYPE.BREAK_START:hf(Ae,dt,Vt.boxMargin,Vt.boxMargin+Vt.boxTextMargin,Xt=>Qn.newLoop(Xt));break;case f.db.LINETYPE.BREAK_END:ae=Qn.endLoop(),ma_drawLoop(D,ae,"break",Vt),Qn.bumpVerticalPos(ae.stopy-Qn.getVerticalPos()),Qn.models.addLoop(ae);break;default:try{Jn=dt.msgModel,Jn.starty=Qn.getVerticalPos(),Jn.sequenceIndex=vt,Jn.sequenceVisible=f.db.showSequenceNumbers();const Xt=function sw(s,a){Qn.bumpVerticalPos(10);const{startx:d,stopx:f,message:p}=a,y=tr.splitBreaks(p).length,v=Br.calculateTextDimensions(p,E0(Vt)),w=v.height/y;a.height+=w,Qn.bumpVerticalPos(w);let C,D=v.height-10;const V=v.width;if(d===f){C=Qn.getVerticalPos()+D,Vt.rightAngles||(D+=Vt.boxMargin,C=Qn.getVerticalPos()+D),D+=30;const W=Math.max(V/2,Vt.width/2);Qn.insert(d-W,Qn.getVerticalPos()-10+D,f+W,Qn.getVerticalPos()+30+D)}else D+=Vt.boxMargin,C=Qn.getVerticalPos()+D,Qn.insert(d,C-10,f,C);return Qn.bumpVerticalPos(D),a.height+=D,a.stopy=a.starty+a.height,Qn.insert(a.fromBounds,a.starty,a.toBounds,a.stopy),C}(0,Jn);Qt.push({messageModel:Jn,lineStartY:Xt}),Qn.models.addMessage(Jn)}catch(Xt){Me.error("error while drawing message",Xt)}}[f.db.LINETYPE.SOLID_OPEN,f.db.LINETYPE.DOTTED_OPEN,f.db.LINETYPE.SOLID,f.db.LINETYPE.DOTTED,f.db.LINETYPE.SOLID_CROSS,f.db.LINETYPE.DOTTED_CROSS,f.db.LINETYPE.SOLID_POINT,f.db.LINETYPE.DOTTED_POINT].includes(dt.type)&&(vt+=Ft)}),Qt.forEach(dt=>function(s,a,d,f){const{startx:p,stopx:y,starty:v,message:w,type:C,sequenceIndex:D,sequenceVisible:V}=a,W=Br.calculateTextDimensions(w,E0(Vt)),j=ma_getTextObj();j.x=p,j.y=v+10,j.width=y-p,j.class="messageText",j.dy="1em",j.text=w,j.fontFamily=Vt.messageFontFamily,j.fontSize=Vt.messageFontSize,j.fontWeight=Vt.messageFontWeight,j.anchor=Vt.messageAlign,j.valign="center",j.textMargin=Vt.wrapPadding,j.tspan=!1,Om(s,j);const X=W.width;let Ee;p===y?Ee=Vt.rightAngles?s.append("path").attr("d",`M  ${p},${d} H ${p+Math.max(Vt.width/2,X/2)} V ${d+25} H ${p}`):s.append("path").attr("d","M "+p+","+d+" C "+(p+60)+","+(d-10)+" "+(p+60)+","+(d+30)+" "+p+","+(d+20)):(Ee=s.append("line"),Ee.attr("x1",p),Ee.attr("y1",d),Ee.attr("x2",y),Ee.attr("y2",d)),C===f.db.LINETYPE.DOTTED||C===f.db.LINETYPE.DOTTED_CROSS||C===f.db.LINETYPE.DOTTED_POINT||C===f.db.LINETYPE.DOTTED_OPEN?(Ee.style("stroke-dasharray","3, 3"),Ee.attr("class","messageLine1")):Ee.attr("class","messageLine0");let Ie="";Vt.arrowMarkerAbsolute&&(Ie=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Ie=Ie.replace(/\(/g,"\\("),Ie=Ie.replace(/\)/g,"\\)")),Ee.attr("stroke-width",2),Ee.attr("stroke","none"),Ee.style("fill","none"),(C===f.db.LINETYPE.SOLID||C===f.db.LINETYPE.DOTTED)&&Ee.attr("marker-end","url("+Ie+"#arrowhead)"),(C===f.db.LINETYPE.SOLID_POINT||C===f.db.LINETYPE.DOTTED_POINT)&&Ee.attr("marker-end","url("+Ie+"#filled-head)"),(C===f.db.LINETYPE.SOLID_CROSS||C===f.db.LINETYPE.DOTTED_CROSS)&&Ee.attr("marker-end","url("+Ie+"#crosshead)"),(V||Vt.showSequenceNumbers)&&(Ee.attr("marker-start","url("+Ie+"#sequencenumber)"),s.append("text").attr("x",p).attr("y",d+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(D))}(D,dt.messageModel,dt.lineStartY,f)),Vt.mirrorActors&&(Qn.bumpVerticalPos(2*Vt.boxMargin),xv(D,V,j,Qn.getVerticalPos(),Vt,X,!0),Qn.bumpVerticalPos(Vt.boxMargin),ux(D,Qn.getVerticalPos())),Qn.models.boxes.forEach(function(dt){dt.height=Qn.getVerticalPos()-dt.y,Qn.insert(dt.x,dt.y,dt.x+dt.width,dt.height),dt.startx=dt.x,dt.starty=dt.y,dt.stopx=dt.startx+dt.width,dt.stopy=dt.starty+dt.height,dt.stroke="rgb(0,0,0, 0.5)",ma_drawBox(D,dt,Vt)}),Ie&&Qn.bumpVerticalPos(Vt.boxMargin);const st=aw(D,V,j,C),{bounds:rt}=Qn.getBounds();Me.debug("For line height fix Querying: #"+a+" .actor-line"),(0,F.Ubm)("#"+a+" .actor-line").attr("y2",rt.stopy);let qe=rt.stopy-rt.starty;qe<st.maxHeight&&(qe=st.maxHeight);let $e=qe+2*Vt.diagramMarginY;Vt.mirrorActors&&($e=$e-Vt.boxMargin+Vt.bottomMarginAdj);let pe=rt.stopx-rt.startx;pe<st.maxWidth&&(pe=st.maxWidth);const Ke=pe+2*Vt.diagramMarginX;Ee&&D.append("text").text(Ee).attr("x",(rt.stopx-rt.startx)/2-2*Vt.diagramMarginX).attr("y",-25),tu(D,$e,Ke,Vt.useMaxWidth);const J=Ee?40:0;D.attr("viewBox",rt.startx-Vt.diagramMarginX+" -"+(Vt.diagramMarginY+J)+" "+Ke+" "+($e+J)),Me.debug("models:",Qn.models)}};var h_=function(){var s=function(Jt,L,P,it){for(P=P||{},it=Jt.length;it--;P[Jt[it]]=L);return P},a=[1,2],d=[1,3],f=[1,5],p=[1,7],y=[2,5],v=[1,15],w=[1,17],C=[1,21],D=[1,22],V=[1,23],W=[1,24],j=[1,37],X=[1,25],Ee=[1,26],Ie=[1,27],Pe=[1,28],Ve=[1,29],Ae=[1,32],Qe=[1,33],vt=[1,34],Ft=[1,35],Qt=[1,36],st=[1,39],rt=[1,40],Ue=[1,41],qe=[1,42],$e=[1,38],pe=[1,45],Ke=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],J=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],dt=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],ae=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],Ct={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(L,P,it,Hn,Dn,Pt,nr){var xt=Pt.length-1;switch(Dn){case 4:return Hn.setRootDoc(Pt[xt]),Pt[xt];case 5:this.$=[];break;case 6:"nl"!=Pt[xt]&&(Pt[xt-1].push(Pt[xt]),this.$=Pt[xt-1]);break;case 7:case 8:case 12:this.$=Pt[xt];break;case 9:this.$="nl";break;case 13:const lt=Pt[xt-1];lt.description=Hn.trimColon(Pt[xt]),this.$=lt;break;case 14:this.$={stmt:"relation",state1:Pt[xt-2],state2:Pt[xt]};break;case 15:const Ye=Hn.trimColon(Pt[xt]);this.$={stmt:"relation",state1:Pt[xt-3],state2:Pt[xt-1],description:Ye};break;case 19:this.$={stmt:"state",id:Pt[xt-3],type:"default",description:"",doc:Pt[xt-1]};break;case 20:var Tn=Pt[xt],Wt=Pt[xt-2].trim();if(Pt[xt].match(":")){var Ht=Pt[xt].split(":");Tn=Ht[0],Wt=[Wt,Ht[1]]}this.$={stmt:"state",id:Tn,type:"default",description:Wt};break;case 21:this.$={stmt:"state",id:Pt[xt-3],type:"default",description:Pt[xt-5],doc:Pt[xt-1]};break;case 22:this.$={stmt:"state",id:Pt[xt],type:"fork"};break;case 23:this.$={stmt:"state",id:Pt[xt],type:"join"};break;case 24:this.$={stmt:"state",id:Pt[xt],type:"choice"};break;case 25:this.$={stmt:"state",id:Hn.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:Pt[xt-1].trim(),note:{position:Pt[xt-2].trim(),text:Pt[xt].trim()}};break;case 30:this.$=Pt[xt].trim(),Hn.setAccTitle(this.$);break;case 31:case 32:this.$=Pt[xt].trim(),Hn.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:Pt[xt-1].trim(),classes:Pt[xt].trim()};break;case 35:this.$={stmt:"applyClass",id:Pt[xt-1].trim(),styleClass:Pt[xt].trim()};break;case 38:Hn.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Hn.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Hn.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Hn.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:Pt[xt].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:Pt[xt-2].trim(),classes:[Pt[xt].trim()],type:"default",description:""};break;case 50:Hn.parseDirective("%%{","open_directive");break;case 51:Hn.parseDirective(Pt[xt],"type_directive");break;case 52:Pt[xt]=Pt[xt].trim().replace(/'/g,'"'),Hn.parseDirective(Pt[xt],"arg_directive");break;case 53:Hn.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:a,5:d,6:4,7:f,45:6,60:p},{1:[3]},{3:8,4:a,5:d,6:4,7:f,45:6,60:p},{3:9,4:a,5:d,6:4,7:f,45:6,60:p},{3:10,4:a,5:d,6:4,7:f,45:6,60:p},s([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],y,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:v,5:w,6:30,9:14,10:16,11:18,12:19,13:20,16:C,17:D,19:V,22:W,24:j,25:X,26:Ee,27:Ie,28:Pe,29:Ve,32:31,33:Ae,35:Qe,37:vt,38:Ft,42:Qt,45:6,50:st,51:rt,52:Ue,53:qe,56:$e,60:p},{47:43,48:[1,44],63:pe},s([48,63],[2,51]),s(Ke,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:C,17:D,19:V,22:W,24:j,25:X,26:Ee,27:Ie,28:Pe,29:Ve,32:31,33:Ae,35:Qe,37:vt,38:Ft,42:Qt,45:6,50:st,51:rt,52:Ue,53:qe,56:$e,60:p},s(Ke,[2,8]),s(Ke,[2,9]),s(Ke,[2,10]),s(Ke,[2,11]),s(Ke,[2,12],{14:[1,47],15:[1,48]}),s(Ke,[2,16]),{18:[1,49]},s(Ke,[2,18],{20:[1,50]}),{23:[1,51]},s(Ke,[2,22]),s(Ke,[2,23]),s(Ke,[2,24]),s(Ke,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},s(Ke,[2,28]),s(Ke,[2,29]),{34:[1,56]},{36:[1,57]},s(Ke,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},s(J,[2,44],{57:[1,61]}),s(J,[2,45],{57:[1,62]}),s(Ke,[2,38]),s(Ke,[2,39]),s(Ke,[2,40]),s(Ke,[2,41]),s(dt,[2,36]),{49:63,62:[1,64]},s(dt,[2,53]),s(Ke,[2,7]),s(Ke,[2,13]),{13:65,24:j,56:$e},s(Ke,[2,17]),s(ae,y,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},s(Ke,[2,30]),s(Ke,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:pe},{63:[2,52]},s(Ke,[2,14],{14:[1,76]}),{4:v,5:w,6:30,9:14,10:16,11:18,12:19,13:20,16:C,17:D,19:V,21:[1,77],22:W,24:j,25:X,26:Ee,27:Ie,28:Pe,29:Ve,32:31,33:Ae,35:Qe,37:vt,38:Ft,42:Qt,45:6,50:st,51:rt,52:Ue,53:qe,56:$e,60:p},s(Ke,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},s(Ke,[2,33]),s(Ke,[2,34]),s(Ke,[2,35]),s(J,[2,46]),s(J,[2,47]),s(dt,[2,37]),s(Ke,[2,15]),s(Ke,[2,19]),s(ae,y,{8:81}),s(Ke,[2,26]),s(Ke,[2,27]),{4:v,5:w,6:30,9:14,10:16,11:18,12:19,13:20,16:C,17:D,19:V,21:[1,82],22:W,24:j,25:X,26:Ee,27:Ie,28:Pe,29:Ve,32:31,33:Ae,35:Qe,37:vt,38:Ft,42:Qt,45:6,50:st,51:rt,52:Ue,53:qe,56:$e,60:p},s(Ke,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(L,P){if(!P.recoverable){var it=new Error(L);throw it.hash=P,it}this.trace(L)},parse:function(L){var it=[0],Hn=[],Dn=[null],Pt=[],nr=this.table,xt="",Tn=0,Wt=0,Ye=Pt.slice.call(arguments,1),ct=Object.create(this.lexer),Oe={yy:{}};for(var bn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,bn)&&(Oe.yy[bn]=this.yy[bn]);ct.setInput(L,Oe.yy),Oe.yy.lexer=ct,Oe.yy.parser=this,typeof ct.yylloc>"u"&&(ct.yylloc={});var xe=ct.yylloc;Pt.push(xe);var yr,gr=ct.options&&ct.options.ranges;this.parseError="function"==typeof Oe.yy.parseError?Oe.yy.parseError:Object.getPrototypeOf(this).parseError;for(var ui,qn,gn,Sn,En,Bn,js,Rn={};;){if(this.defaultActions[qn=it[it.length-1]]?gn=this.defaultActions[qn]:((null===ui||typeof ui>"u")&&(yr=void 0,"number"!=typeof(yr=Hn.pop()||ct.lex()||1)&&(yr instanceof Array&&(yr=(Hn=yr).pop()),yr=this.symbols_[yr]||yr),ui=yr),gn=nr[qn]&&nr[qn][ui]),typeof gn>"u"||!gn.length||!gn[0]){var wr;for(En in js=[],nr[qn])this.terminals_[En]&&En>2&&js.push("'"+this.terminals_[En]+"'");wr=ct.showPosition?"Parse error on line "+(Tn+1)+":\n"+ct.showPosition()+"\nExpecting "+js.join(", ")+", got '"+(this.terminals_[ui]||ui)+"'":"Parse error on line "+(Tn+1)+": Unexpected "+(1==ui?"end of input":"'"+(this.terminals_[ui]||ui)+"'"),this.parseError(wr,{text:ct.match,token:this.terminals_[ui]||ui,line:ct.yylineno,loc:xe,expected:js})}if(gn[0]instanceof Array&&gn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qn+", token: "+ui);switch(gn[0]){case 1:it.push(ui),Dn.push(ct.yytext),Pt.push(ct.yylloc),it.push(gn[1]),ui=null,Wt=ct.yyleng,xt=ct.yytext,Tn=ct.yylineno,xe=ct.yylloc;break;case 2:if(Rn.$=Dn[Dn.length-(Bn=this.productions_[gn[1]][1])],Rn._$={first_line:Pt[Pt.length-(Bn||1)].first_line,last_line:Pt[Pt.length-1].last_line,first_column:Pt[Pt.length-(Bn||1)].first_column,last_column:Pt[Pt.length-1].last_column},gr&&(Rn._$.range=[Pt[Pt.length-(Bn||1)].range[0],Pt[Pt.length-1].range[1]]),typeof(Sn=this.performAction.apply(Rn,[xt,Wt,Tn,Oe.yy,gn[1],Dn,Pt].concat(Ye)))<"u")return Sn;Bn&&(it=it.slice(0,-1*Bn*2),Dn=Dn.slice(0,-1*Bn),Pt=Pt.slice(0,-1*Bn)),it.push(this.productions_[gn[1]][0]),Dn.push(Rn.$),Pt.push(Rn._$),it.push(nr[it[it.length-2]][it[it.length-1]]);break;case 3:return!0}}return!0}};function Xt(){this.yy={}}return Ct.lexer=function(){return{EOF:1,parseError:function(P,it){if(!this.yy.parser)throw new Error(P);this.yy.parser.parseError(P,it)},setInput:function(L,P){return this.yy=P||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];return this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L,L.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var P=L.length,it=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P),this.offset-=P;var Hn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),it.length-1&&(this.yylineno-=it.length-1);var Dn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:it?(it.length===Hn.length?this.yylloc.first_column:0)+Hn[Hn.length-it.length].length-it[0].length:this.yylloc.first_column-P},this.options.ranges&&(this.yylloc.range=[Dn[0],Dn[0]+this.yyleng-P]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),P=new Array(L.length+1).join("-");return L+this.upcomingInput()+"\n"+P+"^"},test_match:function(L,P){var it,Hn,Dn;if(this.options.backtrack_lexer&&(Dn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Dn.yylloc.range=this.yylloc.range.slice(0))),(Hn=L[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Hn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Hn?Hn[Hn.length-1].length-Hn[Hn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],it=this.performAction.call(this,this.yy,this,P,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),it)return it;if(this._backtrack){for(var Pt in Dn)this[Pt]=Dn[Pt];return!1}return!1},next:function(){if(this.done)return this.EOF;var L,P,it,Hn;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Dn=this._currentRules(),Pt=0;Pt<Dn.length;Pt++)if((it=this._input.match(this.rules[Dn[Pt]]))&&(!P||it[0].length>P[0].length)){if(P=it,Hn=Pt,this.options.backtrack_lexer){if(!1!==(L=this.test_match(it,Dn[Pt])))return L;if(this._backtrack){P=!1;continue}return!1}if(!this.options.flex)break}return P?!1!==(L=this.test_match(P,Dn[Hn]))&&L:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(P){this.conditionStack.push(P)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(P){return(P=this.conditionStack.length-1-Math.abs(P||0))>=0?this.conditionStack[P]:"INITIAL"},pushState:function(P){this.begin(P)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(P,it,Hn,Dn){switch(Hn){case 0:return 41;case 1:case 44:return 50;case 2:case 45:return 51;case 3:case 46:return 52;case 4:case 47:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:case 11:case 13:case 14:case 15:case 16:case 56:case 58:case 64:break;case 12:case 79:return 5;case 17:case 34:return this.pushState("SCALE"),17;case 18:case 35:return 18;case 19:case 25:case 36:case 51:case 54:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 37:this.pushState("STATE");break;case 38:case 41:return this.popState(),it.yytext=it.yytext.slice(0,-8).trim(),25;case 39:case 42:return this.popState(),it.yytext=it.yytext.slice(0,-8).trim(),26;case 40:case 43:return this.popState(),it.yytext=it.yytext.slice(0,-10).trim(),27;case 48:this.pushState("STATE_STRING");break;case 49:return this.pushState("STATE_ID"),"AS";case 50:case 66:return this.popState(),"ID";case 52:return"STATE_DESCR";case 53:return 19;case 55:return this.popState(),this.pushState("struct"),20;case 57:return this.popState(),21;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 65:return"NOTE_TEXT";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),it.yytext=it.yytext.substr(2).trim(),31;case 69:return this.popState(),it.yytext=it.yytext.slice(0,-8).trim(),31;case 70:case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return it.yytext=it.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}}}(),Xt.prototype=Ct,Ct.Parser=Xt,new Xt}();h_.parser=h_;const hw=h_,bx=(s,a)=>{var d;return"dagre-wrapper"!==(null==(d=a?.state)?void 0:d.defaultRenderer)&&null!==s.match(/^\s*stateDiagram/)},wx=(s,a)=>{var d;return!!(null!==s.match(/^\s*stateDiagram-v2/)||s.match(/^\s*stateDiagram/)&&"dagre-wrapper"===(null==(d=a?.state)?void 0:d.defaultRenderer))},pw="state",Cx="relation",Sv="default",pA="divider";let vA="LR",_w=[],Av={},kv={root:{relations:[],states:{},documents:{}}},pl=kv.root,_p=0,xx=0;const Dv=s=>JSON.parse(JSON.stringify(s)),Mv=(s,a,d)=>{if(a.stmt===Cx)Mv(s,a.state1,!0),Mv(s,a.state2,!1);else if(a.stmt===pw&&("[*]"===a.id?(a.id=d?s.id+"_start":s.id+"_end",a.start=d):a.id=a.id.trim()),a.doc){const f=[];let y,p=[];for(y=0;y<a.doc.length;y++)if(a.doc[y].type===pA){const v=Dv(a.doc[y]);v.doc=Dv(p),f.push(v),p=[]}else p.push(a.doc[y]);if(f.length>0&&p.length>0){const v={stmt:pw,id:vc(),type:"divider",doc:Dv(p)};f.push(Dv(v)),a.doc=f}a.doc.forEach(v=>Mv(a,v,!0))}},S0=function(s,a=Sv,d=null,f=null,p=null,y=null,v=null,w=null){const C=s?.trim();void 0===pl.states[C]?(Me.info("Adding state ",C,f),pl.states[C]={id:C,descriptions:[],type:a,doc:d,note:p,classes:[],styles:[],textStyles:[]}):(pl.states[C].doc||(pl.states[C].doc=d),pl.states[C].type||(pl.states[C].type=a)),f&&(Me.info("Setting state description",C,f),"string"==typeof f&&vw(C,f.trim()),"object"==typeof f&&f.forEach(D=>vw(C,D.trim()))),p&&(pl.states[C].note=p,pl.states[C].note.text=tr.sanitizeText(pl.states[C].note.text,ut())),y&&(Me.info("Setting state classes",C,y),("string"==typeof y?[y]:y).forEach(V=>f_(C,V.trim()))),v&&(Me.info("Setting state styles",C,v),("string"==typeof v?[v]:v).forEach(V=>Mx(C,V.trim()))),w&&(Me.info("Setting state styles",C,v),("string"==typeof w?[w]:w).forEach(V=>Ix(C,V.trim())))},yw=function(s){kv={root:{relations:[],states:{},documents:{}}},pl=kv.root,_p=0,Av={},s||je()},Nv=function(s){return pl.states[s]};function Ov(s=""){let a=s;return"[*]"===s&&(_p++,a=`start${_p}`),a}function yo(s="",a=Sv){return"[*]"===s?"start":a}const kx=function(s,a,d){if("object"==typeof s)!function Rv(s,a,d){let f=Ov(s.id.trim()),p=yo(s.id.trim(),s.type),y=Ov(a.id.trim()),v=yo(a.id.trim(),a.type);S0(f,p,s.doc,s.description,s.note,s.classes,s.styles,s.textStyles),S0(y,v,a.doc,a.description,a.note,a.classes,a.styles,a.textStyles),pl.relations.push({id1:f,id2:y,relationTitle:tr.sanitizeText(d,ut())})}(s,a,d);else{const f=Ov(s.trim()),p=yo(s),y=function xA(s=""){let a=s;return"[*]"===s&&(_p++,a=`end${_p}`),a}(a.trim()),v=function EA(s="",a=Sv){return"[*]"===s?"end":a}(a);S0(f,p),S0(y,v),pl.relations.push({id1:f,id2:y,title:tr.sanitizeText(d,ut())})}},vw=function(s,a){const d=pl.states[s],f=a.startsWith(":")?a.replace(":","").trim():a;d.descriptions.push(tr.sanitizeText(f,ut()))},Dx=function(s,a=""){void 0===Av[s]&&(Av[s]={id:s,styles:[],textStyles:[]});const d=Av[s];a?.split(",").forEach(f=>{const p=f.replace(/([^;]*);/,"$1").trim();if(f.match("color")){const v=p.replace("fill","bgFill").replace("color","fill");d.textStyles.push(v)}d.styles.push(p)})},f_=function(s,a){s.split(",").forEach(function(d){let f=Nv(d);if(void 0===f){const p=d.trim();S0(p),f=Nv(p)}f.classes.push(a)})},Mx=function(s,a){const d=Nv(s);void 0!==d&&d.textStyles.push(a)},Ix=function(s,a){const d=Nv(s);void 0!==d&&d.textStyles.push(a)},yp={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().state,addState:S0,clear:yw,getState:Nv,getStates:function(){return pl.states},getRelations:function(){return pl.relations},getClasses:function(){return Av},getDirection:()=>vA,addRelation:kx,getDividerId:()=>(xx++,"divider-id-"+xx),setDirection:s=>{vA=s},cleanupLabel:function(s){return":"===s.substring(0,1)?s.substr(2).trim():s.trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){Me.info("Documents = ",kv)},getRootDoc:()=>_w,setRootDoc:s=>{Me.info("Setting root doc",s),_w=s},getRootDocV2:()=>(Mv({id:"root"},{id:"root",doc:_w},!0),{id:"root",doc:_w}),extract:s=>{let a;a=s.doc?s.doc:s,Me.info(a),yw(!0),Me.info("Extract",a),a.forEach(d=>{switch(d.stmt){case pw:S0(d.id.trim(),d.type,d.doc,d.description,d.note,d.classes,d.styles,d.textStyles);break;case Cx:kx(d.state1,d.state2,d.description);break;case"classDef":Dx(d.id.trim(),d.classes);break;case"applyClass":f_(d.id.trim(),d.styleClass)}})},trimColon:s=>s&&":"===s[0]?s.substr(1).trim():s.trim(),getAccTitle:pt,setAccTitle:Je,getAccDescription:Mt,setAccDescription:et,addStyleClass:Dx,setCssClass:f_,addDescription:vw,setDiagramTitle:Nt,getDiagramTitle:cn},vp={},Pv=(s,a,d)=>{const f=ut().state.padding,p=2*ut().state.padding,y=s.node().getBBox(),v=y.width,w=y.x,C=s.append("text").attr("x",0).attr("y",ut().state.titleShift).attr("font-size",ut().state.fontSize).attr("class","state-title").text(a.id),V=C.node().getBBox().width+p;let j,W=Math.max(V,v);W===v&&(W+=p);const X=s.node().getBBox();j=w-f,V>v&&(j=(v-W)/2+f),Math.abs(w-X.x)<f&&V>v&&(j=w-(V-v)/2);const Ee=1-ut().state.textHeight;return s.insert("rect",":first-child").attr("x",j).attr("y",Ee).attr("class",d?"alt-composit":"composit").attr("width",W).attr("height",X.height+ut().state.textHeight+ut().state.titleShift+1).attr("rx","0"),C.attr("x",j+f),V<=v&&C.attr("x",w+(W-p)/2-V/2+f),s.insert("rect",":first-child").attr("x",j).attr("y",ut().state.titleShift-ut().state.textHeight-ut().state.padding).attr("width",W).attr("height",3*ut().state.textHeight).attr("rx",ut().state.radius),s.insert("rect",":first-child").attr("x",j).attr("y",ut().state.titleShift-ut().state.textHeight-ut().state.padding).attr("width",W).attr("height",X.height+3+2*ut().state.textHeight).attr("rx",ut().state.radius),s},pg=function(s,a){const d=a.id,f={id:d,label:a.id,width:0,height:0},p=s.append("g").attr("id",d).attr("class","stateGroup");"start"===a.type&&(s=>{s.append("circle").attr("class","start-state").attr("r",ut().state.sizeUnit).attr("cx",ut().state.padding+ut().state.sizeUnit).attr("cy",ut().state.padding+ut().state.sizeUnit)})(p),"end"===a.type&&(s=>{s.append("circle").attr("class","end-state-outer").attr("r",ut().state.sizeUnit+ut().state.miniPadding).attr("cx",ut().state.padding+ut().state.sizeUnit+ut().state.miniPadding).attr("cy",ut().state.padding+ut().state.sizeUnit+ut().state.miniPadding),s.append("circle").attr("class","end-state-inner").attr("r",ut().state.sizeUnit).attr("cx",ut().state.padding+ut().state.sizeUnit+2).attr("cy",ut().state.padding+ut().state.sizeUnit+2)})(p),("fork"===a.type||"join"===a.type)&&((s,a)=>{let d=ut().state.forkWidth,f=ut().state.forkHeight;if(a.parentId){let p=d;d=f,f=p}s.append("rect").style("stroke","black").style("fill","black").attr("width",d).attr("height",f).attr("x",ut().state.padding).attr("y",ut().state.padding)})(p,a),"note"===a.type&&((s,a)=>{a.attr("class","state-note");const d=a.append("rect").attr("x",0).attr("y",ut().state.padding),f=a.append("g"),{textWidth:p,textHeight:y}=((s,a,d,f)=>{let p=0;const y=f.append("text");y.style("text-anchor","start"),y.attr("class","noteText");let v=s.replace(/\r\n/g,"<br/>");v=v.replace(/\n/g,"<br/>");const w=v.split(tr.lineBreakRegex);let C=1.25*ut().state.noteMargin;for(const D of w){const V=D.trim();if(V.length>0){const W=y.append("tspan");W.text(V),0===C&&(C+=W.node().getBBox().height),p+=C,W.attr("x",0+ut().state.noteMargin),W.attr("y",0+p+1.25*ut().state.noteMargin)}}return{textWidth:y.node().getBBox().width,textHeight:p}})(s,0,0,f);d.attr("height",y+2*ut().state.noteMargin),d.attr("width",p+2*ut().state.noteMargin)})(a.note.text,p),"divider"===a.type&&(s=>{s.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",ut().state.textHeight).attr("class","divider").attr("x2",2*ut().state.textHeight).attr("y1",0).attr("y2",0)})(p),"default"===a.type&&0===a.descriptions.length&&((s,a)=>{const f=s.append("text").attr("x",2*ut().state.padding).attr("y",ut().state.textHeight+2*ut().state.padding).attr("font-size",ut().state.fontSize).attr("class","state-title").text(a.id).node().getBBox();s.insert("rect",":first-child").attr("x",ut().state.padding).attr("y",ut().state.padding).attr("width",f.width+2*ut().state.padding).attr("height",f.height+2*ut().state.padding).attr("rx",ut().state.radius)})(p,a),"default"===a.type&&a.descriptions.length>0&&((s,a)=>{const p=s.append("text").attr("x",2*ut().state.padding).attr("y",ut().state.textHeight+1.3*ut().state.padding).attr("font-size",ut().state.fontSize).attr("class","state-title").text(a.descriptions[0]).node().getBBox(),y=p.height,v=s.append("text").attr("x",ut().state.padding).attr("y",y+.4*ut().state.padding+ut().state.dividerMargin+ut().state.textHeight).attr("class","state-description");let w=!0,C=!0;a.descriptions.forEach(function(j){w||(function(j,X,Ee){const Ie=j.append("tspan").attr("x",2*ut().state.padding).text(X);Ee||Ie.attr("dy",ut().state.textHeight)}(v,j,C),C=!1),w=!1});const D=s.append("line").attr("x1",ut().state.padding).attr("y1",ut().state.padding+y+ut().state.dividerMargin/2).attr("y2",ut().state.padding+y+ut().state.dividerMargin/2).attr("class","descr-divider"),V=v.node().getBBox(),W=Math.max(V.width,p.width);D.attr("x2",W+3*ut().state.padding),s.insert("rect",":first-child").attr("x",ut().state.padding).attr("y",ut().state.padding).attr("width",W+2*ut().state.padding).attr("height",V.height+y+2*ut().state.padding).attr("rx",ut().state.radius)})(p,a);const y=p.node().getBBox();return f.width=y.width+2*ut().state.padding,f.height=y.height+2*ut().state.padding,((s,a)=>{vp[s]=a})(d,f),f};let nd,FA=0;const ww={},p_=s=>s?s.length*nd.fontSizeFactor:1,tl=(s,a,d,f,p,y,v)=>{const w=new Ki.T({compound:!0,multigraph:!0});let C,D=!0;for(C=0;C<s.length;C++)if("relation"===s[C].stmt){D=!1;break}w.setGraph(d?{rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:D?1:nd.edgeLengthFactor,nodeSep:D?1:50,isMultiGraph:!0}:{rankdir:"TB",multigraph:!0,compound:!0,ranksep:D?1:nd.edgeLengthFactor,nodeSep:D?1:50,ranker:"tight-tree",isMultiGraph:!0}),w.setDefaultEdgeLabel(function(){return{}}),v.db.extract(s);const V=v.db.getStates(),W=v.db.getRelations(),j=Object.keys(V);for(const Ve of j){const Ae=V[Ve];let Qe;if(d&&(Ae.parentId=d),Ae.doc){let vt=a.append("g").attr("id",Ae.id).attr("class","stateGroup");Qe=tl(Ae.doc,vt,Ae.id,!f,p,y,v);{vt=Pv(vt,Ae,f);let Ft=vt.node().getBBox();Qe.width=Ft.width,Qe.height=Ft.height+nd.padding/2,ww[Ae.id]={y:nd.compositTitleSize}}}else Qe=pg(a,Ae);if(Ae.note){const Ft=pg(a,{descriptions:[],id:Ae.id+"-note",note:Ae.note,type:"note"});"left of"===Ae.note.position?(w.setNode(Qe.id+"-note",Ft),w.setNode(Qe.id,Qe)):(w.setNode(Qe.id,Qe),w.setNode(Qe.id+"-note",Ft)),w.setParent(Qe.id,Qe.id+"-group"),w.setParent(Qe.id+"-note",Qe.id+"-group")}else w.setNode(Qe.id,Qe)}Me.debug("Count=",w.nodeCount(),w);let X=0;W.forEach(function(Ve){X++,Me.debug("Setting edge",Ve),w.setEdge(Ve.id1,Ve.id2,{relation:Ve,width:p_(Ve.title),height:nd.labelHeight*tr.getRows(Ve.title).length,labelpos:"c"},"id"+X)}),(0,li.Zp)(w),Me.debug("Graph after layout",w.nodes());const Ee=a.node();w.nodes().forEach(function(Ve){void 0!==Ve&&void 0!==w.node(Ve)?(Me.warn("Node "+Ve+": "+JSON.stringify(w.node(Ve))),p.select("#"+Ee.id+" #"+Ve).attr("transform","translate("+(w.node(Ve).x-w.node(Ve).width/2)+","+(w.node(Ve).y+(ww[Ve]?ww[Ve].y:0)-w.node(Ve).height/2)+" )"),p.select("#"+Ee.id+" #"+Ve).attr("data-x-shift",w.node(Ve).x-w.node(Ve).width/2),y.querySelectorAll("#"+Ee.id+" #"+Ve+" .divider").forEach(Qe=>{const vt=Qe.parentElement;let Ft=0,Qt=0;vt&&(vt.parentElement&&(Ft=vt.parentElement.getBBox().width),Qt=parseInt(vt.getAttribute("data-x-shift"),10),Number.isNaN(Qt)&&(Qt=0)),Qe.setAttribute("x1",0-Qt+8),Qe.setAttribute("x2",Ft-Qt-8)})):Me.debug("No Node "+Ve+": "+JSON.stringify(w.node(Ve)))});let Ie=Ee.getBBox();w.edges().forEach(function(Ve){void 0!==Ve&&void 0!==w.edge(Ve)&&(Me.debug("Edge "+Ve.v+" -> "+Ve.w+": "+JSON.stringify(w.edge(Ve))),function(s,a,d){a.points=a.points.filter(C=>!Number.isNaN(C.y));const p=a.points,y=(0,F.n8j)().x(function(C){return C.x}).y(function(C){return C.y}).curve(F.qrM),v=s.append("path").attr("d",y(p)).attr("id","edge"+FA).attr("class","transition");let w="";if(ut().state.arrowMarkerAbsolute&&(w=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,w=w.replace(/\(/g,"\\("),w=w.replace(/\)/g,"\\)")),v.attr("marker-end","url("+w+"#"+function(C){switch(C){case yp.relationType.AGGREGATION:return"aggregation";case yp.relationType.EXTENSION:return"extension";case yp.relationType.COMPOSITION:return"composition";case yp.relationType.DEPENDENCY:return"dependency"}}(yp.relationType.DEPENDENCY)+"End)"),void 0!==d.title){const C=s.append("g").attr("class","stateLabel"),{x:D,y:V}=Br.calcLabelPosition(a.points),W=tr.getRows(d.title);let j=0;const X=[];let Ee=0,Ie=0;for(let Ae=0;Ae<=W.length;Ae++){const Qe=C.append("text").attr("text-anchor","middle").text(W[Ae]).attr("x",D).attr("y",V+j),vt=Qe.node().getBBox();Ee=Math.max(Ee,vt.width),Ie=Math.min(Ie,vt.x),Me.info(vt.x,D,V+j),0===j&&(j=Qe.node().getBBox().height,Me.info("Title height",j,V)),X.push(Qe)}let Pe=j*W.length;if(W.length>1){const Ae=(W.length-1)*j*.5;X.forEach((Qe,vt)=>Qe.attr("y",V+vt*j-Ae)),Pe=j*W.length}const Ve=C.node().getBBox();C.insert("rect",":first-child").attr("class","box").attr("x",D-Ee/2-ut().state.padding/2).attr("y",V-Pe/2-ut().state.padding/2-3.5).attr("width",Ee+ut().state.padding).attr("height",Pe+ut().state.padding),Me.info(Ve)}FA++}(a,w.edge(Ve),w.edge(Ve).relation))}),Ie=Ee.getBBox();const Pe={id:d||"root",label:d||"root",width:0,height:0};return Pe.width=Ie.width+2*nd.padding,Pe.height=Ie.height+2*nd.padding,Me.debug("Doc rendered",Pe,w),Pe},A0={setConf:function(){},draw:function(s,a,d,f){nd=ut().state;const p=ut().securityLevel;let y;"sandbox"===p&&(y=(0,F.Ltv)("#i"+a));const v=(0,F.Ltv)("sandbox"===p?y.nodes()[0].contentDocument.body:"body"),w="sandbox"===p?y.nodes()[0].contentDocument:document;Me.debug("Rendering diagram "+s);const C=v.select(`[id='${a}']`);(function(s){s.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")})(C),new Ki.T({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const V=f.db.getRootDoc();tl(V,C,void 0,!1,v,w,f);const W=nd.padding,j=C.node().getBBox(),X=j.width+2*W,Ee=j.height+2*W;tu(C,Ee,1.75*X,nd.useMaxWidth),C.attr("viewBox",`${j.x-nd.padding}  ${j.y-nd.padding} `+X+" "+Ee)}},k0="rect",Ru="rectWithTitle",Fm="statediagram",Lx=`${Fm}-state`,Bx="transition",Lm=`${Bx} note-edge`,Bv=`${Fm}-note`,Uv=`${Fm}-cluster`,Vx=`${Fm}-cluster-alt`,zv="----",Hv=`${zv}note`,gg=`${zv}parent`,Ux="fill:none",Pu="fill: #333";let __={},bp=0;function Bm(s="",a=0,d="",f=zv){return`state-${s}${null!==d&&d.length>0?`${f}${d}`:""}-${a}`}const D0=(s,a,d,f,p,y)=>{const v=d.id,w=function HA(s){return null==s?"":s.classes?s.classes.join(" "):""}(f[v]);if("root"!==v){let C=k0;!0===d.start&&(C="start"),!1===d.start&&(C="end"),d.type!==Sv&&(C=d.type),__[v]||(__[v]={id:v,shape:C,description:tr.sanitizeText(v,ut()),classes:`${w} ${Lx}`});const D=__[v];d.description&&(Array.isArray(D.description)?(D.shape=Ru,D.description.push(d.description)):D.description.length>0?(D.shape=Ru,D.description=D.description===v?[d.description]:[D.description,d.description]):(D.shape=k0,D.description=d.description),D.description=tr.sanitizeTextOrArray(D.description,ut())),1===D.description.length&&D.shape===Ru&&(D.shape=k0),!D.type&&d.doc&&(Me.info("Setting cluster for ",v,mg(d)),D.type="group",D.dir=mg(d),D.shape=d.type===pA?"divider":"roundedWithTitle",D.classes=D.classes+" "+Uv+" "+(y?Vx:""));const V={labelStyle:"",shape:D.shape,labelText:D.description,classes:D.classes,style:"",id:v,dir:D.dir,domId:Bm(v,bp),type:D.type,padding:15};if(d.note){const W={labelStyle:"",shape:"note",labelText:d.note.text,classes:Bv,style:"",id:v+Hv+"-"+bp,domId:Bm(v,bp,"note"),type:D.type,padding:15},j={labelStyle:"",shape:"noteGroup",labelText:d.note.text,classes:D.classes,style:"",id:v+gg,domId:Bm(v,bp,"parent"),type:"group",padding:0};bp++;const X=v+gg;s.setNode(X,j),s.setNode(W.id,W),s.setNode(v,V),s.setParent(v,X),s.setParent(W.id,X);let Ee=v,Ie=W.id;"left of"===d.note.position&&(Ee=W.id,Ie=v),s.setEdge(Ee,Ie,{arrowhead:"none",arrowType:"",style:Ux,labelStyle:"",classes:Lm,arrowheadStyle:Pu,labelpos:"c",labelType:"text",thickness:"normal"})}else s.setNode(v,V)}a&&"root"!==a.id&&(Me.trace("Setting node ",v," to be child of its parent ",a.id),s.setParent(v,a.id)),d.doc&&(Me.trace("Adding nodes children "),Ew(s,d,d.doc,f,p,!y))},Ew=(s,a,d,f,p,y)=>{Me.trace("items",d),d.forEach(v=>{switch(v.stmt){case pw:case Sv:D0(s,a,v,f,p,y);break;case Cx:{D0(s,a,v.state1,f,p,y),D0(s,a,v.state2,f,p,y);const w={id:"edge"+bp,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Ux,labelStyle:"",label:tr.sanitizeText(v.description,ut()),arrowheadStyle:Pu,labelpos:"c",labelType:"text",thickness:"normal",classes:Bx};s.setEdge(v.state1.id,v.state2.id,w,bp),bp++}}})},mg=(s,a="TB")=>{let d=a;if(s.doc)for(let f=0;f<s.doc.length;f++){const p=s.doc[f];"dir"===p.stmt&&(d=p.value)}return d},jx={setConf:function(s){const a=Object.keys(s);for(const d of a);},getClasses:function(s,a){Me.trace("Extracting classes"),a.db.clear();try{return a.parser.parse(s),a.db.extract(a.db.getRootDocV2()),a.db.getClasses()}catch(d){return d}},draw:function(s,a,d,f){Me.info("Drawing state diagram (v2)",a),__={};let p=f.db.getDirection();void 0===p&&(p="LR");const{securityLevel:y,state:v}=ut(),w=v.nodeSpacing||50,C=v.rankSpacing||50;Me.info(f.db.getRootDocV2()),f.db.extract(f.db.getRootDocV2()),Me.info(f.db.getRootDocV2());const D=f.db.getStates(),V=new Ki.T({multigraph:!0,compound:!0}).setGraph({rankdir:mg(f.db.getRootDocV2()),nodesep:w,ranksep:C,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let W;D0(V,void 0,f.db.getRootDocV2(),D,f.db,!0),"sandbox"===y&&(W=(0,F.Ltv)("#i"+a));const j=(0,F.Ltv)("sandbox"===y?W.nodes()[0].contentDocument.body:"body"),X=j.select(`[id="${a}"]`),Ee=j.select("#"+a+" g");$n(Ee,V,["barb"],Fm,a),Br.insertTitle(X,"statediagramTitleText",v.titleTopMargin,f.db.getDiagramTitle());const Pe=X.node().getBBox(),Ve=Pe.width+16,Ae=Pe.height+16;X.attr("class",Fm);const Qe=X.node().getBBox();tu(X,Ae,Ve,v.useMaxWidth);const vt=`${Qe.x-8} ${Qe.y-8} ${Ve} ${Ae}`;Me.debug(`viewBox ${vt}`),X.attr("viewBox",vt);const Ft=document.querySelectorAll('[id="'+a+'"] .edgeLabel .label');for(const Qt of Ft){const st=Qt.getBBox(),rt=document.createElementNS("http://www.w3.org/2000/svg",k0);rt.setAttribute("rx",0),rt.setAttribute("ry",0),rt.setAttribute("width",st.width),rt.setAttribute("height",st.height),Qt.insertBefore(rt,Qt.firstChild)}}};var _g=function(){var s=function(Ie,Pe,Ve,Ae){for(Ve=Ve||{},Ae=Ie.length;Ae--;Ve[Ie[Ae]]=Pe);return Ve},a=[1,2],d=[1,5],f=[6,9,11,17,18,20,22,23,24,26],p=[1,15],y=[1,16],v=[1,17],w=[1,18],C=[1,19],D=[1,20],V=[1,24],W=[4,6,9,11,17,18,20,22,23,24,26],j={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(Pe,Ve,Ae,Qe,vt,Ft,Qt){var st=Ft.length-1;switch(vt){case 1:return Ft[st-1];case 3:case 7:case 8:this.$=[];break;case 4:Ft[st-1].push(Ft[st]),this.$=Ft[st-1];break;case 5:case 6:this.$=Ft[st];break;case 11:Qe.setDiagramTitle(Ft[st].substr(6)),this.$=Ft[st].substr(6);break;case 12:this.$=Ft[st].trim(),Qe.setAccTitle(this.$);break;case 13:case 14:this.$=Ft[st].trim(),Qe.setAccDescription(this.$);break;case 15:Qe.addSection(Ft[st].substr(8)),this.$=Ft[st].substr(8);break;case 16:Qe.addTask(Ft[st-1],Ft[st]),this.$="task";break;case 18:Qe.parseDirective("%%{","open_directive");break;case 19:Qe.parseDirective(Ft[st],"type_directive");break;case 20:Ft[st]=Ft[st].trim().replace(/'/g,'"'),Qe.parseDirective(Ft[st],"arg_directive");break;case 21:Qe.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:a,7:3,12:4,26:d},{1:[3]},s(f,[2,3],{5:6}),{3:7,4:a,7:3,12:4,26:d},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:p,18:y,20:v,22:w,23:C,24:D,26:d},{1:[2,2]},{14:22,15:[1,23],29:V},s([15,29],[2,19]),s(f,[2,8],{1:[2,1]}),s(f,[2,4]),{7:21,10:25,12:4,17:p,18:y,20:v,22:w,23:C,24:D,26:d},s(f,[2,6]),s(f,[2,7]),s(f,[2,11]),{19:[1,26]},{21:[1,27]},s(f,[2,14]),s(f,[2,15]),{25:[1,28]},s(f,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},s(f,[2,5]),s(f,[2,12]),s(f,[2,13]),s(f,[2,16]),s(W,[2,9]),{14:32,29:V},{29:[2,20]},{11:[1,33]},s(W,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(Pe,Ve){if(!Ve.recoverable){var Ae=new Error(Pe);throw Ae.hash=Ve,Ae}this.trace(Pe)},parse:function(Pe){var Ae=[0],Qe=[],vt=[null],Ft=[],Qt=this.table,st="",rt=0,Ue=0,pe=Ft.slice.call(arguments,1),Ke=Object.create(this.lexer),J={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(J.yy[dt]=this.yy[dt]);Ke.setInput(Pe,J.yy),J.yy.lexer=Ke,J.yy.parser=this,typeof Ke.yylloc>"u"&&(Ke.yylloc={});var ae=Ke.yylloc;Ft.push(ae);var Tn,Ct=Ke.options&&Ke.options.ranges;this.parseError="function"==typeof J.yy.parseError?J.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Xt,Jt,L,P,Hn,Dn,nr,it={};;){if(this.defaultActions[Jt=Ae[Ae.length-1]]?L=this.defaultActions[Jt]:((null===Xt||typeof Xt>"u")&&(Tn=void 0,"number"!=typeof(Tn=Qe.pop()||Ke.lex()||1)&&(Tn instanceof Array&&(Tn=(Qe=Tn).pop()),Tn=this.symbols_[Tn]||Tn),Xt=Tn),L=Qt[Jt]&&Qt[Jt][Xt]),typeof L>"u"||!L.length||!L[0]){var xt;for(Hn in nr=[],Qt[Jt])this.terminals_[Hn]&&Hn>2&&nr.push("'"+this.terminals_[Hn]+"'");xt=Ke.showPosition?"Parse error on line "+(rt+1)+":\n"+Ke.showPosition()+"\nExpecting "+nr.join(", ")+", got '"+(this.terminals_[Xt]||Xt)+"'":"Parse error on line "+(rt+1)+": Unexpected "+(1==Xt?"end of input":"'"+(this.terminals_[Xt]||Xt)+"'"),this.parseError(xt,{text:Ke.match,token:this.terminals_[Xt]||Xt,line:Ke.yylineno,loc:ae,expected:nr})}if(L[0]instanceof Array&&L.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Jt+", token: "+Xt);switch(L[0]){case 1:Ae.push(Xt),vt.push(Ke.yytext),Ft.push(Ke.yylloc),Ae.push(L[1]),Xt=null,Ue=Ke.yyleng,st=Ke.yytext,rt=Ke.yylineno,ae=Ke.yylloc;break;case 2:if(it.$=vt[vt.length-(Dn=this.productions_[L[1]][1])],it._$={first_line:Ft[Ft.length-(Dn||1)].first_line,last_line:Ft[Ft.length-1].last_line,first_column:Ft[Ft.length-(Dn||1)].first_column,last_column:Ft[Ft.length-1].last_column},Ct&&(it._$.range=[Ft[Ft.length-(Dn||1)].range[0],Ft[Ft.length-1].range[1]]),typeof(P=this.performAction.apply(it,[st,Ue,rt,J.yy,L[1],vt,Ft].concat(pe)))<"u")return P;Dn&&(Ae=Ae.slice(0,-1*Dn*2),vt=vt.slice(0,-1*Dn),Ft=Ft.slice(0,-1*Dn)),Ae.push(this.productions_[L[1]][0]),vt.push(it.$),Ft.push(it._$),Ae.push(Qt[Ae[Ae.length-2]][Ae[Ae.length-1]]);break;case 3:return!0}}return!0}};function Ee(){this.yy={}}return j.lexer=function(){return{EOF:1,parseError:function(Ve,Ae){if(!this.yy.parser)throw new Error(Ve);this.yy.parser.parseError(Ve,Ae)},setInput:function(Pe,Ve){return this.yy=Ve||this.yy||{},this._input=Pe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Pe=this._input[0];return this.yytext+=Pe,this.yyleng++,this.offset++,this.match+=Pe,this.matched+=Pe,Pe.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pe},unput:function(Pe){var Ve=Pe.length,Ae=Pe.split(/(?:\r\n?|\n)/g);this._input=Pe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ve),this.offset-=Ve;var Qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ae.length-1&&(this.yylineno-=Ae.length-1);var vt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ae?(Ae.length===Qe.length?this.yylloc.first_column:0)+Qe[Qe.length-Ae.length].length-Ae[0].length:this.yylloc.first_column-Ve},this.options.ranges&&(this.yylloc.range=[vt[0],vt[0]+this.yyleng-Ve]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Pe){this.unput(this.match.slice(Pe))},pastInput:function(){var Pe=this.matched.substr(0,this.matched.length-this.match.length);return(Pe.length>20?"...":"")+Pe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Pe=this.match;return Pe.length<20&&(Pe+=this._input.substr(0,20-Pe.length)),(Pe.substr(0,20)+(Pe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Pe=this.pastInput(),Ve=new Array(Pe.length+1).join("-");return Pe+this.upcomingInput()+"\n"+Ve+"^"},test_match:function(Pe,Ve){var Ae,Qe,vt;if(this.options.backtrack_lexer&&(vt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(vt.yylloc.range=this.yylloc.range.slice(0))),(Qe=Pe[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Qe?Qe[Qe.length-1].length-Qe[Qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pe[0].length},this.yytext+=Pe[0],this.match+=Pe[0],this.matches=Pe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pe[0].length),this.matched+=Pe[0],Ae=this.performAction.call(this,this.yy,this,Ve,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ae)return Ae;if(this._backtrack){for(var Ft in vt)this[Ft]=vt[Ft];return!1}return!1},next:function(){if(this.done)return this.EOF;var Pe,Ve,Ae,Qe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var vt=this._currentRules(),Ft=0;Ft<vt.length;Ft++)if((Ae=this._input.match(this.rules[vt[Ft]]))&&(!Ve||Ae[0].length>Ve[0].length)){if(Ve=Ae,Qe=Ft,this.options.backtrack_lexer){if(!1!==(Pe=this.test_match(Ae,vt[Ft])))return Pe;if(this._backtrack){Ve=!1;continue}return!1}if(!this.options.flex)break}return Ve?!1!==(Pe=this.test_match(Ve,vt[Qe]))&&Pe:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ve){this.conditionStack.push(Ve)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ve){return(Ve=this.conditionStack.length-1-Math.abs(Ve||0))>=0?this.conditionStack[Ve]:"INITIAL"},pushState:function(Ve){this.begin(Ve)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Ve,Ae,Qe,vt){switch(Qe){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:case 8:case 9:break;case 7:return 11;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}}}(),Ee.prototype=j,j.Parser=Ee,new Ee}();_g.parser=_g;const Sw=_g,Aw=s=>null!==s.match(/^\s*journey/);let M0="";const $v=[],Vm=[],y_=[],Yx=function(){const s=function(d){return y_[d].processed};let a=!0;for(const[d,f]of y_.entries())s(d),a=a&&f.processed;return a},Xx={parseDirective:function(s,a,d){_r.parseDirective(this,s,a,d)},getConfig:()=>ut().journey,clear:function(){$v.length=0,Vm.length=0,M0="",y_.length=0,je()},setDiagramTitle:Nt,getDiagramTitle:cn,setAccTitle:Je,getAccTitle:pt,setAccDescription:et,getAccDescription:Mt,addSection:function(s){M0=s,$v.push(s)},getSections:function(){return $v},getTasks:function(){let s=Yx(),d=0;for(;!s&&d<100;)s=Yx(),d++;return Vm.push(...y_),Vm},addTask:function(s,a){const d=a.substr(1).split(":");let f=0,p=[];1===d.length?(f=Number(d[0]),p=[]):(f=Number(d[0]),p=d[1].split(","));const y=p.map(w=>w.trim());y_.push({section:M0,type:M0,people:y,task:s,score:f})},addTaskOrg:function(s){Vm.push({section:M0,type:M0,description:s,task:s,classes:[]})},getActors:function(){return function(){const s=[];return Vm.forEach(d=>{d.people&&s.push(...d.people)}),[...new Set(s)].sort()}()}},zm=function(s,a){const d=s.append("rect");return d.attr("x",a.x),d.attr("y",a.y),d.attr("fill",a.fill),d.attr("stroke",a.stroke),d.attr("width",a.width),d.attr("height",a.height),d.attr("rx",a.rx),d.attr("ry",a.ry),void 0!==a.class&&d.attr("class",a.class),d},qx=function(s,a){const d=s.append("circle");return d.attr("cx",a.cx),d.attr("cy",a.cy),d.attr("class","actor-"+a.pos),d.attr("fill",a.fill),d.attr("stroke",a.stroke),d.attr("r",a.r),void 0!==d.class&&d.attr("class",d.class),void 0!==a.title&&d.append("title").text(a.title),d};let Zx=-1;const Qx=function(){function s(p,y,v,w,C,D,V,W){f(y.append("text").attr("x",v+C/2).attr("y",w+D/2+5).style("font-color",W).style("text-anchor","middle").text(p),V)}function a(p,y,v,w,C,D,V,W,j){const{taskFontSize:X,taskFontFamily:Ee}=W,Ie=p.split(/<br\s*\/?>/gi);for(let Pe=0;Pe<Ie.length;Pe++){const Ve=Pe*X-X*(Ie.length-1)/2,Ae=y.append("text").attr("x",v+C/2).attr("y",w).attr("fill",j).style("text-anchor","middle").style("font-size",X).style("font-family",Ee);Ae.append("tspan").attr("x",v+C/2).attr("dy",Ve).text(Ie[Pe]),Ae.attr("y",w+D/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),f(Ae,V)}}function d(p,y,v,w,C,D,V,W){const j=y.append("switch"),Ee=j.append("foreignObject").attr("x",v).attr("y",w).attr("width",C).attr("height",D).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ee.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(p),a(p,j,v,w,C,D,V,W),f(Ee,V)}function f(p,y){for(const v in y)v in y&&p.attr(v,y[v])}return function(p){return"fo"===p.textPlacement?d:"old"===p.textPlacement?s:a}}(),v__drawCircle=qx,v__drawSection=function(s,a,d){const f=s.append("g"),p={x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0};p.x=a.x,p.y=a.y,p.fill=a.fill,p.width=d.width,p.height=d.height,p.class="journey-section section-type-"+a.num,p.rx=3,p.ry=3,zm(f,p),Qx(d)(a.text,f,p.x,p.y,p.width,p.height,{class:"journey-section section-type-"+a.num},d,a.colour)},v__drawText=function(s,a){const d=a.text.replace(/<br\s*\/?>/gi," "),f=s.append("text");f.attr("x",a.x),f.attr("y",a.y),f.attr("class","legend"),f.style("text-anchor",a.anchor),void 0!==a.class&&f.attr("class",a.class);const p=f.append("tspan");return p.attr("x",a.x+2*a.textMargin),p.text(d),f},v__drawTask=function(s,a,d){const f=a.x+d.width/2,p=s.append("g");Zx++,p.append("line").attr("id","task"+Zx).attr("x1",f).attr("y1",a.y).attr("x2",f).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),function(s,a){s.append("circle").attr("cx",a.cx).attr("cy",a.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible");const p=s.append("g");p.append("circle").attr("cx",a.cx-5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),p.append("circle").attr("cx",a.cx+5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),a.score>3?function y(C){const D=(0,F.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);C.append("path").attr("class","mouth").attr("d",D).attr("transform","translate("+a.cx+","+(a.cy+2)+")")}(p):a.score<3?function v(C){const D=(0,F.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);C.append("path").attr("class","mouth").attr("d",D).attr("transform","translate("+a.cx+","+(a.cy+7)+")")}(p):function w(C){C.append("line").attr("class","mouth").attr("stroke",2).attr("x1",a.cx-5).attr("y1",a.cy+7).attr("x2",a.cx+5).attr("y2",a.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}(p)}(p,{cx:f,cy:300+30*(5-a.score),score:a.score});const v={x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0};v.x=a.x,v.y=a.y,v.fill=a.fill,v.width=d.width,v.height=d.height,v.class="task task-type-"+a.num,v.rx=3,v.ry=3,zm(p,v);let w=a.x+14;a.people.forEach(C=>{qx(p,{cx:w,cy:a.y,r:7,fill:a.actors[C].color,stroke:"#000",title:C,pos:a.actors[C].position}),w+=10}),Qx(d)(a.task,p,v.x,v.y,v.width,v.height,{class:"task"},d,a.colour)},wp={},Wv=ut().journey,yg=Wv.leftMargin,Wl={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(s,a,d,f){s[a]=void 0===s[a]?d:f(d,s[a])},updateBounds:function(s,a,d,f){const p=ut().journey,y=this;let v=0;this.sequenceItems.forEach(function w(C){return function(V){v++;const W=y.sequenceItems.length-v+1;y.updateVal(V,"starty",a-W*p.boxMargin,Math.min),y.updateVal(V,"stopy",f+W*p.boxMargin,Math.max),y.updateVal(Wl.data,"startx",s-W*p.boxMargin,Math.min),y.updateVal(Wl.data,"stopx",d+W*p.boxMargin,Math.max),"activation"!==C&&(y.updateVal(V,"startx",s-W*p.boxMargin,Math.min),y.updateVal(V,"stopx",d+W*p.boxMargin,Math.max),y.updateVal(Wl.data,"starty",a-W*p.boxMargin,Math.min),y.updateVal(Wl.data,"stopy",f+W*p.boxMargin,Math.max))}}())},insert:function(s,a,d,f){const p=Math.min(s,d),y=Math.max(s,d),v=Math.min(a,f),w=Math.max(a,f);this.updateVal(Wl.data,"startx",p,Math.min),this.updateVal(Wl.data,"starty",v,Math.min),this.updateVal(Wl.data,"stopx",y,Math.max),this.updateVal(Wl.data,"stopy",w,Math.max),this.updateBounds(p,v,y,w)},bumpVerticalPos:function(s){this.verticalPos=this.verticalPos+s,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Mw=Wv.sectionFills,eE=Wv.sectionColours,nE={setConf:function(s){Object.keys(s).forEach(function(d){Wv[d]=s[d]})},draw:function(s,a,d,f){const p=ut().journey;f.db.clear(),f.parser.parse(s+"\n");const y=ut().securityLevel;let v;"sandbox"===y&&(v=(0,F.Ltv)("#i"+a));const w=(0,F.Ltv)("sandbox"===y?v.nodes()[0].contentDocument.body:"body");Wl.init();const C=w.select("#"+a);!function(s){s.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}(C);const D=f.db.getTasks(),V=f.db.getDiagramTitle(),W=f.db.getActors();for(const Ve in wp)delete wp[Ve];let j=0;W.forEach(Ve=>{wp[Ve]={color:p.actorColours[j%p.actorColours.length],position:j},j++}),function ek(s){const a=ut().journey;let d=60;Object.keys(wp).forEach(f=>{v__drawCircle(s,{cx:20,cy:d,r:7,fill:wp[f].color,stroke:"#000",pos:wp[f].position}),v__drawText(s,{x:40,y:d+7,fill:"#666",text:f,textMargin:5|a.boxTextMargin}),d+=20})}(C),Wl.insert(0,0,yg,50*Object.keys(wp).length),function(s,a,d){const f=ut().journey;let p="";const v=d+(2*f.height+f.diagramMarginY);let w=0,C="#CCC",D="black",V=0;for(const[W,j]of a.entries()){p!==j.section&&(C=Mw[w%Mw.length],V=w%Mw.length,D=eE[w%eE.length],v__drawSection(s,{x:W*f.taskMargin+W*f.width+yg,y:50,text:j.section,fill:C,num:V,colour:D},f),p=j.section,w++);const X=j.people.reduce((Ee,Ie)=>(wp[Ie]&&(Ee[Ie]=wp[Ie]),Ee),{});j.x=W*f.taskMargin+W*f.width+yg,j.y=v,j.width=f.diagramMarginX,j.height=f.diagramMarginY,j.colour=D,j.fill=C,j.num=V,j.actors=X,v__drawTask(s,j,f),Wl.insert(j.x,j.y,j.x+j.width+f.taskMargin,450)}}(C,D,0);const X=Wl.getBounds();V&&C.append("text").text(V).attr("x",yg).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const Ee=X.stopy-X.starty+2*p.diagramMarginY,Ie=yg+X.stopx+2*p.diagramMarginX;tu(C,Ee,Ie,p.useMaxWidth),C.append("line").attr("x1",yg).attr("y1",4*p.height).attr("x2",Ie-yg-4).attr("y2",4*p.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const Pe=V?70:0;C.attr("viewBox",`${X.startx} -25 ${Ie} ${Ee+Pe}`),C.attr("preserveAspectRatio","xMinYMin meet"),C.attr("height",Ee+Pe+25)}};let Iw={};const Hm={setConf:function(s){Iw={...Iw,...s}},draw:(s,a,d)=>{try{Me.debug("Renering svg for syntax error\n");const f=(0,F.Ltv)("#"+a),p=f.append("g");p.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),p.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),p.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),p.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),p.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),p.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),p.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),p.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+d),f.attr("height",100),f.attr("width",500),f.attr("viewBox","768 0 912 512")}catch(f){Me.error("Error while rendering info diagram"),Me.error(function $f(s){return s instanceof Error?s.message:String(s)}(f))}}},I0="flowchart-elk",jm={id:I0,detector:(s,a)=>{var d;return!!(s.match(/^\s*flowchart-elk/)||s.match(/^\s*flowchart|graph/)&&"elk"===(null==(d=a?.flowchart)?void 0:d.defaultRenderer))},loader:function(){var s=(0,R.A)(function*(){const{diagram:a}=yield O.e(504).then(O.bind(O,3504));return{id:I0,diagram:a}});return function(){return s.apply(this,arguments)}}()},N0="timeline",$m={id:N0,detector:s=>null!==s.match(/^\s*timeline/),loader:function(){var s=(0,R.A)(function*(){const{diagram:a}=yield Promise.all([O.e(76),O.e(191)]).then(O.bind(O,3191));return{id:N0,diagram:a}});return function(){return s.apply(this,arguments)}}()},O0="mindmap",iE={id:O0,detector:s=>null!==s.match(/^\s*mindmap/),loader:function(){var s=(0,R.A)(function*(){const{diagram:a}=yield Promise.all([O.e(76),O.e(138)]).then(O.bind(O,3138));return{id:O0,diagram:a}});return function(){return s.apply(this,arguments)}}()};let Nw=!1;const Wm=()=>{Nw||(Nw=!0,Z(jm,$m,iE),kn("error",{db:{clear:()=>{}},styles:ka,renderer:Hm,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},s=>"error"===s.toLowerCase().trim()),kn("---",{db:{clear:()=>{}},styles:ka,renderer:Hm,parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with unindented `---` blocks")}},init:()=>null},s=>s.toLowerCase().trimStart().startsWith("---")),kn("c4",{parser:tm,db:Jf,renderer:jb,styles:Kp,init:s=>{jb.setConf(s.c4)}},ah),kn("class",{parser:$b,db:Ed,renderer:tT,styles:Gf,init:s=>{s.class||(s.class={}),s.class.arrowMarkerAbsolute=s.arrowMarkerAbsolute,Ed.clear()}},eT),kn("classDiagram",{parser:$b,db:Ed,renderer:ws,styles:Gf,init:s=>{s.class||(s.class={}),s.class.arrowMarkerAbsolute=s.arrowMarkerAbsolute,Ed.clear()}},Wb),kn("er",{parser:Dt,db:fo,renderer:o3,styles:zg},Si),kn("gantt",{parser:_3,db:cv,renderer:UT,styles:Hg},DT),kn("info",{parser:R3,db:hM,renderer:F3,styles:X0},jT),kn("pie",{parser:L3,db:B2,renderer:B3,styles:jg},$T),kn("requirement",{parser:V3,db:n_,renderer:X3,styles:cl},yM),kn("sequence",{parser:q3,db:J2,renderer:dw,styles:q0,init:s=>{if(s.sequence||(s.sequence={}),s.sequence.arrowMarkerAbsolute=s.arrowMarkerAbsolute,"sequenceDiagram"in s)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");J2.setWrap(s.wrap),dw.setConf(s.sequence)}},JT),kn("state",{parser:hw,db:yp,renderer:A0,styles:nu,init:s=>{s.state||(s.state={}),s.state.arrowMarkerAbsolute=s.arrowMarkerAbsolute,yp.clear()}},bx),kn("stateDiagram",{parser:hw,db:yp,renderer:jx,styles:nu,init:s=>{s.state||(s.state={}),s.state.arrowMarkerAbsolute=s.arrowMarkerAbsolute,yp.clear()}},wx),kn("journey",{parser:Sw,db:Xx,renderer:nE,styles:K0,init:s=>{nE.setConf(s.journey),Xx.clear()}},Aw),kn("flowchart",{parser:Hy,db:mh,renderer:ev,styles:Yf,init:s=>{s.flowchart||(s.flowchart={}),s.flowchart.arrowMarkerAbsolute=s.arrowMarkerAbsolute,function(s){const a=Object.keys(s);for(const d of a)xm[d]=s[d]}(s.flowchart),mh.clear(),mh.setGen("gen-1")}},a3),kn("flowchart-v2",{parser:Hy,db:mh,renderer:ev,styles:Yf,init:s=>{s.flowchart||(s.flowchart={}),s.flowchart.arrowMarkerAbsolute=s.arrowMarkerAbsolute,wc({flowchart:{arrowMarkerAbsolute:s.arrowMarkerAbsolute}}),ev.setConf(s.flowchart),mh.clear(),mh.setGen("gen-2")}},l3),kn("gitGraph",{parser:ds,db:ay,renderer:Gh,styles:ru},Qa))};class Yv{constructor(a,d){var f,p;this.txt=a,this.type="graph",this.detectTypeFailed=!1;const y=ut();this.txt=a;try{this.type=M(a,y)}catch(C){this.handleError(C,d),this.type="error",this.detectTypeFailed=!0}const v=Er(this.type);Me.debug("Type "+this.type),this.db=v.db,null==(p=(f=this.db).clear)||p.call(f),this.renderer=v.renderer,this.parser=v.parser;const w=this.parser.parse.bind(this.parser);this.parser.parse=C=>w(function Xu(s,a){var d;const f=s.match(jf);if(f){const p=Fg(f[1],{schema:yd});return p?.title&&(null==(d=a.setDiagramTitle)||d.call(a,p.title)),s.slice(f[0].length)}return s}(C,this.db)),this.parser.parser.yy=this.db,v.init&&(v.init(y),Me.info("Initialized diagram "+this.type,y)),this.txt+="\n",this.parse(this.txt,d)}parse(a,d){var f,p;if(this.detectTypeFailed)return!1;try{return a+="\n",null==(p=(f=this.db).clear)||p.call(f),this.parser.parse(a),!0}catch(y){this.handleError(y,d)}return!1}handleError(a,d){if(void 0===d)throw a;Ul(a)?d(a.str,a.hash):d(a)}getParser(){return this.parser}getType(){return this.type}}const Xv=(s,a)=>{const d=M(s,ut());try{Er(d)}catch{const p=(s=>Jl[s].loader)(d);if(!p)throw new Error(`Diagram ${d} not found.`);return p().then(({diagram:y})=>(kn(d,y,void 0),new Yv(s,a)))}return new Yv(s,a)},qv=Yv,pf=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],oE="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",aE="sandbox",Qv="http://www.w3.org/1999/xlink",lE="http://www.w3.org/1999/xhtml",uE=["foreignobject"],Il=["dominant-baseline"];function Rw(){return(Rw=(0,R.A)(function*(s,a){return Wm(),(yield Xv(s,a)).parse(s,a)})).apply(this,arguments)}const Pw=function(s){let a=s;return a=a.replace(/style.*:\S*#.*;/g,function(d){return d.substring(0,d.length-1)}),a=a.replace(/classDef.*:\S*#.*;/g,function(d){return d.substring(0,d.length-1)}),a=a.replace(/#\w+;/g,function(d){const f=d.substring(1,d.length-1);return/^\+?\d+$/.test(f)?"\ufb02\xb0\xb0"+f+"\xb6\xdf":"\ufb02\xb0"+f+"\xb6\xdf"}),a},Fw=function(s){let a=s;return a=a.replace(/\ufb02\xb0\xb0/g,"&#"),a=a.replace(/\ufb02\xb0/g,"&"),a=a.replace(/\xb6\xdf/g,";"),a},Lw=(s,a,d=[])=>`\n.${s} ${a} { ${d.join(" !important; ")} !important; }`,P0=(s,a,d,f)=>{const p=((s,a,d={})=>{var f;let p="";if(void 0!==s.themeCSS&&(p+=`\n${s.themeCSS}`),void 0!==s.fontFamily&&(p+=`\n:root { --mermaid-font-family: ${s.fontFamily}}`),void 0!==s.altFontFamily&&(p+=`\n:root { --mermaid-alt-font-family: ${s.altFontFamily}}`),!(0,ys.A)(d)&&pf.includes(a)){const C=s.htmlLabels||(null==(f=s.flowchart)?void 0:f.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const D in d){const V=d[D];(0,ys.A)(V.styles)||C.forEach(W=>{p+=Lw(V.id,W,V.styles)}),(0,ys.A)(V.textStyles)||(p+=Lw(V.id,"tspan",V.textStyles))}}return p})(s,a,d);return yn(Ir(`${f}{${((s,a,d)=>{let f="";return s in Hl&&Hl[s]?f=Hl[s](d):Me.warn(`No theme found for ${s}`),` & {\n    font-family: ${d.fontFamily};\n    font-size: ${d.fontSize};\n    fill: ${d.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${d.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${d.errorTextColor};\n    stroke: ${d.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${d.lineColor};\n    stroke: ${d.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${d.lineColor};\n  }\n\n  & svg {\n    font-family: ${d.fontFamily};\n    font-size: ${d.fontSize};\n  }\n\n  ${f}\n\n  ${a}\n`})(a,p,s.themeVariables)}}`),Ln)},fE=(s="",a,d)=>{let f=s;return!d&&!a&&(f=f.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),f=Fw(f),f=f.replace(/<br>/g,"<br/>"),f},pE=(s="",a)=>`<iframe style="width:100%;height:${a?a.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+s+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,S_=(s,a,d,f,p)=>{const y=s.append("div");y.attr("id",d),f&&y.attr("style",f);const v=y.append("svg").attr("id",a).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return p&&v.attr("xmlns:xlink",p),v.append("g"),s};function Jv(s,a){return s.append("iframe").attr("id",a).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const Bw=(s,a,d,f)=>{var p,y,v;null==(p=s.getElementById(a))||p.remove(),null==(y=s.getElementById(d))||y.remove(),null==(v=s.getElementById(f))||v.remove()};function Cp(s,a,d,f){(function sE(s,a){s.attr("role","graphics-document document"),(0,ys.A)(a)||s.attr("aria-roledescription",a)})(a,s),function Kv(s,a,d,f){if(void 0!==s.insert){if(!a&&!d)return;if(d){const p="chart-desc-"+f;s.attr("aria-describedby",p),s.insert("desc",":first-child").attr("id",p).text(d)}if(a){const p="chart-title-"+f;s.attr("aria-labelledby",p),s.insert("title",":first-child").attr("id",p).text(a)}}}(a,d,f,a.attr("id"))}const _r=Object.freeze({render:function(s,a,d,f){var p,y,v,w;Wm(),th();const C=Br.detectInit(a);C&&(Ba(C),Lg(C));const D=ut();Me.debug(D),a.length>(D?.maxTextSize??5e4)&&(a=oE),a=a.replace(/\r\n?/g,"\n");const V="#"+s,W="i"+s,j="#"+W,X="d"+s,Ee="#"+X;let Ie=(0,F.Ltv)("body");const Pe=D.securityLevel===aE,Ve="loose"===D.securityLevel,Ae=D.fontFamily;if(void 0!==f){if(f&&(f.innerHTML=""),Pe){const Jn=Jv((0,F.Ltv)(f),W);Ie=(0,F.Ltv)(Jn.nodes()[0].contentDocument.body),Ie.node().style.margin=0}else Ie=(0,F.Ltv)(f);S_(Ie,s,X,`font-family: ${Ae}`,Qv)}else{if(Bw(document,s,X,W),Pe){const Jn=Jv((0,F.Ltv)("body"),W);Ie=(0,F.Ltv)(Jn.nodes()[0].contentDocument.body),Ie.node().style.margin=0}else Ie=(0,F.Ltv)("body");S_(Ie,s,X)}let Qe,vt;a=Pw(a);try{if(Qe=Xv(a),"then"in Qe)throw new Error("Diagram is a promise. Use renderAsync.")}catch(Jn){Qe=new qv("error"),vt=Jn}const Ft=Ie.select(Ee).node(),Qt=Qe.type,st=Ft.firstChild,rt=st.firstChild,Ue=pf.includes(Qt)?Qe.renderer.getClasses(a,Qe):{},qe=P0(D,Qt,Ue,V),$e=document.createElement("style");$e.innerHTML=qe,st.insertBefore($e,rt);try{Qe.renderer.draw(a,s,wd,Qe)}catch(Jn){throw Hm.draw(a,s,wd),Jn}Cp(Qt,Ie.select(`${Ee} svg`),null==(y=(p=Qe.db).getAccTitle)?void 0:y.call(p),null==(w=(v=Qe.db).getAccDescription)?void 0:w.call(v)),Ie.select(`[id="${s}"]`).selectAll("foreignobject > *").attr("xmlns",lE);let dt=Ie.select(Ee).node().innerHTML;if(Me.debug("config.arrowMarkerAbsolute",D.arrowMarkerAbsolute),dt=fE(dt,Pe,Io(D.arrowMarkerAbsolute)),Pe){const Jn=Ie.select(Ee+" svg").node();dt=pE(dt,Jn)}else Ve||(dt=x().sanitize(dt,{ADD_TAGS:uE,ADD_ATTR:Il}));if(void 0!==d)switch(Qt){case"flowchart":case"flowchart-v2":d(dt,mh.bindFunctions);break;case"gantt":d(dt,cv.bindFunctions);break;case"class":case"classDiagram":d(dt,Ed.bindFunctions);break;default:d(dt)}else Me.debug("CB = undefined!");tA();const Ct=(0,F.Ltv)(Pe?j:Ee).node();if(Ct&&"remove"in Ct&&Ct.remove(),vt)throw vt;return dt},renderAsync:function(){var s=(0,R.A)(function*(a,d,f,p){var y,v,w,C;Wm(),th();const D=Br.detectInit(d);D&&(Ba(D),Lg(D));const V=ut();Me.debug(V),d.length>(V?.maxTextSize??5e4)&&(d=oE),d=d.replace(/\r\n?/g,"\n");const W="#"+a,j="i"+a,X="#"+j,Ee="d"+a,Ie="#"+Ee;let Pe=(0,F.Ltv)("body");const Ve=V.securityLevel===aE,Ae="loose"===V.securityLevel,Qe=V.fontFamily;if(void 0!==p){if(p&&(p.innerHTML=""),Ve){const Xt=Jv((0,F.Ltv)(p),j);Pe=(0,F.Ltv)(Xt.nodes()[0].contentDocument.body),Pe.node().style.margin=0}else Pe=(0,F.Ltv)(p);S_(Pe,a,Ee,`font-family: ${Qe}`,Qv)}else{if(Bw(document,a,Ee,j),Ve){const Xt=Jv((0,F.Ltv)("body"),j);Pe=(0,F.Ltv)(Xt.nodes()[0].contentDocument.body),Pe.node().style.margin=0}else Pe=(0,F.Ltv)("body");S_(Pe,a,Ee)}let vt,Ft;d=Pw(d);try{vt=yield Xv(d)}catch(Xt){vt=new qv("error"),Ft=Xt}const Qt=Pe.select(Ie).node(),st=vt.type,rt=Qt.firstChild,Ue=rt.firstChild,qe=pf.includes(st)?vt.renderer.getClasses(d,vt):{},$e=P0(V,st,qe,W),pe=document.createElement("style");pe.innerHTML=$e,rt.insertBefore(pe,Ue);try{yield vt.renderer.draw(d,a,wd,vt)}catch(Xt){throw Hm.draw(d,a,wd),Xt}Cp(st,Pe.select(`${Ie} svg`),null==(v=(y=vt.db).getAccTitle)?void 0:v.call(y),null==(C=(w=vt.db).getAccDescription)?void 0:C.call(w)),Pe.select(`[id="${a}"]`).selectAll("foreignobject > *").attr("xmlns",lE);let ae=Pe.select(Ie).node().innerHTML;if(Me.debug("config.arrowMarkerAbsolute",V.arrowMarkerAbsolute),ae=fE(ae,Ve,Io(V.arrowMarkerAbsolute)),Ve){const Xt=Pe.select(Ie+" svg").node();ae=pE(ae,Xt)}else Ae||(ae=x().sanitize(ae,{ADD_TAGS:uE,ADD_ATTR:Il}));if(void 0!==f)switch(st){case"flowchart":case"flowchart-v2":f(ae,mh.bindFunctions);break;case"gantt":f(ae,cv.bindFunctions);break;case"class":case"classDiagram":f(ae,Ed.bindFunctions);break;default:f(ae)}else Me.debug("CB = undefined!");tA();const Jn=(0,F.Ltv)(Ve?X:Ie).node();if(Jn&&"remove"in Jn&&Jn.remove(),Ft)throw Ft;return ae});return function(d,f,p,y){return s.apply(this,arguments)}}(),parse:function dE(s,a){return Wm(),new qv(s,a).parse(s,a)},parseAsync:function ok(s,a){return Rw.apply(this,arguments)},parseDirective:Li,initialize:function Vw(s={}){var a;s?.fontFamily&&!(null!=(a=s.themeVariables)&&a.fontFamily)&&(s.themeVariables={fontFamily:s.fontFamily}),(s=>{qu=Re({},s)})(s),s?.theme&&s.theme in ol?s.themeVariables=ol[s.theme].getThemeVariables(s.themeVariables):s&&(s.themeVariables=ol.default.getThemeVariables(s.themeVariables));const d="object"==typeof s?(s=>(Va=Re({},Fo),Va=Re(Va,s),s.theme&&ol[s.theme]&&(Va.themeVariables=ol[s.theme].getThemeVariables(s.themeVariables)),Aa(Va,go),Va))(s):eh();Mo(d.logLevel),Wm()},getConfig:ut,setConfig:wc,getSiteConfig:eh,updateSiteConfig:s=>(Va=Re(Va,s),Aa(Va,go),Va),reset:()=>{th()},globalReset:()=>{th(Fo)},defaultConfig:Fo});Mo(ut().logLevel),th(ut());const gf=function(){var s=(0,R.A)(function*(a,d,f){try{yield kd(a,d,f)}catch(p){Me.warn("Syntax Error rendering"),Ul(p)&&Me.warn(p.str),rd.parseError&&rd.parseError(p)}});return function(d,f,p){return s.apply(this,arguments)}}(),gE=(s,a,d)=>{Me.warn(s),Ul(s)?(d&&d(s.str,s.hash),a.push({...s,message:s.str,error:s})):(d&&d(s),s instanceof Error&&a.push({str:s.message,message:s.message,hash:s.name,error:s}))},mf=function(){var s=(0,R.A)(function*(...a){Me.debug(`Loading ${a.length} external diagrams`);const f=(yield Promise.allSettled(a.map(function(){var p=(0,R.A)(function*({id:y,detector:v,loader:w}){const{diagram:C}=yield w();kn(y,C,v)});return function(y){return p.apply(this,arguments)}}()))).filter(p=>"rejected"===p.status);if(f.length>0){Me.error(`Failed to load ${f.length} external diagrams`);for(const p of f)Me.error(p);throw new Error(`Failed to load ${f.length} external diagrams`)}});return function(){return s.apply(this,arguments)}}(),kd=function(){var s=(0,R.A)(function*(a,d,f){const p=_r.getConfig();let y;if(a&&(rd.sequenceConfig=a),Me.debug((f?"":"No ")+"Callback function found"),void 0===d)y=document.querySelectorAll(".mermaid");else if("string"==typeof d)y=document.querySelectorAll(d);else if(d instanceof HTMLElement)y=[d];else{if(!(d instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");y=d}Me.debug(`Found ${y.length} diagrams`),void 0!==a?.startOnLoad&&(Me.debug("Start On Load: "+a?.startOnLoad),_r.updateSiteConfig({startOnLoad:a?.startOnLoad}));const v=new Br.initIdGenerator(p.deterministicIds,p.deterministicIDSeed);let w;const C=[];for(const D of Array.from(y)){if(Me.info("Rendering diagram: "+D.id),D.getAttribute("data-processed"))continue;D.setAttribute("data-processed","true");const V=`mermaid-${v.next()}`;w=D.innerHTML,w=q(Br.entityDecode(w)).trim().replace(/<br\s*\/?>/gi,"<br/>");const W=Br.detectInit(w);W&&Me.debug("Detected early reinit: ",W);try{yield _r.renderAsync(V,w,(j,X)=>{D.innerHTML=j,void 0!==f&&f(V),X&&X(D)},D)}catch(j){gE(j,C,rd.parseError)}}if(C.length>0)throw C[0]});return function(d,f,p){return s.apply(this,arguments)}}(),mE=function(){var s=(0,R.A)(function*(a,{lazyLoad:d=!0}={}){d?Z(...a):yield mf(...a)});return function(d){return s.apply(this,arguments)}}(),Uw=function(){if(rd.startOnLoad){const{startOnLoad:s}=_r.getConfig();s&&rd.init().catch(a=>Me.error("Mermaid failed to initialize",a))}};typeof document<"u"&&window.addEventListener("load",Uw,!1);const eb=[];let zw=!1;const tb=function(){var s=(0,R.A)(function*(){if(!zw){for(zw=!0;eb.length>0;){const a=eb.shift();if(a)try{yield a()}catch(d){Me.error("Error executing queue",d)}}zw=!1}});return function(){return s.apply(this,arguments)}}(),rd={startOnLoad:!0,diagrams:{},mermaidAPI:_r,parse:s=>_r.parse(s,rd.parseError),parseAsync:s=>new Promise((a,d)=>{eb.push(()=>new Promise((p,y)=>{_r.parseAsync(s,rd.parseError).then(v=>{p(v),a(v)},v=>{Me.error("Error parsing",v),y(v),d(v)})})),tb().catch(d)}),render:_r.render,renderAsync:(s,a,d,f)=>new Promise((p,y)=>{eb.push(()=>new Promise((w,C)=>{_r.renderAsync(s,a,d,f).then(D=>{w(D),p(D)},D=>{Me.error("Error parsing",D),C(D),y(D)})})),tb().catch(y)}),init:gf,initThrowsErrors:function(s,a,d){const f=_r.getConfig();let p;if(s&&(rd.sequenceConfig=s),Me.debug((d?"":"No ")+"Callback function found"),void 0===a)p=document.querySelectorAll(".mermaid");else if("string"==typeof a)p=document.querySelectorAll(a);else if(a instanceof HTMLElement)p=[a];else{if(!(a instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");p=a}Me.debug(`Found ${p.length} diagrams`),void 0!==s?.startOnLoad&&(Me.debug("Start On Load: "+s?.startOnLoad),_r.updateSiteConfig({startOnLoad:s?.startOnLoad}));const y=new Br.initIdGenerator(f.deterministicIds,f.deterministicIDSeed);let v;const w=[];for(const C of Array.from(p)){if(Me.info("Rendering diagram: "+C.id),C.getAttribute("data-processed"))continue;C.setAttribute("data-processed","true");const D=`mermaid-${y.next()}`;v=C.innerHTML,v=q(Br.entityDecode(v)).trim().replace(/<br\s*\/?>/gi,"<br/>");const V=Br.detectInit(v);V&&Me.debug("Detected early reinit: ",V);try{_r.render(D,v,(W,j)=>{C.innerHTML=W,void 0!==d&&d(D),j&&j(C)},C)}catch(W){gE(W,w,rd.parseError)}}if(w.length>0)throw w[0]},initThrowsErrorsAsync:kd,registerExternalDiagrams:mE,initialize:function(s){_r.initialize(s)},parseError:void 0,contentLoaded:Uw,setParseErrorHandler:function(s){rd.parseError=s}}},9182:(It,ke,O)=>{const R=O(5979),U=O(1481),q=O(4250),te=O(2567),re=O(900),A=O(9654),F=O(3912);var ne=!!(typeof window<"u"&&window.document&&window.document.createElement),x={Version:"1.0.0"};x.Drawer=R,x.Parser=U,x.SvgDrawer=te,x.ReactionDrawer=re,x.ReactionParser=q,x.GaussDrawer=F,x.clean=function(k){return k.replace(/[^A-Za-z0-9@\.\+\-\?!\(\)\[\]\{\}/\\=#\$:\*]/g,"")},x.apply=function(k,I="canvas[data-smiles]",S="light",z=null){let ee=new R(k),Q=document.querySelectorAll(I);for(var Ce=0;Ce<Q.length;Ce++){let H=Q[Ce];x.parse(H.getAttribute("data-smiles"),function(G){ee.draw(G,H,S,!1)},function(G){z&&z(G)})}},x.parse=function(k,I,S){try{I&&I(U.parse(k))}catch(z){S&&S(z)}},x.parseReaction=function(k,I,S){try{I&&I(q.parse(k))}catch(z){S&&S(z)}},ne&&(window.SmilesDrawer=x,window.SmiDrawer=A),x.SmiDrawer=A,Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(k){if(null==this)throw new TypeError("this is null or not defined");for(var I=Object(this),S=I.length>>>0,ee=0|arguments[1],Q=ee<0?Math.max(S+ee,0):Math.min(ee,S),Ce=arguments[2],H=void 0===Ce?S:0|Ce,G=H<0?Math.max(S+H,0):Math.min(H,S);Q<G;)I[Q]=k,Q++;return I}}),It.exports=x},7809:It=>{class ke{static clone(R){let U=Array.isArray(R)?Array():{};for(let q in R){let te=R[q];U[q]="function"==typeof te.clone?te.clone():"object"==typeof te?ke.clone(te):te}return U}static equals(R,U){if(R.length!==U.length)return!1;let q=R.slice().sort(),te=U.slice().sort();for(var re=0;re<q.length;re++)if(q[re]!==te[re])return!1;return!0}static print(R){if(0==R.length)return"";let U="(";for(let q=0;q<R.length;q++)U+=R[q].id?R[q].id+", ":R[q]+", ";return U=U.substring(0,U.length-2),U+")"}static each(R,U){for(let q=0;q<R.length;q++)U(R[q])}static get(R,U,q){for(let te=0;te<R.length;te++)if(R[te][U]==q)return R[te]}static contains(R,U){if(U.property||U.func){if(U.func){for(let q=0;q<R.length;q++)if(U.func(R[q]))return!0}else for(let q=0;q<R.length;q++)if(R[q][U.property]==U.value)return!0}else for(let q=0;q<R.length;q++)if(R[q]==U.value)return!0;return!1}static intersection(R,U){let q=new Array;for(let te=0;te<R.length;te++)for(let re=0;re<U.length;re++)R[te]===U[re]&&q.push(R[te]);return q}static unique(R){let U={};return R.filter(function(q){return void 0===U[q]&&(U[q]=!0)})}static count(R,U){let q=0;for(let te=0;te<R.length;te++)R[te]===U&&q++;return q}static toggle(R,U){let q=Array(),te=!1;for(let re=0;re<R.length;re++)R[re]!==U?q.push(R[re]):te=!0;return te||q.push(U),q}static remove(R,U){let q=Array();for(let te=0;te<R.length;te++)R[te]!==U&&q.push(R[te]);return q}static removeUnique(R,U){let q=R.indexOf(U);return q>-1&&R.splice(q,1),R}static removeAll(R,U){return R.filter(function(q){return-1===U.indexOf(q)})}static merge(R,U){let q=new Array(R.length+U.length);for(let te=0;te<R.length;te++)q[te]=R[te];for(let te=0;te<U.length;te++)q[R.length+te]=U[te];return q}static containsAll(R,U){let q=0;for(let te=0;te<R.length;te++)for(let re=0;re<U.length;re++)R[te]===U[re]&&q++;return q===U.length}static sortByAtomicNumberDesc(R){let U=R.map(function(q,te){return{index:te,value:q.atomicNumber.split(".").map(Number)}});return U.sort(function(q,te){let re=Math.min(te.value.length,q.value.length),A=0;for(;A<re&&te.value[A]===q.value[A];)A++;return A===re?te.value.length-q.value.length:te.value[A]-q.value[A]}),U.map(function(q){return R[q.index]})}static deepCopy(R){let U=Array();for(let q=0;q<R.length;q++){let te=R[q];U[q]=te instanceof Array?ke.deepCopy(te):te}return U}}It.exports=ke},2848:(It,ke,O)=>{const R=O(7809);O(768),O(1644);class te{constructor(A,F="-"){this.idx=null,this.element=1===A.length?A.toUpperCase():A,this.drawExplicit=!1,this.ringbonds=Array(),this.rings=Array(),this.bondType=F,this.branchBond=null,this.isBridge=!1,this.isBridgeNode=!1,this.originalRings=Array(),this.bridgedRing=null,this.anchoredRings=Array(),this.bracket=null,this.plane=0,this.attachedPseudoElements={},this.hasAttachedPseudoElements=!1,this.isDrawn=!0,this.isConnectedToRing=!1,this.neighbouringElements=Array(),this.isPartOfAromaticRing=A!==this.element,this.bondCount=0,this.chirality="",this.isStereoCenter=!1,this.priority=0,this.mainChain=!1,this.hydrogenDirection="down",this.subtreeDepth=1,this.hasHydrogen=!1,this.class=void 0}addNeighbouringElement(A){this.neighbouringElements.push(A)}attachPseudoElement(A,F,ne=0,x=0){null===ne&&(ne=0),null===x&&(x=0);let k=ne+A+x;this.attachedPseudoElements[k]?this.attachedPseudoElements[k].count+=1:this.attachedPseudoElements[k]={element:A,count:1,hydrogenCount:ne,previousElement:F,charge:x},this.hasAttachedPseudoElements=!0}getAttachedPseudoElements(){let A={},F=this;return Object.keys(this.attachedPseudoElements).sort().forEach(function(ne){A[ne]=F.attachedPseudoElements[ne]}),A}getAttachedPseudoElementsCount(){return Object.keys(this.attachedPseudoElements).length}isHeteroAtom(){return"C"!==this.element&&"H"!==this.element}addAnchoredRing(A){R.contains(this.anchoredRings,{value:A})||this.anchoredRings.push(A)}getRingbondCount(){return this.ringbonds.length}backupRings(){this.originalRings=Array(this.rings.length);for(let A=0;A<this.rings.length;A++)this.originalRings[A]=this.rings[A]}restoreRings(){this.rings=Array(this.originalRings.length);for(let A=0;A<this.originalRings.length;A++)this.rings[A]=this.originalRings[A]}haveCommonRingbond(A,F){for(let ne=0;ne<A.ringbonds.length;ne++)for(let x=0;x<F.ringbonds.length;x++)if(A.ringbonds[ne].id==F.ringbonds[x].id)return!0;return!1}neighbouringElementsEqual(A){if(A.length!==this.neighbouringElements.length)return!1;A.sort(),this.neighbouringElements.sort();for(var F=0;F<this.neighbouringElements.length;F++)if(A[F]!==this.neighbouringElements[F])return!1;return!0}getAtomicNumber(){return te.atomicNumbers[this.element]}getMaxBonds(){return te.maxBonds[this.element]}static get maxBonds(){return{H:1,C:4,N:3,O:2,P:3,S:2,B:3,F:1,I:1,Cl:1,Br:1}}static get atomicNumbers(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}static get mass(){return{H:1,He:2,Li:3,Be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,Ne:10,Na:11,Mg:12,Al:13,Si:14,P:15,p:15,S:16,s:16,Cl:17,Ar:18,K:19,Ca:20,Sc:21,Ti:22,V:23,Cr:24,Mn:25,Fe:26,Co:27,Ni:28,Cu:29,Zn:30,Ga:31,Ge:32,As:33,Se:34,Br:35,Kr:36,Rb:37,Sr:38,Y:39,Zr:40,Nb:41,Mo:42,Tc:43,Ru:44,Rh:45,Pd:46,Ag:47,Cd:48,In:49,Sn:50,Sb:51,Te:52,I:53,Xe:54,Cs:55,Ba:56,La:57,Ce:58,Pr:59,Nd:60,Pm:61,Sm:62,Eu:63,Gd:64,Tb:65,Dy:66,Ho:67,Er:68,Tm:69,Yb:70,Lu:71,Hf:72,Ta:73,W:74,Re:75,Os:76,Ir:77,Pt:78,Au:79,Hg:80,Tl:81,Pb:82,Bi:83,Po:84,At:85,Rn:86,Fr:87,Ra:88,Ac:89,Th:90,Pa:91,U:92,Np:93,Pu:94,Am:95,Cm:96,Bk:97,Cf:98,Es:99,Fm:100,Md:101,No:102,Lr:103,Rf:104,Db:105,Sg:106,Bh:107,Hs:108,Mt:109,Ds:110,Rg:111,Cn:112,Uut:113,Uuq:114,Uup:115,Uuh:116,Uus:117,Uuo:118}}}It.exports=te},6387:(It,ke,O)=>{const R=O(5980),U=O(1611),{getChargeText:A}=(O(7680),O(768),O(1644),O(1927));It.exports=class F{constructor(x,k,I){this.canvas="string"==typeof x||x instanceof String?document.getElementById(x):x,this.ctx=this.canvas.getContext("2d"),this.themeManager=k,this.opts=I,this.drawingWidth=0,this.drawingHeight=0,this.offsetX=0,this.offsetY=0,this.fontLarge=this.opts.fontSizeLarge+"pt Helvetica, Arial, sans-serif",this.fontSmall=this.opts.fontSizeSmall+"pt Helvetica, Arial, sans-serif",this.updateSize(this.opts.width,this.opts.height),this.ctx.font=this.fontLarge,this.hydrogenWidth=this.ctx.measureText("H").width,this.halfHydrogenWidth=this.hydrogenWidth/2,this.halfBondThickness=this.opts.bondThickness/2}updateSize(x,k){this.devicePixelRatio=window.devicePixelRatio||1,this.backingStoreRatio=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.ratio=this.devicePixelRatio/this.backingStoreRatio,1!==this.ratio?(this.canvas.width=x*this.ratio,this.canvas.height=k*this.ratio,this.canvas.style.width=x+"px",this.canvas.style.height=k+"px",this.ctx.setTransform(this.ratio,0,0,this.ratio,0,0)):(this.canvas.width=x*this.ratio,this.canvas.height=k*this.ratio)}setTheme(x){this.colors=x}scale(x){let k=-Number.MAX_VALUE,I=-Number.MAX_VALUE,S=Number.MAX_VALUE,z=Number.MAX_VALUE;for(var ee=0;ee<x.length;ee++){if(!x[ee].value.isDrawn)continue;let K=x[ee].position;k<K.x&&(k=K.x),I<K.y&&(I=K.y),S>K.x&&(S=K.x),z>K.y&&(z=K.y)}var Q=this.opts.padding;k+=Q,I+=Q,S-=Q,z-=Q,this.drawingWidth=k-S,this.drawingHeight=I-z;var Ce=this.canvas.offsetWidth/this.drawingWidth,H=this.canvas.offsetHeight/this.drawingHeight,G=Ce<H?Ce:H;this.ctx.scale(G,G),this.offsetX=-S,this.offsetY=-z,Ce<H?this.offsetY+=this.canvas.offsetHeight/(2*G)-this.drawingHeight/2:this.offsetX+=this.canvas.offsetWidth/(2*G)-this.drawingWidth/2}reset(){this.ctx.setTransform(1,0,0,1,0,0)}getColor(x){return(x=x.toUpperCase())in this.colors?this.colors[x]:this.colors.C}drawCircle(x,k,I,S,z=!0,ee=!1,Q=""){let Ce=this.ctx,H=this.offsetX,G=this.offsetY;Ce.save(),Ce.lineWidth=1.5,Ce.beginPath(),Ce.arc(x+H,k+G,I,0,R.twoPI,!0),Ce.closePath(),ee?(z?(Ce.fillStyle="#f00",Ce.fill()):(Ce.strokeStyle="#f00",Ce.stroke()),this.drawDebugText(x,k,Q)):z?(Ce.fillStyle=S,Ce.fill()):(Ce.strokeStyle=S,Ce.stroke()),Ce.restore()}drawLine(x,k=!1,I=1){let S=this.ctx,z=this.offsetX,ee=this.offsetY,Q=x.clone().shorten(4),Ce=Q.getLeftVector().clone(),H=Q.getRightVector().clone();Ce.x+=z,Ce.y+=ee,H.x+=z,H.y+=ee,k||(S.save(),S.globalCompositeOperation="destination-out",S.beginPath(),S.moveTo(Ce.x,Ce.y),S.lineTo(H.x,H.y),S.lineCap="round",S.lineWidth=this.opts.bondThickness+1.2,S.strokeStyle=this.themeManager.getColor("BACKGROUND"),S.stroke(),S.globalCompositeOperation="source-over",S.restore()),Ce=x.getLeftVector().clone(),H=x.getRightVector().clone(),Ce.x+=z,Ce.y+=ee,H.x+=z,H.y+=ee,S.save(),S.beginPath(),S.moveTo(Ce.x,Ce.y),S.lineTo(H.x,H.y),S.lineCap="round",S.lineWidth=this.opts.bondThickness;let G=this.ctx.createLinearGradient(Ce.x,Ce.y,H.x,H.y);G.addColorStop(.4,this.themeManager.getColor(x.getLeftElement())||this.themeManager.getColor("C")),G.addColorStop(.6,this.themeManager.getColor(x.getRightElement())||this.themeManager.getColor("C")),k&&(S.setLineDash([1,1.5]),S.lineWidth=this.opts.bondThickness/1.5),I<1&&(S.globalAlpha=I),S.strokeStyle=G,S.stroke(),S.restore()}drawWedge(x,k=1){if(isNaN(x.from.x)||isNaN(x.from.y)||isNaN(x.to.x)||isNaN(x.to.y))return;let I=this.ctx,S=this.offsetX,z=this.offsetY,ee=x.clone().shorten(5),Q=ee.getLeftVector().clone(),Ce=ee.getRightVector().clone();Q.x+=S,Q.y+=z,Ce.x+=S,Ce.y+=z,Q=x.getLeftVector().clone(),Ce=x.getRightVector().clone(),Q.x+=S,Q.y+=z,Ce.x+=S,Ce.y+=z,I.save();let H=U.normals(Q,Ce);H[0].normalize(),H[1].normalize();let K=Q,ie=Ce;x.getRightChiral()&&(K=Ce,ie=Q);let ge=U.add(K,U.multiplyScalar(H[0],this.halfBondThickness)),we=U.add(ie,U.multiplyScalar(H[0],1.5+this.halfBondThickness)),fe=U.add(ie,U.multiplyScalar(H[1],1.5+this.halfBondThickness)),Te=U.add(K,U.multiplyScalar(H[1],this.halfBondThickness));I.beginPath(),I.moveTo(ge.x,ge.y),I.lineTo(we.x,we.y),I.lineTo(fe.x,fe.y),I.lineTo(Te.x,Te.y);let tt=this.ctx.createRadialGradient(Ce.x,Ce.y,this.opts.bondLength,Ce.x,Ce.y,0);tt.addColorStop(.4,this.themeManager.getColor(x.getLeftElement())||this.themeManager.getColor("C")),tt.addColorStop(.6,this.themeManager.getColor(x.getRightElement())||this.themeManager.getColor("C")),I.fillStyle=tt,I.fill(),I.restore()}drawDashedWedge(x){if(isNaN(x.from.x)||isNaN(x.from.y)||isNaN(x.to.x)||isNaN(x.to.y))return;let k=this.ctx,I=this.offsetX,S=this.offsetY,z=x.getLeftVector().clone(),ee=x.getRightVector().clone();z.x+=I,z.y+=S,ee.x+=I,ee.y+=S,k.save();let Q=U.normals(z,ee);Q[0].normalize(),Q[1].normalize();let H,G,K,ie,Ce=x.getRightChiral(),ge=x.clone();Ce?(H=ee,G=z,ge.shortenRight(1),K=ge.getRightVector().clone(),ie=ge.getLeftVector().clone()):(H=z,G=ee,ge.shortenLeft(1),K=ge.getLeftVector().clone(),ie=ge.getRightVector().clone()),K.x+=I,K.y+=S,ie.x+=I,ie.y+=S;let we=U.subtract(G,H).normalize();k.strokeStyle=this.themeManager.getColor("C"),k.lineCap="round",k.lineWidth=this.opts.bondThickness,k.beginPath();let fe=x.getLength(),Te=1.25/(fe/(3*this.opts.bondThickness)),tt=!1;for(var Ze=0;Ze<1;Ze+=Te){let Le=U.multiplyScalar(we,Ze*fe),Fe=U.add(H,Le),mt=U.multiplyScalar(Q[0],1.5*Ze);!tt&&Ze>.5&&(k.stroke(),k.beginPath(),k.strokeStyle=this.themeManager.getColor(x.getRightElement())||this.themeManager.getColor("C"),tt=!0),Fe.subtract(mt),k.moveTo(Fe.x,Fe.y),Fe.add(U.multiplyScalar(mt,2)),k.lineTo(Fe.x,Fe.y)}k.stroke(),k.restore()}drawDebugText(x,k,I){let S=this.ctx;S.save(),S.font="5px Droid Sans, sans-serif",S.textAlign="start",S.textBaseline="top",S.fillStyle="#ff0000",S.fillText(I,x+this.offsetX,k+this.offsetY),S.restore()}drawBall(x,k,I){let S=this.ctx;S.save(),S.beginPath(),S.arc(x+this.offsetX,k+this.offsetY,this.opts.bondLength/4.5,0,R.twoPI,!1),S.fillStyle=this.themeManager.getColor(I),S.fill(),S.restore()}drawPoint(x,k,I){let S=this.ctx,z=this.offsetX,ee=this.offsetY;S.save(),S.globalCompositeOperation="destination-out",S.beginPath(),S.arc(x+z,k+ee,1.5,0,R.twoPI,!0),S.closePath(),S.fill(),S.globalCompositeOperation="source-over",S.beginPath(),S.arc(x+this.offsetX,k+this.offsetY,.75,0,R.twoPI,!1),S.fillStyle=this.themeManager.getColor(I),S.fill(),S.restore()}drawText(x,k,I,S,z,ee,Q,Ce,H,G={}){let K=this.ctx,ie=this.offsetX,ge=this.offsetY;K.save(),K.textAlign="start",K.textBaseline="alphabetic";let fe="",Te=0;Q&&(fe=A(Q),K.font=this.fontSmall,Te=K.measureText(fe).width);let tt="0",Ze=0;Ce>0&&(tt=Ce.toString(),K.font=this.fontSmall,Ze=K.measureText(tt).width),1===Q&&"N"===I&&G.hasOwnProperty("0O")&&G.hasOwnProperty("0O-1")&&(G={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},Q=0),K.font=this.fontLarge,K.fillStyle=this.themeManager.getColor("BACKGROUND");let Le=K.measureText(I);Le.totalWidth=Le.width+Te,Le.height=parseInt(this.fontLarge,10);let Fe=Le.width>this.opts.fontSizeLarge?Le.width:this.opts.fontSizeLarge;Fe/=1.5,K.globalCompositeOperation="destination-out",K.beginPath(),K.arc(x+ie,k+ge,Fe,0,R.twoPI,!0),K.closePath(),K.fill(),K.globalCompositeOperation="source-over";let Xe=-Le.width/2,mt=-Le.width/2;K.fillStyle=this.themeManager.getColor(I),K.fillText(I,x+ie+Xe,k+this.opts.halfFontSizeLarge+ge),Xe+=Le.width,Q&&(K.font=this.fontSmall,K.fillText(fe,x+ie+Xe,k-this.opts.fifthFontSizeSmall+ge),Xe+=Te),Ce>0&&(K.font=this.fontSmall,K.fillText(tt,x+ie+mt-Ze,k-this.opts.fifthFontSizeSmall+ge),mt-=Ze),K.font=this.fontLarge;let ft=0,Zt=0;if(1===S){let Tt=x+ie,On=k+ge+this.opts.halfFontSizeLarge;ft=this.hydrogenWidth,mt-=ft,"left"===z?Tt+=mt:"right"===z||"up"===z&&ee||"down"===z&&ee?Tt+=Xe:"up"!==z||ee?"down"===z&&!ee&&(On+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,Tt-=this.halfHydrogenWidth):(On-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,Tt-=this.halfHydrogenWidth),K.fillText("H",Tt,On),Xe+=ft}else if(S>1){let Tt=x+ie,On=k+ge+this.opts.halfFontSizeLarge;ft=this.hydrogenWidth,K.font=this.fontSmall,Zt=K.measureText(S).width,mt-=ft+Zt,"left"===z?Tt+=mt:"right"===z||"up"===z&&ee||"down"===z&&ee?Tt+=Xe:"up"!==z||ee?"down"===z&&!ee&&(On+=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,Tt-=this.halfHydrogenWidth):(On-=this.opts.fontSizeLarge+this.opts.quarterFontSizeLarge,Tt-=this.halfHydrogenWidth),K.font=this.fontLarge,K.fillText("H",Tt,On),K.font=this.fontSmall,K.fillText(S,Tt+this.halfHydrogenWidth+Zt,On+this.opts.fifthFontSizeSmall),Xe+=ft+this.halfHydrogenWidth+Zt}for(let Tt in G){if(!G.hasOwnProperty(Tt))continue;let On=0,_i=0,Ti=G[Tt].element,Ri=G[Tt].count,Yi=G[Tt].hydrogenCount,vr=G[Tt].charge;K.font=this.fontLarge,Ri>1&&Yi>0&&(On=K.measureText("(").width,_i=K.measureText(")").width);let Wn=K.measureText(Ti).width,Pi=0,ki="",Mi=0;ft=0,Yi>0&&(ft=this.hydrogenWidth),K.font=this.fontSmall,Ri>1&&(Pi=K.measureText(Ri).width),0!==vr&&(ki=A(vr),Mi=K.measureText(ki).width),Zt=0,Yi>1&&(Zt=K.measureText(Yi).width),K.font=this.fontLarge;let or=x+ie,qi=k+ge+this.opts.halfFontSizeLarge;K.fillStyle=this.themeManager.getColor(Ti),Ri>0&&(mt-=Pi),Ri>1&&Yi>0&&("left"===z?(mt-=_i,K.fillText(")",or+mt,qi)):(K.fillText("(",or+Xe,qi),Xe+=On)),"left"===z?(mt-=Wn,K.fillText(Ti,or+mt,qi)):(K.fillText(Ti,or+Xe,qi),Xe+=Wn),Yi>0&&("left"===z?(mt-=ft+Zt,K.fillText("H",or+mt,qi),Yi>1&&(K.font=this.fontSmall,K.fillText(Yi,or+mt+ft,qi+this.opts.fifthFontSizeSmall))):(K.fillText("H",or+Xe,qi),Xe+=ft,Yi>1&&(K.font=this.fontSmall,K.fillText(Yi,or+Xe,qi+this.opts.fifthFontSizeSmall),Xe+=Zt))),K.font=this.fontLarge,Ri>1&&Yi>0&&("left"===z?(mt-=On,K.fillText("(",or+mt,qi)):(K.fillText(")",or+Xe,qi),Xe+=_i)),K.font=this.fontSmall,Ri>1&&("left"===z?K.fillText(Ri,or+mt+On+_i+ft+Zt+Wn,qi+this.opts.fifthFontSizeSmall):(K.fillText(Ri,or+Xe,qi+this.opts.fifthFontSizeSmall),Xe+=Pi)),0!==vr&&("left"===z?K.fillText(ki,or+mt+On+_i+ft+Zt+Wn,k-this.opts.fifthFontSizeSmall+ge):(K.fillText(ki,or+Xe,k-this.opts.fifthFontSizeSmall+ge),Xe+=Mi))}K.restore()}getChargeText(x){return 1===x?"+":2===x?"2+":-1===x?"-":-2===x?"2-":""}drawDebugPoint(x,k,I="",S="#f00"){this.drawCircle(x,k,2,S,!0,!0,I)}drawAromaticityRing(x){let k=this.ctx,I=R.apothemFromSideLength(this.opts.bondLength,x.getSize());k.save(),k.strokeStyle=this.themeManager.getColor("C"),k.lineWidth=this.opts.bondThickness,k.beginPath(),k.arc(x.center.x+this.offsetX,x.center.y+this.offsetY,I-this.opts.bondSpacing,0,2*Math.PI,!0),k.closePath(),k.stroke(),k.restore()}clear(){this.ctx.clearRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}}},5979:(It,ke,O)=>{const R=O(2567);It.exports=class U{constructor(te){this.svgDrawer=new R(te)}draw(te,re,A="light",F=!1,ne=[]){let x=null;x="string"==typeof re||re instanceof String?document.getElementById(re):re;let k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttributeNS(null,"viewBox","0 0 "+this.svgDrawer.opts.width+" "+this.svgDrawer.opts.height),k.setAttributeNS(null,"width",this.svgDrawer.opts.width+""),k.setAttributeNS(null,"height",this.svgDrawer.opts.height+""),this.svgDrawer.draw(te,k,A,F,ne),this.svgDrawer.svgWrapper.toCanvas(x,this.svgDrawer.opts.width,this.svgDrawer.opts.height)}getTotalOverlapScore(){return this.svgDrawer.getTotalOverlapScore()}getMolecularFormula(){this.svgDrawer.getMolecularFormula()}}},5090:(It,ke,O)=>{const R=O(5980),U=O(7809),q=O(1611),te=O(7680),A=(O(768),O(9119)),F=O(2848),ne=O(1644),x=O(8684),k=O(6387),I=O(4336),S=O(7789),z=O(4430),ee=O(7570);It.exports=class Q{constructor(H){this.graph=null,this.doubleBondConfigCount=0,this.doubleBondConfig=null,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.canvasWrapper=null,this.totalOverlapScore=0,this.defaultOptions={width:500,height:500,scale:0,bondThickness:1,bondLength:30,shortBondLength:.8,bondSpacing:.17*30,atomVisualization:"default",isomeric:!0,debug:!1,terminalCarbons:!1,explicitHydrogens:!0,overlapSensitivity:.42,overlapResolutionIterations:1,compactDrawing:!0,fontFamily:"Arial, Helvetica, sans-serif",fontSizeLarge:11,fontSizeSmall:3,padding:10,experimentalSSSR:!1,kkThreshold:.1,kkInnerThreshold:.1,kkMaxIteration:2e4,kkMaxInnerIteration:50,kkMaxEnergy:1e9,weights:{colormap:null,additionalPadding:20,sigma:10,interval:0,opacity:1},themes:{dark:{C:"#fff",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#aaa",BACKGROUND:"#141414"},light:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"},oldschool:{C:"#000",O:"#000",N:"#000",F:"#000",CL:"#000",BR:"#000",I:"#000",P:"#000",S:"#000",B:"#000",SI:"#000",H:"#000",BACKGROUND:"#fff"},solarized:{C:"#586e75",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#657b83",BACKGROUND:"#fff"},"solarized-dark":{C:"#93a1a1",O:"#dc322f",N:"#268bd2",F:"#859900",CL:"#16a085",BR:"#cb4b16",I:"#6c71c4",P:"#d33682",S:"#b58900",B:"#2aa198",SI:"#2aa198",H:"#839496",BACKGROUND:"#fff"},matrix:{C:"#678c61",O:"#2fc079",N:"#4f7e7e",F:"#90d762",CL:"#82d967",BR:"#23755a",I:"#409931",P:"#c1ff8a",S:"#faff00",B:"#50b45a",SI:"#409931",H:"#426644",BACKGROUND:"#fff"},github:{C:"#24292f",O:"#cf222e",N:"#0969da",F:"#2da44e",CL:"#6fdd8b",BR:"#bc4c00",I:"#8250df",P:"#bf3989",S:"#d4a72c",B:"#fb8f44",SI:"#bc4c00",H:"#57606a",BACKGROUND:"#fff"},carbon:{C:"#161616",O:"#da1e28",N:"#0f62fe",F:"#198038",CL:"#007d79",BR:"#fa4d56",I:"#8a3ffc",P:"#ff832b",S:"#f1c21b",B:"#8a3800",SI:"#e67e22",H:"#525252",BACKGROUND:"#fff"},cyberpunk:{C:"#ea00d9",O:"#ff3131",N:"#0abdc6",F:"#00ff9f",CL:"#00fe00",BR:"#fe9f20",I:"#ff00ff",P:"#fe7f00",S:"#fcee0c",B:"#ff00ff",SI:"#ffffff",H:"#913cb1",BACKGROUND:"#fff"},gruvbox:{C:"#665c54",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#79740e",BR:"#d65d0e",I:"#b16286",P:"#af3a03",S:"#d79921",B:"#689d6a",SI:"#427b58",H:"#7c6f64",BACKGROUND:"#fbf1c7"},"gruvbox-dark":{C:"#ebdbb2",O:"#cc241d",N:"#458588",F:"#98971a",CL:"#b8bb26",BR:"#d65d0e",I:"#b16286",P:"#fe8019",S:"#d79921",B:"#8ec07c",SI:"#83a598",H:"#bdae93",BACKGROUND:"#282828"},custom:{C:"#222",O:"#e74c3c",N:"#3498db",F:"#27ae60",CL:"#16a085",BR:"#d35400",I:"#8e44ad",P:"#d35400",S:"#f1c40f",B:"#e67e22",SI:"#e67e22",H:"#666",BACKGROUND:"#fff"}}},this.opts=ee.extend(!0,this.defaultOptions,H),this.opts.halfBondSpacing=this.opts.bondSpacing/2,this.opts.bondLengthSq=this.opts.bondLength*this.opts.bondLength,this.opts.halfFontSizeLarge=this.opts.fontSizeLarge/2,this.opts.quarterFontSizeLarge=this.opts.fontSizeLarge/4,this.opts.fifthFontSizeSmall=this.opts.fontSizeSmall/5,this.theme=this.opts.themes.dark}draw(H,G,K="light",ie=!1){this.initDraw(H,K,ie),this.infoOnly||(this.themeManager=new z(this.opts.themes,K),this.canvasWrapper=new k(G,this.themeManager,this.opts)),ie||(this.processGraph(),this.canvasWrapper.scale(this.graph.vertices),this.drawEdges(this.opts.debug),this.drawVertices(this.opts.debug),this.canvasWrapper.reset(),this.opts.debug&&(console.log(this.graph),console.log(this.rings),console.log(this.ringConnections)))}edgeRingCount(H){let G=this.graph.edges[H];return Math.min(this.graph.vertices[G.sourceId].value.rings.length,this.graph.vertices[G.targetId].value.rings.length)}getBridgedRings(){let H=Array();for(var G=0;G<this.rings.length;G++)this.rings[G].isBridged&&H.push(this.rings[G]);return H}getFusedRings(){let H=Array();for(var G=0;G<this.rings.length;G++)this.rings[G].isFused&&H.push(this.rings[G]);return H}getSpiros(){let H=Array();for(var G=0;G<this.rings.length;G++)this.rings[G].isSpiro&&H.push(this.rings[G]);return H}printRingInfo(){let H="";for(var G=0;G<this.rings.length;G++){const K=this.rings[G];H+=K.id+";",H+=K.members.length+";",H+=K.neighbours.length+";",H+=K.isSpiro?"true;":"false;",H+=K.isFused?"true;":"false;",H+=K.isBridged?"true;":"false;",H+=K.rings.length+";",H+="\n"}return H}rotateDrawing(){let H=0,G=0,K=0;for(var ie=0;ie<this.graph.vertices.length;ie++){let fe=this.graph.vertices[ie];if(fe.value.isDrawn)for(var ge=ie+1;ge<this.graph.vertices.length;ge++){let Te=this.graph.vertices[ge];if(!Te.value.isDrawn)continue;let tt=fe.position.distanceSq(Te.position);tt>K&&(K=tt,H=ie,G=ge)}}let we=-q.subtract(this.graph.vertices[H].position,this.graph.vertices[G].position).angle();if(!isNaN(we)){let fe=we%.523599;for(fe<.2617995?we-=fe:we+=.523599-fe,ie=0;ie<this.graph.vertices.length;ie++)ie!==G&&this.graph.vertices[ie].position.rotateAround(we,this.graph.vertices[G].position);for(ie=0;ie<this.rings.length;ie++)this.rings[ie].center.rotateAround(we,this.graph.vertices[G].position)}}getTotalOverlapScore(){return this.totalOverlapScore}getRingCount(){return this.rings.length}hasBridgedRing(){return this.bridgedRing}getHeavyAtomCount(){let H=0;for(var G=0;G<this.graph.vertices.length;G++)"H"!==this.graph.vertices[G].value.element&&H++;return H}getMolecularFormula(H=null){let G="",K=new Map,ie=null===H?this.graph:new I(H,this.opts.isomeric);for(var ge=0;ge<ie.vertices.length;ge++){let fe=ie.vertices[ge].value;if(K.has(fe.element)?K.set(fe.element,K.get(fe.element)+1):K.set(fe.element,1),fe.bracket&&!fe.bracket.chirality&&(K.has("H")?K.set("H",K.get("H")+fe.bracket.hcount):K.set("H",fe.bracket.hcount)),!fe.bracket){let Te=F.maxBonds[fe.element]-fe.bondCount;fe.isPartOfAromaticRing&&Te--,K.has("H")?K.set("H",K.get("H")+Te):K.set("H",Te)}}if(K.has("C")){let fe=K.get("C");G+="C"+(fe>1?fe:""),K.delete("C")}if(K.has("H")){let fe=K.get("H");G+="H"+(fe>1?fe:""),K.delete("H")}return Object.keys(F.atomicNumbers).sort().map(fe=>{if(K.has(fe)){let Te=K.get(fe);G+=fe+(Te>1?Te:"")}}),G}getRingbondType(H,G){if(H.value.getRingbondCount()<1||G.value.getRingbondCount()<1)return null;for(var K=0;K<H.value.ringbonds.length;K++)for(var ie=0;ie<G.value.ringbonds.length;ie++)if(H.value.ringbonds[K].id===G.value.ringbonds[ie].id)return"-"===H.value.ringbonds[K].bondType?G.value.ringbonds[ie].bond:H.value.ringbonds[K].bond;return null}initDraw(H,G,K,ie){this.data=H,this.infoOnly=K,this.ringIdCounter=0,this.ringConnectionIdCounter=0,this.graph=new I(H,this.opts.isomeric),this.rings=Array(),this.ringConnections=Array(),this.originalRings=Array(),this.originalRingConnections=Array(),this.bridgedRing=!1,this.doubleBondConfigCount=null,this.doubleBondConfig=null,this.highlight_atoms=ie,this.initRings(),this.initHydrogens()}processGraph(){this.position(),this.restoreRingInformation(),this.resolvePrimaryOverlaps();let H=this.getOverlapScore();this.totalOverlapScore=this.getOverlapScore().total;for(var G=0;G<this.opts.overlapResolutionIterations;G++)for(var K=0;K<this.graph.edges.length;K++){let ie=this.graph.edges[K];if(this.isEdgeRotatable(ie)){let ge=this.graph.getTreeDepth(ie.sourceId,ie.targetId),we=this.graph.getTreeDepth(ie.targetId,ie.sourceId),fe=ie.targetId,Te=ie.sourceId;if(ge>we&&(fe=ie.sourceId,Te=ie.targetId),this.getSubtreeOverlapScore(Te,fe,H.vertexScores).value>this.opts.overlapSensitivity){let Ze=this.graph.vertices[fe],Le=this.graph.vertices[Te],Fe=Le.getNeighbours(fe);if(1===Fe.length){let Xe=this.graph.vertices[Fe[0]],mt=Xe.position.getRotateAwayFromAngle(Ze.position,Le.position,R.toRad(120));this.rotateSubtree(Xe.id,Le.id,mt,Le.position);let ft=this.getOverlapScore().total;ft>this.totalOverlapScore?this.rotateSubtree(Xe.id,Le.id,-mt,Le.position):this.totalOverlapScore=ft}else if(2===Fe.length){if(0!==Le.value.rings.length&&0!==Ze.value.rings.length)continue;let Xe=this.graph.vertices[Fe[0]],mt=this.graph.vertices[Fe[1]];if(1===Xe.value.rings.length&&1===mt.value.rings.length){if(Xe.value.rings[0]!==mt.value.rings[0])continue}else{if(0!==Xe.value.rings.length||0!==mt.value.rings.length)continue;{let ft=Xe.position.getRotateAwayFromAngle(Ze.position,Le.position,R.toRad(120)),Zt=mt.position.getRotateAwayFromAngle(Ze.position,Le.position,R.toRad(120));this.rotateSubtree(Xe.id,Le.id,ft,Le.position),this.rotateSubtree(mt.id,Le.id,Zt,Le.position);let Tt=this.getOverlapScore().total;Tt>this.totalOverlapScore?(this.rotateSubtree(Xe.id,Le.id,-ft,Le.position),this.rotateSubtree(mt.id,Le.id,-Zt,Le.position)):this.totalOverlapScore=Tt}}}H=this.getOverlapScore()}}}this.resolveSecondaryOverlaps(H.scores),this.opts.isomeric&&this.annotateStereochemistry(),this.opts.compactDrawing&&"default"===this.opts.atomVisualization&&this.initPseudoElements(),this.rotateDrawing()}initRings(){let H=new Map;for(var G=this.graph.vertices.length-1;G>=0;G--){let ge=this.graph.vertices[G];if(0!==ge.value.ringbonds.length)for(var K=0;K<ge.value.ringbonds.length;K++){let we=ge.value.ringbonds[K].id,fe=ge.value.ringbonds[K].bond;if(H.has(we)){let Te=ge.id,tt=H.get(we)[0],Ze=H.get(we)[1],Le=new A(Te,tt,1);Le.setBondType(Ze||fe||"-");let Fe=this.graph.addEdge(Le),Xe=this.graph.vertices[tt];ge.addRingbondChild(tt,K),ge.value.addNeighbouringElement(Xe.value.element),Xe.addRingbondChild(Te,K),Xe.value.addNeighbouringElement(ge.value.element),ge.edges.push(Fe),Xe.edges.push(Fe),H.delete(we)}else H.set(we,[ge.id,fe])}}let ie=S.getRings(this.graph,this.opts.experimentalSSSR);if(null!==ie){for(G=0;G<ie.length;G++){let we=[...ie[G]],fe=this.addRing(new ne(we));for(K=0;K<we.length;K++)this.graph.vertices[we[K]].value.rings.push(fe)}for(G=0;G<this.rings.length-1;G++)for(K=G+1;K<this.rings.length;K++){let tt=new x(this.rings[G],this.rings[K]);tt.vertices.size>0&&this.addRingConnection(tt)}for(G=0;G<this.rings.length;G++){let we=this.rings[G];we.neighbours=x.getNeighbours(this.ringConnections,we.id)}for(G=0;G<this.rings.length;G++){let we=this.rings[G];this.graph.vertices[we.members[0]].value.addAnchoredRing(we.id)}for(this.backupRingInformation();this.rings.length>0;){let ge=-1;for(G=0;G<this.rings.length;G++){let tt=this.rings[G];this.isPartOfBridgedRing(tt.id)&&!tt.isBridged&&(ge=tt.id)}if(-1===ge)break;let we=this.getRing(ge),fe=this.getBridgedRingRings(we.id);for(this.bridgedRing=!0,this.createBridgedRing(fe,we.members[0]),G=0;G<fe.length;G++)this.removeRing(fe[G])}}}initHydrogens(){if(!this.opts.explicitHydrogens)for(var H=0;H<this.graph.vertices.length;H++){let G=this.graph.vertices[H];if("H"!==G.value.element)continue;let K=this.graph.vertices[G.neighbours[0]];K.value.hasHydrogen=!0,(!K.value.isStereoCenter||K.value.rings.length<2&&!K.value.bridgedRing||K.value.bridgedRing&&K.value.originalRings.length<2)&&(G.value.isDrawn=!1)}}getBridgedRingRings(H){let G=Array(),K=this,ie=function(ge){let we=K.getRing(ge);G.push(ge);for(var fe=0;fe<we.neighbours.length;fe++){let Te=we.neighbours[fe];-1===G.indexOf(Te)&&Te!==ge&&x.isBridge(K.ringConnections,K.graph.vertices,ge,Te)&&ie(Te)}};return ie(H),U.unique(G)}isPartOfBridgedRing(H){for(var G=0;G<this.ringConnections.length;G++)if(this.ringConnections[G].containsRing(H)&&this.ringConnections[G].isBridge(this.graph.vertices))return!0;return!1}createBridgedRing(H,G){let K=new Set,ie=new Set,ge=new Set;for(var we=0;we<H.length;we++){let Fe=this.getRing(H[we]);Fe.isPartOfBridged=!0;for(var fe=0;fe<Fe.members.length;fe++)ie.add(Fe.members[fe]);for(fe=0;fe<Fe.neighbours.length;fe++)-1===H.indexOf(Fe.neighbours[fe])&&ge.add(Fe.neighbours[fe])}let Te=new Set;for(let Fe of ie){let Xe=this.graph.vertices[Fe],mt=U.intersection(H,Xe.value.rings);1===Xe.value.rings.length||1===mt.length?K.add(Xe.id):Te.add(Xe.id)}Array();let Ze=Array();for(let Fe of Te){let Xe=this.graph.vertices[Fe],mt=!1;for(let ft=0;ft<Xe.edges.length;ft++)1===this.edgeRingCount(Xe.edges[ft])&&(mt=!0);mt?(Xe.value.isBridgeNode=!0,K.add(Xe.id)):(Xe.value.isBridge=!0,K.add(Xe.id))}let Le=new ne([...K]);for(this.addRing(Le),Le.isBridged=!0,Le.neighbours=[...ge],we=0;we<H.length;we++)Le.rings.push(this.getRing(H[we]).clone());for(we=0;we<Le.members.length;we++)this.graph.vertices[Le.members[we]].value.bridgedRing=Le.id;for(we=0;we<Ze.length;we++)this.graph.vertices[Ze[we]].value.rings=Array();for(let Fe of K){let Xe=this.graph.vertices[Fe];Xe.value.rings=U.removeAll(Xe.value.rings,H),Xe.value.rings.push(Le.id)}for(we=0;we<H.length;we++)for(fe=we+1;fe<H.length;fe++)this.removeRingConnectionsBetween(H[we],H[fe]);for(let Fe of ge){let Xe=this.getRingConnections(Fe,H);for(fe=0;fe<Xe.length;fe++)this.getRingConnection(Xe[fe]).updateOther(Le.id,Fe);this.getRing(Fe).neighbours.push(Le.id)}return Le}areVerticesInSameRing(H,G){for(var K=0;K<H.value.rings.length;K++)for(var ie=0;ie<G.value.rings.length;ie++)if(H.value.rings[K]===G.value.rings[ie])return!0;return!1}getCommonRings(H,G){let K=Array();for(var ie=0;ie<H.value.rings.length;ie++)for(var ge=0;ge<G.value.rings.length;ge++)H.value.rings[ie]==G.value.rings[ge]&&K.push(H.value.rings[ie]);return K}getLargestOrAromaticCommonRing(H,G){let K=this.getCommonRings(H,G),ie=0,ge=null;for(var we=0;we<K.length;we++){let fe=this.getRing(K[we]),Te=fe.getSize();if(fe.isBenzeneLike(this.graph.vertices))return fe;Te>ie&&(ie=Te,ge=fe)}return ge}getVerticesAt(H,G,K){let ie=Array();for(var ge=0;ge<this.graph.vertices.length;ge++){let we=this.graph.vertices[ge];we.id!==K&&we.positioned&&H.distanceSq(we.position)<=G*G&&ie.push(we.id)}return ie}getClosestVertex(H){let G=99999,K=null;for(var ie=0;ie<this.graph.vertices.length;ie++){let ge=this.graph.vertices[ie];if(ge.id===H.id)continue;let we=H.position.distanceSq(ge.position);we<G&&(G=we,K=ge)}return K}addRing(H){return H.id=this.ringIdCounter++,this.rings.push(H),H.id}removeRing(H){this.rings=this.rings.filter(function(K){return K.id!==H}),this.ringConnections=this.ringConnections.filter(function(K){return K.firstRingId!==H&&K.secondRingId!==H});for(var G=0;G<this.rings.length;G++){let K=this.rings[G];K.neighbours=K.neighbours.filter(function(ie){return ie!==H})}}getRing(H){for(var G=0;G<this.rings.length;G++)if(this.rings[G].id==H)return this.rings[G]}addRingConnection(H){return H.id=this.ringConnectionIdCounter++,this.ringConnections.push(H),H.id}removeRingConnection(H){this.ringConnections=this.ringConnections.filter(function(G){return G.id!==H})}removeRingConnectionsBetween(H,G){let K=Array();for(var ie=0;ie<this.ringConnections.length;ie++){let ge=this.ringConnections[ie];(ge.firstRingId===H&&ge.secondRingId===G||ge.firstRingId===G&&ge.secondRingId===H)&&K.push(ge.id)}for(ie=0;ie<K.length;ie++)this.removeRingConnection(K[ie])}getRingConnection(H){for(var G=0;G<this.ringConnections.length;G++)if(this.ringConnections[G].id==H)return this.ringConnections[G]}getRingConnections(H,G){let K=Array();for(var ie=0;ie<this.ringConnections.length;ie++){let we=this.ringConnections[ie];for(var ge=0;ge<G.length;ge++){let fe=G[ge];(we.firstRingId===H&&we.secondRingId===fe||we.firstRingId===fe&&we.secondRingId===H)&&K.push(we.id)}}return K}getOverlapScore(){let H=0,G=new Float32Array(this.graph.vertices.length);for(var K=0;K<this.graph.vertices.length;K++)G[K]=0;for(K=0;K<this.graph.vertices.length;K++)for(var ie=this.graph.vertices.length;--ie>K;){let fe=this.graph.vertices[K],Te=this.graph.vertices[ie];if(!fe.value.isDrawn||!Te.value.isDrawn)continue;let tt=q.subtract(fe.position,Te.position).lengthSq();if(tt<this.opts.bondLengthSq){let Ze=(this.opts.bondLength-Math.sqrt(tt))/this.opts.bondLength;H+=Ze,G[K]+=Ze,G[ie]+=Ze}}let ge=Array();for(K=0;K<this.graph.vertices.length;K++)ge.push({id:K,score:G[K]});return ge.sort(function(we,fe){return fe.score-we.score}),{total:H,scores:ge,vertexScores:G}}chooseSide(H,G,K){let ie=H.getNeighbours(G.id),ge=G.getNeighbours(H.id),we=ie.length,fe=ge.length,Te=U.merge(ie,ge),tt=[0,0];for(var Ze=0;Ze<Te.length;Ze++)this.graph.vertices[Te[Ze]].position.sameSideAs(H.position,G.position,K[0])?tt[0]++:tt[1]++;let Le=[0,0];for(Ze=0;Ze<this.graph.vertices.length;Ze++)this.graph.vertices[Ze].position.sameSideAs(H.position,G.position,K[0])?Le[0]++:Le[1]++;return{totalSideCount:Le,totalPosition:Le[0]>Le[1]?0:1,sideCount:tt,position:tt[0]>tt[1]?0:1,anCount:we,bnCount:fe}}setRingCenter(H){let G=H.getSize(),K=new q(0,0);for(var ie=0;ie<G;ie++)K.add(this.graph.vertices[H.members[ie]].position);H.center=K.divide(G)}getSubringCenter(H,G){let K=G.value.originalRings,ie=H.center,ge=Number.MAX_VALUE;for(var we=0;we<K.length;we++)for(var fe=0;fe<H.rings.length;fe++)K[we]===H.rings[fe].id&&H.rings[fe].getSize()<ge&&(ie=H.rings[fe].center,ge=H.rings[fe].getSize());return ie}drawEdges(H){let G=this,K=Array(this.graph.edges.length);if(K.fill(!1),this.graph.traverseBF(0,function(ge){let we=G.graph.getEdges(ge.id);for(var fe=0;fe<we.length;fe++){let Te=we[fe];K[Te]||(K[Te]=!0,G.drawEdge(Te,H))}}),!this.bridgedRing)for(var ie=0;ie<this.rings.length;ie++){let ge=this.rings[ie];this.isRingAromatic(ge)&&this.canvasWrapper.drawAromaticityRing(ge)}}drawEdge(H,G){let K=this,ie=this.graph.edges[H],ge=this.graph.vertices[ie.sourceId],we=this.graph.vertices[ie.targetId],fe=ge.value.element,Te=we.value.element;if(!(ge.value.isDrawn&&we.value.isDrawn||"default"!==this.opts.atomVisualization))return;let tt=ge.position,Ze=we.position,Le=this.getEdgeNormals(ie),Fe=U.clone(Le);if(Fe[0].multiplyScalar(10).add(tt),Fe[1].multiplyScalar(10).add(tt),"="===ie.bondType||"="===this.getRingbondType(ge,we)||ie.isPartOfAromaticRing&&this.bridgedRing){let Xe=this.areVerticesInSameRing(ge,we),mt=this.chooseSide(ge,we,Fe);if(Xe){let Zt=this.getLargestOrAromaticCommonRing(ge,we).center;Le[0].multiplyScalar(K.opts.bondSpacing),Le[1].multiplyScalar(K.opts.bondSpacing);let Tt=null;Tt=Zt.sameSideAs(ge.position,we.position,q.add(tt,Le[0]))?new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te):new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te),Tt.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),ie.isPartOfAromaticRing?this.canvasWrapper.drawLine(Tt,!0):this.canvasWrapper.drawLine(Tt),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}else if(ie.center||ge.isTerminal()&&we.isTerminal()){Le[0].multiplyScalar(K.opts.halfBondSpacing),Le[1].multiplyScalar(K.opts.halfBondSpacing);let ft=new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te),Zt=new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te);this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(Zt)}else if(0==mt.anCount&&mt.bnCount>1||0==mt.bnCount&&mt.anCount>1){Le[0].multiplyScalar(K.opts.halfBondSpacing),Le[1].multiplyScalar(K.opts.halfBondSpacing);let ft=new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te),Zt=new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te);this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(Zt)}else if(mt.sideCount[0]>mt.sideCount[1]){Le[0].multiplyScalar(K.opts.bondSpacing),Le[1].multiplyScalar(K.opts.bondSpacing);let ft=new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te);ft.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}else if(mt.sideCount[0]<mt.sideCount[1]){Le[0].multiplyScalar(K.opts.bondSpacing),Le[1].multiplyScalar(K.opts.bondSpacing);let ft=new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te);ft.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}else if(mt.totalSideCount[0]>mt.totalSideCount[1]){Le[0].multiplyScalar(K.opts.bondSpacing),Le[1].multiplyScalar(K.opts.bondSpacing);let ft=new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te);ft.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}else if(mt.totalSideCount[0]<=mt.totalSideCount[1]){Le[0].multiplyScalar(K.opts.bondSpacing),Le[1].multiplyScalar(K.opts.bondSpacing);let ft=new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te);ft.shorten(this.opts.bondLength-this.opts.shortBondLength*this.opts.bondLength),this.canvasWrapper.drawLine(ft),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}}else if("#"===ie.bondType){Le[0].multiplyScalar(K.opts.bondSpacing/1.5),Le[1].multiplyScalar(K.opts.bondSpacing/1.5);let Xe=new te(q.add(tt,Le[0]),q.add(Ze,Le[0]),fe,Te),mt=new te(q.add(tt,Le[1]),q.add(Ze,Le[1]),fe,Te);this.canvasWrapper.drawLine(Xe),this.canvasWrapper.drawLine(mt),this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te))}else if("."!==ie.bondType){let Xe=ge.value.isStereoCenter,mt=we.value.isStereoCenter;"up"===ie.wedge?this.canvasWrapper.drawWedge(new te(tt,Ze,fe,Te,Xe,mt)):"down"===ie.wedge?this.canvasWrapper.drawDashedWedge(new te(tt,Ze,fe,Te,Xe,mt)):this.canvasWrapper.drawLine(new te(tt,Ze,fe,Te,Xe,mt))}if(G){let Xe=q.midpoint(tt,Ze);this.canvasWrapper.drawDebugText(Xe.x,Xe.y,"e: "+H)}}drawVertices(H){var G=this.graph.vertices.length;for(G=0;G<this.graph.vertices.length;G++){let ie=this.graph.vertices[G],ge=ie.value,we=0,fe=0,tt=ge.element,Ze=F.maxBonds[tt]-ie.value.bondCount,Le=ie.getTextDirection(this.graph.vertices),Fe=!(!this.opts.terminalCarbons&&"C"===tt&&!ge.hasAttachedPseudoElements)&&ie.isTerminal(),Xe="C"===ge.element;if("N"===ge.element&&ge.isPartOfAromaticRing&&(Ze=0),ge.bracket&&(Ze=ge.bracket.hcount,we=ge.bracket.charge,fe=ge.bracket.isotope),"allballs"===this.opts.atomVisualization)this.canvasWrapper.drawBall(ie.position.x,ie.position.y,tt);else if(ge.isDrawn&&(!Xe||ge.drawExplicit||Fe||ge.hasAttachedPseudoElements)||1===this.graph.vertices.length)"default"===this.opts.atomVisualization?this.canvasWrapper.drawText(ie.position.x,ie.position.y,tt,Ze,Le,Fe,we,fe,this.graph.vertices.length,ge.getAttachedPseudoElements()):"balls"===this.opts.atomVisualization&&this.canvasWrapper.drawBall(ie.position.x,ie.position.y,tt);else if(2===ie.getNeighbourCount()&&1==ie.forcePositioned){let Zt=q.threePointangle(ie.position,this.graph.vertices[ie.neighbours[0]].position,this.graph.vertices[ie.neighbours[1]].position);Math.abs(Math.PI-Zt)<.1&&this.canvasWrapper.drawPoint(ie.position.x,ie.position.y,tt)}if(H){let mt="v: "+ie.id+" "+U.print(ge.ringbonds);this.canvasWrapper.drawDebugText(ie.position.x,ie.position.y,mt)}}if(this.opts.debug)for(G=0;G<this.rings.length;G++){let ie=this.rings[G].center;this.canvasWrapper.drawDebugPoint(ie.x,ie.y,"r: "+this.rings[G].id)}}position(){let H=null;for(var G=0;G<this.graph.vertices.length;G++)if(null!==this.graph.vertices[G].value.bridgedRing){H=this.graph.vertices[G];break}for(G=0;G<this.rings.length;G++)this.rings[G].isBridged&&(H=this.graph.vertices[this.rings[G].members[0]]);this.rings.length>0&&null===H&&(H=this.graph.vertices[this.rings[0].members[0]]),null===H&&(H=this.graph.vertices[0]),this.createNextBond(H,null,0)}backupRingInformation(){this.originalRings=Array(),this.originalRingConnections=Array();for(var H=0;H<this.rings.length;H++)this.originalRings.push(this.rings[H]);for(H=0;H<this.ringConnections.length;H++)this.originalRingConnections.push(this.ringConnections[H]);for(H=0;H<this.graph.vertices.length;H++)this.graph.vertices[H].value.backupRings()}restoreRingInformation(){let H=this.getBridgedRings();this.rings=Array(),this.ringConnections=Array();for(var G=0;G<H.length;G++){let ie=H[G];for(var K=0;K<ie.rings.length;K++){let ge=ie.rings[K];this.originalRings[ge.id].center=ge.center}}for(G=0;G<this.originalRings.length;G++)this.rings.push(this.originalRings[G]);for(G=0;G<this.originalRingConnections.length;G++)this.ringConnections.push(this.originalRingConnections[G]);for(G=0;G<this.graph.vertices.length;G++)this.graph.vertices[G].value.restoreRings()}createRing(H,G=null,K=null,ie=null){if(H.positioned)return;G=G||new q(0,0);let ge=H.getOrderedNeighbours(this.ringConnections),we=K?q.subtract(K.position,G).angle():0,fe=R.polyCircumradius(this.opts.bondLength,H.getSize()),Te=R.centralAngle(H.getSize());H.centralAngle=Te;let tt=we,Ze=this,Le=K?K.id:null;if(-1===H.members.indexOf(Le)&&(K&&(K.positioned=!1),Le=H.members[0]),H.isBridged){this.graph.kkLayout(H.members.slice(),G,K.id,H,this.opts.bondLength,this.opts.kkThreshold,this.opts.kkInnerThreshold,this.opts.kkMaxIteration,this.opts.kkMaxInnerIteration,this.opts.kkMaxEnergy),H.positioned=!0,this.setRingCenter(H),G=H.center;for(var Fe=0;Fe<H.rings.length;Fe++)this.setRingCenter(H.rings[Fe])}else H.eachMember(this.graph.vertices,function(mt){let ft=Ze.graph.vertices[mt];ft.positioned||ft.setPosition(G.x+Math.cos(tt)*fe,G.y+Math.sin(tt)*fe),tt+=Te,(!H.isBridged||H.rings.length<3)&&(ft.angle=tt,ft.positioned=!0)},Le,ie?ie.id:null);for(H.positioned=!0,H.center=G,Fe=0;Fe<ge.length;Fe++){let ft=this.getRing(ge[Fe].neighbour);if(ft.positioned)continue;let Zt=x.getVertices(this.ringConnections,H.id,ft.id);if(2===Zt.length){H.isFused=!0,ft.isFused=!0;let Tt=this.graph.vertices[Zt[0]],On=this.graph.vertices[Zt[1]],_i=q.midpoint(Tt.position,On.position),Ti=q.normals(Tt.position,On.position);Ti[0].normalize(),Ti[1].normalize();let Ri=R.polyCircumradius(this.opts.bondLength,ft.getSize()),Yi=R.apothem(Ri,ft.getSize());Ti[0].multiplyScalar(Yi).add(_i),Ti[1].multiplyScalar(Yi).add(_i);let vr=Ti[0];q.subtract(G,Ti[1]).lengthSq()>q.subtract(G,Ti[0]).lengthSq()&&(vr=Ti[1]);let Wn=q.subtract(Tt.position,vr),Pi=q.subtract(On.position,vr);-1===Wn.clockwise(Pi)?ft.positioned||this.createRing(ft,vr,Tt,On):ft.positioned||this.createRing(ft,vr,On,Tt)}else if(1===Zt.length){H.isSpiro=!0,ft.isSpiro=!0;let Tt=this.graph.vertices[Zt[0]],On=q.subtract(G,Tt.position);On.invert(),On.normalize();let _i=R.polyCircumradius(this.opts.bondLength,ft.getSize());On.multiplyScalar(_i),On.add(Tt.position),ft.positioned||this.createRing(ft,On,Tt)}}for(Fe=0;Fe<H.members.length;Fe++){let ft=this.graph.vertices[H.members[Fe]],Zt=ft.neighbours;for(var Xe=0;Xe<Zt.length;Xe++){let Tt=this.graph.vertices[Zt[Xe]];Tt.positioned||(Tt.value.isConnectedToRing=!0,this.createNextBond(Tt,ft,0))}}}rotateSubtree(H,G,K,ie){let ge=this;this.graph.traverseTree(H,G,function(we){we.position.rotateAround(K,ie);for(var fe=0;fe<we.value.anchoredRings.length;fe++){let Te=ge.rings[we.value.anchoredRings[fe]];Te&&Te.center.rotateAround(K,ie)}})}getSubtreeOverlapScore(H,G,K){let ie=this,ge=0,we=new q(0,0),fe=0;return this.graph.traverseTree(H,G,function(Te){if(!Te.value.isDrawn)return;let tt=K[Te.id];tt>ie.opts.overlapSensitivity&&(ge+=tt,fe++);let Ze=ie.graph.vertices[Te.id].position.clone();Ze.multiplyScalar(tt),we.add(Ze)}),we.divide(ge),{value:ge/fe,center:we}}getCurrentCenterOfMass(){let H=new q(0,0),G=0;for(var K=0;K<this.graph.vertices.length;K++){let ie=this.graph.vertices[K];ie.positioned&&(H.add(ie.position),G++)}return H.divide(G)}getCurrentCenterOfMassInNeigbourhood(H,G=2*this.opts.bondLength){let K=new q(0,0),ie=0,ge=G*G;for(var we=0;we<this.graph.vertices.length;we++){let fe=this.graph.vertices[we];fe.positioned&&H.distanceSq(fe.position)<ge&&(K.add(fe.position),ie++)}return K.divide(ie)}resolvePrimaryOverlaps(){let H=Array(),G=Array(this.graph.vertices.length);for(var K=0;K<this.rings.length;K++){let we=this.rings[K];for(var ie=0;ie<we.members.length;ie++){let fe=this.graph.vertices[we.members[ie]];if(G[fe.id])continue;G[fe.id]=!0;let Te=this.getNonRingNeighbours(fe.id);if(Te.length>1){let tt=Array();for(var ge=0;ge<fe.value.rings.length;ge++)tt.push(fe.value.rings[ge]);H.push({common:fe,rings:tt,vertices:Te})}else if(1===Te.length&&2===fe.value.rings.length){let tt=Array();for(ge=0;ge<fe.value.rings.length;ge++)tt.push(fe.value.rings[ge]);H.push({common:fe,rings:tt,vertices:Te})}}}for(K=0;K<H.length;K++){let fe=H[K];if(2===fe.vertices.length){let Te=fe.vertices[0],tt=fe.vertices[1];if(!Te.value.isDrawn||!tt.value.isDrawn)continue;let Ze=(2*Math.PI-this.getRing(fe.rings[0]).getAngle())/6;this.rotateSubtree(Te.id,fe.common.id,Ze,fe.common.position),this.rotateSubtree(tt.id,fe.common.id,-Ze,fe.common.position);let Le=this.getOverlapScore(),Fe=this.getSubtreeOverlapScore(Te.id,fe.common.id,Le.vertexScores),Xe=this.getSubtreeOverlapScore(tt.id,fe.common.id,Le.vertexScores),mt=Fe.value+Xe.value;this.rotateSubtree(Te.id,fe.common.id,-2*Ze,fe.common.position),this.rotateSubtree(tt.id,fe.common.id,2*Ze,fe.common.position),Le=this.getOverlapScore(),Fe=this.getSubtreeOverlapScore(Te.id,fe.common.id,Le.vertexScores),Xe=this.getSubtreeOverlapScore(tt.id,fe.common.id,Le.vertexScores),Fe.value+Xe.value>mt&&(this.rotateSubtree(Te.id,fe.common.id,2*Ze,fe.common.position),this.rotateSubtree(tt.id,fe.common.id,-2*Ze,fe.common.position))}}}resolveSecondaryOverlaps(H){for(var G=0;G<H.length;G++)if(H[G].score>this.opts.overlapSensitivity){let K=this.graph.vertices[H[G].id];if(K.isTerminal()){let ie=this.getClosestVertex(K);if(ie){let ge=null;ge=ie.isTerminal()?0===ie.id?this.graph.vertices[1].position:ie.previousPosition:0===ie.id?this.graph.vertices[1].position:ie.position,K.position.rotateAwayFrom(ge,0===K.id?this.graph.vertices[1].position:K.previousPosition,R.toRad(20))}}}}getLastVertexWithAngle(H){let G=0,K=null;for(;!G&&H;)K=this.graph.vertices[H],G=K.angle,H=K.parentVertexId;return K}createNextBond(H,G=null,K=0,ie=!1,ge=!1){if(H.positioned&&!ge)return;let we=!1;if(G){let Te=this.graph.getEdge(H.id,G.id);("/"===Te.bondType||"\\"===Te.bondType)&&++this.doubleBondConfigCount%2==1&&null===this.doubleBondConfig&&(this.doubleBondConfig=Te.bondType,we=!0,null===G.parentVertexId&&H.value.branchBond&&("/"===this.doubleBondConfig?this.doubleBondConfig="\\":"\\"===this.doubleBondConfig&&(this.doubleBondConfig="/")))}if(!ge)if(G)if(G.value.rings.length>0){let Te=G.neighbours,tt=null,Ze=new q(0,0);if(null===G.value.bridgedRing&&G.value.rings.length>1)for(var fe=0;fe<Te.length;fe++){let Le=this.graph.vertices[Te[fe]];if(U.containsAll(Le.value.rings,G.value.rings)){tt=Le;break}}if(null===tt){for(fe=0;fe<Te.length;fe++){let Fe=this.graph.vertices[Te[fe]];Fe.positioned&&this.areVerticesInSameRing(Fe,G)&&Ze.add(q.subtract(Fe.position,G.position))}Ze.invert().normalize().multiplyScalar(this.opts.bondLength).add(G.position)}else Ze=tt.position.clone().rotateAround(Math.PI,G.position);H.previousPosition=G.position,H.setPositionFromVector(Ze),H.positioned=!0}else{let Te=new q(this.opts.bondLength,0);Te.rotate(K),Te.add(G.position),H.setPositionFromVector(Te),H.previousPosition=G.position,H.positioned=!0}else{let Te=new q(this.opts.bondLength,0);Te.rotate(R.toRad(-60)),H.previousPosition=Te,H.setPosition(this.opts.bondLength,0),H.angle=R.toRad(-60),null===H.value.bridgedRing&&(H.positioned=!0)}if(null!==H.value.bridgedRing){let Te=this.getRing(H.value.bridgedRing);if(!Te.positioned){let tt=q.subtract(H.previousPosition,H.position);tt.invert(),tt.normalize();let Ze=R.polyCircumradius(this.opts.bondLength,Te.members.length);tt.multiplyScalar(Ze),tt.add(H.position),this.createRing(Te,tt,H)}}else if(H.value.rings.length>0){let Te=this.getRing(H.value.rings[0]);if(!Te.positioned){let tt=q.subtract(H.previousPosition,H.position);tt.invert(),tt.normalize();let Ze=R.polyCircumradius(this.opts.bondLength,Te.getSize());tt.multiplyScalar(Ze),tt.add(H.position),this.createRing(Te,tt,H)}}else{let tt=H.getNeighbours(),Ze=Array();for(fe=0;fe<tt.length;fe++)this.graph.vertices[tt[fe]].value.isDrawn&&Ze.push(tt[fe]);G&&(Ze=U.remove(Ze,G.id));let Le=H.getAngle();if(1===Ze.length){let Fe=this.graph.vertices[Ze[0]];if("#"===H.value.bondType||G&&"#"===G.value.bondType||"="===H.value.bondType&&G&&0===G.value.rings.length&&"="===G.value.bondType&&"-"!==H.value.branchBond)H.value.drawExplicit=!1,G&&(this.graph.getEdge(H.id,G.id).center=!0),this.graph.getEdge(H.id,Fe.id).center=!0,("#"===H.value.bondType||G&&"#"===G.value.bondType)&&(Fe.angle=0),Fe.drawExplicit=!0,this.createNextBond(Fe,H,Le+Fe.angle);else if(G&&G.value.rings.length>0){let Xe=R.toRad(60),mt=-Xe,ft=new q(this.opts.bondLength,0),Zt=new q(this.opts.bondLength,0);ft.rotate(Xe).add(H.position),Zt.rotate(mt).add(H.position);let Tt=this.getCurrentCenterOfMass(),On=ft.distanceSq(Tt),_i=Zt.distanceSq(Tt);Fe.angle=On<_i?mt:Xe,this.createNextBond(Fe,H,Le+Fe.angle)}else{let Xe=H.angle;if(G&&G.neighbours.length>3?Xe=Xe>0?Math.min(1.0472,Xe):Xe<0?Math.max(-1.0472,Xe):1.0472:Xe||(Xe=this.getLastVertexWithAngle(H.id).angle,Xe||(Xe=1.0472)),G&&!we){let mt=this.graph.getEdge(H.id,Fe.id).bondType;"/"===mt?("/"===this.doubleBondConfig||"\\"===this.doubleBondConfig&&(Xe=-Xe),this.doubleBondConfig=null):"\\"===mt&&("/"===this.doubleBondConfig&&(Xe=-Xe),this.doubleBondConfig=null)}Fe.angle=ie?Xe:-Xe,this.createNextBond(Fe,H,Le+Fe.angle)}}else if(2===Ze.length){let Fe=H.angle;Fe||(Fe=1.0472);let Xe=this.graph.getTreeDepth(Ze[0],H.id),mt=this.graph.getTreeDepth(Ze[1],H.id),ft=this.graph.vertices[Ze[0]],Zt=this.graph.vertices[Ze[1]];ft.value.subtreeDepth=Xe,Zt.value.subtreeDepth=mt;let Tt=this.graph.getTreeDepth(G?G.id:null,H.id);G&&(G.value.subtreeDepth=Tt);let On=0,_i=1;"C"===Zt.value.element&&"C"!==ft.value.element&&mt>1&&Xe<5?(On=1,_i=0):"C"!==Zt.value.element&&"C"===ft.value.element&&Xe>1&&mt<5?(On=0,_i=1):mt>Xe&&(On=1,_i=0);let Ti=this.graph.vertices[Ze[On]],Ri=this.graph.vertices[Ze[_i]],Wn=(this.graph.getEdge(H.id,Ti.id),this.graph.getEdge(H.id,Ri.id),!1);Tt<Xe&&Tt<mt&&(Wn=!0),Ri.angle=Fe,Ti.angle=-Fe,"\\"===this.doubleBondConfig?"\\"===Ri.value.branchBond&&(Ri.angle=-Fe,Ti.angle=Fe):"/"===this.doubleBondConfig&&"/"===Ri.value.branchBond&&(Ri.angle=-Fe,Ti.angle=Fe),this.createNextBond(Ri,H,Le+Ri.angle,Wn),this.createNextBond(Ti,H,Le+Ti.angle,Wn)}else if(3===Ze.length){let Fe=this.graph.getTreeDepth(Ze[0],H.id),Xe=this.graph.getTreeDepth(Ze[1],H.id),mt=this.graph.getTreeDepth(Ze[2],H.id),ft=this.graph.vertices[Ze[0]],Zt=this.graph.vertices[Ze[1]],Tt=this.graph.vertices[Ze[2]];ft.value.subtreeDepth=Fe,Zt.value.subtreeDepth=Xe,Tt.value.subtreeDepth=mt,Xe>Fe&&Xe>mt?(ft=this.graph.vertices[Ze[1]],Zt=this.graph.vertices[Ze[0]],Tt=this.graph.vertices[Ze[2]]):mt>Fe&&mt>Xe&&(ft=this.graph.vertices[Ze[2]],Zt=this.graph.vertices[Ze[0]],Tt=this.graph.vertices[Ze[1]]),G&&G.value.rings.length<1&&ft.value.rings.length<1&&Zt.value.rings.length<1&&Tt.value.rings.length<1&&1===this.graph.getTreeDepth(Zt.id,H.id)&&1===this.graph.getTreeDepth(Tt.id,H.id)&&this.graph.getTreeDepth(ft.id,H.id)>1?(ft.angle=-H.angle,H.angle>=0?(Zt.angle=R.toRad(30),Tt.angle=R.toRad(90)):(Zt.angle=-R.toRad(30),Tt.angle=-R.toRad(90)),this.createNextBond(ft,H,Le+ft.angle),this.createNextBond(Zt,H,Le+Zt.angle),this.createNextBond(Tt,H,Le+Tt.angle)):(ft.angle=0,Zt.angle=R.toRad(90),Tt.angle=-R.toRad(90),this.createNextBond(ft,H,Le+ft.angle),this.createNextBond(Zt,H,Le+Zt.angle),this.createNextBond(Tt,H,Le+Tt.angle))}else if(4===Ze.length){let Fe=this.graph.getTreeDepth(Ze[0],H.id),Xe=this.graph.getTreeDepth(Ze[1],H.id),mt=this.graph.getTreeDepth(Ze[2],H.id),ft=this.graph.getTreeDepth(Ze[3],H.id),Zt=this.graph.vertices[Ze[0]],Tt=this.graph.vertices[Ze[1]],On=this.graph.vertices[Ze[2]],_i=this.graph.vertices[Ze[3]];Zt.value.subtreeDepth=Fe,Tt.value.subtreeDepth=Xe,On.value.subtreeDepth=mt,_i.value.subtreeDepth=ft,Xe>Fe&&Xe>mt&&Xe>ft?(Zt=this.graph.vertices[Ze[1]],Tt=this.graph.vertices[Ze[0]],On=this.graph.vertices[Ze[2]],_i=this.graph.vertices[Ze[3]]):mt>Fe&&mt>Xe&&mt>ft?(Zt=this.graph.vertices[Ze[2]],Tt=this.graph.vertices[Ze[0]],On=this.graph.vertices[Ze[1]],_i=this.graph.vertices[Ze[3]]):ft>Fe&&ft>Xe&&ft>mt&&(Zt=this.graph.vertices[Ze[3]],Tt=this.graph.vertices[Ze[0]],On=this.graph.vertices[Ze[1]],_i=this.graph.vertices[Ze[2]]),Zt.angle=-R.toRad(36),Tt.angle=R.toRad(36),On.angle=-R.toRad(108),_i.angle=R.toRad(108),this.createNextBond(Zt,H,Le+Zt.angle),this.createNextBond(Tt,H,Le+Tt.angle),this.createNextBond(On,H,Le+On.angle),this.createNextBond(_i,H,Le+_i.angle)}}}getCommonRingbondNeighbour(H){let G=H.neighbours;for(var K=0;K<G.length;K++){let ie=this.graph.vertices[G[K]];if(U.containsAll(ie.value.rings,H.value.rings))return ie}return null}isPointInRing(H){for(var G=0;G<this.rings.length;G++){let K=this.rings[G];if(!K.positioned)continue;let ie=R.polyCircumradius(this.opts.bondLength,K.getSize()),ge=ie*ie;if(H.distanceSq(K.center)<ge)return!0}return!1}isEdgeInRing(H){return this.areVerticesInSameRing(this.graph.vertices[H.sourceId],this.graph.vertices[H.targetId])}isEdgeRotatable(H){let G=this.graph.vertices[H.sourceId],K=this.graph.vertices[H.targetId];return!("-"!==H.bondType||G.isTerminal()||K.isTerminal()||G.value.rings.length>0&&K.value.rings.length>0&&this.areVerticesInSameRing(G,K))}isRingAromatic(H){for(var G=0;G<H.members.length;G++)if(!this.graph.vertices[H.members[G]].value.isPartOfAromaticRing)return!1;return!0}getEdgeNormals(H){return q.units(this.graph.vertices[H.sourceId].position,this.graph.vertices[H.targetId].position)}getNonRingNeighbours(H){let G=Array(),K=this.graph.vertices[H],ie=K.neighbours;for(var ge=0;ge<ie.length;ge++){let we=this.graph.vertices[ie[ge]];0===U.intersection(K.value.rings,we.value.rings).length&&0==we.value.isBridge&&G.push(we)}return G}annotateStereochemistry(){for(var G=0;G<this.graph.vertices.length;G++){let we=this.graph.vertices[G];if(!we.value.isStereoCenter)continue;let fe=we.getNeighbours(),Te=fe.length,tt=Array(Te);for(var K=0;K<Te;K++){let ki=new Uint8Array(this.graph.vertices.length),Mi=Array(Array());ki[we.id]=1,this.visitStereochemistry(fe[K],we.id,ki,Mi,10,0);for(var ie=0;ie<Mi.length;ie++)Mi[ie].sort(function(or,qi){return qi-or});tt[K]=[K,Mi]}let Ze=0,Le=0;for(K=0;K<tt.length;K++)for(tt[K][1].length>Ze&&(Ze=tt[K][1].length),ie=0;ie<tt[K][1].length;ie++)tt[K][1][ie].length>Le&&(Le=tt[K][1][ie].length);for(K=0;K<tt.length;K++){let Mi=Ze-tt[K][1].length;for(ie=0;ie<Mi;ie++)tt[K][1].push([]);for(tt[K][1].push([fe[K]]),ie=0;ie<tt[K][1].length;ie++){let qi=Le-tt[K][1][ie].length;for(var ge=0;ge<qi;ge++)tt[K][1][ie].push(0)}}tt.sort(function(ki,Mi){for(var or=0;or<ki[1].length;or++)for(var qi=0;qi<ki[1][or].length;qi++){if(ki[1][or][qi]>Mi[1][or][qi])return-1;if(ki[1][or][qi]<Mi[1][or][qi])return 1}return 0});let Fe=new Uint8Array(Te);for(K=0;K<Te;K++)Fe[K]=tt[K][0],we.value.priority=K;let Xe=this.graph.vertices[fe[Fe[0]]].position,ft=this.graph.vertices[fe[Fe[2]]].position,Zt=Xe.relativeClockwise(this.graph.vertices[fe[Fe[1]]].position,we.position),On=(Xe.relativeClockwise(ft,we.position),-1===Zt),_i="@"===we.value.bracket.chirality?-1:1,Ti=R.parityOfPermutation(Fe)*_i==1?"R":"S",Ri="down",Yi="up";(On&&"R"!==Ti||!On&&"S"!==Ti)&&(we.value.hydrogenDirection="up",Ri="up",Yi="down"),we.value.hasHydrogen&&(this.graph.getEdge(we.id,fe[Fe[Fe.length-1]]).wedge=Ri);let vr=new Array(fe.length-1),Wn=we.value.rings.length>1&&we.value.hasHydrogen,Pi=we.value.hasHydrogen?1:0;for(K=0;K<Fe.length-Pi;K++){vr[K]=new Uint32Array(2);let Mi=this.graph.vertices[fe[Fe[K]]];vr[K][0]+=Mi.value.isStereoCenter?0:1e5,vr[K][0]+=this.areVerticesInSameRing(Mi,we)?0:1e4,vr[K][0]+=Mi.value.isHeteroAtom()?1e3:0,vr[K][0]-=0===Mi.value.subtreeDepth?1e3:0,vr[K][0]+=1e3-Mi.value.subtreeDepth,vr[K][1]=fe[Fe[K]]}if(vr.sort(function(ki,Mi){return ki[0]>Mi[0]?-1:ki[0]<Mi[0]?1:0}),!Wn){let ki=vr[0][1];if(we.value.hasHydrogen)this.graph.getEdge(we.id,ki).wedge=Yi;else{let Mi=Yi;for(K=Fe.length-1;K>=0&&(Mi=Mi===Ri?Yi:Ri,fe[Fe[K]]!==ki);K--);this.graph.getEdge(we.id,ki).wedge=Mi}}we.value.chirality=Ti}}visitStereochemistry(H,G,K,ie,ge,we,fe=0){K[H]=1;let Te=this.graph.vertices[H],tt=Te.value.getAtomicNumber();ie.length<=we&&ie.push(Array());for(var Ze=0;Ze<this.graph.getEdge(H,G).weight;Ze++)ie[we].push(1e3*fe+tt);let Le=this.graph.vertices[H].neighbours;for(Ze=0;Ze<Le.length;Ze++)1!==K[Le[Ze]]&&we<ge-1&&this.visitStereochemistry(Le[Ze],H,K.slice(),ie,ge,we+1,tt);if(we<ge-1){let Fe=0;for(Ze=0;Ze<Le.length;Ze++)Fe+=this.graph.getEdge(H,Le[Ze]).weight;for(Ze=0;Ze<Te.value.getMaxBonds()-Fe;Ze++)ie.length<=we+1&&ie.push(Array()),ie[we+1].push(1e3*tt+1)}}initPseudoElements(){for(var H=0;H<this.graph.vertices.length;H++){const K=this.graph.vertices[H],ie=K.neighbours;let ge=Array(ie.length);for(var G=0;G<ie.length;G++)ge[G]=this.graph.vertices[ie[G]];if(K.getNeighbourCount()<3||K.value.rings.length>0||"P"===K.value.element||"C"===K.value.element&&3===ge.length&&"N"===ge[0].value.element&&"N"===ge[1].value.element&&"N"===ge[2].value.element)continue;let we=0,fe=0;for(G=0;G<ge.length;G++){let Ze=ge[G],Le=Ze.value.element,Fe=Ze.getNeighbourCount();"C"!==Le&&"H"!==Le&&1===Fe&&we++,Fe>1&&fe++}if(fe>1||we<2)continue;let Te=null;for(G=0;G<ge.length;G++){let Ze=ge[G];Ze.getNeighbourCount()>1&&(Te=Ze)}for(G=0;G<ge.length;G++){let Ze=ge[G];if(Ze.getNeighbourCount()>1)continue;Ze.value.isDrawn=!1;let Le=F.maxBonds[Ze.value.element]-Ze.value.bondCount,Fe="";Ze.value.bracket&&(Le=Ze.value.bracket.hcount,Fe=Ze.value.bracket.charge||0),K.value.attachPseudoElement(Ze.value.element,Te?Te.value.element:null,Le,Fe)}}for(H=0;H<this.graph.vertices.length;H++){const ie=this.graph.vertices[H],ge=ie.value,we=ge.element;if("C"===we||"H"===we||!ge.isDrawn)continue;const fe=ie.neighbours;let Te=Array(fe.length);for(G=0;G<fe.length;G++)Te[G]=this.graph.vertices[fe[G]];for(G=0;G<Te.length;G++){let Ze=Te[G].value;if(!Ze.hasAttachedPseudoElements||2!==Ze.getAttachedPseudoElementsCount())continue;const Le=Ze.getAttachedPseudoElements();Le.hasOwnProperty("0O")&&Le.hasOwnProperty("3C")&&(Ze.isDrawn=!1,ie.value.attachPseudoElement("Ac","",0))}}}}},9119:It=>{class ke{constructor(R,U,q=1){this.id=null,this.sourceId=R,this.targetId=U,this.weight=q,this.bondType="-",this.isPartOfAromaticRing=!1,this.center=!1,this.wedge=""}setBondType(R){this.bondType=R,this.weight=ke.bonds[R]}static get bonds(){return{"-":1,"/":1,"\\":1,"=":2,"#":3,$:4}}}It.exports=ke},9909:It=>{It.exports={C2H4O2:"acetic acid",C3H6O:"acetone",C2H3N:"acetonitrile",C6H6:"benzene",CCl4:"carbon tetrachloride",C6H5Cl:"chlorobenzene",CHCl3:"chloroform",C6H12:"cyclohexane",C2H4Cl2:"1,2-dichloroethane",C4H10O3:"diethylene glycol",C6H14O3:"diglyme",C4H10O2:"DME",C3H7NO:"DMF",C2H6OS:"DMSO",C2H6O:"ethanol",C2H6O2:"ethylene glycol",C3H8O3:"glycerin",C7H16:"heptane",C6H18N3OP:"HMPA",C6H18N3P:"HMPT",C6H14:"hexane",CH4O:"methanol",C5H12O:"MTBE",CH2Cl2:"methylene chloride",CH5H9NO:"NMP",CH3NO2:"nitromethane",C5H12:"pentane",C5H5N:"pyridine",C7H8:"toluene",C6H15N:"triethyl amine",H2O:"water"}},3912:(It,ke,O)=>{const R=O(1611),U=O(9238),q=O(5031);It.exports=class te{constructor(A,F,ne,x,k=.3,I=0,S=null,z=1,ee=!1){this.points=A,this.weights=F,this.width=ne,this.height=x,this.sigma=k,this.interval=I,this.opacity=z,this.normalized=ee,null===S&&(S=["#c51b7d","#de77ae","#f1b6da","#fde0ef","#ffffff","#e6f5d0","#b8e186","#7fbc41","#4d9221"]),this.colormap=S,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height}setFromArray(A,F){this.points=[],A.forEach(ne=>{this.points.push(new R(ne[0],ne[1]))}),this.weights=[],F.forEach(ne=>{this.weights.push(ne)})}draw(){let A=[];for(let k=0;k<this.width;k++){let I=[];for(let S=0;S<this.height;S++)I.push(0);A.push(I)}let F=1/(2*this.sigma**2);for(let k=0;k<this.points.length;k++){let I=this.points[k],S=this.weights[k];for(let z=0;z<this.width;z++)for(let ee=0;ee<this.height;ee++){let Ce=S*Math.exp(-((z-I.x)**2+(ee-I.y)**2)*F);A[z][ee]+=Ce}}let ne=1;if(!this.normalized){let k=-Number.MAX_SAFE_INTEGER,I=Number.MAX_SAFE_INTEGER;for(let S=0;S<this.width;S++)for(let z=0;z<this.height;z++)A[S][z]<I&&(I=A[S][z]),A[S][z]>k&&(k=A[S][z]);ne=Math.max(Math.abs(I),Math.abs(k))}const x=q.scale(this.colormap).domain([-1,1]);for(let k=0;k<this.width;k++)for(let I=0;I<this.height;I++){this.normalized||(A[k][I]=A[k][I]/ne),0!==this.interval&&(A[k][I]=Math.round(A[k][I]/this.interval)*this.interval);let[S,z,ee]=x(A[k][I]).rgb();this.setPixel(new R(k,I),S,z,ee)}}getImage(A){let F=new Image;F.onload=()=>{this.context.imageSmoothingEnabled=!1,this.context.drawImage(F,0,0,this.width,this.height),A&&A(F)},F.onerror=function(ne){console.log(ne)},F.src=this.canvas.toDataURL()}getSVG(){return U(this.context.getImageData(0,0,this.width,this.height))}setPixel(A,F,ne,x){this.context.fillStyle="rgba("+F+","+ne+","+x+","+this.opacity+")",this.context.fillRect(A.x,A.y,1,1)}}},4336:(It,ke,O)=>{const R=O(5980),q=(O(1611),O(768)),te=O(9119),A=(O(1644),O(2848));class F{constructor(x,k=!1){this.vertices=Array(),this.edges=Array(),this.atomIdxToVertexId=Array(),this.vertexIdsToEdgeId={},this.isomeric=k,this._atomIdx=0,this._time=0,this._init(x)}_init(x,k=0,I=null,S=!1){const z=x.atom.element?x.atom.element:x.atom;let ee=new A(z,x.bond);("H"!==z||!x.hasNext&&null===I)&&(ee.idx=this._atomIdx,this._atomIdx++),ee.branchBond=x.branchBond,ee.ringbonds=x.ringbonds,ee.bracket=x.atom.element?x.atom:null,ee.class=x.atom.class;let Q=new q(ee),Ce=this.vertices[I];if(this.addVertex(Q),null!==ee.idx&&this.atomIdxToVertexId.push(Q.id),null!==I){Q.setParentVertexId(I),Q.value.addNeighbouringElement(Ce.value.element),Ce.addChild(Q.id),Ce.value.addNeighbouringElement(ee.element),Ce.spanningTreeChildren.push(Q.id);let ie=new te(I,Q.id,1),ge=null;S?(ie.setBondType(Q.value.branchBond||"-"),ge=Q.id,ie.setBondType(Q.value.branchBond||"-"),ge=Q.id):(ie.setBondType(Ce.value.bondType||"-"),ge=Ce.id),this.addEdge(ie)}let H=x.ringbondCount+1;ee.bracket&&(H+=ee.bracket.hcount);let G=0;if(ee.bracket&&ee.bracket.chirality){ee.isStereoCenter=!0,G=ee.bracket.hcount;for(var K=0;K<G;K++)this._init({atom:"H",isBracket:"false",branches:Array(),branchCount:0,ringbonds:Array(),ringbondCount:!1,next:null,hasNext:!1,bond:"-"},K,Q.id,!0)}for(K=0;K<x.branchCount;K++)this._init(x.branches[K],K+H,Q.id,!0);x.hasNext&&this._init(x.next,x.branchCount+H,Q.id)}clear(){this.vertices=Array(),this.edges=Array(),this.vertexIdsToEdgeId={}}addVertex(x){return x.id=this.vertices.length,this.vertices.push(x),x.id}addEdge(x){let k=this.vertices[x.sourceId],I=this.vertices[x.targetId];return x.id=this.edges.length,this.edges.push(x),this.vertexIdsToEdgeId[x.sourceId+"_"+x.targetId]=x.id,this.vertexIdsToEdgeId[x.targetId+"_"+x.sourceId]=x.id,x.isPartOfAromaticRing=k.value.isPartOfAromaticRing&&I.value.isPartOfAromaticRing,k.value.bondCount+=x.weight,I.value.bondCount+=x.weight,k.edges.push(x.id),I.edges.push(x.id),x.id}getEdge(x,k){let I=this.vertexIdsToEdgeId[x+"_"+k];return void 0===I?null:this.edges[I]}getEdges(x){let k=Array(),I=this.vertices[x];for(var S=0;S<I.neighbours.length;S++)k.push(this.vertexIdsToEdgeId[x+"_"+I.neighbours[S]]);return k}hasEdge(x,k){return void 0!==this.vertexIdsToEdgeId[x+"_"+k]}getVertexList(){let x=[this.vertices.length];for(var k=0;k<this.vertices.length;k++)x[k]=this.vertices[k].id;return x}getEdgeList(){let x=Array(this.edges.length);for(var k=0;k<this.edges.length;k++)x[k]=[this.edges[k].sourceId,this.edges[k].targetId];return x}getAdjacencyMatrix(){let x=this.vertices.length,k=Array(x);for(var I=0;I<x;I++)k[I]=new Array(x),k[I].fill(0);for(I=0;I<this.edges.length;I++){let z=this.edges[I];k[z.sourceId][z.targetId]=1,k[z.targetId][z.sourceId]=1}return k}getComponentsAdjacencyMatrix(){let x=this.vertices.length,k=Array(x),I=this.getBridges();for(var S=0;S<x;S++)k[S]=new Array(x),k[S].fill(0);for(S=0;S<this.edges.length;S++){let ee=this.edges[S];k[ee.sourceId][ee.targetId]=1,k[ee.targetId][ee.sourceId]=1}for(S=0;S<I.length;S++)k[I[S][0]][I[S][1]]=0,k[I[S][1]][I[S][0]]=0;return k}getSubgraphAdjacencyMatrix(x){let k=x.length,I=Array(k);for(var S=0;S<k;S++){I[S]=new Array(k),I[S].fill(0);for(var z=0;z<k;z++)S!==z&&this.hasEdge(x[S],x[z])&&(I[S][z]=1)}return I}getDistanceMatrix(){let x=this.vertices.length,k=this.getAdjacencyMatrix(),I=Array(x);for(var S=0;S<x;S++)I[S]=Array(x),I[S].fill(1/0);for(S=0;S<x;S++)for(var z=0;z<x;z++)1===k[S][z]&&(I[S][z]=1);for(var ee=0;ee<x;ee++)for(S=0;S<x;S++)for(z=0;z<x;z++)I[S][z]>I[S][ee]+I[ee][z]&&(I[S][z]=I[S][ee]+I[ee][z]);return I}getSubgraphDistanceMatrix(x){let k=x.length,I=this.getSubgraphAdjacencyMatrix(x),S=Array(k);for(var z=0;z<k;z++)S[z]=Array(k),S[z].fill(1/0);for(z=0;z<k;z++)for(var ee=0;ee<k;ee++)1===I[z][ee]&&(S[z][ee]=1);for(var Q=0;Q<k;Q++)for(z=0;z<k;z++)for(ee=0;ee<k;ee++)S[z][ee]>S[z][Q]+S[Q][ee]&&(S[z][ee]=S[z][Q]+S[Q][ee]);return S}getAdjacencyList(){let x=this.vertices.length,k=Array(x);for(var I=0;I<x;I++){k[I]=[];for(var S=0;S<x;S++)I!==S&&this.hasEdge(this.vertices[I].id,this.vertices[S].id)&&k[I].push(S)}return k}getSubgraphAdjacencyList(x){let k=x.length,I=Array(k);for(var S=0;S<k;S++){I[S]=Array();for(var z=0;z<k;z++)S!==z&&this.hasEdge(x[S],x[z])&&I[S].push(z)}return I}getBridges(){let x=this.vertices.length,k=new Array(x),I=new Array(x),S=new Array(x),z=new Array(x),ee=this.getAdjacencyList(),Q=Array();k.fill(!1),z.fill(null),this._time=0;for(var Ce=0;Ce<x;Ce++)k[Ce]||this._bridgeDfs(Ce,k,I,S,z,ee,Q);return Q}traverseBF(x,k){let S=new Array(this.vertices.length);S.fill(!1);for(var z=[x];z.length>0;){let Q=z.shift(),Ce=this.vertices[Q];k(Ce);for(var ee=0;ee<Ce.neighbours.length;ee++){let H=Ce.neighbours[ee];S[H]||(S[H]=!0,z.push(H))}}}getTreeDepth(x,k){if(null===x||null===k)return 0;let I=this.vertices[x].getSpanningTreeNeighbours(k),S=0;for(var z=0;z<I.length;z++){let Q=this.getTreeDepth(I[z],x);Q>S&&(S=Q)}return S+1}traverseTree(x,k,I,S=999999,z=!1,ee=1,Q=null){if(null===Q&&(Q=new Uint8Array(this.vertices.length)),ee>S+1||1===Q[x])return;Q[x]=1;let Ce=this.vertices[x],H=Ce.getNeighbours(k);(!z||ee>1)&&I(Ce);for(var G=0;G<H.length;G++)this.traverseTree(H[G],x,I,S,z,ee+1,Q)}kkLayout(x,k,I,S,z,ee=.1,Q=.1,Ce=2e3,H=50,G=1e9){let K=z;for(var ie=x.length;ie--;)var ge=this.vertices[x[ie]].neighbours.length;let we=this.getSubgraphDistanceMatrix(x),fe=x.length,Te=R.polyCircumradius(500,fe),tt=R.centralAngle(fe),Ze=0,Le=new Float32Array(fe),Fe=new Float32Array(fe),Xe=Array(fe);for(ie=fe;ie--;){let ln=this.vertices[x[ie]];ln.positioned?(Le[ie]=ln.position.x,Fe[ie]=ln.position.y):(Le[ie]=k.x+Math.cos(Ze)*Te,Fe[ie]=k.y+Math.sin(Ze)*Te),Xe[ie]=ln.positioned,Ze+=tt}let mt=Array(fe);for(ie=fe;ie--;)for(mt[ie]=new Array(fe),ge=fe;ge--;)mt[ie][ge]=z*we[ie][ge];let ft=Array(fe);for(ie=fe;ie--;)for(ft[ie]=Array(fe),ge=fe;ge--;)ft[ie][ge]=K*Math.pow(we[ie][ge],-2);let _i,Ti,Ri,Yi,vr,Wn,Pi,Zt=Array(fe),Tt=new Float32Array(fe),On=new Float32Array(fe);for(ie=fe;ie--;)Zt[ie]=Array(fe);for(ie=fe;ie--;){_i=Le[ie],Ti=Fe[ie],Ri=0,Yi=0;let ln=fe;for(;ln--;)ie!==ln&&(vr=Le[ln],Wn=Fe[ln],Pi=1/Math.sqrt((_i-vr)*(_i-vr)+(Ti-Wn)*(Ti-Wn)),Zt[ie][ln]=[ft[ie][ln]*(_i-vr-mt[ie][ln]*(_i-vr)*Pi),ft[ie][ln]*(Ti-Wn-mt[ie][ln]*(Ti-Wn)*Pi)],Zt[ln][ie]=Zt[ie][ln],Ri+=Zt[ie][ln][0],Yi+=Zt[ie][ln][1]);Tt[ie]=Ri,On[ie]=Yi}let ki=function(ln){return[Tt[ln]*Tt[ln]+On[ln]*On[ln],Tt[ln],On[ln]]},Mi=function(){let ln=0,Fn=0,Ci=0,xi=0;for(ie=fe;ie--;){let[Gt,At,Bt]=ki(ie);Gt>ln&&!1===Xe[ie]&&(ln=Gt,Fn=ie,Ci=At,xi=Bt)}return[Fn,ln,Ci,xi]},or=function(ln,Fn,Ci){let xi=0,Gt=0,At=0,Bt=Le[ln],yn=Fe[ln],Ln=mt[ln],zt=ft[ln];for(ie=fe;ie--;){if(ie===ln)continue;let Do=Le[ie],Rs=Fe[ie],Us=Ln[ie],ea=zt[ie],jo=(Bt-Do)*(Bt-Do),Js=1/Math.pow(jo+(yn-Rs)*(yn-Rs),1.5);xi+=ea*(1-Us*(yn-Rs)*(yn-Rs)*Js),Gt+=ea*(1-Us*jo*Js),At+=ea*(Us*(Bt-Do)*(yn-Rs)*Js)}0===xi&&(xi=.1),0===Gt&&(Gt=.1),0===At&&(At=.1);let nn=Fn/xi+Ci/At;nn/=At/xi-Gt/At;let mn=-(At*nn+Fn)/xi;Le[ln]+=mn,Fe[ln]+=nn;let ai,ns,oo,ao,Co,ti=Zt[ln];for(Fn=0,Ci=0,Bt=Le[ln],yn=Fe[ln],ie=fe;ie--;)ln!==ie&&(ai=Le[ie],ns=Fe[ie],oo=ti[ie][0],ao=ti[ie][1],Co=1/Math.sqrt((Bt-ai)*(Bt-ai)+(yn-ns)*(yn-ns)),mn=zt[ie]*(Bt-ai-Ln[ie]*(Bt-ai)*Co),nn=zt[ie]*(yn-ns-Ln[ie]*(yn-ns)*Co),ti[ie]=[mn,nn],Fn+=mn,Ci+=nn,Tt[ie]+=mn-oo,On[ie]+=nn-ao);Tt[ln]=Fn,On[ln]=Ci},qi=0,Qs=0,ko=0,ei=0,jt=0,pn=0;for(;G>ee&&Ce>jt;)for(jt++,[qi,G,Qs,ko]=Mi(),ei=G,pn=0;ei>Q&&H>pn;)pn++,or(qi,Qs,ko),[ei,Qs,ko]=ki(qi);for(ie=fe;ie--;){let Fn=this.vertices[x[ie]];Fn.position.x=Le[ie],Fn.position.y=Fe[ie],Fn.positioned=!0,Fn.forcePositioned=!0}}_bridgeDfs(x,k,I,S,z,ee,Q){k[x]=!0,I[x]=S[x]=++this._time;for(var Ce=0;Ce<ee[x].length;Ce++){let H=ee[x][Ce];k[H]?H!==z[x]&&(S[x]=Math.min(S[x],I[H])):(z[H]=x,this._bridgeDfs(H,k,I,S,z,ee,Q),S[x]=Math.min(S[x],S[H]),S[H]>I[x]&&Q.push([x,H]))}}static getConnectedComponents(x){let k=x.length,I=new Array(k),S=new Array;I.fill(!1);for(var ee=0;ee<k;ee++)if(!I[ee]){let Q=Array();I[ee]=!0,Q.push(ee),F._ccGetDfs(ee,I,x,Q),Q.length>1&&S.push(Q)}return S}static getConnectedComponentCount(x){let k=x.length,I=new Array(k),S=0;I.fill(!1);for(var z=0;z<k;z++)I[z]||(I[z]=!0,S++,F._ccCountDfs(z,I,x));return S}static _ccCountDfs(x,k,I){for(var S=0;S<I[x].length;S++)!I[x][S]||k[S]||x===S||(k[S]=!0,F._ccCountDfs(S,k,I))}static _ccGetDfs(x,k,I,S){for(var z=0;z<I[x].length;z++)!I[x][z]||k[z]||x===z||(k[z]=!0,S.push(z),F._ccGetDfs(z,k,I,S))}}It.exports=F},7680:(It,ke,O)=>{const R=O(1611);class U{constructor(te=new R(0,0),re=new R(0,0),A=null,F=null,ne=!1,x=!1){this.from=te,this.to=re,this.elementFrom=A,this.elementTo=F,this.chiralFrom=ne,this.chiralTo=x}clone(){return new U(this.from.clone(),this.to.clone(),this.elementFrom,this.elementTo)}getLength(){return Math.sqrt(Math.pow(this.to.x-this.from.x,2)+Math.pow(this.to.y-this.from.y,2))}getAngle(){return R.subtract(this.getRightVector(),this.getLeftVector()).angle()}getRightVector(){return this.from.x<this.to.x?this.to:this.from}getLeftVector(){return this.from.x<this.to.x?this.from:this.to}getRightElement(){return this.from.x<this.to.x?this.elementTo:this.elementFrom}getLeftElement(){return this.from.x<this.to.x?this.elementFrom:this.elementTo}getRightChiral(){return this.from.x<this.to.x?this.chiralTo:this.chiralFrom}getLeftChiral(){return this.from.x<this.to.x?this.chiralFrom:this.chiralTo}setRightVector(te,re){return this.from.x<this.to.x?(this.to.x=te,this.to.y=re):(this.from.x=te,this.from.y=re),this}setLeftVector(te,re){return this.from.x<this.to.x?(this.from.x=te,this.from.y=re):(this.to.x=te,this.to.y=re),this}rotateToXAxis(){let te=this.getLeftVector();return this.setRightVector(te.x+this.getLength(),te.y),this}rotate(te){let re=this.getLeftVector(),A=this.getRightVector(),F=Math.sin(te),ne=Math.cos(te);return this.setRightVector(ne*(A.x-re.x)-F*(A.y-re.y)+re.x,F*(A.x-re.x)-ne*(A.y-re.y)+re.y),this}shortenFrom(te){let re=R.subtract(this.to,this.from);return re.normalize(),re.multiplyScalar(te),this.from.add(re),this}shortenTo(te){let re=R.subtract(this.from,this.to);return re.normalize(),re.multiplyScalar(te),this.to.add(re),this}shortenRight(te){return this.from.x<this.to.x?this.shortenTo(te):this.shortenFrom(te),this}shortenLeft(te){return this.from.x<this.to.x?this.shortenFrom(te):this.shortenTo(te),this}shorten(te){let re=R.subtract(this.from,this.to);return re.normalize(),re.multiplyScalar(te/2),this.to.add(re),this.from.subtract(re),this}}It.exports=U},5980:It=>{class ke{static round(R,U){return U=U||1,+(Math.round(R+"e"+U)+"e-"+U)}static meanAngle(R){let U=0,q=0;for(var te=0;te<R.length;te++)U+=Math.sin(R[te]),q+=Math.cos(R[te]);return Math.atan2(U/R.length,q/R.length)}static innerAngle(R){return ke.toRad(180*(R-2)/R)}static polyCircumradius(R,U){return R/(2*Math.sin(Math.PI/U))}static apothem(R,U){return R*Math.cos(Math.PI/U)}static apothemFromSideLength(R,U){let q=ke.polyCircumradius(R,U);return ke.apothem(q,U)}static centralAngle(R){return ke.toRad(360/R)}static toDeg(R){return R*ke.degFactor}static toRad(R){return R*ke.radFactor}static parityOfPermutation(R){let U=new Uint8Array(R.length),q=0,te=function(A,F=0){return 1===U[A]?F:(F++,U[A]=1,te(R[A],F))};for(var re=0;re<R.length;re++)1!==U[re]&&(q+=1-te(re)%2);return q%2?-1:1}static get radFactor(){return Math.PI/180}static get degFactor(){return 180/Math.PI}static get twoPI(){return 2*Math.PI}}It.exports=ke},7570:It=>{It.exports=class ke{static extend(){let R=this,U={},q=!1,te=0,re=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(q=arguments[0],te++);let A=function(F){for(var ne in F)Object.prototype.hasOwnProperty.call(F,ne)&&(U[ne]=q&&"[object Object]"===Object.prototype.toString.call(F[ne])?R.extend(!0,U[ne],F[ne]):F[ne])};for(;te<re;te++)A(arguments[te]);return U}}},1481:It=>{It.exports=function(){"use strict";function O(U,q,te,re){this.message=U,this.expected=q,this.found=te,this.location=re,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,O)}return function ke(U,q){function te(){this.constructor=U}te.prototype=q.prototype,U.prototype=new te}(O,Error),O.buildMessage=function(U,q){var te={literal:function(I){return'"'+A(I.text)+'"'},class:function(I){var z,S="";for(z=0;z<I.parts.length;z++)S+=I.parts[z]instanceof Array?F(I.parts[z][0])+"-"+F(I.parts[z][1]):F(I.parts[z]);return"["+(I.inverted?"^":"")+S+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},other:function(I){return I.description}};function re(I){return I.charCodeAt(0).toString(16).toUpperCase()}function A(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+re(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+re(S)})}function F(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+re(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+re(S)})}function ne(I){return te[I.type](I)}return"Expected "+function x(I){var z,ee,S=new Array(I.length);for(z=0;z<I.length;z++)S[z]=ne(I[z]);if(S.sort(),S.length>0){for(z=1,ee=1;z<S.length;z++)S[z-1]!==S[z]&&(S[ee]=S[z],ee++);S.length=ee}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}(U)+" but "+function k(I){return I?'"'+A(I)+'"':"end of input"}(q)+" found."},{SyntaxError:O,parse:function R(U,q){if(q=void 0!==q?q:{},U.split("(").length-1!=U.split(")").length-1)throw $o("The number of opening parentheses does not match the number of closing parentheses.",0);var Yt,A={},F={chain:Yr},ne=Yr,x=function(wt){for(var Ge=[],fn=[],Lt=0;Lt<wt[1].length;Lt++)Ge.push(wt[1][Lt]);for(Lt=0;Lt<wt[2].length;Lt++)fn.push({bond:wt[2][Lt][0]?wt[2][Lt][0]:"-",id:wt[2][Lt][1]});for(Lt=0;Lt<wt[3].length;Lt++)Ge.push(wt[3][Lt]);for(Lt=0;Lt<wt[6].length;Lt++)Ge.push(wt[6][Lt]);return{atom:wt[0],isBracket:!!wt[0].element,branches:Ge,branchCount:Ge.length,ringbonds:fn,ringbondCount:fn.length,bond:wt[4]?wt[4]:"-",next:wt[5],hasNext:!!wt[5]}},k="(",I=Zi("(",!1),S=")",z=Zi(")",!1),ee=function(wt){return wt[2].branchBond=wt[1]?wt[1]:"-",wt[2]},Q=function(wt){return wt},Ce=/^[\-=#$:\/\\.]/,H=eo(["-","=","#","$",":","/","\\","."],!1,!1),G=function(wt){return wt},K="[",ie=Zi("[",!1),ge="se",we=Zi("se",!1),fe="as",Te=Zi("as",!1),tt="]",Ze=Zi("]",!1),Le=function(wt){return{isotope:wt[1],element:wt[2],chirality:wt[3],hcount:wt[4],charge:wt[5],class:wt[6]}},Fe="B",Xe=Zi("B",!1),mt="r",ft=Zi("r",!1),Zt="C",Tt=Zi("C",!1),On="l",_i=Zi("l",!1),Ti=/^[NOPSFI]/,Ri=eo(["N","O","P","S","F","I"],!1,!1),Yi=function(wt){return wt.length>1?wt.join(""):wt},vr=/^[bcnops]/,Wn=eo(["b","c","n","o","p","s"],!1,!1),Pi="*",ki=Zi("*",!1),Mi=function(wt){return wt},or=/^[A-Z]/,qi=eo([["A","Z"]],!1,!1),Qs=/^[a-z]/,ko=eo([["a","z"]],!1,!1),ei=function(wt){return wt.join("")},jt="%",pn=Zi("%",!1),ln=/^[1-9]/,Fn=eo([["1","9"]],!1,!1),Ci=/^[0-9]/,xi=eo([["0","9"]],!1,!1),Gt=function(wt){return Number(1==wt.length?wt:wt.join("").replace("%",""))},At="@",Bt=Zi("@",!1),yn="TH",Ln=Zi("TH",!1),zt=/^[12]/,nn=eo(["1","2"],!1,!1),mn="AL",ti=Zi("AL",!1),ai="SP",ns=Zi("SP",!1),oo=/^[1-3]/,ao=eo([["1","3"]],!1,!1),Co="TB",Do=Zi("TB",!1),Rs="OH",Us=Zi("OH",!1),ea=function(wt){return wt[1]?"@"==wt[1]?"@@":wt[1].join("").replace(",",""):"@"},jo=function(wt){return wt},Js="+",$a=Zi("+",!1),Xl=function(wt){return wt[1]?"+"!=wt[1]?Number(wt[1].join("")):2:1},wa="-",dc=Zi("-",!1),Ca=function(wt){return wt[1]?"-"!=wt[1]?-Number(wt[1].join("")):-2:-1},Zr="H",yl=Zi("H",!1),sl=function(wt){return wt[1]?Number(wt[1]):1},hc=":",fc=Zi(":",!1),Ir=/^[0]/,hn=eo(["0"],!1,!1),Gn=function(wt){return Number(wt[1][0]+wt[1][1].join(""))},dr=function(wt){return Number(wt.join(""))},Ne=0,Ki=[{line:1,column:1}],Xi=0,xr=[],oi=0;if("startRule"in q){if(!(q.startRule in F))throw new Error("Can't start parsing from rule \""+q.startRule+'".');ne=F[q.startRule]}function Zi(wt,Ge){return{type:"literal",text:wt,ignoreCase:Ge}}function eo(wt,Ge,fn){return{type:"class",parts:wt,inverted:Ge,ignoreCase:fn}}function Fa(wt){var fn,Ge=Ki[wt];if(Ge)return Ge;for(fn=wt-1;!Ki[fn];)fn--;for(Ge={line:(Ge=Ki[fn]).line,column:Ge.column};fn<wt;)10===U.charCodeAt(fn)?(Ge.line++,Ge.column=1):Ge.column++,fn++;return Ki[wt]=Ge,Ge}function Di(wt){Ne<Xi||(Ne>Xi&&(Xi=Ne,xr=[]),xr.push(wt))}function $o(wt,Ge){return new O(wt,null,null,Ge)}function Yr(){var Ge,fn,Lt,An,fi,$i,is,to,zi;if(Ne,Ge=Ne,fn=function Ol(){var Ge;return Ne,Ge=function ms(){var Ge,fn,Lt;return Ne,Ge=Ne,66===U.charCodeAt(Ne)?(fn=Fe,Ne++):(fn=A,0===oi&&Di(Xe)),fn!==A?(114===U.charCodeAt(Ne)?(Lt=mt,Ne++):(Lt=A,0===oi&&Di(ft)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge===A&&(Ge=Ne,67===U.charCodeAt(Ne)?(fn=Zt,Ne++):(fn=A,0===oi&&Di(Tt)),fn!==A?(108===U.charCodeAt(Ne)?(Lt=On,Ne++):(Lt=A,0===oi&&Di(_i)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge===A&&(Ti.test(U.charAt(Ne))?(Ge=U.charAt(Ne),Ne++):(Ge=A,0===oi&&Di(Ri)))),Ge!==A&&(Ge=Yi(Ge)),Ge}(),Ge===A&&((Ge=ql())===A&&(Ge=function gs(){var Ge,fn,Lt,An,fi,$i,is,to,zi;return Ne,Ge=Ne,91===U.charCodeAt(Ne)?(fn=K,Ne++):(fn=A,0===oi&&Di(ie)),fn!==A?(Lt=function Mo(){var Ge,fn,Lt,An;return Ne,Ge=Ne,ln.test(U.charAt(Ne))?(fn=U.charAt(Ne),Ne++):(fn=A,0===oi&&Di(Fn)),fn!==A?(Ci.test(U.charAt(Ne))?(Lt=U.charAt(Ne),Ne++):(Lt=A,0===oi&&Di(xi)),Lt===A&&(Lt=null),Lt!==A?(Ci.test(U.charAt(Ne))?(An=U.charAt(Ne),Ne++):(An=A,0===oi&&Di(xi)),An===A&&(An=null),An!==A?Ge=fn=[fn,Lt,An]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=dr(Ge)),Ge}(),Lt===A&&(Lt=null),Lt!==A?(U.substr(Ne,2)===ge?(An=ge,Ne+=2):(An=A,0===oi&&Di(we)),An===A&&(U.substr(Ne,2)===fe?(An=fe,Ne+=2):(An=A,0===oi&&Di(Te)),An===A&&((An=ql())===A&&(An=function _s(){var Ge,fn,Lt;return Ne,Ge=Ne,or.test(U.charAt(Ne))?(fn=U.charAt(Ne),Ne++):(fn=A,0===oi&&Di(qi)),fn!==A?(Qs.test(U.charAt(Ne))?(Lt=U.charAt(Ne),Ne++):(Lt=A,0===oi&&Di(ko)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=ei(Ge)),Ge}(),An===A&&(An=Kn())))),An!==A?(fi=function Ui(){var Ge,fn,Lt,An,fi,$i;return Ne,Ge=Ne,64===U.charCodeAt(Ne)?(fn=At,Ne++):(fn=A,0===oi&&Di(Bt)),fn!==A?(64===U.charCodeAt(Ne)?(Lt=At,Ne++):(Lt=A,0===oi&&Di(Bt)),Lt===A&&(Lt=Ne,U.substr(Ne,2)===yn?(An=yn,Ne+=2):(An=A,0===oi&&Di(Ln)),An!==A?(zt.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(nn)),fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A),Lt===A&&(Lt=Ne,U.substr(Ne,2)===mn?(An=mn,Ne+=2):(An=A,0===oi&&Di(ti)),An!==A?(zt.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(nn)),fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A),Lt===A&&(Lt=Ne,U.substr(Ne,2)===ai?(An=ai,Ne+=2):(An=A,0===oi&&Di(ns)),An!==A?(oo.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(ao)),fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A),Lt===A&&(Lt=Ne,U.substr(Ne,2)===Co?(An=Co,Ne+=2):(An=A,0===oi&&Di(Do)),An!==A?(ln.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(Fn)),fi!==A?(Ci.test(U.charAt(Ne))?($i=U.charAt(Ne),Ne++):($i=A,0===oi&&Di(xi)),$i===A&&($i=null),$i!==A?Lt=An=[An,fi,$i]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A),Lt===A&&(Lt=Ne,U.substr(Ne,2)===Rs?(An=Rs,Ne+=2):(An=A,0===oi&&Di(Us)),An!==A?(ln.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(Fn)),fi!==A?(Ci.test(U.charAt(Ne))?($i=U.charAt(Ne),Ne++):($i=A,0===oi&&Di(xi)),$i===A&&($i=null),$i!==A?Lt=An=[An,fi,$i]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A)))))),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=ea(Ge)),Ge}(),fi===A&&(fi=null),fi!==A?($i=function aa(){var Ge,fn,Lt;return Ne,Ge=Ne,72===U.charCodeAt(Ne)?(fn=Zr,Ne++):(fn=A,0===oi&&Di(yl)),fn!==A?(Ci.test(U.charAt(Ne))?(Lt=U.charAt(Ne),Ne++):(Lt=A,0===oi&&Di(xi)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=sl(Ge)),Ge}(),$i===A&&($i=null),$i!==A?(is=function xa(){var Ge;return Ne,Ge=function co(){var Ge,fn,Lt,An,fi;return Ne,Ge=Ne,43===U.charCodeAt(Ne)?(fn=Js,Ne++):(fn=A,0===oi&&Di($a)),fn!==A?(43===U.charCodeAt(Ne)?(Lt=Js,Ne++):(Lt=A,0===oi&&Di($a)),Lt===A&&(Lt=Ne,ln.test(U.charAt(Ne))?(An=U.charAt(Ne),Ne++):(An=A,0===oi&&Di(Fn)),An!==A?(Ci.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(xi)),fi===A&&(fi=null),fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=Xl(Ge)),Ge}(),Ge===A&&(Ge=function ys(){var Ge,fn,Lt,An,fi;return Ne,Ge=Ne,45===U.charCodeAt(Ne)?(fn=wa,Ne++):(fn=A,0===oi&&Di(dc)),fn!==A?(45===U.charCodeAt(Ne)?(Lt=wa,Ne++):(Lt=A,0===oi&&Di(dc)),Lt===A&&(Lt=Ne,ln.test(U.charAt(Ne))?(An=U.charAt(Ne),Ne++):(An=A,0===oi&&Di(Fn)),An!==A?(Ci.test(U.charAt(Ne))?(fi=U.charAt(Ne),Ne++):(fi=A,0===oi&&Di(xi)),fi===A&&(fi=null),fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)):(Ne=Lt,Lt=A)),Lt===A&&(Lt=null),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=Ca(Ge)),Ge}()),Ge!==A&&(Ge=jo(Ge)),Ge}(),is===A&&(is=null),is!==A?(to=function Me(){var Ge,fn,Lt,An,fi,$i;if(Ne,Ge=Ne,58===U.charCodeAt(Ne)?(fn=hc,Ne++):(fn=A,0===oi&&Di(fc)),fn!==A){if(Lt=Ne,ln.test(U.charAt(Ne))?(An=U.charAt(Ne),Ne++):(An=A,0===oi&&Di(Fn)),An!==A){for(fi=[],Ci.test(U.charAt(Ne))?($i=U.charAt(Ne),Ne++):($i=A,0===oi&&Di(xi));$i!==A;)fi.push($i),Ci.test(U.charAt(Ne))?($i=U.charAt(Ne),Ne++):($i=A,0===oi&&Di(xi));fi!==A?Lt=An=[An,fi]:(Ne=Lt,Lt=A)}else Ne=Lt,Lt=A;Lt===A&&(Ir.test(U.charAt(Ne))?(Lt=U.charAt(Ne),Ne++):(Lt=A,0===oi&&Di(hn))),Lt!==A?Ge=fn=[fn,Lt]:(Ne=Ge,Ge=A)}else Ne=Ge,Ge=A;return Ge!==A&&(Ge=Gn(Ge)),Ge}(),to===A&&(to=null),to!==A?(93===U.charCodeAt(Ne)?(zi=tt,Ne++):(zi=A,0===oi&&Di(Ze)),zi!==A?Ge=fn=[fn,Lt,An,fi,$i,is,to,zi]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=Le(Ge)),Ge}(),Ge===A&&(Ge=Kn()))),Ge!==A&&(Ge=Q(Ge)),Ge}(),fn!==A){for(Lt=[],An=Ta();An!==A;)Lt.push(An),An=Ta();if(Lt!==A){for(An=[],fi=Ne,($i=Pr())===A&&($i=null),$i!==A&&(is=cr())!==A?fi=$i=[$i,is]:(Ne=fi,fi=A);fi!==A;)An.push(fi),fi=Ne,($i=Pr())===A&&($i=null),$i!==A&&(is=cr())!==A?fi=$i=[$i,is]:(Ne=fi,fi=A);if(An!==A){for(fi=[],$i=Ta();$i!==A;)fi.push($i),$i=Ta();if(fi!==A)if(($i=Pr())===A&&($i=null),$i!==A)if((is=Yr())===A&&(is=null),is!==A){for(to=[],zi=Ta();zi!==A;)to.push(zi),zi=Ta();to!==A?Ge=fn=[fn,Lt,An,fi,$i,is,to]:(Ne=Ge,Ge=A)}else Ne=Ge,Ge=A;else Ne=Ge,Ge=A;else Ne=Ge,Ge=A}else Ne=Ge,Ge=A}else Ne=Ge,Ge=A}else Ne=Ge,Ge=A;return Ge!==A&&(Ge=x(Ge)),Ge}function Ta(){var Ge,fn,Lt,An,fi;return Ne,Ge=Ne,40===U.charCodeAt(Ne)?(fn=k,Ne++):(fn=A,0===oi&&Di(I)),fn!==A?((Lt=Pr())===A&&(Lt=null),Lt!==A&&(An=Yr())!==A?(41===U.charCodeAt(Ne)?(fi=S,Ne++):(fi=A,0===oi&&Di(z)),fi!==A?Ge=fn=[fn,Lt,An,fi]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge!==A&&(Ge=ee(Ge)),Ge}function Pr(){var Ge;if(Ne,Ce.test(U.charAt(Ne))){if((Ge=U.charAt(Ne))===U.charAt(Ne+1)&&(Ge=A,0===oi))throw $o("The parser encountered a bond repetition.",Ne+1);Ne++}else Ge=A,0===oi&&Di(H);return Ge!==A&&(Ge=G(Ge)),Ge}function ql(){var Ge;return Ne,vr.test(U.charAt(Ne))?(Ge=U.charAt(Ne),Ne++):(Ge=A,0===oi&&Di(Wn)),Ge!==A&&(Ge=Q(Ge)),Ge}function Kn(){var Ge;return Ne,42===U.charCodeAt(Ne)?(Ge=Pi,Ne++):(Ge=A,0===oi&&Di(ki)),Ge!==A&&(Ge=Mi(Ge)),Ge}function cr(){var Ge,fn,Lt,An;return Ne,Ge=Ne,37===U.charCodeAt(Ne)?(fn=jt,Ne++):(fn=A,0===oi&&Di(pn)),fn!==A?(ln.test(U.charAt(Ne))?(Lt=U.charAt(Ne),Ne++):(Lt=A,0===oi&&Di(Fn)),Lt!==A?(Ci.test(U.charAt(Ne))?(An=U.charAt(Ne),Ne++):(An=A,0===oi&&Di(xi)),An!==A?Ge=fn=[fn,Lt,An]:(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A)):(Ne=Ge,Ge=A),Ge===A&&(Ci.test(U.charAt(Ne))?(Ge=U.charAt(Ne),Ne++):(Ge=A,0===oi&&Di(xi))),Ge!==A&&(Ge=Gt(Ge)),Ge}if((Yt=ne())!==A&&Ne===U.length)return Yt;throw Yt!==A&&Ne<U.length&&Di({type:"end"}),function Ga(wt,Ge,fn){return new O(O.buildMessage(wt,Ge),wt,Ge,fn)}(xr,Xi<U.length?U.charAt(Xi):null,function oa(wt,Ge){var fn=Fa(wt),Lt=Fa(Ge);return{start:{offset:wt,line:fn.line,column:fn.column},end:{offset:Ge,line:Lt.line,column:Lt.column}}}(Xi,Xi<U.length?Xi+1:Xi))}}}()},9238:It=>{It.exports=function ke(O){"use strict";function R(S,z){var ee=S.length,Ce=0;if(0===ee||ee>0&&ee-1 in S)for(;Ce<ee&&!1!==z.call(S[Ce],Ce,S[Ce]);Ce++);else for(Ce in S)if(!1===z.call(S[Ce],Ce,S[Ce]))break}function U(S){var z=parseInt(S).toString(16);return 1==z.length?"0"+z:z}function q(S,z,ee,Q){return void 0===(Q=parseInt(Q))||255===Q?"#"+U(S)+U(z)+U(ee):0!==Q&&"rgba("+S+","+z+","+ee+","+Q/255+")"}function te(S,z,ee){return"M"+S+" "+z+"h"+ee}let x=function A(S){var z="";return R(S,function(ee,Q){if(!1!==(ee=q.apply(null,ee.split(",")))){var G,H=[],K=1;R(Q,function(){G&&this[1]===G[1]&&this[0]===G[0]+K?K++:(G&&(H.push(te(G[0],G[1],K)),K=1),G=this)}),H.push(te(G[0],G[1],K)),z+=function re(S,z){return'<path stroke="'+S+'" d="'+z+'" />\n'}(ee,H.join(""))}}),z}(function(S){for(var ge,z={},ee=S.data,Q=ee.length,Ce=S.width,G=0,K=0,ie=0;ie<Q;ie+=4)ee[ie+3]>0&&(z[ge=ee[ie]+","+ee[ie+1]+","+ee[ie+2]+","+ee[ie+3]]=z[ge]||[],G=ie/4%Ce,K=Math.floor(ie/4/Ce),z[ge].push([G,K]));return z}(O)),k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -0.5 '+O.width+" "+O.height+'" shape-rendering="crispEdges"><g shape-rendering="crispEdges">'+x+"</g></svg>";var I=document.createElement("div");return I.innerHTML=k,I.firstChild}},7862:(It,ke,O)=>{const R=O(1481);It.exports=class U{constructor(te){this.reactantsSmiles=[],this.reagentsSmiles=[],this.productsSmiles=[],this.reactantsWeights=[],this.reagentsWeights=[],this.productsWeights=[],this.reactants=[],this.reagents=[],this.products=[];let re=te.split(">");if(3!==re.length)throw new Error("Invalid reaction SMILES. Did you add fewer than or more than two '>'?");""!==re[0]&&(this.reactantsSmiles=re[0].split(".")),""!==re[1]&&(this.reagentsSmiles=re[1].split(".")),""!==re[2]&&(this.productsSmiles=re[2].split("."));for(var A=0;A<this.reactantsSmiles.length;A++)this.reactants.push(R.parse(this.reactantsSmiles[A]));for(A=0;A<this.reagentsSmiles.length;A++)this.reagents.push(R.parse(this.reagentsSmiles[A]));for(A=0;A<this.productsSmiles.length;A++)this.products.push(R.parse(this.productsSmiles[A]))}}},900:(It,ke,O)=>{const R=O(2567),U=O(4339),q=O(7570),te=O(4430),re=O(9909);It.exports=class A{constructor(ne,x){this.defaultOptions={scale:x.scale>0?x.scale:1,fontSize:.8*x.fontSizeLarge,fontFamily:"Arial, Helvetica, sans-serif",spacing:10,plus:{size:9,thickness:1},arrow:{length:4*x.bondLength,headSize:6,thickness:1,margin:3},weights:{normalize:!1}},this.opts=q.extend(!0,this.defaultOptions,ne),this.drawer=new R(x),this.molOpts=this.drawer.opts}draw(ne,x,k="light",I=null,S="{reagents}",z="",ee=!1){if(this.themeManager=new te(this.molOpts.themes,k),this.opts.weights.normalize){let Te=-Number.MAX_SAFE_INTEGER,tt=Number.MAX_SAFE_INTEGER;if(I.hasOwnProperty("reactants"))for(let Le=0;Le<I.reactants.length;Le++)for(let Fe=0;Fe<I.reactants[Le].length;Fe++)I.reactants[Le][Fe]<tt&&(tt=I.reactants[Le][Fe]),I.reactants[Le][Fe]>Te&&(Te=I.reactants[Le][Fe]);if(I.hasOwnProperty("reagents"))for(let Le=0;Le<I.reagents.length;Le++)for(let Fe=0;Fe<I.reagents[Le].length;Fe++)I.reagents[Le][Fe]<tt&&(tt=I.reagents[Le][Fe]),I.reagents[Le][Fe]>Te&&(Te=I.reagents[Le][Fe]);if(I.hasOwnProperty("products"))for(let Le=0;Le<I.products.length;Le++)for(let Fe=0;Fe<I.products[Le].length;Fe++)I.products[Le][Fe]<tt&&(tt=I.products[Le][Fe]),I.products[Le][Fe]>Te&&(Te=I.products[Le][Fe]);let Ze=Math.max(Math.abs(tt),Math.abs(Te));if(0===Ze&&(Ze=1),I.hasOwnProperty("reactants"))for(let Le=0;Le<I.reactants.length;Le++)for(let Fe=0;Fe<I.reactants[Le].length;Fe++)I.reactants[Le][Fe]/=Ze;if(I.hasOwnProperty("reagents"))for(let Le=0;Le<I.reagents.length;Le++)for(let Fe=0;Fe<I.reagents[Le].length;Fe++)I.reagents[Le][Fe]/=Ze;if(I.hasOwnProperty("products"))for(let Le=0;Le<I.products.length;Le++)for(let Fe=0;Fe<I.products[Le].length;Fe++)I.products[Le][Fe]/=Ze}let Q=null;for(null===x||"svg"===x?(Q=document.createElementNS("http://www.w3.org/2000/svg","svg"),Q.setAttribute("xmlns","http://www.w3.org/2000/svg"),Q.setAttributeNS(null,"width","500"),Q.setAttributeNS(null,"height","500")):Q="string"==typeof x||x instanceof String?document.getElementById(x):x;Q.firstChild;)Q.removeChild(Q.firstChild);let Ce=[],H=0;for(var G=0;G<ne.reactants.length;G++){G>0&&Ce.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let Te=null;I&&I.hasOwnProperty("reactants")&&I.reactants.length>G&&(Te=I.reactants[G]);let tt=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(ne.reactants[G],tt,k,Te,ee,[],this.opts.weights.normalize);let Ze={width:tt.viewBox.baseVal.width*this.opts.scale,height:tt.viewBox.baseVal.height*this.opts.scale,svg:tt};Ce.push(Ze),Ze.height>H&&(H=Ze.height)}Ce.push({width:this.opts.arrow.length*this.opts.scale,height:2*this.opts.arrow.headSize*this.opts.scale,svg:this.getArrow()});let K="";for(G=0;G<ne.reagents.length;G++){G>0&&(K+=", ");let tt=this.drawer.getMolecularFormula(ne.reagents[G]);tt in re&&(tt=re[tt]),K+=U.replaceNumbersWithSubscript(tt)}S=S.replace("{reagents}",K);const ie=U.writeText(S,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);let ge=(this.opts.arrow.length*this.opts.scale-ie.width)/2;Ce.push({svg:ie.svg,height:ie.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+ge,offsetY:-ie.height/2-this.opts.arrow.margin,position:"relative"});const we=U.writeText(z,this.themeManager,this.opts.fontSize*this.opts.scale,this.opts.fontFamily,this.opts.arrow.length*this.opts.scale);for(ge=(this.opts.arrow.length*this.opts.scale-we.width)/2,Ce.push({svg:we.svg,height:we.height,width:this.opts.arrow.length*this.opts.scale,offsetX:-(this.opts.arrow.length*this.opts.scale+this.opts.spacing)+ge,offsetY:we.height/2+this.opts.arrow.margin,position:"relative"}),G=0;G<ne.products.length;G++){G>0&&Ce.push({width:this.opts.plus.size*this.opts.scale,height:this.opts.plus.size*this.opts.scale,svg:this.getPlus()});let tt=null;I&&I.hasOwnProperty("products")&&I.products.length>G&&(tt=I.products[G]);let Ze=document.createElementNS("http://www.w3.org/2000/svg","svg");this.drawer.draw(ne.products[G],Ze,k,tt,ee,[],this.opts.weights.normalize);let Le={width:Ze.viewBox.baseVal.width*this.opts.scale,height:Ze.viewBox.baseVal.height*this.opts.scale,svg:Ze};Ce.push(Le),Le.height>H&&(H=Le.height)}let fe=0;return Ce.forEach(Te=>{let tt=Te.offsetX??0,Ze=Te.offsetY??0;Te.svg.setAttributeNS(null,"x",Math.round(fe+tt)),Te.svg.setAttributeNS(null,"y",Math.round((H-Te.height)/2+Ze)),Te.svg.setAttributeNS(null,"width",Math.round(Te.width)),Te.svg.setAttributeNS(null,"height",Math.round(Te.height)),Q.appendChild(Te.svg),"relative"!==Te.position&&(fe+=Math.round(Te.width+this.opts.spacing+tt))}),Q.setAttributeNS(null,"viewBox",`0 0 ${fe} ${H}`),Q.style.width=fe+"px",Q.style.height=H+"px",Q}getPlus(){let ne=this.opts.plus.size,x=this.opts.plus.thickness,k=document.createElementNS("http://www.w3.org/2000/svg","svg"),I=document.createElementNS("http://www.w3.org/2000/svg","rect"),S=document.createElementNS("http://www.w3.org/2000/svg","rect");return k.setAttributeNS(null,"id","plus"),I.setAttributeNS(null,"x",0),I.setAttributeNS(null,"y",ne/2-x/2),I.setAttributeNS(null,"width",ne),I.setAttributeNS(null,"height",x),I.setAttributeNS(null,"fill",this.themeManager.getColor("C")),S.setAttributeNS(null,"x",ne/2-x/2),S.setAttributeNS(null,"y",0),S.setAttributeNS(null,"width",x),S.setAttributeNS(null,"height",ne),S.setAttributeNS(null,"fill",this.themeManager.getColor("C")),k.appendChild(I),k.appendChild(S),k.setAttributeNS(null,"viewBox",`0 0 ${ne} ${ne}`),k}getArrowhead(){let ne=this.opts.arrow.headSize,x=document.createElementNS("http://www.w3.org/2000/svg","marker"),k=document.createElementNS("http://www.w3.org/2000/svg","polygon");return x.setAttributeNS(null,"id","arrowhead"),x.setAttributeNS(null,"viewBox",`0 0 ${ne} ${ne}`),x.setAttributeNS(null,"markerUnits","userSpaceOnUse"),x.setAttributeNS(null,"markerWidth",ne),x.setAttributeNS(null,"markerHeight",ne),x.setAttributeNS(null,"refX",0),x.setAttributeNS(null,"refY",ne/2),x.setAttributeNS(null,"orient","auto"),x.setAttributeNS(null,"fill",this.themeManager.getColor("C")),k.setAttributeNS(null,"points",`0 0, ${ne} ${ne/2}, 0 ${ne}`),x.appendChild(k),x}getCDArrowhead(){let ne=this.opts.arrow.headSize,x=ne*(7/4.5),k=document.createElementNS("http://www.w3.org/2000/svg","marker"),I=document.createElementNS("http://www.w3.org/2000/svg","path");return k.setAttributeNS(null,"id","arrowhead"),k.setAttributeNS(null,"viewBox",`0 0 ${x} ${ne}`),k.setAttributeNS(null,"markerUnits","userSpaceOnUse"),k.setAttributeNS(null,"markerWidth",2*x),k.setAttributeNS(null,"markerHeight",2*ne),k.setAttributeNS(null,"refX",2.2),k.setAttributeNS(null,"refY",2.2),k.setAttributeNS(null,"orient","auto"),k.setAttributeNS(null,"fill",this.themeManager.getColor("C")),I.setAttributeNS(null,"style","fill-rule:nonzero;"),I.setAttributeNS(null,"d","m 0 0 l 7 2.25 l -7 2.25 c 0 0 0.735 -1.084 0.735 -2.28 c 0 -1.196 -0.735 -2.22 -0.735 -2.22 z"),k.appendChild(I),k}getArrow(){let ne=this.opts.arrow.headSize,x=this.opts.arrow.length,k=document.createElementNS("http://www.w3.org/2000/svg","svg"),I=document.createElementNS("http://www.w3.org/2000/svg","defs"),S=document.createElementNS("http://www.w3.org/2000/svg","line");return I.appendChild(this.getCDArrowhead()),k.appendChild(I),k.setAttributeNS(null,"id","arrow"),S.setAttributeNS(null,"x1",0),S.setAttributeNS(null,"y1",-this.opts.arrow.thickness/2),S.setAttributeNS(null,"x2",x),S.setAttributeNS(null,"y2",-this.opts.arrow.thickness/2),S.setAttributeNS(null,"stroke-width",this.opts.arrow.thickness),S.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),S.setAttributeNS(null,"marker-end","url(#arrowhead)"),k.appendChild(S),k.setAttributeNS(null,"viewBox",`0 ${-ne/2} ${x+ne*(7/4.5)} ${ne}`),k}}},4250:(It,ke,O)=>{const R=O(7862);It.exports=class U{static parse(te){return new R(te)}}},1644:(It,ke,O)=>{const R=O(7809),U=O(1611),te=(O(768),O(8684));class re{constructor(F){this.id=null,this.members=F,this.edges=[],this.insiders=[],this.neighbours=[],this.positioned=!1,this.center=new U(0,0),this.rings=[],this.isBridged=!1,this.isPartOfBridged=!1,this.isSpiro=!1,this.isFused=!1,this.centralAngle=0,this.canFlip=!0}clone(){let F=new re(this.members);return F.id=this.id,F.insiders=R.clone(this.insiders),F.neighbours=R.clone(this.neighbours),F.positioned=this.positioned,F.center=this.center.clone(),F.rings=R.clone(this.rings),F.isBridged=this.isBridged,F.isPartOfBridged=this.isPartOfBridged,F.isSpiro=this.isSpiro,F.isFused=this.isFused,F.centralAngle=this.centralAngle,F.canFlip=this.canFlip,F}getSize(){return this.members.length}getPolygon(F){let ne=[];for(let x=0;x<this.members.length;x++)ne.push(F[this.members[x]].position);return ne}getAngle(){return Math.PI-this.centralAngle}eachMember(F,ne,x,k){let I=x=x||0===x?x:this.members[0],S=0;for(;null!=I&&S<100;){let z=I;ne(z),I=F[I].getNextInRing(F,this.id,k),k=z,I==x&&(I=null),S++}}getOrderedNeighbours(F){let ne=Array(this.neighbours.length);for(let x=0;x<this.neighbours.length;x++){let k=te.getVertices(F,this.id,this.neighbours[x]);ne[x]={n:k.length,neighbour:this.neighbours[x]}}return ne.sort(function(x,k){return k.n-x.n}),ne}isBenzeneLike(F){let ne=this.getDoubleBondCount(F),x=this.members.length;return 3===ne&&6===x||2===ne&&5===x}getDoubleBondCount(F){let ne=0;for(let x=0;x<this.members.length;x++){let k=F[this.members[x]].value;("="===k.bondType||"="===k.branchBond)&&ne++}return ne}contains(F){for(let ne=0;ne<this.members.length;ne++)if(this.members[ne]==F)return!0;return!1}}It.exports=re},8684:(It,ke,O)=>{O(768),O(1644),It.exports=class q{constructor(re,A){this.id=null,this.firstRingId=re.id,this.secondRingId=A.id,this.vertices=new Set;for(var F=0;F<re.members.length;F++){let ne=re.members[F];for(let x=0;x<A.members.length;x++)ne===A.members[x]&&this.addVertex(ne)}}addVertex(re){this.vertices.add(re)}updateOther(re,A){this.firstRingId===A?this.secondRingId=re:this.firstRingId=re}containsRing(re){return this.firstRingId===re||this.secondRingId===re}isBridge(re){if(this.vertices.size>2)return!0;for(let A of this.vertices)if(re[A].value.rings.length>2)return!0;return!1}static isBridge(re,A,F,ne){let x=null;for(let k=0;k<re.length;k++)if(x=re[k],x.firstRingId===F&&x.secondRingId===ne||x.firstRingId===ne&&x.secondRingId===F)return x.isBridge(A);return!1}static getNeighbours(re,A){let F=[];for(let ne=0;ne<re.length;ne++){let x=re[ne];x.firstRingId===A?F.push(x.secondRingId):x.secondRingId===A&&F.push(x.firstRingId)}return F}static getVertices(re,A,F){for(let ne=0;ne<re.length;ne++){let x=re[ne];if(x.firstRingId===A&&x.secondRingId===F||x.firstRingId===F&&x.secondRingId===A)return[...x.vertices]}}}},7789:(It,ke,O)=>{const R=O(4336);class U{static getRings(te,re=!1){let A=te.getComponentsAdjacencyMatrix();if(0===A.length)return null;let F=R.getConnectedComponents(A),ne=Array();for(var x=0;x<F.length;x++){let S=F[x],z=te.getSubgraphAdjacencyMatrix([...S]),ee=new Uint16Array(z.length),Q=new Uint16Array(z.length);for(var k=0;k<z.length;k++){Q[k]=0,ee[k]=0;for(var I=0;I<z[k].length;I++)ee[k]+=z[k][I]}let Ce=0;for(k=0;k<z.length;k++)for(I=k+1;I<z.length;I++)Ce+=z[k][I];let H=Ce-z.length+1,G=!0;for(k=0;k<ee.length;k++)3!==ee[k]&&(G=!1);if(G&&(H=2+Ce-z.length),1===H){ne.push([...S]);continue}re&&(H=999);let{d:K,pe:ie,pe_prime:ge}=U.getPathIncludedDistanceMatrices(z),we=U.getRingCandidates(K,ie,ge),fe=U.getSSSR(we,K,z,ie,ge,ee,Q,H);for(k=0;k<fe.length;k++){let tt=Array(fe[k].size),Ze=0;for(let Le of fe[k])tt[Ze++]=S[Le];ne.push(tt)}}return ne}static matrixToString(te){let re="";for(var A=0;A<te.length;A++){for(var F=0;F<te[A].length;F++)re+=te[A][F]+" ";re+="\n"}return re}static getPathIncludedDistanceMatrices(te){let re=te.length,A=Array(re),F=Array(re),ne=Array(re);for(var x=0,k=0,I=0,S=re;S--;){A[S]=Array(re),F[S]=Array(re),ne[S]=Array(re);for(var ee=re;ee--;)A[S][ee]=S===ee||1===te[S][ee]?te[S][ee]:Number.POSITIVE_INFINITY,F[S][ee]=1===A[S][ee]?[[[S,ee]]]:Array(),ne[S][ee]=Array()}for(var z=re;z--;)for(S=re;S--;)for(ee=re;ee--;){const Q=A[S][ee],Ce=A[S][z]+A[z][ee];if(Q>Ce){if(Q===Ce+1)for(ne[S][ee]=[F[S][ee].length],x=F[S][ee].length;x--;)for(ne[S][ee][x]=[F[S][ee][x].length],k=F[S][ee][x].length;k--;)for(ne[S][ee][x][k]=[F[S][ee][x][k].length],I=F[S][ee][x][k].length;I--;)ne[S][ee][x][k][I]=[F[S][ee][x][k][0],F[S][ee][x][k][1]];else ne[S][ee]=Array();for(A[S][ee]=Ce,F[S][ee]=[[]],x=F[S][z][0].length;x--;)F[S][ee][0].push(F[S][z][0][x]);for(x=F[z][ee][0].length;x--;)F[S][ee][0].push(F[z][ee][0][x])}else if(Q===Ce){if(F[S][z].length&&F[z][ee].length)if(F[S][ee].length){let G=Array();for(x=F[S][z][0].length;x--;)G.push(F[S][z][0][x]);for(x=F[z][ee][0].length;x--;)G.push(F[z][ee][0][x]);F[S][ee].push(G)}else{let G=Array();for(x=F[S][z][0].length;x--;)G.push(F[S][z][0][x]);for(x=F[z][ee][0].length;x--;)G.push(F[z][ee][0][x]);F[S][ee][0]=G}}else if(Q===Ce-1)if(ne[S][ee].length){let G=Array();for(x=F[S][z][0].length;x--;)G.push(F[S][z][0][x]);for(x=F[z][ee][0].length;x--;)G.push(F[z][ee][0][x]);ne[S][ee].push(G)}else{let G=Array();for(x=F[S][z][0].length;x--;)G.push(F[S][z][0][x]);for(x=F[z][ee][0].length;x--;)G.push(F[z][ee][0][x]);ne[S][ee][0]=G}}return{d:A,pe:F,pe_prime:ne}}static getRingCandidates(te,re,A){let F=te.length,ne=Array(),x=0;for(let k=0;k<F;k++)for(let I=0;I<F;I++)0===te[k][I]||1===re[k][I].length&&0===A[k][I]||(x=0!==A[k][I].length?2*(te[k][I]+.5):2*te[k][I],x!==1/0&&ne.push([x,re[k][I],A[k][I]]));return ne.sort(function(k,I){return k[0]-I[0]}),ne}static getSSSR(te,re,A,F,ne,x,k,I){let S=Array(),z=Array();for(let Q=0;Q<te.length;Q++)if(te[Q][0]%2!=0)for(let Ce=0;Ce<te[Q][2].length;Ce++){let H=te[Q][1][0].concat(te[Q][2][Ce]);for(var ee=0;ee<H.length;ee++)H[ee][0].constructor===Array&&(H[ee]=H[ee][0]);let G=U.bondsToAtoms(H);if(U.getBondCount(G,A)===G.size&&!U.pathSetsContain(S,G,H,z,x,k)&&(S.push(G),z=z.concat(H)),S.length>I)return S}else for(let Ce=0;Ce<te[Q][1].length-1;Ce++){let H=te[Q][1][Ce].concat(te[Q][1][Ce+1]);for(ee=0;ee<H.length;ee++)H[ee][0].constructor===Array&&(H[ee]=H[ee][0]);let G=U.bondsToAtoms(H);if(U.getBondCount(G,A)===G.size&&!U.pathSetsContain(S,G,H,z,x,k)&&(S.push(G),z=z.concat(H)),S.length>I)return S}return S}static getEdgeCount(te){let re=0,A=te.length;for(var F=A-1;F--;)for(var ne=A;ne--;)1===te[F][ne]&&re++;return re}static getEdgeList(te){let re=te.length,A=Array();for(var F=re-1;F--;)for(var ne=re;ne--;)1===te[F][ne]&&A.push([F,ne]);return A}static bondsToAtoms(te){let re=new Set;for(var A=te.length;A--;)re.add(te[A][0]),re.add(te[A][1]);return re}static getBondCount(te,re){let A=0;for(let F of te)for(let ne of te)F!==ne&&(A+=re[F][ne]);return A/2}static pathSetsContain(te,re,A,F,ne,x){for(var k=te.length;k--;){if(U.isSupersetOf(re,te[k]))return!0;if(te[k].size===re.size&&U.areSetsEqual(te[k],re))return!0}let I=0,S=!1;for(k=A.length;k--;)for(var z=F.length;z--;)(A[k][0]===F[z][0]&&A[k][1]===F[z][1]||A[k][1]===F[z][0]&&A[k][0]===F[z][1])&&I++,I===A.length&&(S=!0);let ee=!1;if(S)for(let Q of re)if(x[Q]<ne[Q]){ee=!0;break}if(S&&!ee)return!0;for(let Q of re)x[Q]++;return!1}static areSetsEqual(te,re){if(te.size!==re.size)return!1;for(let A of te)if(!re.has(A))return!1;return!0}static isSupersetOf(te,re){for(var A of re)if(!te.has(A))return!1;return!0}}It.exports=U},9654:(It,ke,O)=>{O(5979);const U=O(1481),q=O(4250),te=O(2567),re=O(900),A=O(4339),F=O(7570);class ne{constructor(k={},I={}){this.drawer=new te(k),this.reactionDrawer=new re(I,JSON.parse(JSON.stringify(this.drawer.opts)))}static apply(k={},I={},S="data-smiles",z="light",ee=null,Q=null){new ne(k,I).apply(S,z,ee,Q)}apply(k="data-smiles",I="light",S=null,z=null){document.querySelectorAll(`[${k}]`).forEach(Q=>{let Ce=Q.getAttribute(k);if(null===Ce)throw Error("No SMILES provided.");let H=I,G=null;if(Q.hasAttribute("data-smiles-theme")&&(H=Q.getAttribute("data-smiles-theme")),Q.hasAttribute("data-smiles-weights")&&(G=Q.getAttribute("data-smiles-weights").split(",").map(parseFloat)),(Q.hasAttribute("data-smiles-reactant-weights")||Q.hasAttribute("data-smiles-reagent-weights")||Q.hasAttribute("data-smiles-product-weights"))&&(G={reactants:[],reagents:[],products:[]},Q.hasAttribute("data-smiles-reactant-weights")&&(G.reactants=Q.getAttribute("data-smiles-reactant-weights").split(";").map(K=>K.split(",").map(parseFloat))),Q.hasAttribute("data-smiles-reagent-weights")&&(G.reagents=Q.getAttribute("data-smiles-reagent-weights").split(";").map(K=>K.split(",").map(parseFloat))),Q.hasAttribute("data-smiles-product-weights")&&(G.products=Q.getAttribute("data-smiles-product-weights").split(";").map(K=>K.split(",").map(parseFloat)))),Q.hasAttribute("data-smiles-options")||Q.hasAttribute("data-smiles-reaction-options")){let K={};Q.hasAttribute("data-smiles-options")&&(K=JSON.parse(Q.getAttribute("data-smiles-options").replaceAll("'",'"')));let ie={};Q.hasAttribute("data-smiles-reaction-options")&&(ie=JSON.parse(Q.getAttribute("data-smiles-reaction-options").replaceAll("'",'"'))),new ne(K,ie).draw(Ce,Q,H,S,z,G)}else this.draw(Ce,Q,H,S,z,G)})}draw(k,I,S="light",z=null,ee=null,Q=null){let Ce=[];[k,...Ce]=k.split(" ");let H=Ce.join(" "),G={};if(H.includes("__")){let ie=H.substring(H.indexOf("__")+2,H.lastIndexOf("__"));G=JSON.parse(ie.replaceAll("'",'"'))}if(G=F.extend(!0,{textAboveArrow:"{reagents}",textBelowArrow:""},G),k.includes(">"))try{this.drawReaction(k,I,S,G,Q,z)}catch(ie){ee?ee(ie):console.error(ie)}else try{this.drawMolecule(k,I,S,Q,z)}catch(ie){ee?ee(ie):console.error(ie)}}drawMolecule(k,I,S,z,ee){let Q=U.parse(k);if(null===I||"svg"===I){let Ce=this.drawer.draw(Q,null,S,z),H=this.getDimensions(Ce);Ce.setAttributeNS(null,"width",""+H.w),Ce.setAttributeNS(null,"height",""+H.h),ee&&ee(Ce)}else if("canvas"===I){let Ce=this.svgToCanvas(this.drawer.draw(Q,null,S,z));ee&&ee(Ce)}else if("img"===I){let Ce=this.svgToImg(this.drawer.draw(Q,null,S,z));ee&&ee(Ce)}else I instanceof HTMLImageElement?(this.svgToImg(this.drawer.draw(Q,null,S,z),I),ee&&ee(I)):I instanceof SVGElement?(this.drawer.draw(Q,I,S,z),ee&&ee(I)):document.querySelectorAll(I).forEach(H=>{let G=H.nodeName.toLowerCase();"svg"===G?(this.drawer.draw(Q,H,S,z),ee&&ee(H)):"canvas"===G?(this.svgToCanvas(this.drawer.draw(Q,null,S,z),H),ee&&ee(H)):"img"===G&&(this.svgToImg(this.drawer.draw(Q,null,S,z),H),ee&&ee(H))})}drawReaction(k,I,S,z,ee,Q){let Ce=q.parse(k);if(null===I||"svg"===I){let H=this.reactionDrawer.draw(Ce,null,S),G=this.getDimensions(H);H.setAttributeNS(null,"width",""+G.w),H.setAttributeNS(null,"height",""+G.h),Q&&Q(H)}else if("canvas"===I){let H=this.svgToCanvas(this.reactionDrawer.draw(Ce,null,S,ee,z.textAboveArrow,z.textBelowArrow));Q&&Q(H)}else if("img"===I){let H=this.svgToImg(this.reactionDrawer.draw(Ce,null,S,ee,z.textAboveArrow,z.textBelowArrow));Q&&Q(H)}else I instanceof HTMLImageElement?(this.svgToImg(this.reactionDrawer.draw(Ce,null,S,ee,z.textAboveArrow,z.textBelowArrow),I),Q&&Q(I)):I instanceof SVGElement?(this.reactionDrawer.draw(Ce,I,S,ee,z.textAboveArrow,z.textBelowArrow),Q&&Q(I)):document.querySelectorAll(I).forEach(G=>{let K=G.nodeName.toLowerCase();"svg"===K?(this.reactionDrawer.draw(Ce,G,S,ee,z.textAboveArrow,z.textBelowArrow),this.reactionDrawer.opts.scale<=0&&(G.style.width=null,G.style.height=null),Q&&Q(G)):"canvas"===K?(this.svgToCanvas(this.reactionDrawer.draw(Ce,null,S,ee,z.textAboveArrow,z.textBelowArrow),G),Q&&Q(G)):"img"===K&&(this.svgToImg(this.reactionDrawer.draw(Ce,null,S,ee,z.textAboveArrow,z.textBelowArrow),G),Q&&Q(G))})}svgToCanvas(k,I=null){null===I&&(I=document.createElement("canvas"));let S=this.getDimensions(I,k);return A.svgToCanvas(k,I,S.w,S.h),I}svgToImg(k,I=null){null===I&&(I=document.createElement("img"));let S=this.getDimensions(I,k);return A.svgToImg(k,I,S.w,S.h),I}getDimensions(k,I=null){let S=this.drawer.opts.width,z=this.drawer.opts.height;return this.drawer.opts.scale<=0?(null===S&&(S=k.width),null===z&&(z=k.height),""!==k.style.width&&(S=parseInt(k.style.width)),""!==k.style.height&&(z=parseInt(k.style.height))):I&&(S=parseFloat(I.style.width),z=parseFloat(I.style.height)),{w:S,h:z}}}It.exports=ne},2567:(It,ke,O)=>{const R=O(7809),U=O(2848),q=O(5090),re=(O(4336),O(7680)),A=O(4339),F=O(4430),ne=O(1611),x=O(3912);It.exports=class k{constructor(S,z=!0){this.preprocessor=new q(S),this.opts=this.preprocessor.opts,this.clear=z,this.svgWrapper=null}draw(S,z,ee="light",Q=null,Ce=!1,H=[],G=!1){null===z||"svg"===z?((z=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("xmlns","http://www.w3.org/2000/svg"),z.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),z.setAttributeNS(null,"width",this.opts.width),z.setAttributeNS(null,"height",this.opts.height)):z instanceof String&&(z=document.getElementById(z));let K={padding:this.opts.padding,compactDrawing:this.opts.compactDrawing};null!==Q&&(this.opts.padding+=this.opts.weights.additionalPadding,this.opts.compactDrawing=!1);let ie=this.preprocessor;return ie.initDraw(S,ee,Ce,H),Ce||(this.themeManager=new F(this.opts.themes,ee),(null===this.svgWrapper||this.clear)&&(this.svgWrapper=new A(this.themeManager,z,this.opts,this.clear))),ie.processGraph(),this.svgWrapper.determineDimensions(ie.graph.vertices),this.drawAtomHighlights(ie.opts.debug),this.drawEdges(ie.opts.debug),this.drawVertices(ie.opts.debug),null!==Q&&this.drawWeights(Q,G),ie.opts.debug&&(console.log(ie.graph),console.log(ie.rings),console.log(ie.ringConnections)),this.svgWrapper.constructSvg(),null!==Q&&(this.opts.padding=K.padding,this.opts.compactDrawing=K.padding),z}drawCanvas(S,z,ee="light",Q=!1){let Ce=null;Ce="string"==typeof z||z instanceof String?document.getElementById(z):z;let H=document.createElementNS("http://www.w3.org/2000/svg","svg");return H.setAttribute("xmlns","http://www.w3.org/2000/svg"),H.setAttributeNS(null,"viewBox","0 0 500 500"),H.setAttributeNS(null,"width","500"),H.setAttributeNS(null,"height","500"),H.setAttributeNS(null,"style","visibility: hidden: position: absolute; left: -1000px"),document.body.appendChild(H),this.svgDrawer.draw(S,H,ee,Q),this.svgDrawer.svgWrapper.toCanvas(Ce,this.svgDrawer.opts.width,this.svgDrawer.opts.height),document.body.removeChild(H),z}drawAromaticityRing(S){this.svgWrapper.drawRing(S.center.x,S.center.y,S.getSize())}drawEdges(S){let z=this.preprocessor,ee=z.graph,Q=z.rings,Ce=Array(this.preprocessor.graph.edges.length);if(Ce.fill(!1),ee.traverseBF(0,G=>{let K=ee.getEdges(G.id);for(var ie=0;ie<K.length;ie++){let ge=K[ie];Ce[ge]||(Ce[ge]=!0,this.drawEdge(ge,S))}}),!this.bridgedRing)for(var H=0;H<Q.length;H++){let G=Q[H];z.isRingAromatic(G)&&this.drawAromaticityRing(G)}}drawEdge(S,z){let ee=this.preprocessor,Q=ee.opts,Ce=this.svgWrapper,H=ee.graph.edges[S],G=ee.graph.vertices[H.sourceId],K=ee.graph.vertices[H.targetId],ie=G.value.element,ge=K.value.element;if(!(G.value.isDrawn&&K.value.isDrawn||"default"!==ee.opts.atomVisualization))return;let we=G.position,fe=K.position,Te=ee.getEdgeNormals(H),tt=R.clone(Te);if(tt[0].multiplyScalar(10).add(we),tt[1].multiplyScalar(10).add(we),"="===H.bondType||"="===ee.getRingbondType(G,K)||H.isPartOfAromaticRing&&ee.bridgedRing){let Ze=ee.areVerticesInSameRing(G,K),Le=ee.chooseSide(G,K,tt);if(Ze){let Xe=ee.getLargestOrAromaticCommonRing(G,K).center;Te[0].multiplyScalar(Q.bondSpacing),Te[1].multiplyScalar(Q.bondSpacing);let mt=null;mt=Xe.sameSideAs(G.position,K.position,ne.add(we,Te[0]))?new re(ne.add(we,Te[0]),ne.add(fe,Te[0]),ie,ge):new re(ne.add(we,Te[1]),ne.add(fe,Te[1]),ie,ge),mt.shorten(Q.bondLength-Q.shortBondLength*Q.bondLength),H.isPartOfAromaticRing?Ce.drawLine(mt,!0):Ce.drawLine(mt),Ce.drawLine(new re(we,fe,ie,ge))}else if(H.center||G.isTerminal()&&K.isTerminal()||0==Le.anCount&&Le.bnCount>1||0==Le.bnCount&&Le.anCount>1){this.multiplyNormals(Te,Q.halfBondSpacing);let Fe=new re(ne.add(we,Te[0]),ne.add(fe,Te[0]),ie,ge),Xe=new re(ne.add(we,Te[1]),ne.add(fe,Te[1]),ie,ge);Ce.drawLine(Fe),Ce.drawLine(Xe)}else if(Le.sideCount[0]>Le.sideCount[1]||Le.totalSideCount[0]>Le.totalSideCount[1]){this.multiplyNormals(Te,Q.bondSpacing);let Fe=new re(ne.add(we,Te[0]),ne.add(fe,Te[0]),ie,ge);Fe.shorten(Q.bondLength-Q.shortBondLength*Q.bondLength),Ce.drawLine(Fe),Ce.drawLine(new re(we,fe,ie,ge))}else if(Le.sideCount[0]<Le.sideCount[1]||Le.totalSideCount[0]<=Le.totalSideCount[1]){this.multiplyNormals(Te,Q.bondSpacing);let Fe=new re(ne.add(we,Te[1]),ne.add(fe,Te[1]),ie,ge);Fe.shorten(Q.bondLength-Q.shortBondLength*Q.bondLength),Ce.drawLine(Fe),Ce.drawLine(new re(we,fe,ie,ge))}}else if("#"===H.bondType){Te[0].multiplyScalar(Q.bondSpacing/1.5),Te[1].multiplyScalar(Q.bondSpacing/1.5);let Ze=new re(ne.add(we,Te[0]),ne.add(fe,Te[0]),ie,ge),Le=new re(ne.add(we,Te[1]),ne.add(fe,Te[1]),ie,ge);Ce.drawLine(Ze),Ce.drawLine(Le),Ce.drawLine(new re(we,fe,ie,ge))}else if("."!==H.bondType){let Ze=G.value.isStereoCenter,Le=K.value.isStereoCenter;"up"===H.wedge?Ce.drawWedge(new re(we,fe,ie,ge,Ze,Le)):"down"===H.wedge?Ce.drawDashedWedge(new re(we,fe,ie,ge,Ze,Le)):Ce.drawLine(new re(we,fe,ie,ge,Ze,Le))}if(z){let Ze=ne.midpoint(we,fe);Ce.drawDebugText(Ze.x,Ze.y,"e: "+S)}}drawAtomHighlights(S){let z=this.preprocessor,Q=z.graph,H=this.svgWrapper;for(var G=0;G<Q.vertices.length;G++){let ie=Q.vertices[G],ge=ie.value;for(var K=0;K<z.highlight_atoms.length;K++){let we=z.highlight_atoms[K];ge.class===we[0]&&H.drawAtomHighlight(ie.position.x,ie.position.y,we[1])}}}drawVertices(S){let z=this.preprocessor,ee=z.opts,Q=z.graph,Ce=z.rings,H=this.svgWrapper;var G=Q.vertices.length;for(G=0;G<Q.vertices.length;G++){let ie=Q.vertices[G],ge=ie.value,we=0,fe=0,tt=ge.element,Ze=U.maxBonds[tt]-ie.value.bondCount,Le=ie.getTextDirection(Q.vertices,ge.hasAttachedPseudoElements),Fe=!(!ee.terminalCarbons&&"C"===tt&&!ge.hasAttachedPseudoElements)&&ie.isTerminal(),Xe="C"===ge.element;if(Q.vertices.length<3&&(Xe=!1),"N"===ge.element&&ge.isPartOfAromaticRing&&(Ze=0),ge.bracket&&(Ze=ge.bracket.hcount,we=ge.bracket.charge,fe=ge.bracket.isotope),"allballs"===ee.atomVisualization)H.drawBall(ie.position.x,ie.position.y,tt);else if(ge.isDrawn&&(!Xe||ge.drawExplicit||Fe||ge.hasAttachedPseudoElements)||1===Q.vertices.length)if("default"===ee.atomVisualization){let mt=ge.getAttachedPseudoElements();ge.hasAttachedPseudoElements&&Q.vertices.length===Object.keys(mt).length+1&&(Le="right"),H.drawText(ie.position.x,ie.position.y,tt,Ze,Le,Fe,we,fe,Q.vertices.length,mt)}else"balls"===ee.atomVisualization&&H.drawBall(ie.position.x,ie.position.y,tt);else if(2===ie.getNeighbourCount()&&1==ie.forcePositioned){let Zt=ne.threePointangle(ie.position,Q.vertices[ie.neighbours[0]].position,Q.vertices[ie.neighbours[1]].position);Math.abs(Math.PI-Zt)<.1&&H.drawPoint(ie.position.x,ie.position.y,tt)}if(S){let mt="v: "+ie.id+" "+R.print(ge.ringbonds);H.drawDebugText(ie.position.x,ie.position.y,mt)}}if(ee.debug)for(G=0;G<Ce.length;G++){let ie=Ce[G].center;H.drawDebugPoint(ie.x,ie.y,"r: "+Ce[G].id)}}drawWeights(S,z){if(S.every(Ce=>0===Ce))return;if(S.length!==this.preprocessor.graph.atomIdxToVertexId.length)throw new Error("The number of weights supplied must be equal to the number of (heavy) atoms in the molecule.");let ee=[];for(const Ce of this.preprocessor.graph.atomIdxToVertexId){let H=this.preprocessor.graph.vertices[Ce];ee.push(new ne(H.position.x-this.svgWrapper.minX,H.position.y-this.svgWrapper.minY))}let Q=new x(ee,S,this.svgWrapper.drawingWidth,this.svgWrapper.drawingHeight,this.opts.weights.sigma,this.opts.weights.interval,this.opts.weights.colormap,this.opts.weights.opacity,z);Q.draw(),this.svgWrapper.addLayer(Q.getSVG())}getTotalOverlapScore(){return this.preprocessor.getTotalOverlapScore()}getMolecularFormula(S=null){return this.preprocessor.getMolecularFormula(S)}multiplyNormals(S,z){S[0].multiplyScalar(z),S[1].multiplyScalar(z)}}},4339:(It,ke,O)=>{O(1927);const U=O(7680),q=O(1611),te=O(5980);class A{constructor(ne,x,k,I=!0){if(this.svg="string"==typeof x||x instanceof String?document.getElementById(x):x,this.container=null,this.opts=k,this.uid=function re(F){for(var ne="",I=0;I<F;I++)ne+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return ne}(5),this.gradientId=0,this.backgroundItems=[],this.paths=[],this.vertices=[],this.gradients=[],this.highlights=[],this.drawingWidth=0,this.drawingHeight=0,this.halfBondThickness=this.opts.bondThickness/2,this.themeManager=ne,this.maskElements=[],this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,I)for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);this.style=document.createElementNS("http://www.w3.org/2000/svg","style"),this.style.appendChild(document.createTextNode(`\n                .element {\n                    font: ${this.opts.fontSizeLarge}pt ${this.opts.fontFamily};\n                }\n                .sub {\n                    font: ${this.opts.fontSizeSmall}pt ${this.opts.fontFamily};\n                }\n            `)),this.svg?this.svg.appendChild(this.style):(this.container=document.createElementNS("http://www.w3.org/2000/svg","g"),container.appendChild(this.style))}constructSvg(){let ne=document.createElementNS("http://www.w3.org/2000/svg","defs"),x=document.createElementNS("http://www.w3.org/2000/svg","mask"),k=document.createElementNS("http://www.w3.org/2000/svg","g"),I=document.createElementNS("http://www.w3.org/2000/svg","g"),S=document.createElementNS("http://www.w3.org/2000/svg","g"),z=document.createElementNS("http://www.w3.org/2000/svg","g"),ee=this.paths,Q=document.createElementNS("http://www.w3.org/2000/svg","rect");Q.setAttributeNS(null,"x",this.minX),Q.setAttributeNS(null,"y",this.minY),Q.setAttributeNS(null,"width",this.maxX-this.minX),Q.setAttributeNS(null,"height",this.maxY-this.minY),Q.setAttributeNS(null,"fill","white"),x.appendChild(Q),x.setAttributeNS(null,"id",this.uid+"-text-mask");for(let Ce of ee)S.appendChild(Ce);for(let Ce of this.backgroundItems)k.appendChild(Ce);for(let Ce of this.highlights)I.appendChild(Ce);for(let Ce of this.vertices)z.appendChild(Ce);for(let Ce of this.maskElements)x.appendChild(Ce);for(let Ce of this.gradients)ne.appendChild(Ce);if(S.setAttributeNS(null,"mask","url(#"+this.uid+"-text-mask)"),this.updateViewbox(this.opts.scale),k.setAttributeNS(null,"style",`transform: translateX(${this.minX}px) translateY(${this.minY}px)`),!this.svg)return this.container.appendChild(ne),this.container.appendChild(x),this.container.appendChild(k),this.container.appendChild(S),this.container.appendChild(z),this.container;this.svg.appendChild(ne),this.svg.appendChild(x),this.svg.appendChild(k),this.svg.appendChild(I),this.svg.appendChild(S),this.svg.appendChild(z)}addLayer(ne){this.backgroundItems.push(ne.firstChild)}createGradient(ne){let x=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),k=this.uid+"-line-"+this.gradientId++,I=ne.getLeftVector(),S=ne.getRightVector(),z=I.x,ee=I.y,Q=S.x,Ce=S.y;x.setAttributeNS(null,"id",k),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",z),x.setAttributeNS(null,"y1",ee),x.setAttributeNS(null,"x2",Q),x.setAttributeNS(null,"y2",Ce);let H=document.createElementNS("http://www.w3.org/2000/svg","stop");H.setAttributeNS(null,"stop-color",this.themeManager.getColor(ne.getLeftElement())||this.themeManager.getColor("C")),H.setAttributeNS(null,"offset","20%");let G=document.createElementNS("http://www.w3.org/2000/svg","stop");return G.setAttributeNS(null,"stop-color",this.themeManager.getColor(ne.getRightElement()||this.themeManager.getColor("C"))),G.setAttributeNS(null,"offset","100%"),x.appendChild(H),x.appendChild(G),this.gradients.push(x),k}createSubSuperScripts(ne,x){let k=document.createElementNS("http://www.w3.org/2000/svg","tspan");return k.setAttributeNS(null,"baseline-shift",x),k.appendChild(document.createTextNode(ne)),k.setAttributeNS(null,"class","sub"),k}static createUnicodeCharge(ne){return 1===ne?"\u207a":-1===ne?"\u207b":ne>1?A.createUnicodeSuperscript(ne)+"\u207a":ne<-1?A.createUnicodeSuperscript(ne)+"\u207b":""}determineDimensions(ne){for(var x=0;x<ne.length;x++){if(!ne[x].value.isDrawn)continue;let I=ne[x].position;this.maxX<I.x&&(this.maxX=I.x),this.maxY<I.y&&(this.maxY=I.y),this.minX>I.x&&(this.minX=I.x),this.minY>I.y&&(this.minY=I.y)}let k=this.opts.padding;this.maxX+=k,this.maxY+=k,this.minX-=k,this.minY-=k,this.drawingWidth=this.maxX-this.minX,this.drawingHeight=this.maxY-this.minY}updateViewbox(ne){let x=this.minX,k=this.minY,I=this.maxX-this.minX,S=this.maxY-this.minY;if(ne<=0)if(I>S){let z=I-S;S=I,k-=z/2}else{let z=S-I;I=S,x-=z/2}else this.svg&&(this.svg.style.width=ne*I+"px",this.svg.style.height=ne*S+"px");this.svg.setAttributeNS(null,"viewBox",`${x} ${k} ${I} ${S}`)}drawBall(ne,x,k){let I=this.opts.bondLength/4.5;ne-I<this.minX&&(this.minX=ne-I),ne+I>this.maxX&&(this.maxX=ne+I),x-I<this.minY&&(this.minY=x-I),x+I>this.maxY&&(this.maxY=x+I);let S=document.createElementNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"cx",ne),S.setAttributeNS(null,"cy",x),S.setAttributeNS(null,"r",I),S.setAttributeNS(null,"fill",this.themeManager.getColor(k)),this.vertices.push(S)}drawWedge(ne){let x=ne.getLeftVector().clone(),k=ne.getRightVector().clone(),I=q.normals(x,k);I[0].normalize(),I[1].normalize();let z=x,ee=k;ne.getRightChiral()&&(z=k,ee=x);let Q=q.add(z,q.multiplyScalar(I[0],this.halfBondThickness)),Ce=q.add(ee,q.multiplyScalar(I[0],3+this.opts.fontSizeLarge/4)),H=q.add(ee,q.multiplyScalar(I[1],3+this.opts.fontSizeLarge/4)),G=q.add(z,q.multiplyScalar(I[1],this.halfBondThickness)),K=document.createElementNS("http://www.w3.org/2000/svg","polygon"),ie=this.createGradient(ne,x.x,x.y,k.x,k.y);K.setAttributeNS(null,"points",`${Q.x},${Q.y} ${Ce.x},${Ce.y} ${H.x},${H.y} ${G.x},${G.y}`),K.setAttributeNS(null,"fill",`url('#${ie}')`),this.paths.push(K)}drawAtomHighlight(ne,x,k="#03fc9d"){let I=document.createElementNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"cx",ne),I.setAttributeNS(null,"cy",x),I.setAttributeNS(null,"r",this.opts.bondLength/3),I.setAttributeNS(null,"fill",k),this.highlights.push(I)}drawDashedWedge(ne){if(isNaN(ne.from.x)||isNaN(ne.from.y)||isNaN(ne.to.x)||isNaN(ne.to.y))return;let z,ee,x=ne.getLeftVector().clone(),k=ne.getRightVector().clone(),I=q.normals(x,k);I[0].normalize(),I[1].normalize(),ne.getRightChiral()?(z=k,ee=x):(z=x,ee=k);let Q=q.subtract(ee,z).normalize(),Ce=ne.getLength(),H=1.25/(Ce/(this.opts.bondLength/10)),K=this.createGradient(ne);for(let ie=0;ie<1;ie+=H){let ge=q.multiplyScalar(Q,ie*Ce),we=q.add(z,ge),Te=q.multiplyScalar(I[0],this.opts.fontSizeLarge/2*ie);we.subtract(Te);let tt=we.clone();tt.add(q.multiplyScalar(Te,2)),this.drawLine(new U(we,tt),null,K)}}drawDebugPoint(ne,x,k="",I="#f00"){let S=document.createElementNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"cx",ne),S.setAttributeNS(null,"cy",x),S.setAttributeNS(null,"r","2"),S.setAttributeNS(null,"fill","#f00"),this.vertices.push(S),this.drawDebugText(ne,x,k)}drawDebugText(ne,x,k){let I=document.createElementNS("http://www.w3.org/2000/svg","text");I.setAttributeNS(null,"x",ne),I.setAttributeNS(null,"y",x),I.setAttributeNS(null,"class","debug"),I.setAttributeNS(null,"fill","#ff0000"),I.setAttributeNS(null,"style","\n                font: 5px Droid Sans, sans-serif;\n            "),I.appendChild(document.createTextNode(k)),this.vertices.push(I)}drawRing(ne,x,k){let I=document.createElementNS("http://www.w3.org/2000/svg","circle"),S=te.apothemFromSideLength(this.opts.bondLength,k);I.setAttributeNS(null,"cx",ne),I.setAttributeNS(null,"cy",x),I.setAttributeNS(null,"r",S-this.opts.bondSpacing),I.setAttributeNS(null,"stroke",this.themeManager.getColor("C")),I.setAttributeNS(null,"stroke-width",this.opts.bondThickness),I.setAttributeNS(null,"fill","none"),this.paths.push(I)}drawLine(ne,x=!1,k=null,I="round"){let z=[["stroke-width",this.opts.bondThickness],["stroke-linecap",I],["stroke-dasharray",x?"5, 5":"none"]],ee=ne.getLeftVector(),Q=ne.getRightVector(),Ce=ee.x,H=ee.y,G=Q.x,K=Q.y,ie=z.map(we=>we.join(":")).join(";"),ge=document.createElementNS("http://www.w3.org/2000/svg","line");ge.setAttributeNS(null,"x1",Ce),ge.setAttributeNS(null,"y1",H),ge.setAttributeNS(null,"x2",G),ge.setAttributeNS(null,"y2",K),ge.setAttributeNS(null,"style",ie),this.paths.push(ge),null==k&&(k=this.createGradient(ne,Ce,H,G,K)),ge.setAttributeNS(null,"stroke",`url('#${k}')`)}drawPoint(ne,x,k){let I=.75;ne-I<this.minX&&(this.minX=ne-I),ne+I>this.maxX&&(this.maxX=ne+I),x-I<this.minY&&(this.minY=x-I),x+I>this.maxY&&(this.maxY=x+I);let S=document.createElementNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"cx",ne),S.setAttributeNS(null,"cy",x),S.setAttributeNS(null,"r","1.5"),S.setAttributeNS(null,"fill","black"),this.maskElements.push(S);let z=document.createElementNS("http://www.w3.org/2000/svg","circle");z.setAttributeNS(null,"cx",ne),z.setAttributeNS(null,"cy",x),z.setAttributeNS(null,"r",I),z.setAttributeNS(null,"fill",this.themeManager.getColor(k)),this.vertices.push(z)}drawText(ne,x,k,I,S,z,ee,Q,Ce,H={}){let G=[],K=k;0!==ee&&null!==ee&&(K+=A.createUnicodeCharge(ee)),0!==Q&&null!==Q&&(K=A.createUnicodeSuperscript(Q)+K),G.push([K,k]),1===I?G.push(["H","H"]):I>1&&G.push(["H"+A.createUnicodeSubscript(I),"H"]),1===ee&&"N"===k&&H.hasOwnProperty("0O")&&H.hasOwnProperty("0O-1")&&(H={"0O":{element:"O",count:2,hydrogenCount:0,previousElement:"C",charge:""}},ee=0);for(let ie in H){if(!H.hasOwnProperty(ie))continue;let ge=H[ie],we=ge.element;ge.count>1&&(we+=A.createUnicodeSubscript(ge.count)),""!==ge.charge&&(we+=A.createUnicodeCharge(ee)),G.push([we,ge.element]),1===ge.hydrogenCount?G.push(["H","H"]):ge.hydrogenCount>1&&G.push(["H"+A.createUnicodeSubscript(ge.hydrogenCount),"H"])}this.write(G,S,ne,x,1===Ce)}write(ne,x,k,I,S){let z=A.measureText(ne[0][1],this.opts.fontSizeLarge,this.opts.fontFamily);"left"===x&&ne[0][0]!==ne[0][1]&&(z.width*=2),S?(k+z.width*ne.length>this.maxX&&(this.maxX=k+z.width*ne.length),k-z.width/2<this.minX&&(this.minX=k-z.width/2),I-z.height<this.minY&&(this.minY=I-z.height),I+z.height>this.maxY&&(this.maxY=I+z.height)):("right"!==x?(k+z.width*ne.length>this.maxX&&(this.maxX=k+z.width*ne.length),k-z.width*ne.length<this.minX&&(this.minX=k-z.width*ne.length)):"left"!==x&&(k+z.width*ne.length>this.maxX&&(this.maxX=k+z.width*ne.length),k-z.width/2<this.minX&&(this.minX=k-z.width/2)),I-z.height<this.minY&&(this.minY=I-z.height),I+z.height>this.maxY&&(this.maxY=I+z.height),"down"===x&&I+.8*z.height*ne.length>this.maxY&&(this.maxY=I+.8*z.height*ne.length),"up"===x&&I-.8*z.height*ne.length<this.minY&&(this.minY=I-.8*z.height*ne.length));let ee=k,Q=I,Ce=document.createElementNS("http://www.w3.org/2000/svg","text");Ce.setAttributeNS(null,"class","element");let H=document.createElementNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"fill","#ffffff"),"left"===x&&(ne=ne.reverse()),("right"===x||"down"===x||"up"===x)&&(k-=z.width/2),"left"===x&&(k+=z.width/2),ne.forEach((ie,ge)=>{const we=ie[0],fe=ie[1];let Te=document.createElementNS("http://www.w3.org/2000/svg","tspan");Te.setAttributeNS(null,"fill",this.themeManager.getColor(fe)),Te.textContent=we,("up"===x||"down"===x)&&(Te.setAttributeNS(null,"x","0px"),Te.setAttributeNS(null,"y","up"===x?`-${.9*ge}em`:.9*ge+"em")),Ce.appendChild(Te)}),Ce.setAttributeNS(null,"data-direction",x),"left"===x||"right"===x?(Ce.setAttributeNS(null,"dominant-baseline","alphabetic"),Ce.setAttributeNS(null,"y","0.36em")):Ce.setAttributeNS(null,"dominant-baseline","central"),"left"===x&&Ce.setAttributeNS(null,"text-anchor","end"),H.appendChild(Ce),H.setAttributeNS(null,"style",`transform: translateX(${k}px) translateY(${I}px)`);let G=.75*this.opts.fontSizeLarge;ne[0][1].length>1&&(G=1.1*this.opts.fontSizeLarge);let K=document.createElementNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"cx",ee),K.setAttributeNS(null,"cy",Q),K.setAttributeNS(null,"r",G),K.setAttributeNS(null,"fill","black"),this.maskElements.push(K),this.vertices.push(H)}toCanvas(ne,x,k){("string"==typeof ne||ne instanceof String)&&(ne=document.getElementById(ne));let I=new Image;I.onload=function(){ne.width=x,ne.height=k,ne.getContext("2d").drawImage(I,0,0,x,k)},I.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(this.svg.outerHTML)}static createUnicodeSubscript(ne){let x="";return ne.toString().split("").forEach(k=>{x+=["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"][parseInt(k)]}),x}static createUnicodeSuperscript(ne){let x="";return ne.toString().split("").forEach(k=>{parseInt(k)&&(x+=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075","\u2076","\u2077","\u2078","\u2079"][parseInt(k)])}),x}static replaceNumbersWithSubscript(ne){let x={0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089"};for(const[k,I]of Object.entries(x))ne=ne.replaceAll(k,I);return ne}static measureText(ne,x,k,I=.9){const z=document.createElement("canvas").getContext("2d");z.font=`${x}pt ${k}`;let ee=z.measureText(ne),Q=Math.abs(ee.actualBoundingBoxLeft)+Math.abs(ee.actualBoundingBoxRight);return{width:ee.width>Q?ee.width:Q,height:(Math.abs(ee.actualBoundingBoxAscent)+Math.abs(ee.actualBoundingBoxAscent))*I}}static svgToCanvas(ne,x,k,I,S=null){ne.setAttributeNS(null,"width",k),ne.setAttributeNS(null,"height",I);let z=new Image;return z.onload=function(){x.width=k,x.height=I;let ee=x.getContext("2d");ee.imageSmoothingEnabled=!1,ee.drawImage(z,0,0,k,I),S&&S(x)},z.onerror=function(ee){console.log(ee)},z.src="data:image/svg+xml;charset-utf-8,"+encodeURIComponent(ne.outerHTML),x}static svgToImg(ne,x,k,I){let S=document.createElement("canvas");this.svgToCanvas(ne,S,k,I,z=>{x.src=S.toDataURL("image/png")})}static writeText(ne,x,k,I,S=Number.MAX_SAFE_INTEGER){let z=document.createElementNS("http://www.w3.org/2000/svg","svg"),ee=document.createElementNS("http://www.w3.org/2000/svg","style");ee.appendChild(document.createTextNode(`\n        .text {\n            font: ${k}pt ${I};\n            dominant-baseline: ideographic;\n        }\n    `)),z.appendChild(ee);let Q=document.createElementNS("http://www.w3.org/2000/svg","text");Q.setAttributeNS(null,"class","text");let Ce=0,H=0,G=[];return ne.split("\n").forEach(K=>{let ie=A.measureText(K,k,I,1);if(ie.width>=S){let ge=0,we=0,fe=K.split(" "),Te=0;for(let tt=0;tt<fe.length;tt++){let Ze=A.measureText(fe[tt],k,I,1);ge+Ze.width>S&&(G.push({text:fe.slice(Te,tt).join(" "),width:ge,height:we}),ge=0,we=0,Te=tt),Ze.height>we&&(we=Ze.height),ge+=Ze.width}Te<fe.length&&G.push({text:fe.slice(Te,fe.length).join(" "),width:ge,height:we})}else G.push({text:K,width:ie.width,height:ie.height})}),G.forEach((K,ie)=>{H+=K.height;let ge=document.createElementNS("http://www.w3.org/2000/svg","tspan");ge.setAttributeNS(null,"fill",x.getColor("C")),ge.textContent=K.text,ge.setAttributeNS(null,"x","0px"),ge.setAttributeNS(null,"y",`${H}px`),Q.appendChild(ge),K.width>Ce&&(Ce=K.width)}),z.appendChild(Q),{svg:z,width:Ce,height:H}}}It.exports=A},4430:It=>{It.exports=class ke{constructor(R,U){this.colors=R,this.theme=this.colors[U]}getColor(R){return R&&(R=R.toUpperCase())in this.theme?this.theme[R]:this.theme.C}setTheme(R){this.colors.hasOwnProperty(R)&&(this.theme=this.colors[R])}}},1927:It=>{It.exports={getChargeText:function ke(O){return 1===O?"+":2===O?"2+":-1===O?"-":-2===O?"2-":""}}},1611:It=>{class ke{constructor(R,U){0==arguments.length?(this.x=0,this.y=0):1==arguments.length?(this.x=R.x,this.y=R.y):(this.x=R,this.y=U)}clone(){return new ke(this.x,this.y)}toString(){return"("+this.x+","+this.y+")"}add(R){return this.x+=R.x,this.y+=R.y,this}subtract(R){return this.x-=R.x,this.y-=R.y,this}divide(R){return this.x/=R,this.y/=R,this}multiply(R){return this.x*=R.x,this.y*=R.y,this}multiplyScalar(R){return this.x*=R,this.y*=R,this}invert(){return this.x=-this.x,this.y=-this.y,this}angle(){return Math.atan2(this.y,this.x)}distance(R){return Math.sqrt((R.x-this.x)*(R.x-this.x)+(R.y-this.y)*(R.y-this.y))}distanceSq(R){return(R.x-this.x)*(R.x-this.x)+(R.y-this.y)*(R.y-this.y)}clockwise(R){let U=this.y*R.x,q=this.x*R.y;return U>q?-1:U===q?0:1}relativeClockwise(R,U){let q=(this.y-R.y)*(U.x-R.x),te=(this.x-R.x)*(U.y-R.y);return q>te?-1:q===te?0:1}rotate(R){let U=new ke(0,0),q=Math.cos(R),te=Math.sin(R);return U.x=this.x*q-this.y*te,U.y=this.x*te+this.y*q,this.x=U.x,this.y=U.y,this}rotateAround(R,U){let q=Math.sin(R),te=Math.cos(R);this.x-=U.x,this.y-=U.y;let A=this.x*q+this.y*te;return this.x=this.x*te-this.y*q+U.x,this.y=A+U.y,this}rotateTo(R,U,q=0){this.x+=.001,this.y-=.001;let te=ke.subtract(this,U),re=ke.subtract(R,U),A=ke.angle(re,te);return this.rotateAround(A+q,U),this}rotateAwayFrom(R,U,q){this.rotateAround(q,U);let te=this.distanceSq(R);this.rotateAround(-2*q,U),this.distanceSq(R)<te&&this.rotateAround(2*q,U)}getRotateAwayFromAngle(R,U,q){let te=this.clone();te.rotateAround(q,U);let re=te.distanceSq(R);return te.rotateAround(-2*q,U),te.distanceSq(R)<re?q:-q}getRotateTowardsAngle(R,U,q){let te=this.clone();te.rotateAround(q,U);let re=te.distanceSq(R);return te.rotateAround(-2*q,U),te.distanceSq(R)>re?q:-q}getRotateToAngle(R,U){let q=ke.subtract(this,U),te=ke.subtract(R,U),re=ke.angle(te,q);return Number.isNaN(re)?0:re}isInPolygon(R){let U=!1;for(let q=0,te=R.length-1;q<R.length;te=q++)R[q].y>this.y!=R[te].y>this.y&&this.x<(R[te].x-R[q].x)*(this.y-R[q].y)/(R[te].y-R[q].y)+R[q].x&&(U=!U);return U}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSq(){return this.x*this.x+this.y*this.y}normalize(){return this.divide(this.length()),this}normalized(){return ke.divideScalar(this,this.length())}whichSide(R,U){return(this.x-R.x)*(U.y-R.y)-(this.y-R.y)*(U.x-R.x)}sameSideAs(R,U,q){let te=this.whichSide(R,U),re=q.whichSide(R,U);return te<0&&re<0||0==te&&0==re||te>0&&re>0}static add(R,U){return new ke(R.x+U.x,R.y+U.y)}static subtract(R,U){return new ke(R.x-U.x,R.y-U.y)}static multiply(R,U){return new ke(R.x*U.x,R.y*U.y)}static multiplyScalar(R,U){return new ke(R.x,R.y).multiplyScalar(U)}static midpoint(R,U){return new ke((R.x+U.x)/2,(R.y+U.y)/2)}static normals(R,U){let q=ke.subtract(U,R);return[new ke(-q.y,q.x),new ke(q.y,-q.x)]}static units(R,U){let q=ke.subtract(U,R);return[new ke(-q.y,q.x).normalize(),new ke(q.y,-q.x).normalize()]}static divide(R,U){return new ke(R.x/U.x,R.y/U.y)}static divideScalar(R,U){return new ke(R.x/U,R.y/U)}static dot(R,U){return R.x*U.x+R.y*U.y}static angle(R,U){let q=ke.dot(R,U);return Math.acos(q/(R.length()*U.length()))}static threePointangle(R,U,q){let te=ke.subtract(U,R),re=ke.subtract(q,U),A=R.distance(U),F=U.distance(q);return Math.acos(ke.dot(te,re)/(A*F))}static scalarProjection(R,U){let q=U.normalized();return ke.dot(R,q)}static averageDirection(R){let U=new ke(0,0);for(var q=0;q<R.length;q++)U.add(R[q]);return U.normalize()}}It.exports=ke},768:(It,ke,O)=>{const R=O(5980),U=O(7809),q=O(1611);O(2848);class re{constructor(F,ne=0,x=0){this.id=null,this.value=F,this.position=new q(ne||0,x||0),this.previousPosition=new q(0,0),this.parentVertexId=null,this.children=Array(),this.spanningTreeChildren=Array(),this.edges=Array(),this.positioned=!1,this.angle=null,this.dir=1,this.neighbourCount=0,this.neighbours=Array(),this.neighbouringElements=Array(),this.forcePositioned=!1}setPosition(F,ne){this.position.x=F,this.position.y=ne}setPositionFromVector(F){this.position.x=F.x,this.position.y=F.y}addChild(F){this.children.push(F),this.neighbours.push(F),this.neighbourCount++}addRingbondChild(F,ne){if(this.children.push(F),this.value.bracket){let x=1;0===this.id&&0===this.value.bracket.hcount&&(x=0),1===this.value.bracket.hcount&&0===ne&&(x=2),1===this.value.bracket.hcount&&1===ne&&(x=this.neighbours.length<3?2:3),null===this.value.bracket.hcount&&0===ne&&(x=1),null===this.value.bracket.hcount&&1===ne&&(x=this.neighbours.length<3?1:2),this.neighbours.splice(x,0,F)}else this.neighbours.push(F);this.neighbourCount++}setParentVertexId(F){this.neighbourCount++,this.parentVertexId=F,this.neighbours.push(F)}isTerminal(){return!!this.value.hasAttachedPseudoElements||null===this.parentVertexId&&this.children.length<2||0===this.children.length}clone(){let F=new re(this.value,this.position.x,this.position.y);return F.id=this.id,F.previousPosition=new q(this.previousPosition.x,this.previousPosition.y),F.parentVertexId=this.parentVertexId,F.children=U.clone(this.children),F.spanningTreeChildren=U.clone(this.spanningTreeChildren),F.edges=U.clone(this.edges),F.positioned=this.positioned,F.angle=this.angle,F.forcePositioned=this.forcePositioned,F}equals(F){return this.id===F.id}getAngle(F=null,ne=!1){let x=null;return x=q.subtract(this.position,F||this.previousPosition),ne?R.toDeg(x.angle()):x.angle()}getTextDirection(F,ne=!1){let x=this.getDrawnNeighbours(F),k=Array();if(1===F.length)return"right";for(let S=0;S<x.length;S++)k.push(this.getAngle(F[x[S]].position));let I=R.meanAngle(k);if(this.isTerminal()||ne)Math.round(100*I)/100==1.57&&(I-=.2),I=Math.round(Math.round(I/Math.PI)*Math.PI);else{let S=Math.PI/2;I=Math.round(Math.round(I/S)*S)}return 2===I?"down":-2===I?"up":0===I||-0===I?"right":3===I||-3===I?"left":"down"}getNeighbours(F=null){if(null===F)return this.neighbours.slice();let ne=Array();for(let x=0;x<this.neighbours.length;x++)this.neighbours[x]!==F&&ne.push(this.neighbours[x]);return ne}getDrawnNeighbours(F){let ne=Array();for(let x=0;x<this.neighbours.length;x++)F[this.neighbours[x]].value.isDrawn&&ne.push(this.neighbours[x]);return ne}getNeighbourCount(){return this.neighbourCount}getSpanningTreeNeighbours(F=null){let ne=Array();for(let x=0;x<this.spanningTreeChildren.length;x++)(void 0===F||F!=this.spanningTreeChildren[x])&&ne.push(this.spanningTreeChildren[x]);return null!=this.parentVertexId&&(void 0===F||F!=this.parentVertexId)&&ne.push(this.parentVertexId),ne}getNextInRing(F,ne,x){let k=this.getNeighbours();for(let I=0;I<k.length;I++)if(U.contains(F[k[I]].value.rings,{value:ne})&&k[I]!=x)return k[I];return null}}It.exports=re},5031:function(It){It.exports=function(){"use strict";for(var ke=function(Y,se,me){return void 0===se&&(se=0),void 0===me&&(me=1),Y<se?se:Y>me?me:Y},O=ke,U={},q=0,te=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];q<te.length;q+=1){var re=te[q];U["[object "+re+"]"]=re.toLowerCase()}var A=function(Y){return U[Object.prototype.toString.call(Y)]||"object"},F=A,x=A,I=Math.PI,S={clip_rgb:function(Y){Y._clipped=!1,Y._unclipped=Y.slice(0);for(var se=0;se<=3;se++)se<3?((Y[se]<0||Y[se]>255)&&(Y._clipped=!0),Y[se]=O(Y[se],0,255)):3===se&&(Y[se]=O(Y[se],0,1));return Y},limit:ke,type:A,unpack:function(Y,se){return void 0===se&&(se=null),Y.length>=3?Array.prototype.slice.call(Y):"object"==F(Y[0])&&se?se.split("").filter(function(me){return void 0!==Y[0][me]}).map(function(me){return Y[0][me]}):Y[0]},last:function(Y){if(Y.length<2)return null;var se=Y.length-1;return"string"==x(Y[se])?Y[se].toLowerCase():null},PI:I,TWOPI:2*I,PITHIRD:I/3,DEG2RAD:I/180,RAD2DEG:180/I},z={format:{},autodetect:[]},ee=S.last,Q=S.clip_rgb,Ce=S.type,H=z,G=function(){for(var se=[],me=arguments.length;me--;)se[me]=arguments[me];if("object"===Ce(se[0])&&se[0].constructor&&se[0].constructor===this.constructor)return se[0];var Je=ee(se),pt=!1;if(!Je){pt=!0,H.sorted||(H.autodetect=H.autodetect.sort(function(zn,Ai){return Ai.p-zn.p}),H.sorted=!0);for(var et=0,Mt=H.autodetect;et<Mt.length;et+=1){var Nt=Mt[et];if(Je=Nt.test.apply(Nt,se))break}}if(!H.format[Je])throw new Error("unknown format: "+se);var cn=H.format[Je].apply(null,pt?se:se.slice(0,-1));this._rgb=Q(cn),3===this._rgb.length&&this._rgb.push(1)};G.prototype.toString=function(){return"function"==Ce(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var K=G,ie=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(ie.Color,[null].concat(Y)))};ie.Color=K,ie.version="2.4.2";var ge=ie,we=S.unpack,fe=Math.max,Ze=S.unpack,Fe=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=(Y=Ze(Y,"cmyk"))[0],je=Y[1],Je=Y[2],pt=Y[3],et=Y.length>4?Y[4]:1;return 1===pt?[0,0,0,et]:[me>=1?0:255*(1-me)*(1-pt),je>=1?0:255*(1-je)*(1-pt),Je>=1?0:255*(1-Je)*(1-pt),et]},Xe=ge,mt=K,ft=z,Zt=S.unpack,Tt=S.type,On=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=we(Y,"rgb"),je=me[0],Je=me[1],pt=me[2],et=1-fe(je/=255,fe(Je/=255,pt/=255)),Mt=et<1?1/(1-et):0;return[(1-je-et)*Mt,(1-Je-et)*Mt,(1-pt-et)*Mt,et]};mt.prototype.cmyk=function(){return On(this._rgb)},Xe.cmyk=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(mt,[null].concat(Y,["cmyk"])))},ft.format.cmyk=Fe,ft.autodetect.push({p:2,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Zt(Y,"cmyk"),"array"===Tt(Y)&&4===Y.length)return"cmyk"}});var _i=S.unpack,Ti=S.last,Ri=function(Y){return Math.round(100*Y)/100},Wn=S.unpack,ki=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=(Y=Wn(Y,"rgba"))[0],je=Y[1],Je=Y[2];me/=255,je/=255,Je/=255;var Nt,cn,pt=Math.min(me,je,Je),et=Math.max(me,je,Je),Mt=(et+pt)/2;return et===pt?(Nt=0,cn=Number.NaN):Nt=Mt<.5?(et-pt)/(et+pt):(et-pt)/(2-et-pt),me==et?cn=(je-Je)/(et-pt):je==et?cn=2+(Je-me)/(et-pt):Je==et&&(cn=4+(me-je)/(et-pt)),(cn*=60)<0&&(cn+=360),Y.length>3&&void 0!==Y[3]?[cn,Nt,Mt,Y[3]]:[cn,Nt,Mt]},Mi=S.unpack,or=S.last,qi=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=_i(Y,"hsla"),je=Ti(Y)||"lsa";return me[0]=Ri(me[0]||0),me[1]=Ri(100*me[1])+"%",me[2]=Ri(100*me[2])+"%","hsla"===je||me.length>3&&me[3]<1?(me[3]=me.length>3?me[3]:1,je="hsla"):me.length=3,je+"("+me.join(",")+")"},Qs=ki,ko=Math.round,jt=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Mi(Y,"rgba"),je=or(Y)||"rgb";return"hsl"==je.substr(0,3)?qi(Qs(me),je):(me[0]=ko(me[0]),me[1]=ko(me[1]),me[2]=ko(me[2]),("rgba"===je||me.length>3&&me[3]<1)&&(me[3]=me.length>3?me[3]:1,je="rgba"),je+"("+me.slice(0,"rgb"===je?3:4).join(",")+")")},pn=S.unpack,ln=Math.round,Ci=function(){for(var Y,se=[],me=arguments.length;me--;)se[me]=arguments[me];var et,Mt,Nt,Je=(se=pn(se,"hsl"))[1],pt=se[2];if(0===Je)et=Mt=Nt=255*pt;else{var cn=[0,0,0],zn=[0,0,0],Ai=pt<.5?pt*(1+Je):pt+Je-pt*Je,In=2*pt-Ai,Li=se[0]/360;cn[0]=Li+1/3,cn[1]=Li,cn[2]=Li-1/3;for(var ji=0;ji<3;ji++)cn[ji]<0&&(cn[ji]+=1),cn[ji]>1&&(cn[ji]-=1),zn[ji]=6*cn[ji]<1?In+6*(Ai-In)*cn[ji]:2*cn[ji]<1?Ai:3*cn[ji]<2?In+(Ai-In)*(2/3-cn[ji])*6:In;et=(Y=[ln(255*zn[0]),ln(255*zn[1]),ln(255*zn[2])])[0],Mt=Y[1],Nt=Y[2]}return se.length>3?[et,Mt,Nt,se[3]]:[et,Mt,Nt,1]},xi=Ci,Gt=z,At=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Bt=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,yn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ln=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,zt=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,nn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,mn=Math.round,ti=function(Y){var se;if(Y=Y.toLowerCase().trim(),Gt.format.named)try{return Gt.format.named(Y)}catch{}if(se=Y.match(At)){for(var me=se.slice(1,4),je=0;je<3;je++)me[je]=+me[je];return me[3]=1,me}if(se=Y.match(Bt)){for(var Je=se.slice(1,5),pt=0;pt<4;pt++)Je[pt]=+Je[pt];return Je}if(se=Y.match(yn)){for(var et=se.slice(1,4),Mt=0;Mt<3;Mt++)et[Mt]=mn(2.55*et[Mt]);return et[3]=1,et}if(se=Y.match(Ln)){for(var Nt=se.slice(1,5),cn=0;cn<3;cn++)Nt[cn]=mn(2.55*Nt[cn]);return Nt[3]=+Nt[3],Nt}if(se=Y.match(zt)){var zn=se.slice(1,4);zn[1]*=.01,zn[2]*=.01;var Ai=xi(zn);return Ai[3]=1,Ai}if(se=Y.match(nn)){var In=se.slice(1,4);In[1]*=.01,In[2]*=.01;var Li=xi(In);return Li[3]=+se[4],Li}};ti.test=function(Y){return At.test(Y)||Bt.test(Y)||yn.test(Y)||Ln.test(Y)||zt.test(Y)||nn.test(Y)};var ns=ge,oo=K,ao=z,Co=S.type,Do=jt,Rs=ti;oo.prototype.css=function(Y){return Do(this._rgb,Y)},ns.css=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(oo,[null].concat(Y,["css"])))},ao.format.css=Rs,ao.autodetect.push({p:5,test:function(Y){for(var se=[],me=arguments.length-1;me-- >0;)se[me]=arguments[me+1];if(!se.length&&"string"===Co(Y)&&Rs.test(Y))return"css"}});var Us=K,ea=ge,Js=S.unpack;z.format.gl=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Js(Y,"rgba");return me[0]*=255,me[1]*=255,me[2]*=255,me},ea.gl=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Us,[null].concat(Y,["gl"])))},Us.prototype.gl=function(){var Y=this._rgb;return[Y[0]/255,Y[1]/255,Y[2]/255,Y[3]]};var $a=S.unpack,dc=S.unpack,Ca=Math.floor,yl=function(){for(var Y,se,me,je,Je,pt,et=[],Mt=arguments.length;Mt--;)et[Mt]=arguments[Mt];var Ai,In,Li,Nt=(et=dc(et,"hcg"))[0],cn=et[1],zn=et[2];zn*=255;var ji=255*cn;if(0===cn)Ai=In=Li=zn;else{360===Nt&&(Nt=0),Nt>360&&(Nt-=360),Nt<0&&(Nt+=360);var rs=Ca(Nt/=60),ls=Nt-rs,cs=zn*(1-cn),Es=cs+ji*(1-ls),na=cs+ji*ls,ha=cs+ji;switch(rs){case 0:Ai=(Y=[ha,na,cs])[0],In=Y[1],Li=Y[2];break;case 1:Ai=(se=[Es,ha,cs])[0],In=se[1],Li=se[2];break;case 2:Ai=(me=[cs,ha,na])[0],In=me[1],Li=me[2];break;case 3:Ai=(je=[cs,Es,ha])[0],In=je[1],Li=je[2];break;case 4:Ai=(Je=[na,cs,ha])[0],In=Je[1],Li=Je[2];break;case 5:Ai=(pt=[ha,cs,Es])[0],In=pt[1],Li=pt[2]}}return[Ai,In,Li,et.length>3?et[3]:1]},sl=S.unpack,hc=S.type,fc=ge,Ir=K,hn=z,Gn=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var Ai,me=$a(Y,"rgb"),je=me[0],Je=me[1],pt=me[2],et=Math.min(je,Je,pt),Mt=Math.max(je,Je,pt),Nt=Mt-et;return 0===Nt?Ai=Number.NaN:(je===Mt&&(Ai=(Je-pt)/Nt),Je===Mt&&(Ai=2+(pt-je)/Nt),pt===Mt&&(Ai=4+(je-Je)/Nt),(Ai*=60)<0&&(Ai+=360)),[Ai,100*Nt/255,et/(255-Nt)*100]};Ir.prototype.hcg=function(){return Gn(this._rgb)},fc.hcg=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Ir,[null].concat(Y,["hcg"])))},hn.format.hcg=yl,hn.autodetect.push({p:1,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=sl(Y,"hcg"),"array"===hc(Y)&&3===Y.length)return"hcg"}});var dr=S.unpack,Ne=S.last,li=Math.round,Xi=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=dr(Y,"rgba"),je=me[0],Je=me[1],pt=me[2],et=me[3],Mt=Ne(Y)||"auto";void 0===et&&(et=1),"auto"===Mt&&(Mt=et<1?"rgba":"rgb");var cn="000000"+((je=li(je))<<16|(Je=li(Je))<<8|(pt=li(pt))).toString(16);cn=cn.substr(cn.length-6);var zn="0"+li(255*et).toString(16);switch(zn=zn.substr(zn.length-2),Mt.toLowerCase()){case"rgba":return"#"+cn+zn;case"argb":return"#"+zn+cn;default:return"#"+cn}},xr=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,oi=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,To=function(Y){if(Y.match(xr)){(4===Y.length||7===Y.length)&&(Y=Y.substr(1)),3===Y.length&&(Y=(Y=Y.split(""))[0]+Y[0]+Y[1]+Y[1]+Y[2]+Y[2]);var se=parseInt(Y,16);return[se>>16,se>>8&255,255&se,1]}if(Y.match(oi)){(5===Y.length||9===Y.length)&&(Y=Y.substr(1)),4===Y.length&&(Y=(Y=Y.split(""))[0]+Y[0]+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]);var pt=parseInt(Y,16);return[pt>>24&255,pt>>16&255,pt>>8&255,Math.round((255&pt)/255*100)/100]}throw new Error("unknown hex color: "+Y)},lo=ge,Nr=K,Wa=S.type,Zi=z,eo=Xi;Nr.prototype.hex=function(Y){return eo(this._rgb,Y)},lo.hex=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Nr,[null].concat(Y,["hex"])))},Zi.format.hex=To,Zi.autodetect.push({p:4,test:function(Y){for(var se=[],me=arguments.length-1;me-- >0;)se[me]=arguments[me+1];if(!se.length&&"string"===Wa(Y)&&[3,4,5,6,7,8,9].indexOf(Y.length)>=0)return"hex"}});var Hr=S.unpack,xo=S.TWOPI,Uo=Math.min,Fa=Math.sqrt,oa=Math.acos,Ga=S.unpack,Yr=S.limit,Ta=S.TWOPI,Ol=S.PITHIRD,Pr=Math.cos,ms=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var pt,et,Mt,me=(Y=Ga(Y,"hsi"))[0],je=Y[1],Je=Y[2];return isNaN(me)&&(me=0),isNaN(je)&&(je=0),me>360&&(me-=360),me<0&&(me+=360),(me/=360)<1/3?et=1-((Mt=(1-je)/3)+(pt=(1+je*Pr(Ta*me)/Pr(Ol-Ta*me))/3)):me<2/3?Mt=1-((pt=(1-je)/3)+(et=(1+je*Pr(Ta*(me-=1/3))/Pr(Ol-Ta*me))/3)):pt=1-((et=(1-je)/3)+(Mt=(1+je*Pr(Ta*(me-=2/3))/Pr(Ol-Ta*me))/3)),[255*(pt=Yr(Je*pt*3)),255*(et=Yr(Je*et*3)),255*(Mt=Yr(Je*Mt*3)),Y.length>3?Y[3]:1]},ql=S.unpack,Kn=S.type,_s=ge,cr=K,Ui=z,xa=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var et,me=Hr(Y,"rgb"),je=me[0],Je=me[1],pt=me[2],Mt=Uo(je/=255,Je/=255,pt/=255),Nt=(je+Je+pt)/3,cn=Nt>0?1-Mt/Nt:0;return 0===cn?et=NaN:(et=(je-Je+(je-pt))/2,et/=Fa((je-Je)*(je-Je)+(je-pt)*(Je-pt)),et=oa(et),pt>Je&&(et=xo-et),et/=xo),[360*et,cn,Nt]};cr.prototype.hsi=function(){return xa(this._rgb)},_s.hsi=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(cr,[null].concat(Y,["hsi"])))},Ui.format.hsi=ms,Ui.autodetect.push({p:2,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=ql(Y,"hsi"),"array"===Kn(Y)&&3===Y.length)return"hsi"}});var co=S.unpack,ys=S.type,aa=ge,Me=K,Mo=z,wt=ki;Me.prototype.hsl=function(){return wt(this._rgb)},aa.hsl=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Me,[null].concat(Y,["hsl"])))},Mo.format.hsl=Ci,Mo.autodetect.push({p:2,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=co(Y,"hsl"),"array"===ys(Y)&&3===Y.length)return"hsl"}});var Ge=S.unpack,fn=Math.min,Lt=Math.max,$i=S.unpack,is=Math.floor,zi=function(){for(var Y,se,me,je,Je,pt,et=[],Mt=arguments.length;Mt--;)et[Mt]=arguments[Mt];var Ai,In,Li,Nt=(et=$i(et,"hsv"))[0],cn=et[1],zn=et[2];if(zn*=255,0===cn)Ai=In=Li=zn;else{360===Nt&&(Nt=0),Nt>360&&(Nt-=360),Nt<0&&(Nt+=360);var ji=is(Nt/=60),rs=Nt-ji,ls=zn*(1-cn),cs=zn*(1-cn*rs),Es=zn*(1-cn*(1-rs));switch(ji){case 0:Ai=(Y=[zn,Es,ls])[0],In=Y[1],Li=Y[2];break;case 1:Ai=(se=[cs,zn,ls])[0],In=se[1],Li=se[2];break;case 2:Ai=(me=[ls,zn,Es])[0],In=me[1],Li=me[2];break;case 3:Ai=(je=[ls,cs,zn])[0],In=je[1],Li=je[2];break;case 4:Ai=(Je=[Es,ls,zn])[0],In=Je[1],Li=Je[2];break;case 5:Ai=(pt=[zn,ls,cs])[0],In=pt[1],Li=pt[2]}}return[Ai,In,Li,et.length>3?et[3]:1]},Wo=S.unpack,Ic=S.type,Io=ge,vl=K,tr=z,Un=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var Nt,cn,me=(Y=Ge(Y,"rgb"))[0],je=Y[1],Je=Y[2],pt=fn(me,je,Je),et=Lt(me,je,Je),Mt=et-pt;return 0===et?(Nt=Number.NaN,cn=0):(cn=Mt/et,me===et&&(Nt=(je-Je)/Mt),je===et&&(Nt=2+(Je-me)/Mt),Je===et&&(Nt=4+(me-je)/Mt),(Nt*=60)<0&&(Nt+=360)),[Nt,cn,et/255]};vl.prototype.hsv=function(){return Un(this._rgb)},Io.hsv=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(vl,[null].concat(Y,["hsv"])))},tr.format.hsv=zi,tr.autodetect.push({p:2,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Wo(Y,"hsv"),"array"===Ic(Y)&&3===Y.length)return"hsv"}});var Rl={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Fr=Rl,pc=S.unpack,Bd=Math.pow,bl=function(Y){return(Y/=255)<=.04045?Y/12.92:Bd((Y+.055)/1.055,2.4)},Nc=function(Y){return Y>Fr.t3?Bd(Y,1/3):Y/Fr.t2+Fr.t0},gu=function(Y,se,me){return Y=bl(Y),se=bl(se),me=bl(me),[Nc((.4124564*Y+.3575761*se+.1804375*me)/Fr.Xn),Nc((.2126729*Y+.7151522*se+.072175*me)/Fr.Yn),Nc((.0193339*Y+.119192*se+.9503041*me)/Fr.Zn)]},zu=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=pc(Y,"rgb"),et=gu(me[0],me[1],me[2]),Nt=et[1],zn=116*Nt-16;return[zn<0?0:zn,500*(et[0]-Nt),200*(Nt-et[2])]},Yc=Rl,Xc=S.unpack,yi=Math.pow,al=function(Y){return 255*(Y<=.00304?12.92*Y:1.055*yi(Y,1/2.4)-.055)},qc=function(Y){return Y>Yc.t1?Y*Y*Y:Yc.t2*(Y-Yc.t0)},mu=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var pt,et,Mt,je=(Y=Xc(Y,"lab"))[1],Je=Y[2];return et=(Y[0]+16)/116,pt=isNaN(je)?et:et+je/500,Mt=isNaN(Je)?et:et-Je/200,et=Yc.Yn*qc(et),pt=Yc.Xn*qc(pt),Mt=Yc.Zn*qc(Mt),[al(3.2404542*pt-1.5371385*et-.4985314*Mt),al(-.969266*pt+1.8760108*et+.041556*Mt),al(.0556434*pt-.2040259*et+1.0572252*Mt),Y.length>3?Y[3]:1]},Vd=S.unpack,Wi=S.type,Et=ge,Yn=K,hi=z,As=zu;Yn.prototype.lab=function(){return As(this._rgb)},Et.lab=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Yn,[null].concat(Y,["lab"])))},hi.format.lab=mu,hi.autodetect.push({p:2,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Vd(Y,"lab"),"array"===Wi(Y)&&3===Y.length)return"lab"}});var Go=S.unpack,Ys=S.RAD2DEG,Xs=Math.sqrt,_u=Math.atan2,zo=Math.round,la=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Go(Y,"lab"),je=me[0],Je=me[1],pt=me[2],et=Xs(Je*Je+pt*pt),Mt=(_u(pt,Je)*Ys+360)%360;return 0===zo(1e4*et)&&(Mt=Number.NaN),[je,et,Mt]},Ea=S.unpack,Dr=zu,vs=la,Af=S.unpack,Dg=S.DEG2RAD,Mg=Math.sin,kf=Math.cos,Oh=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Af(Y,"lch"),je=me[0],Je=me[1],pt=me[2];return isNaN(pt)&&(pt=0),[je,kf(pt*=Dg)*Je,Mg(pt)*Je]},Rp=S.unpack,Ps=Oh,cd=mu,Oc=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];Y=Rp(Y,"lch");var pt=Ps(Y[0],Y[1],Y[2]),cn=cd(pt[0],pt[1],pt[2]);return[cn[0],cn[1],cn[2],Y.length>3?Y[3]:1]},Kc=S.unpack,ud=Oc,Ph=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Kc(Y,"hcl").reverse();return ud.apply(void 0,me)},La=S.unpack,Df=S.type,Mf=ge,Rc=K,Ud=z,Pc=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Ea(Y,"rgb"),et=Dr(me[0],me[1],me[2]);return vs(et[0],et[1],et[2])};Rc.prototype.lch=function(){return Pc(this._rgb)},Rc.prototype.hcl=function(){return Pc(this._rgb).reverse()},Mf.lch=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Rc,[null].concat(Y,["lch"])))},Mf.hcl=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Rc,[null].concat(Y,["hcl"])))},Ud.format.lch=Oc,Ud.format.hcl=Ph,["lch","hcl"].forEach(function(Y){return Ud.autodetect.push({p:2,test:function(){for(var se=[],me=arguments.length;me--;)se[me]=arguments[me];if(se=La(se,Y),"array"===Df(se)&&3===se.length)return Y}})});var Ii={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},$t=z,Lh=S.type,vu=Ii,dd=To,Hu=Xi;K.prototype.name=function(){for(var Y=Hu(this._rgb,"rgb"),se=0,me=Object.keys(vu);se<me.length;se+=1){var je=me[se];if(vu[je]===Y)return je.toLowerCase()}return Y},$t.format.named=function(Y){if(Y=Y.toLowerCase(),vu[Y])return dd(vu[Y]);throw new Error("unknown color name: "+Y)},$t.autodetect.push({p:5,test:function(Y){for(var se=[],me=arguments.length-1;me-- >0;)se[me]=arguments[me+1];if(!se.length&&"string"===Lh(Y)&&vu[Y.toLowerCase()])return"named"}});var Fp=S.unpack,Zc=S.type,Ig=ge,Qc=K,jd=z,ta=S.type,Kl=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Fp(Y,"rgb");return(me[0]<<16)+(me[1]<<8)+me[2]};Qc.prototype.num=function(){return Kl(this._rgb)},Ig.num=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Qc,[null].concat(Y,["num"])))},jd.format.num=function(Y){if("number"==Zc(Y)&&Y>=0&&Y<=16777215)return[Y>>16,Y>>8&255,255&Y,1];throw new Error("unknown num color: "+Y)},jd.autodetect.push({p:5,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(1===Y.length&&"number"===ta(Y[0])&&Y[0]>=0&&Y[0]<=16777215)return"num"}});var Bh=ge,bu=K,$d=z,Cl=S.unpack,Lp=S.type,hd=Math.round;bu.prototype.rgb=function(Y){return void 0===Y&&(Y=!0),!1===Y?this._rgb.slice(0,3):this._rgb.slice(0,3).map(hd)},bu.prototype.rgba=function(Y){return void 0===Y&&(Y=!0),this._rgb.slice(0,4).map(function(se,me){return me<3?!1===Y?se:hd(se):se})},Bh.rgb=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(bu,[null].concat(Y,["rgb"])))},$d.format.rgb=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Cl(Y,"rgba");return void 0===me[3]&&(me[3]=1),me},$d.autodetect.push({p:3,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Cl(Y,"rgba"),"array"===Lp(Y)&&(3===Y.length||4===Y.length&&"number"==Lp(Y[3])&&Y[3]>=0&&Y[3]<=1))return"rgb"}});var Wd=Math.log,fd=function(Y){var me,je,Je,se=Y/100;return se<66?(me=255,je=se<6?0:-155.25485562709179-.44596950469579133*(je=se-2)+104.49216199393888*Wd(je),Je=se<20?0:.8274096064007395*(Je=se-10)-254.76935184120902+115.67994401066147*Wd(Je)):(me=351.97690566805693+.114206453784165*(me=se-55)-40.25366309332127*Wd(me),je=325.4494125711974+.07943456536662342*(je=se-50)-28.0852963507957*Wd(je),Je=255),[me,je,Je,1]},pd=fd,If=S.unpack,Nf=Math.round,wu=ge,Fc=K,Cu=z,Gd=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];for(var Nt,me=If(Y,"rgb"),je=me[0],Je=me[2],pt=1e3,et=4e4;et-pt>.4;){var cn=pd(Nt=.5*(et+pt));cn[2]/cn[0]>=Je/je?et=Nt:pt=Nt}return Nf(Nt)};Fc.prototype.temp=Fc.prototype.kelvin=Fc.prototype.temperature=function(){return Gd(this._rgb)},wu.temp=wu.kelvin=wu.temperature=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Fc,[null].concat(Y,["temp"])))},Cu.format.temp=Cu.format.kelvin=Cu.format.temperature=fd;var Of=S.unpack,Ql=Math.cbrt,uo=Math.pow,Rf=Math.sign,Ff=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Of(Y,"rgb"),Je=me[1],pt=me[2],et=[Yd(me[0]/255),Yd(Je/255),Yd(pt/255)],Mt=et[0],Nt=et[1],cn=et[2],zn=Ql(.4122214708*Mt+.5363325363*Nt+.0514459929*cn),Ai=Ql(.2119034982*Mt+.6806995451*Nt+.1073969566*cn),In=Ql(.0883024619*Mt+.2817188376*Nt+.6299787005*cn);return[.2104542553*zn+.793617785*Ai-.0040720468*In,1.9779984951*zn-2.428592205*Ai+.4505937099*In,.0259040371*zn+.7827717662*Ai-.808675766*In]};function Yd(Y){var se=Math.abs(Y);return se<.04045?Y/12.92:(Rf(Y)||1)*uo((se+.055)/1.055,2.4)}var Lc=S.unpack,Xd=Math.pow,Bp=Math.sign,$u=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=(Y=Lc(Y,"lab"))[0],je=Y[1],Je=Y[2],pt=Xd(me+.3963377774*je+.2158037573*Je,3),et=Xd(me-.1055613458*je-.0638541728*Je,3),Mt=Xd(me-.0894841775*je-1.291485548*Je,3);return[255*Vh(4.0767416621*pt-3.3077115913*et+.2309699292*Mt),255*Vh(-1.2684380046*pt+2.6097574011*et-.3413193965*Mt),255*Vh(-.0041960863*pt-.7034186147*et+1.707614701*Mt),Y.length>3?Y[3]:1]};function Vh(Y){var se=Math.abs(Y);return se>.0031308?(Bp(Y)||1)*(1.055*Xd(se,1/2.4)-.055):12.92*Y}var Vp=S.unpack,xl=S.type,Lf=ge,Uh=K,Bf=z,Up=Ff;Uh.prototype.oklab=function(){return Up(this._rgb)},Lf.oklab=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Uh,[null].concat(Y,["oklab"])))},Bf.format.oklab=$u,Bf.autodetect.push({p:3,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Vp(Y,"oklab"),"array"===xl(Y)&&3===Y.length)return"oklab"}});var Ng=S.unpack,Og=Ff,Vf=la,mc=S.unpack,bs=Oh,El=$u,Fs=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];Y=mc(Y,"lch");var pt=bs(Y[0],Y[1],Y[2]),cn=El(pt[0],pt[1],pt[2]);return[cn[0],cn[1],cn[2],Y.length>3?Y[3]:1]},Hp=S.unpack,vi=S.type,Yo=ge,Jr=K,Xo=z,ca=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];var me=Ng(Y,"rgb"),et=Og(me[0],me[1],me[2]);return Vf(et[0],et[1],et[2])};Jr.prototype.oklch=function(){return ca(this._rgb)},Yo.oklch=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];return new(Function.prototype.bind.apply(Jr,[null].concat(Y,["oklch"])))},Xo.format.oklch=Fs,Xo.autodetect.push({p:3,test:function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];if(Y=Hp(Y,"oklch"),"array"===vi(Y)&&3===Y.length)return"oklch"}});var Pl=K,Xa=S.type;Pl.prototype.alpha=function(Y,se){return void 0===se&&(se=!1),void 0!==Y&&"number"===Xa(Y)?se?(this._rgb[3]=Y,this):new Pl([this._rgb[0],this._rgb[1],this._rgb[2],Y],"rgb"):this._rgb[3]},K.prototype.clipped=function(){return this._rgb._clipped||!1};var Gi=K,Wu=Rl;Gi.prototype.darken=function(Y){void 0===Y&&(Y=1);var me=this.lab();return me[0]-=Wu.Kn*Y,new Gi(me,"lab").alpha(this.alpha(),!0)},Gi.prototype.brighten=function(Y){return void 0===Y&&(Y=1),this.darken(-Y)},Gi.prototype.darker=Gi.prototype.darken,Gi.prototype.brighter=Gi.prototype.brighten,K.prototype.get=function(Y){var se=Y.split("."),me=se[0],je=se[1],Je=this[me]();if(je){var pt=me.indexOf(je)-("ok"===me.substr(0,2)?2:0);if(pt>-1)return Je[pt];throw new Error("unknown channel "+je+" in mode "+me)}return Je};var Fl=K,xu=S.type,md=Math.pow;Fl.prototype.luminance=function(Y){if(void 0!==Y&&"number"===xu(Y)){if(0===Y)return new Fl([0,0,0,this._rgb[3]],"rgb");if(1===Y)return new Fl([255,255,255,this._rgb[3]],"rgb");var se=this.luminance(),je=20,Je=function(et,Mt){var Nt=et.interpolate(Mt,.5,"rgb"),cn=Nt.luminance();return Math.abs(Y-cn)<1e-7||!je--?Nt:cn>Y?Je(et,Nt):Je(Nt,Mt)},pt=(se>Y?Je(new Fl([0,0,0]),this):Je(this,new Fl([255,255,255]))).rgb();return new Fl(pt.concat([this._rgb[3]]))}return Gu.apply(void 0,this._rgb.slice(0,3))};var Gu=function(Y,se,me){return.2126*(Y=zh(Y))+.7152*(se=zh(se))+.0722*zh(me)},zh=function(Y){return(Y/=255)<=.03928?Y/12.92:md((Y+.055)/1.055,2.4)},ll={},$p=K,Hh=S.type,Kd=ll,Hf=function(Y,se,me){void 0===me&&(me=.5);for(var je=[],Je=arguments.length-3;Je-- >0;)je[Je]=arguments[Je+3];var pt=je[0]||"lrgb";if(!Kd[pt]&&!je.length&&(pt=Object.keys(Kd)[0]),!Kd[pt])throw new Error("interpolation mode "+pt+" is not defined");return"object"!==Hh(Y)&&(Y=new $p(Y)),"object"!==Hh(se)&&(se=new $p(se)),Kd[pt](Y,se,me).alpha(Y.alpha()+me*(se.alpha()-Y.alpha()))},Rg=Hf;K.prototype.mix=K.prototype.interpolate=function(Y,se){void 0===se&&(se=.5);for(var me=[],je=arguments.length-2;je-- >0;)me[je]=arguments[je+2];return Rg.apply(void 0,[this,Y,se].concat(me))};var jh=K;jh.prototype.premultiply=function(Y){void 0===Y&&(Y=!1);var se=this._rgb,me=se[3];return Y?(this._rgb=[se[0]*me,se[1]*me,se[2]*me,me],this):new jh([se[0]*me,se[1]*me,se[2]*me,me],"rgb")};var _d=K,Pg=Rl;_d.prototype.saturate=function(Y){void 0===Y&&(Y=1);var me=this.lch();return me[1]+=Pg.Kn*Y,me[1]<0&&(me[1]=0),new _d(me,"lch").alpha(this.alpha(),!0)},_d.prototype.desaturate=function(Y){return void 0===Y&&(Y=1),this.saturate(-Y)};var eu=K,Ll=S.type;eu.prototype.set=function(Y,se,me){void 0===me&&(me=!1);var je=Y.split("."),Je=je[0],pt=je[1],et=this[Je]();if(pt){var Mt=Je.indexOf(pt)-("ok"===Je.substr(0,2)?2:0);if(Mt>-1){if("string"==Ll(se))switch(se.charAt(0)){case"+":case"-":et[Mt]+=+se;break;case"*":et[Mt]*=+se.substr(1);break;case"/":et[Mt]/=+se.substr(1);break;default:et[Mt]=+se}else{if("number"!==Ll(se))throw new Error("unsupported value for Color.set");et[Mt]=se}var Nt=new eu(et,Je);return me?(this._rgb=Nt._rgb,this):Nt}throw new Error("unknown channel "+pt+" in mode "+Je)}return et};var Sl=K;ll.rgb=function(Y,se,me){var je=Y._rgb,Je=se._rgb;return new Sl(je[0]+me*(Je[0]-je[0]),je[1]+me*(Je[1]-je[1]),je[2]+me*(Je[2]-je[2]),"rgb")};var _c=K,Wp=Math.sqrt,Zd=Math.pow;ll.lrgb=function(Y,se,me){var je=Y._rgb,pt=je[1],et=je[2],Mt=se._rgb,Nt=Mt[0],cn=Mt[1],zn=Mt[2];return new _c(Wp(Zd(je[0],2)*(1-me)+Zd(Nt,2)*me),Wp(Zd(pt,2)*(1-me)+Zd(cn,2)*me),Wp(Zd(et,2)*(1-me)+Zd(zn,2)*me),"rgb")};var yd=K;ll.lab=function(Y,se,me){var je=Y.lab(),Je=se.lab();return new yd(je[0]+me*(Je[0]-je[0]),je[1]+me*(Je[1]-je[1]),je[2]+me*(Je[2]-je[2]),"lab")};var jf=K,Xu=function(Y,se,me,je){var Je,pt,et,Mt,Nt,cn,zn,Ai,In,Li,ji,rs,ls;return"hsl"===je?(et=Y.hsl(),Mt=se.hsl()):"hsv"===je?(et=Y.hsv(),Mt=se.hsv()):"hcg"===je?(et=Y.hcg(),Mt=se.hcg()):"hsi"===je?(et=Y.hsi(),Mt=se.hsi()):"lch"===je||"hcl"===je?(je="hcl",et=Y.hcl(),Mt=se.hcl()):"oklch"===je&&(et=Y.oklch().reverse(),Mt=se.oklch().reverse()),("h"===je.substr(0,1)||"oklch"===je)&&(Nt=(Je=et)[0],zn=Je[1],In=Je[2],cn=(pt=Mt)[0],Ai=pt[1],Li=pt[2]),isNaN(Nt)||isNaN(cn)?isNaN(Nt)?isNaN(cn)?rs=Number.NaN:(rs=cn,(1==In||0==In)&&"hsv"!=je&&(ji=Ai)):(rs=Nt,(1==Li||0==Li)&&"hsv"!=je&&(ji=zn)):rs=Nt+me*(cn>Nt&&cn-Nt>180?cn-(Nt+360):cn<Nt&&Nt-cn>180?cn+360-Nt:cn-Nt),void 0===ji&&(ji=zn+me*(Ai-zn)),ls=In+me*(Li-In),new jf("oklch"===je?[ls,ji,rs]:[rs,ji,ls],je)},Qd=Xu,yc=function(Y,se,me){return Qd(Y,se,me,"lch")};ll.lch=yc,ll.hcl=yc;var Jl=K;ll.num=function(Y,se,me){var je=Y.num(),Je=se.num();return new Jl(je+me*(Je-je),"num")};var Z=Xu;ll.hcg=function(Y,se,me){return Z(Y,se,me,"hcg")};var be=Xu;ll.hsi=function(Y,se,me){return be(Y,se,me,"hsi")};var Re=Xu;ll.hsl=function(Y,se,me){return Re(Y,se,me,"hsl")};var _t=Xu;ll.hsv=function(Y,se,me){return _t(Y,se,me,"hsv")};var en=K;ll.oklab=function(Y,se,me){var je=Y.oklab(),Je=se.oklab();return new en(je[0]+me*(Je[0]-je[0]),je[1]+me*(Je[1]-je[1]),je[2]+me*(Je[2]-je[2]),"oklab")};var ii=Xu;ll.oklch=function(Y,se,me){return ii(Y,se,me,"oklch")};var Or=K,Ds=S.clip_rgb,Eo=Math.pow,no=Math.sqrt,Xn=Math.PI,hr=Math.cos,ua=Math.sin,qa=Math.atan2,vc=function(Y,se){for(var me=Y.length,je=[0,0,0,0],Je=0;Je<Y.length;Je++){var et=se[Je]/me,Mt=Y[Je]._rgb;je[0]+=Eo(Mt[0],2)*et,je[1]+=Eo(Mt[1],2)*et,je[2]+=Eo(Mt[2],2)*et,je[3]+=Mt[3]*et}return je[0]=no(je[0]),je[1]=no(je[1]),je[2]=no(je[2]),je[3]>.9999999&&(je[3]=1),new Or(Ds(je))},Ka=ge,io=S.type,Za=Math.pow,Bl=function(Y){var se="rgb",me=Ka("#ccc"),je=0,Je=[0,1],pt=[],et=[0,0],Mt=!1,Nt=[],cn=!1,zn=0,Ai=1,In=!1,Li={},ji=!0,rs=1,ls=function(kn){if((kn=kn||["#fff","#000"])&&"string"===io(kn)&&Ka.brewer&&Ka.brewer[kn.toLowerCase()]&&(kn=Ka.brewer[kn.toLowerCase()]),"array"===io(kn)){1===kn.length&&(kn=[kn[0],kn[0]]),kn=kn.slice(0);for(var Er=0;Er<kn.length;Er++)kn[Er]=Ka(kn[Er]);pt.length=0;for(var us=0;us<kn.length;us++)pt.push(us/(kn.length-1))}return Da(),Nt=kn},Es=function(kn){return kn},na=function(kn){return kn},ha=function(kn,Er){var us,ds;if(null==Er&&(Er=!1),isNaN(kn)||null===kn)return me;ds=Er?kn:Mt&&Mt.length>2?function(kn){if(null!=Mt){for(var Er=Mt.length-1,us=0;us<Er&&kn>=Mt[us];)us++;return us-1}return 0}(kn)/(Mt.length-2):Ai!==zn?(kn-zn)/(Ai-zn):1,ds=na(ds),Er||(ds=Es(ds)),1!==rs&&(ds=Za(ds,rs)),ds=et[0]+ds*(1-et[0]-et[1]),ds=Math.min(1,Math.max(0,ds));var wo=Math.floor(1e4*ds);if(ji&&Li[wo])us=Li[wo];else{if("array"===io(Nt))for(var ss=0;ss<pt.length;ss++){var Rr=pt[ss];if(ds<=Rr){us=Nt[ss];break}if(ds>=Rr&&ss===pt.length-1){us=Nt[ss];break}if(ds>Rr&&ds<pt[ss+1]){us=Ka.interpolate(Nt[ss],Nt[ss+1],ds=(ds-Rr)/(pt[ss+1]-Rr),se);break}}else"function"===io(Nt)&&(us=Nt(ds));ji&&(Li[wo]=us)}return us},Da=function(){return Li={}};ls(Y);var ri=function(kn){var Er=Ka(ha(kn));return cn&&Er[cn]?Er[cn]():Er};return ri.classes=function(kn){if(null!=kn){if("array"===io(kn))Mt=kn,Je=[kn[0],kn[kn.length-1]];else{var Er=Ka.analyze(Je);Mt=0===kn?[Er.min,Er.max]:Ka.limits(Er,"e",kn)}return ri}return Mt},ri.domain=function(kn){if(!arguments.length)return Je;zn=kn[0],Ai=kn[kn.length-1],pt=[];var Er=Nt.length;if(kn.length===Er&&zn!==Ai)for(var us=0,ds=Array.from(kn);us<ds.length;us+=1)pt.push((ds[us]-zn)/(Ai-zn));else{for(var wo=0;wo<Er;wo++)pt.push(wo/(Er-1));if(kn.length>2){var ss=kn.map(function(Xr,qs){return qs/(kn.length-1)}),Rr=kn.map(function(Xr){return(Xr-zn)/(Ai-zn)});Rr.every(function(Xr,qs){return ss[qs]===Xr})||(na=function(Xr){if(Xr<=0||Xr>=1)return Xr;for(var qs=0;Xr>=Rr[qs+1];)qs++;return ss[qs]+(Xr-Rr[qs])/(Rr[qs+1]-Rr[qs])*(ss[qs+1]-ss[qs])})}}return Je=[zn,Ai],ri},ri.mode=function(kn){return arguments.length?(se=kn,Da(),ri):se},ri.range=function(kn,Er){return ls(kn),ri},ri.out=function(kn){return cn=kn,ri},ri.spread=function(kn){return arguments.length?(je=kn,ri):je},ri.correctLightness=function(kn){return null==kn&&(kn=!0),In=kn,Da(),Es=In?function(Er){for(var us=ha(0,!0).lab()[0],ds=ha(1,!0).lab()[0],Qa=us>ds,wo=ha(Er,!0).lab()[0],ss=us+(ds-us)*Er,Rr=wo-ss,Xr=0,qs=1,ho=20;Math.abs(Rr)>.01&&ho-- >0;)Qa&&(Rr*=-1),Rr<0?(Xr=Er,Er+=.5*(qs-Er)):(qs=Er,Er+=.5*(Xr-Er)),Rr=(wo=ha(Er,!0).lab()[0])-ss;return Er}:function(Er){return Er},ri},ri.padding=function(kn){return null!=kn?("number"===io(kn)&&(kn=[kn,kn]),et=kn,ri):et},ri.colors=function(kn,Er){arguments.length<2&&(Er="hex");var us=[];if(0===arguments.length)us=Nt.slice(0);else if(1===kn)us=[ri(.5)];else if(kn>1){var ds=Je[0],Qa=Je[1]-ds;us=function Lr(Y,se,me){for(var je=[],Je=Y<se,pt=me?Je?se+1:se-1:se,et=Y;Je?et<pt:et>pt;Je?et++:et--)je.push(et);return je}(0,kn,!1).map(function(qs){return ri(ds+qs/(kn-1)*Qa)})}else{Y=[];var wo=[];if(Mt&&Mt.length>2)for(var ss=1,Rr=Mt.length,Xr=1<=Rr;Xr?ss<Rr:ss>Rr;Xr?ss++:ss--)wo.push(.5*(Mt[ss-1]+Mt[ss]));else wo=Je;us=wo.map(function(qs){return ri(qs)})}return Ka[Er]&&(us=us.map(function(qs){return qs[Er]()})),us},ri.cache=function(kn){return null!=kn?(ji=kn,ri):ji},ri.gamma=function(kn){return null!=kn?(rs=kn,ri):rs},ri.nodata=function(kn){return null!=kn?(me=Ka(kn),ri):me},ri};var vd=K,Yp=Bl,Bc=ge,Sa=function(Y,se,me){if(!Sa[me])throw new Error("unknown blend mode "+me);return Sa[me](Y,se)},Ba=function(Y){return function(se,me){var je=Bc(me).rgb(),Je=Bc(se).rgb();return Bc.rgb(Y(je,Je))}},bc=function(Y){return function(se,me){var je=[];return je[0]=Y(se[0],me[0]),je[1]=Y(se[1],me[1]),je[2]=Y(se[2],me[2]),je}};Sa.normal=Ba(bc(function(Y){return Y})),Sa.multiply=Ba(bc(function(Y,se){return Y*se/255})),Sa.screen=Ba(bc(function(Y,se){return 255*(1-(1-Y/255)*(1-se/255))})),Sa.overlay=Ba(bc(function(Y,se){return se<128?2*Y*se/255:255*(1-2*(1-Y/255)*(1-se/255))})),Sa.darken=Ba(bc(function(Y,se){return Y>se?se:Y})),Sa.lighten=Ba(bc(function(Y,se){return Y>se?Y:se})),Sa.dodge=Ba(bc(function(Y,se){return 255===Y||(Y=se/255*255/(1-Y/255))>255?255:Y})),Sa.burn=Ba(bc(function(Y,se){return 255*(1-(1-se/255)/(Y/255))}));for(var qu=Sa,go=S.type,Ku=S.clip_rgb,Aa=S.TWOPI,zl=Math.pow,Wf=Math.sin,kl=Math.cos,eh=ge,ut=K,Lg=Math.floor,th=Math.random,nh=A,Xp=Math.log,Vg=Math.pow,G0=Math.floor,Ug=Math.abs,tu=function(Y,se){void 0===se&&(se=null);var me={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===nh(Y)&&(Y=Object.values(Y)),Y.forEach(function(je){se&&"object"===nh(je)&&(je=je[se]),null!=je&&!isNaN(je)&&(me.values.push(je),me.sum+=je,je<me.min&&(me.min=je),je>me.max&&(me.max=je),me.count+=1)}),me.domain=[me.min,me.max],me.limits=function(je,Je){return ih(me,je,Je)},me},ih=function(Y,se,me){void 0===se&&(se="equal"),void 0===me&&(me=7),"array"==nh(Y)&&(Y=tu(Y));var je=Y.min,Je=Y.max,pt=Y.values.sort(function(tc,oh){return tc-oh});if(1===me)return[je,Je];var et=[];if("c"===se.substr(0,1)&&(et.push(je),et.push(Je)),"e"===se.substr(0,1)){et.push(je);for(var Mt=1;Mt<me;Mt++)et.push(je+Mt/me*(Je-je));et.push(Je)}else if("l"===se.substr(0,1)){if(je<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Nt=Math.LOG10E*Xp(je),cn=Math.LOG10E*Xp(Je);et.push(je);for(var zn=1;zn<me;zn++)et.push(Vg(10,Nt+zn/me*(cn-Nt)));et.push(Je)}else if("q"===se.substr(0,1)){et.push(je);for(var Ai=1;Ai<me;Ai++){var In=(pt.length-1)*Ai/me,Li=G0(In);if(Li===In)et.push(pt[Li]);else{var ji=In-Li;et.push(pt[Li]*(1-ji)+pt[Li+1]*ji)}}et.push(Je)}else if("k"===se.substr(0,1)){var rs,ls=pt.length,cs=new Array(ls),Es=new Array(me),na=!0,ha=0,Da=null;(Da=[]).push(je);for(var ri=1;ri<me;ri++)Da.push(je+ri/me*(Je-je));for(Da.push(Je);na;){for(var kn=0;kn<me;kn++)Es[kn]=0;for(var Er=0;Er<ls;Er++)for(var us=pt[Er],ds=Number.MAX_VALUE,Qa=void 0,wo=0;wo<me;wo++){var ss=Ug(Da[wo]-us);ss<ds&&(ds=ss,Qa=wo),Es[Qa]++,cs[Er]=Qa}for(var Rr=new Array(me),Xr=0;Xr<me;Xr++)Rr[Xr]=null;for(var qs=0;qs<ls;qs++)null===Rr[rs=cs[qs]]?Rr[rs]=pt[qs]:Rr[rs]+=pt[qs];for(var ho=0;ho<me;ho++)Rr[ho]*=1/Es[ho];na=!1;for(var No=0;No<me;No++)if(Rr[No]!==Da[No]){na=!0;break}Da=Rr,++ha>200&&(na=!1)}for(var tn={},ar=0;ar<me;ar++)tn[ar]=[];for(var on=0;on<ls;on++)tn[rs=cs[on]].push(pt[on]);for(var rn=[],Ms=0;Ms<me;Ms++)rn.push(tn[Ms][0]),rn.push(tn[Ms][tn[Ms].length-1]);rn=rn.sort(function(tc,oh){return tc-oh}),et.push(rn[0]);for(var sh=1;sh<rn.length;sh+=2){var ec=rn[sh];!isNaN(ec)&&-1===et.indexOf(ec)&&et.push(ec)}}return et},iy={analyze:tu,limits:ih},Gf=K,zg=K,rh=Math.sqrt,ka=Math.pow,GC=Math.min,Yf=Math.max,m1=Math.atan2,Hg=Math.abs,Y0=Math.cos,X0=Math.sin,kb=Math.exp,jg=Math.PI,cl=K,q0=K,nu=ge,qp=Bl,K0={cool:function(){return qp([nu.hsl(180,1,.9),nu.hsl(250,.7,.4)])},hot:function(){return qp(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Xf={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Kp=0,Hl=Object.keys(Xf);Kp<Hl.length;Kp+=1){var Wg=Hl[Kp];Xf[Wg.toLowerCase()]=Xf[Wg]}var Gg=Xf,da=ge;return da.average=function(Y,se,me){void 0===se&&(se="lrgb"),void 0===me&&(me=null);var je=Y.length;me||(me=Array.from(new Array(je)).map(function(){return 1}));var Je=je/me.reduce(function(rs,ls){return rs+ls});if(me.forEach(function(rs,ls){me[ls]*=Je}),Y=Y.map(function(rs){return new Or(rs)}),"lrgb"===se)return vc(Y,me);for(var pt=Y.shift(),et=pt.get(se),Mt=[],Nt=0,cn=0,zn=0;zn<et.length;zn++)if(et[zn]=(et[zn]||0)*me[0],Mt.push(isNaN(et[zn])?0:me[0]),"h"===se.charAt(zn)&&!isNaN(et[zn])){var Ai=et[zn]/180*Xn;Nt+=hr(Ai)*me[0],cn+=ua(Ai)*me[0]}var In=pt.alpha()*me[0];Y.forEach(function(rs,ls){var cs=rs.get(se);In+=rs.alpha()*me[ls+1];for(var Es=0;Es<et.length;Es++)if(!isNaN(cs[Es]))if(Mt[Es]+=me[ls+1],"h"===se.charAt(Es)){var na=cs[Es]/180*Xn;Nt+=hr(na)*me[ls+1],cn+=ua(na)*me[ls+1]}else et[Es]+=cs[Es]*me[ls+1]});for(var Li=0;Li<et.length;Li++)if("h"===se.charAt(Li)){for(var ji=qa(cn/Mt[Li],Nt/Mt[Li])/Xn*180;ji<0;)ji+=360;for(;ji>=360;)ji-=360;et[Li]=ji}else et[Li]=et[Li]/Mt[Li];return In/=je,new Or(et,se).alpha(In>.99999?1:In,!0)},da.bezier=function(Y){var se=function(Y){var se,me,je,Je,pt,et,Mt;if(2===(Y=Y.map(function(In){return new vd(In)})).length)se=Y.map(function(In){return In.lab()}),pt=se[0],et=se[1],Je=function(In){var Li=[0,1,2].map(function(ji){return pt[ji]+In*(et[ji]-pt[ji])});return new vd(Li,"lab")};else if(3===Y.length)me=Y.map(function(In){return In.lab()}),pt=me[0],et=me[1],Mt=me[2],Je=function(In){var Li=[0,1,2].map(function(ji){return(1-In)*(1-In)*pt[ji]+2*(1-In)*In*et[ji]+In*In*Mt[ji]});return new vd(Li,"lab")};else if(4===Y.length){var Nt;je=Y.map(function(In){return In.lab()}),pt=je[0],et=je[1],Mt=je[2],Nt=je[3],Je=function(In){var Li=[0,1,2].map(function(ji){return(1-In)*(1-In)*(1-In)*pt[ji]+3*(1-In)*(1-In)*In*et[ji]+3*(1-In)*In*In*Mt[ji]+In*In*In*Nt[ji]});return new vd(Li,"lab")}}else{if(!(Y.length>=5))throw new RangeError("No point in running bezier with only one color.");var cn,zn,Ai;cn=Y.map(function(In){return In.lab()}),zn=function(Y){for(var se=[1,1],me=1;me<Y;me++){for(var je=[1],Je=1;Je<=se.length;Je++)je[Je]=(se[Je]||0)+se[Je-1];se=je}return se}(Ai=Y.length-1),Je=function(In){var Li=1-In,ji=[0,1,2].map(function(rs){return cn.reduce(function(ls,cs,Es){return ls+zn[Es]*Math.pow(Li,Ai-Es)*Math.pow(In,Es)*cs[rs]},0)});return new vd(ji,"lab")}}return Je}(Y);return se.scale=function(){return Yp(se)},se},da.blend=qu,da.cubehelix=function(Y,se,me,je,Je){void 0===Y&&(Y=300),void 0===se&&(se=-1.5),void 0===me&&(me=1),void 0===je&&(je=1),void 0===Je&&(Je=[0,1]);var et,pt=0;"array"===go(Je)?et=Je[1]-Je[0]:(et=0,Je=[Je,Je]);var Mt=function(Nt){var cn=Aa*((Y+120)/360+se*Nt),zn=zl(Je[0]+et*Nt,je),In=(0!==pt?me[0]+Nt*pt:me)*zn*(1-zn)/2,Li=kl(cn),ji=Wf(cn);return eh(Ku([255*(zn+In*(-.14861*Li+1.78277*ji)),255*(zn+In*(-.29227*Li-.90649*ji)),255*(zn+In*(1.97294*Li)),1]))};return Mt.start=function(Nt){return null==Nt?Y:(Y=Nt,Mt)},Mt.rotations=function(Nt){return null==Nt?se:(se=Nt,Mt)},Mt.gamma=function(Nt){return null==Nt?je:(je=Nt,Mt)},Mt.hue=function(Nt){return null==Nt?me:("array"===go(me=Nt)?0==(pt=me[1]-me[0])&&(me=me[1]):pt=0,Mt)},Mt.lightness=function(Nt){return null==Nt?Je:("array"===go(Nt)?(Je=Nt,et=Nt[1]-Nt[0]):(Je=[Nt,Nt],et=0),Mt)},Mt.scale=function(){return eh.scale(Mt)},Mt.hue(me),Mt},da.mix=da.interpolate=Hf,da.random=function(){for(var Y="#",se=0;se<6;se++)Y+="0123456789abcdef".charAt(Lg(16*th()));return new ut(Y,"hex")},da.scale=Bl,da.analyze=iy.analyze,da.contrast=function(Y,se){Y=new Gf(Y),se=new Gf(se);var me=Y.luminance(),je=se.luminance();return me>je?(me+.05)/(je+.05):(je+.05)/(me+.05)},da.deltaE=function(Y,se,me,je,Je){void 0===me&&(me=1),void 0===je&&(je=1),void 0===Je&&(Je=1);var pt=function(ec){return 360*ec/(2*jg)},et=function(ec){return 2*jg*ec/360};Y=new zg(Y),se=new zg(se);var Mt=Array.from(Y.lab()),Nt=Mt[0],cn=Mt[1],zn=Mt[2],Ai=Array.from(se.lab()),In=Ai[0],Li=Ai[1],ji=Ai[2],rs=(Nt+In)/2,Es=(rh(ka(cn,2)+ka(zn,2))+rh(ka(Li,2)+ka(ji,2)))/2,na=.5*(1-rh(ka(Es,7)/(ka(Es,7)+ka(25,7)))),ha=cn*(1+na),Da=Li*(1+na),ri=rh(ka(ha,2)+ka(zn,2)),kn=rh(ka(Da,2)+ka(ji,2)),Er=(ri+kn)/2,us=pt(m1(zn,ha)),ds=pt(m1(ji,Da)),Qa=us>=0?us:us+360,wo=ds>=0?ds:ds+360,ss=Hg(Qa-wo)>180?(Qa+wo+360)/2:(Qa+wo)/2,Rr=1-.17*Y0(et(ss-30))+.24*Y0(et(2*ss))+.32*Y0(et(3*ss+6))-.2*Y0(et(4*ss-63)),Xr=wo-Qa;Xr=Hg(Xr)<=180?Xr:wo<=Qa?Xr+360:Xr-360,Xr=2*rh(ri*kn)*X0(et(Xr)/2);var qs=In-Nt,ho=kn-ri,No=1+.015*ka(rs-50,2)/rh(20+ka(rs-50,2)),tn=1+.045*Er,ar=1+.015*Er*Rr,on=30*kb(-ka((ss-275)/25,2)),Ms=-2*rh(ka(Er,7)/(ka(Er,7)+ka(25,7)))*X0(2*et(on)),sh=rh(ka(qs/(me*No),2)+ka(ho/(je*tn),2)+ka(Xr/(Je*ar),2)+Ms*(ho/(je*tn))*(Xr/(Je*ar)));return Yf(0,GC(100,sh))},da.distance=function(Y,se,me){void 0===me&&(me="lab"),Y=new cl(Y),se=new cl(se);var je=Y.get(me),Je=se.get(me),pt=0;for(var et in je){var Mt=(je[et]||0)-(Je[et]||0);pt+=Mt*Mt}return Math.sqrt(pt)},da.limits=iy.limits,da.valid=function(){for(var Y=[],se=arguments.length;se--;)Y[se]=arguments[se];try{return new(Function.prototype.bind.apply(q0,[null].concat(Y))),!0}catch{return!1}},da.scales=K0,da.colors=Ii,da.brewer=Gg,da}()},1975:(It,ke,O)=>{"use strict";function R(u,m){let T;if(void 0===m)for(const N of u)null!=N&&(T<N||void 0===T&&N>=N)&&(T=N);else{let N=-1;for(let oe of u)null!=(oe=m(oe,++N,u))&&(T<oe||void 0===T&&oe>=oe)&&(T=oe)}return T}function U(u,m){let T;if(void 0===m)for(const N of u)null!=N&&(T>N||void 0===T&&N>=N)&&(T=N);else{let N=-1;for(let oe of u)null!=(oe=m(oe,++N,u))&&(T>oe||void 0===T&&oe>=oe)&&(T=oe)}return T}function q(u){return u}O.d(ke,{JLW:()=>rT,l78:()=>H,tlR:()=>Q,qrM:()=>Qh,Yu4:()=>Hc,IA3:()=>V1,Wi0:()=>mm,PGM:()=>_m,OEq:()=>og,y8u:()=>ym,olC:()=>vm,IrU:()=>i2,oDi:()=>aT,Q7f:()=>pa,cVp:()=>s2,lUB:()=>Zh,Lx9:()=>Ny,nVG:()=>U1,uxU:()=>a2,Xf2:()=>wm,GZz:()=>Fy,UPb:()=>By,dyv:()=>Ly,bEH:()=>ut,n8j:()=>L1,T9B:()=>R,jkA:()=>U,rLf:()=>n2,m4Y:()=>ds,UMr:()=>No,w7C:()=>Ey,Ltv:()=>I1,Ubm:()=>ic,JWy:()=>Yp,UAC:()=>Wh,DCK:()=>s0,Agd:()=>J0,wXd:()=>iu,Ui6:()=>Qf,Kgo:()=>Su});var te=1,re=2,A=3,F=4,ne=1e-6;function x(u){return"translate("+u+",0)"}function k(u){return"translate(0,"+u+")"}function I(u){return m=>+u(m)}function S(u,m){return m=Math.max(0,u.bandwidth()-2*m)/2,u.round()&&(m=Math.round(m)),T=>+u(T)+m}function z(){return!this.__axis}function ee(u,m){var T=[],N=null,oe=null,ue=6,he=6,ve=3,ze=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Be=u===te||u===F?-1:1,nt=u===F||u===re?"x":"y",qt=u===te||u===A?x:k;function Ot(sn){var Bi=N??(m.ticks?m.ticks.apply(m,T):m.domain()),pr=oe??(m.tickFormat?m.tickFormat.apply(m,T):q),Nn=Math.max(ue,0)+ve,un=m.range(),pi=+un[0]+ze,$n=+un[un.length-1]+ze,gi=(m.bandwidth?S:I)(m.copy(),ze),di=sn.selection?sn.selection():sn,Zn=di.selectAll(".domain").data([null]),Vr=di.selectAll(".tick").data(Bi,m).order(),os=Vr.exit(),mo=Vr.enter().append("g").attr("class","tick"),as=Vr.select("line"),Ni=Vr.select("text");Zn=Zn.merge(Zn.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Vr=Vr.merge(mo),as=as.merge(mo.append("line").attr("stroke","currentColor").attr(nt+"2",Be*ue)),Ni=Ni.merge(mo.append("text").attr("fill","currentColor").attr(nt,Be*Nn).attr("dy",u===te?"0em":u===A?"0.71em":"0.32em")),sn!==di&&(Zn=Zn.transition(sn),Vr=Vr.transition(sn),as=as.transition(sn),Ni=Ni.transition(sn),os=os.transition(sn).attr("opacity",ne).attr("transform",function(ws){return isFinite(ws=gi(ws))?qt(ws+ze):this.getAttribute("transform")}),mo.attr("opacity",ne).attr("transform",function(ws){var ci=this.parentNode.__axis;return qt((ci&&isFinite(ci=ci(ws))?ci:gi(ws))+ze)})),os.remove(),Zn.attr("d",u===F||u===re?he?"M"+Be*he+","+pi+"H"+ze+"V"+$n+"H"+Be*he:"M"+ze+","+pi+"V"+$n:he?"M"+pi+","+Be*he+"V"+ze+"H"+$n+"V"+Be*he:"M"+pi+","+ze+"H"+$n),Vr.attr("opacity",1).attr("transform",function(ws){return qt(gi(ws)+ze)}),as.attr(nt+"2",Be*ue),Ni.attr(nt,Be*Nn).text(pr),di.filter(z).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",u===re?"start":u===F?"end":"middle"),di.each(function(){this.__axis=gi})}return Ot.scale=function(sn){return arguments.length?(m=sn,Ot):m},Ot.ticks=function(){return T=Array.from(arguments),Ot},Ot.tickArguments=function(sn){return arguments.length?(T=null==sn?[]:Array.from(sn),Ot):T.slice()},Ot.tickValues=function(sn){return arguments.length?(N=null==sn?null:Array.from(sn),Ot):N&&N.slice()},Ot.tickFormat=function(sn){return arguments.length?(oe=sn,Ot):oe},Ot.tickSize=function(sn){return arguments.length?(ue=he=+sn,Ot):ue},Ot.tickSizeInner=function(sn){return arguments.length?(ue=+sn,Ot):ue},Ot.tickSizeOuter=function(sn){return arguments.length?(he=+sn,Ot):he},Ot.tickPadding=function(sn){return arguments.length?(ve=+sn,Ot):ve},Ot.offset=function(sn){return arguments.length?(ze=+sn,Ot):ze},Ot}function Q(u){return ee(te,u)}function H(u){return ee(A,u)}function K(){}function ie(u){return null==u?K:function(){return this.querySelector(u)}}function we(u){return null==u?[]:Array.isArray(u)?u:Array.from(u)}function fe(){return[]}function Te(u){return null==u?fe:function(){return this.querySelectorAll(u)}}function Le(u){return function(){return this.matches(u)}}function Fe(u){return function(m){return m.matches(u)}}var Xe=Array.prototype.find;function ft(){return this.firstElementChild}var Tt=Array.prototype.filter;function On(){return Array.from(this.children)}function Yi(u){return new Array(u.length)}function Wn(u,m){this.ownerDocument=u.ownerDocument,this.namespaceURI=u.namespaceURI,this._next=null,this._parent=u,this.__data__=m}function ki(u,m,T,N,oe,ue){for(var ve,he=0,ze=m.length,Be=ue.length;he<Be;++he)(ve=m[he])?(ve.__data__=ue[he],N[he]=ve):T[he]=new Wn(u,ue[he]);for(;he<ze;++he)(ve=m[he])&&(oe[he]=ve)}function Mi(u,m,T,N,oe,ue,he){var ve,ze,sn,Be=new Map,nt=m.length,qt=ue.length,Ot=new Array(nt);for(ve=0;ve<nt;++ve)(ze=m[ve])&&(Ot[ve]=sn=he.call(ze,ze.__data__,ve,m)+"",Be.has(sn)?oe[ve]=ze:Be.set(sn,ze));for(ve=0;ve<qt;++ve)sn=he.call(u,ue[ve],ve,ue)+"",(ze=Be.get(sn))?(N[ve]=ze,ze.__data__=ue[ve],Be.delete(sn)):T[ve]=new Wn(u,ue[ve]);for(ve=0;ve<nt;++ve)(ze=m[ve])&&Be.get(Ot[ve])===ze&&(oe[ve]=ze)}function or(u){return u.__data__}function Qs(u){return"object"==typeof u&&"length"in u?u:Array.from(u)}function Fn(u,m){return u<m?-1:u>m?1:u>=m?0:NaN}Wn.prototype={constructor:Wn,appendChild:function(u){return this._parent.insertBefore(u,this._next)},insertBefore:function(u,m){return this._parent.insertBefore(u,m)},querySelector:function(u){return this._parent.querySelector(u)},querySelectorAll:function(u){return this._parent.querySelectorAll(u)}};var Ln="http://www.w3.org/1999/xhtml";const zt={svg:"http://www.w3.org/2000/svg",xhtml:Ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nn(u){var m=u+="",T=m.indexOf(":");return T>=0&&"xmlns"!==(m=u.slice(0,T))&&(u=u.slice(T+1)),zt.hasOwnProperty(m)?{space:zt[m],local:u}:u}function mn(u){return function(){this.removeAttribute(u)}}function ti(u){return function(){this.removeAttributeNS(u.space,u.local)}}function ai(u,m){return function(){this.setAttribute(u,m)}}function ns(u,m){return function(){this.setAttributeNS(u.space,u.local,m)}}function oo(u,m){return function(){var T=m.apply(this,arguments);null==T?this.removeAttribute(u):this.setAttribute(u,T)}}function ao(u,m){return function(){var T=m.apply(this,arguments);null==T?this.removeAttributeNS(u.space,u.local):this.setAttributeNS(u.space,u.local,T)}}function Do(u){return u.ownerDocument&&u.ownerDocument.defaultView||u.document&&u||u.defaultView}function Rs(u){return function(){this.style.removeProperty(u)}}function Us(u,m,T){return function(){this.style.setProperty(u,m,T)}}function ea(u,m,T){return function(){var N=m.apply(this,arguments);null==N?this.style.removeProperty(u):this.style.setProperty(u,N,T)}}function Js(u,m){return u.style.getPropertyValue(m)||Do(u).getComputedStyle(u,null).getPropertyValue(m)}function $a(u){return function(){delete this[u]}}function Xl(u,m){return function(){this[u]=m}}function wa(u,m){return function(){var T=m.apply(this,arguments);null==T?delete this[u]:this[u]=T}}function Ca(u){return u.trim().split(/^|\s+/)}function Zr(u){return u.classList||new yl(u)}function yl(u){this._node=u,this._names=Ca(u.getAttribute("class")||"")}function sl(u,m){for(var T=Zr(u),N=-1,oe=m.length;++N<oe;)T.add(m[N])}function hc(u,m){for(var T=Zr(u),N=-1,oe=m.length;++N<oe;)T.remove(m[N])}function fc(u){return function(){sl(this,u)}}function Ir(u){return function(){hc(this,u)}}function hn(u,m){return function(){(m.apply(this,arguments)?sl:hc)(this,u)}}function dr(){this.textContent=""}function Ne(u){return function(){this.textContent=u}}function li(u){return function(){var m=u.apply(this,arguments);this.textContent=m??""}}function Xi(){this.innerHTML=""}function xr(u){return function(){this.innerHTML=u}}function oi(u){return function(){var m=u.apply(this,arguments);this.innerHTML=m??""}}function To(){this.nextSibling&&this.parentNode.appendChild(this)}function Nr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zi(u){return function(){var m=this.ownerDocument,T=this.namespaceURI;return T===Ln&&m.documentElement.namespaceURI===Ln?m.createElement(u):m.createElementNS(T,u)}}function eo(u){return function(){return this.ownerDocument.createElementNS(u.space,u.local)}}function Hr(u){var m=nn(u);return(m.local?eo:Zi)(m)}function Uo(){return null}function oa(){var u=this.parentNode;u&&u.removeChild(this)}function $o(){var u=this.cloneNode(!1),m=this.parentNode;return m?m.insertBefore(u,this.nextSibling):u}function Ga(){var u=this.cloneNode(!0),m=this.parentNode;return m?m.insertBefore(u,this.nextSibling):u}function gs(u){return function(){var m=this.__on;if(m){for(var ue,T=0,N=-1,oe=m.length;T<oe;++T)ue=m[T],u.type&&ue.type!==u.type||ue.name!==u.name?m[++N]=ue:this.removeEventListener(ue.type,ue.listener,ue.options);++N?m.length=N:delete this.__on}}}function ms(u,m,T){return function(){var oe,N=this.__on,ue=function Ol(u){return function(m){u.call(this,m,this.__data__)}}(m);if(N)for(var he=0,ve=N.length;he<ve;++he)if((oe=N[he]).type===u.type&&oe.name===u.name)return this.removeEventListener(oe.type,oe.listener,oe.options),this.addEventListener(oe.type,oe.listener=ue,oe.options=T),void(oe.value=m);this.addEventListener(u.type,ue,T),oe={type:u.type,name:u.name,value:m,listener:ue,options:T},N?N.push(oe):this.__on=[oe]}}function Kn(u,m,T){var N=Do(u),oe=N.CustomEvent;"function"==typeof oe?oe=new oe(m,T):(oe=N.document.createEvent("Event"),T?(oe.initEvent(m,T.bubbles,T.cancelable),oe.detail=T.detail):oe.initEvent(m,!1,!1)),u.dispatchEvent(oe)}function _s(u,m){return function(){return Kn(this,u,m)}}function cr(u,m){return function(){return Kn(this,u,m.apply(this,arguments))}}yl.prototype={add:function(u){this._names.indexOf(u)<0&&(this._names.push(u),this._node.setAttribute("class",this._names.join(" ")))},remove:function(u){var m=this._names.indexOf(u);m>=0&&(this._names.splice(m,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(u){return this._names.indexOf(u)>=0}};var co=[null];function ys(u,m){this._groups=u,this._parents=m}function aa(){return new ys([[document.documentElement]],co)}ys.prototype=aa.prototype={constructor:ys,select:function ge(u){"function"!=typeof u&&(u=ie(u));for(var m=this._groups,T=m.length,N=new Array(T),oe=0;oe<T;++oe)for(var ze,Be,ue=m[oe],he=ue.length,ve=N[oe]=new Array(he),nt=0;nt<he;++nt)(ze=ue[nt])&&(Be=u.call(ze,ze.__data__,nt,ue))&&("__data__"in ze&&(Be.__data__=ze.__data__),ve[nt]=Be);return new ys(N,this._parents)},selectAll:function Ze(u){u="function"==typeof u?function tt(u){return function(){return we(u.apply(this,arguments))}}(u):Te(u);for(var m=this._groups,T=m.length,N=[],oe=[],ue=0;ue<T;++ue)for(var ze,he=m[ue],ve=he.length,Be=0;Be<ve;++Be)(ze=he[Be])&&(N.push(u.call(ze,ze.__data__,Be,he)),oe.push(ze));return new ys(N,oe)},selectChild:function Zt(u){return this.select(null==u?ft:function mt(u){return function(){return Xe.call(this.children,u)}}("function"==typeof u?u:Fe(u)))},selectChildren:function Ti(u){return this.selectAll(null==u?On:function _i(u){return function(){return Tt.call(this.children,u)}}("function"==typeof u?u:Fe(u)))},filter:function Ri(u){"function"!=typeof u&&(u=Le(u));for(var m=this._groups,T=m.length,N=new Array(T),oe=0;oe<T;++oe)for(var ze,ue=m[oe],he=ue.length,ve=N[oe]=[],Be=0;Be<he;++Be)(ze=ue[Be])&&u.call(ze,ze.__data__,Be,ue)&&ve.push(ze);return new ys(N,this._parents)},data:function qi(u,m){if(!arguments.length)return Array.from(this,or);var T=m?Mi:ki,N=this._parents,oe=this._groups;"function"!=typeof u&&(u=function Pi(u){return function(){return u}}(u));for(var ue=oe.length,he=new Array(ue),ve=new Array(ue),ze=new Array(ue),Be=0;Be<ue;++Be){var nt=N[Be],qt=oe[Be],Ot=qt.length,sn=Qs(u.call(nt,nt&&nt.__data__,Be,N)),Bi=sn.length,pr=ve[Be]=new Array(Bi),Nn=he[Be]=new Array(Bi);T(nt,qt,pr,Nn,ze[Be]=new Array(Ot),sn,m);for(var gi,di,pi=0,$n=0;pi<Bi;++pi)if(gi=pr[pi]){for(pi>=$n&&($n=pi+1);!(di=Nn[$n])&&++$n<Bi;);gi._next=di||null}}return(he=new ys(he,N))._enter=ve,he._exit=ze,he},enter:function vr(){return new ys(this._enter||this._groups.map(Yi),this._parents)},exit:function ko(){return new ys(this._exit||this._groups.map(Yi),this._parents)},join:function ei(u,m,T){var N=this.enter(),oe=this,ue=this.exit();return"function"==typeof u?(N=u(N))&&(N=N.selection()):N=N.append(u+""),null!=m&&(oe=m(oe))&&(oe=oe.selection()),null==T?ue.remove():T(ue),N&&oe?N.merge(oe).order():oe},merge:function jt(u){for(var m=u.selection?u.selection():u,T=this._groups,N=m._groups,oe=T.length,he=Math.min(oe,N.length),ve=new Array(oe),ze=0;ze<he;++ze)for(var sn,Be=T[ze],nt=N[ze],qt=Be.length,Ot=ve[ze]=new Array(qt),Bi=0;Bi<qt;++Bi)(sn=Be[Bi]||nt[Bi])&&(Ot[Bi]=sn);for(;ze<oe;++ze)ve[ze]=T[ze];return new ys(ve,this._parents)},selection:function Me(){return this},order:function pn(){for(var u=this._groups,m=-1,T=u.length;++m<T;)for(var he,N=u[m],oe=N.length-1,ue=N[oe];--oe>=0;)(he=N[oe])&&(ue&&4^he.compareDocumentPosition(ue)&&ue.parentNode.insertBefore(he,ue),ue=he);return this},sort:function ln(u){function m(qt,Ot){return qt&&Ot?u(qt.__data__,Ot.__data__):!qt-!Ot}u||(u=Fn);for(var T=this._groups,N=T.length,oe=new Array(N),ue=0;ue<N;++ue){for(var Be,he=T[ue],ve=he.length,ze=oe[ue]=new Array(ve),nt=0;nt<ve;++nt)(Be=he[nt])&&(ze[nt]=Be);ze.sort(m)}return new ys(oe,this._parents).order()},call:function Ci(){var u=arguments[0];return arguments[0]=this,u.apply(null,arguments),this},nodes:function xi(){return Array.from(this)},node:function Gt(){for(var u=this._groups,m=0,T=u.length;m<T;++m)for(var N=u[m],oe=0,ue=N.length;oe<ue;++oe){var he=N[oe];if(he)return he}return null},size:function At(){let u=0;for(const m of this)++u;return u},empty:function Bt(){return!this.node()},each:function yn(u){for(var m=this._groups,T=0,N=m.length;T<N;++T)for(var ve,oe=m[T],ue=0,he=oe.length;ue<he;++ue)(ve=oe[ue])&&u.call(ve,ve.__data__,ue,oe);return this},attr:function Co(u,m){var T=nn(u);if(arguments.length<2){var N=this.node();return T.local?N.getAttributeNS(T.space,T.local):N.getAttribute(T)}return this.each((null==m?T.local?ti:mn:"function"==typeof m?T.local?ao:oo:T.local?ns:ai)(T,m))},style:function jo(u,m,T){return arguments.length>1?this.each((null==m?Rs:"function"==typeof m?ea:Us)(u,m,T??"")):Js(this.node(),u)},property:function dc(u,m){return arguments.length>1?this.each((null==m?$a:"function"==typeof m?wa:Xl)(u,m)):this.node()[u]},classed:function Gn(u,m){var T=Ca(u+"");if(arguments.length<2){for(var N=Zr(this.node()),oe=-1,ue=T.length;++oe<ue;)if(!N.contains(T[oe]))return!1;return!0}return this.each(("function"==typeof m?hn:m?fc:Ir)(T,m))},text:function Ki(u){return arguments.length?this.each(null==u?dr:("function"==typeof u?li:Ne)(u)):this.node().textContent},html:function Yt(u){return arguments.length?this.each(null==u?Xi:("function"==typeof u?oi:xr)(u)):this.node().innerHTML},raise:function lo(){return this.each(To)},lower:function Wa(){return this.each(Nr)},append:function xo(u){var m="function"==typeof u?u:Hr(u);return this.select(function(){return this.appendChild(m.apply(this,arguments))})},insert:function Fa(u,m){var T="function"==typeof u?u:Hr(u),N=null==m?Uo:"function"==typeof m?m:ie(m);return this.select(function(){return this.insertBefore(T.apply(this,arguments),N.apply(this,arguments)||null)})},remove:function Di(){return this.each(oa)},clone:function Yr(u){return this.select(u?Ga:$o)},datum:function Ta(u){return arguments.length?this.property("__data__",u):this.node().__data__},on:function ql(u,m,T){var oe,he,N=function Pr(u){return u.trim().split(/^|\s+/).map(function(m){var T="",N=m.indexOf(".");return N>=0&&(T=m.slice(N+1),m=m.slice(0,N)),{type:m,name:T}})}(u+""),ue=N.length;if(!(arguments.length<2)){for(ve=m?ms:gs,oe=0;oe<ue;++oe)this.each(ve(N[oe],m,T));return this}var ve=this.node().__on;if(ve)for(var nt,ze=0,Be=ve.length;ze<Be;++ze)for(oe=0,nt=ve[ze];oe<ue;++oe)if((he=N[oe]).type===nt.type&&he.name===nt.name)return nt.value},dispatch:function Ui(u,m){return this.each(("function"==typeof m?cr:_s)(u,m))},[Symbol.iterator]:function*xa(){for(var u=this._groups,m=0,T=u.length;m<T;++m)for(var he,N=u[m],oe=0,ue=N.length;oe<ue;++oe)(he=N[oe])&&(yield he)}};const Mo=aa;var wt={value:()=>{}};function Ge(){for(var N,u=0,m=arguments.length,T={};u<m;++u){if(!(N=arguments[u]+"")||N in T||/[\s.]/.test(N))throw new Error("illegal type: "+N);T[N]=[]}return new fn(T)}function fn(u){this._=u}function An(u,m){for(var oe,T=0,N=u.length;T<N;++T)if((oe=u[T]).name===m)return oe.value}function fi(u,m,T){for(var N=0,oe=u.length;N<oe;++N)if(u[N].name===m){u[N]=wt,u=u.slice(0,N).concat(u.slice(N+1));break}return null!=T&&u.push({name:m,value:T}),u}fn.prototype=Ge.prototype={constructor:fn,on:function(u,m){var oe,T=this._,N=function Lt(u,m){return u.trim().split(/^|\s+/).map(function(T){var N="",oe=T.indexOf(".");if(oe>=0&&(N=T.slice(oe+1),T=T.slice(0,oe)),T&&!m.hasOwnProperty(T))throw new Error("unknown type: "+T);return{type:T,name:N}})}(u+"",T),ue=-1,he=N.length;if(!(arguments.length<2)){if(null!=m&&"function"!=typeof m)throw new Error("invalid callback: "+m);for(;++ue<he;)if(oe=(u=N[ue]).type)T[oe]=fi(T[oe],u.name,m);else if(null==m)for(oe in T)T[oe]=fi(T[oe],u.name,null);return this}for(;++ue<he;)if((oe=(u=N[ue]).type)&&(oe=An(T[oe],u.name)))return oe},copy:function(){var u={},m=this._;for(var T in m)u[T]=m[T].slice();return new fn(u)},call:function(u,m){if((oe=arguments.length-2)>0)for(var oe,ue,T=new Array(oe),N=0;N<oe;++N)T[N]=arguments[N+2];if(!this._.hasOwnProperty(u))throw new Error("unknown type: "+u);for(N=0,oe=(ue=this._[u]).length;N<oe;++N)ue[N].value.apply(m,T)},apply:function(u,m,T){if(!this._.hasOwnProperty(u))throw new Error("unknown type: "+u);for(var N=this._[u],oe=0,ue=N.length;oe<ue;++oe)N[oe].value.apply(m,T)}};const $i=Ge;var Ic,Io,is=0,to=0,zi=0,Wo=1e3,vl=0,tr=0,Un=0,Rl="object"==typeof performance&&performance.now?performance:Date,Fr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(u){setTimeout(u,17)};function pc(){return tr||(Fr(Bd),tr=Rl.now()+Un)}function Bd(){tr=0}function Uu(){this._call=this._time=this._next=null}function bl(u,m,T){var N=new Uu;return N.restart(u,m,T),N}function gu(){tr=(vl=Rl.now())+Un,is=to=0;try{!function Nc(){pc(),++is;for(var m,u=Ic;u;)(m=tr-u._time)>=0&&u._call.call(void 0,m),u=u._next;--is}()}finally{is=0,function Yc(){for(var u,T,m=Ic,N=1/0;m;)m._call?(N>m._time&&(N=m._time),u=m,m=m._next):(T=m._next,m._next=null,m=u?u._next=T:Ic=T);Io=u,Xc(N)}(),tr=0}}function zu(){var u=Rl.now(),m=u-vl;m>Wo&&(Un-=m,vl=u)}function Xc(u){is||(to&&(to=clearTimeout(to)),u-tr>24?(u<1/0&&(to=setTimeout(gu,u-Rl.now()-Un)),zi&&(zi=clearInterval(zi))):(zi||(vl=Rl.now(),zi=setInterval(zu,Wo)),is=1,Fr(gu)))}function yi(u,m,T){var N=new Uu;return N.restart(oe=>{N.stop(),u(oe+m)},m=null==m?0:+m,T),N}Uu.prototype=bl.prototype={constructor:Uu,restart:function(u,m,T){if("function"!=typeof u)throw new TypeError("callback is not a function");T=(null==T?pc():+T)+(null==m?0:+m),!this._next&&Io!==this&&(Io?Io._next=this:Ic=this,Io=this),this._call=u,this._time=T,Xc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xc())}};var ol=$i("start","end","cancel","interrupt"),al=[],qc=0,Wi=3;function As(u,m,T,N,oe,ue){var he=u.__transition;if(he){if(T in he)return}else u.__transition={};!function _u(u,m,T){var oe,N=u.__transition;function he(Be){var nt,qt,Ot,sn;if(1!==T.state)return ze();for(nt in N)if((sn=N[nt]).name===T.name){if(sn.state===Wi)return yi(he);4===sn.state?(sn.state=6,sn.timer.stop(),sn.on.call("interrupt",u,u.__data__,sn.index,sn.group),delete N[nt]):+nt<m&&(sn.state=6,sn.timer.stop(),sn.on.call("cancel",u,u.__data__,sn.index,sn.group),delete N[nt])}if(yi(function(){T.state===Wi&&(T.state=4,T.timer.restart(ve,T.delay,T.time),ve(Be))}),T.state=2,T.on.call("start",u,u.__data__,T.index,T.group),2===T.state){for(T.state=Wi,oe=new Array(Ot=T.tween.length),nt=0,qt=-1;nt<Ot;++nt)(sn=T.tween[nt].value.call(u,u.__data__,T.index,T.group))&&(oe[++qt]=sn);oe.length=qt+1}}function ve(Be){for(var nt=Be<T.duration?T.ease.call(null,Be/T.duration):(T.timer.restart(ze),T.state=5,1),qt=-1,Ot=oe.length;++qt<Ot;)oe[qt].call(u,nt);5===T.state&&(T.on.call("end",u,u.__data__,T.index,T.group),ze())}function ze(){for(var Be in T.state=6,T.timer.stop(),delete N[m],N)return;delete u.__transition}N[m]=T,T.timer=bl(function ue(Be){T.state=1,T.timer.restart(he,T.delay,T.time),T.delay<=Be&&he(Be-T.delay)},0,T.time)}(u,T,{name:m,index:N,group:oe,on:ol,tween:al,time:ue.time,delay:ue.delay,duration:ue.duration,ease:ue.ease,timer:null,state:qc})}function Go(u,m){var T=Xs(u,m);if(T.state>qc)throw new Error("too late; already scheduled");return T}function Ys(u,m){var T=Xs(u,m);if(T.state>Wi)throw new Error("too late; already running");return T}function Xs(u,m){var T=u.__transition;if(!T||!(T=T[m]))throw new Error("transition not found");return T}function la(u,m){return u=+u,m=+m,function(T){return u*(1-T)+m*T}}var gc,Ea=180/Math.PI,Dr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vs(u,m,T,N,oe,ue){var he,ve,ze;return(he=Math.sqrt(u*u+m*m))&&(u/=he,m/=he),(ze=u*T+m*N)&&(T-=u*ze,N-=m*ze),(ve=Math.sqrt(T*T+N*N))&&(T/=ve,N/=ve,ze/=ve),u*N<m*T&&(u=-u,m=-m,ze=-ze,he=-he),{translateX:oe,translateY:ue,rotate:Math.atan2(m,u)*Ea,skewX:Math.atan(ze)*Ea,scaleX:he,scaleY:ve}}function Dg(u,m,T,N){function oe(Be){return Be.length?Be.pop()+" ":""}return function(Be,nt){var qt=[],Ot=[];return Be=u(Be),nt=u(nt),function ue(Be,nt,qt,Ot,sn,Bi){if(Be!==qt||nt!==Ot){var pr=sn.push("translate(",null,m,null,T);Bi.push({i:pr-4,x:la(Be,qt)},{i:pr-2,x:la(nt,Ot)})}else(qt||Ot)&&sn.push("translate("+qt+m+Ot+T)}(Be.translateX,Be.translateY,nt.translateX,nt.translateY,qt,Ot),function he(Be,nt,qt,Ot){Be!==nt?(Be-nt>180?nt+=360:nt-Be>180&&(Be+=360),Ot.push({i:qt.push(oe(qt)+"rotate(",null,N)-2,x:la(Be,nt)})):nt&&qt.push(oe(qt)+"rotate("+nt+N)}(Be.rotate,nt.rotate,qt,Ot),function ve(Be,nt,qt,Ot){Be!==nt?Ot.push({i:qt.push(oe(qt)+"skewX(",null,N)-2,x:la(Be,nt)}):nt&&qt.push(oe(qt)+"skewX("+nt+N)}(Be.skewX,nt.skewX,qt,Ot),function ze(Be,nt,qt,Ot,sn,Bi){if(Be!==qt||nt!==Ot){var pr=sn.push(oe(sn)+"scale(",null,",",null,")");Bi.push({i:pr-4,x:la(Be,qt)},{i:pr-2,x:la(nt,Ot)})}else(1!==qt||1!==Ot)&&sn.push(oe(sn)+"scale("+qt+","+Ot+")")}(Be.scaleX,Be.scaleY,nt.scaleX,nt.scaleY,qt,Ot),Be=nt=null,function(sn){for(var Nn,Bi=-1,pr=Ot.length;++Bi<pr;)qt[(Nn=Ot[Bi]).i]=Nn.x(sn);return qt.join("")}}}var Mg=Dg(function Sf(u){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(u+"");return m.isIdentity?Dr:vs(m.a,m.b,m.c,m.d,m.e,m.f)},"px, ","px)","deg)"),kf=Dg(function Af(u){return null!=u&&(gc||(gc=document.createElementNS("http://www.w3.org/2000/svg","g")),gc.setAttribute("transform",u),u=gc.transform.baseVal.consolidate())?vs((u=u.matrix).a,u.b,u.c,u.d,u.e,u.f):Dr},", ",")",")");function ks(u,m){var T,N;return function(){var oe=Ys(this,u),ue=oe.tween;if(ue!==T)for(var he=0,ve=(N=T=ue).length;he<ve;++he)if(N[he].name===m){(N=N.slice()).splice(he,1);break}oe.tween=N}}function Oh(u,m,T){var N,oe;if("function"!=typeof T)throw new Error;return function(){var ue=Ys(this,u),he=ue.tween;if(he!==N){oe=(N=he).slice();for(var ve={name:m,value:T},ze=0,Be=oe.length;ze<Be;++ze)if(oe[ze].name===m){oe[ze]=ve;break}ze===Be&&oe.push(ve)}ue.tween=oe}}function Ps(u,m,T){var N=u._id;return u.each(function(){var oe=Ys(this,N);(oe.value||(oe.value={}))[m]=T.apply(this,arguments)}),function(oe){return Xs(oe,N).value[m]}}function cd(u,m,T){u.prototype=m.prototype=T,T.constructor=u}function Rh(u,m){var T=Object.create(u.prototype);for(var N in m)T[N]=m[N];return T}function Oc(){}var ud=1/.7,yu="\\s*([+-]?\\d+)\\s*",Ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",La="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Df=/^#([0-9a-f]{3,8})$/,Mf=new RegExp(`^rgb\\(${yu},${yu},${yu}\\)$`),Rc=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),Ud=new RegExp(`^rgba\\(${yu},${yu},${yu},${Ph}\\)$`),Pc=new RegExp(`^rgba\\(${La},${La},${La},${Ph}\\)$`),Pp=new RegExp(`^hsl\\(${Ph},${La},${La}\\)$`),Ii=new RegExp(`^hsla\\(${Ph},${La},${La},${Ph}\\)$`),Fh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $t(){return this.rgb().formatHex()}function dd(){return this.rgb().formatRgb()}function Hu(u){var m,T;return u=(u+"").trim().toLowerCase(),(m=Df.exec(u))?(T=m[1].length,m=parseInt(m[1],16),6===T?Fp(m):3===T?new Ya(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===T?zd(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===T?zd(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=Mf.exec(u))?new Ya(m[1],m[2],m[3],1):(m=Rc.exec(u))?new Ya(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=Ud.exec(u))?zd(m[1],m[2],m[3],m[4]):(m=Pc.exec(u))?zd(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=Pp.exec(u))?Bh(m[1],m[2]/100,m[3]/100,1):(m=Ii.exec(u))?Bh(m[1],m[2]/100,m[3]/100,m[4]):Fh.hasOwnProperty(u)?Fp(Fh[u]):"transparent"===u?new Ya(NaN,NaN,NaN,0):null}function Fp(u){return new Ya(u>>16&255,u>>8&255,255&u,1)}function zd(u,m,T,N){return N<=0&&(u=m=T=NaN),new Ya(u,m,T,N)}function ju(u){return u instanceof Oc||(u=Hu(u)),u?new Ya((u=u.rgb()).r,u.g,u.b,u.opacity):new Ya}function Zc(u,m,T,N){return 1===arguments.length?ju(u):new Ya(u,m,T,N??1)}function Ya(u,m,T,N){this.r=+u,this.g=+m,this.b=+T,this.opacity=+N}function Hd(){return`#${Kl(this.r)}${Kl(this.g)}${Kl(this.b)}`}function Qc(){const u=jd(this.opacity);return`${1===u?"rgb(":"rgba("}${ta(this.r)}, ${ta(this.g)}, ${ta(this.b)}${1===u?")":`, ${u})`}`}function jd(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function ta(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function Kl(u){return((u=ta(u))<16?"0":"")+u.toString(16)}function Bh(u,m,T,N){return N<=0?u=m=T=NaN:T<=0||T>=1?u=m=NaN:m<=0&&(u=NaN),new Cl(u,m,T,N)}function bu(u){if(u instanceof Cl)return new Cl(u.h,u.s,u.l,u.opacity);if(u instanceof Oc||(u=Hu(u)),!u)return new Cl;if(u instanceof Cl)return u;var m=(u=u.rgb()).r/255,T=u.g/255,N=u.b/255,oe=Math.min(m,T,N),ue=Math.max(m,T,N),he=NaN,ve=ue-oe,ze=(ue+oe)/2;return ve?(he=m===ue?(T-N)/ve+6*(T<N):T===ue?(N-m)/ve+2:(m-T)/ve+4,ve/=ze<.5?ue+oe:2-ue-oe,he*=60):ve=ze>0&&ze<1?0:he,new Cl(he,ve,ze,u.opacity)}function Cl(u,m,T,N){this.h=+u,this.s=+m,this.l=+T,this.opacity=+N}function Lp(u){return(u=(u||0)%360)<0?u+360:u}function hd(u){return Math.max(0,Math.min(1,u||0))}function Wd(u,m,T){return 255*(u<60?m+(T-m)*u/60:u<180?T:u<240?m+(T-m)*(240-u)/60:m)}function Tl(u,m,T,N,oe){var ue=u*u,he=ue*u;return((1-3*u+3*ue-he)*m+(4-6*ue+3*he)*T+(1+3*u+3*ue-3*he)*N+he*oe)/6}cd(Oc,Hu,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHex8:function Lh(){return this.rgb().formatHex8()},formatHsl:function vu(){return bu(this).formatHsl()},formatRgb:dd,toString:dd}),cd(Ya,Zc,Rh(Oc,{brighter(u){return u=null==u?ud:Math.pow(ud,u),new Ya(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=null==u?.7:Math.pow(.7,u),new Ya(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new Ya(ta(this.r),ta(this.g),ta(this.b),jd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hd,formatHex:Hd,formatHex8:function Ig(){return`#${Kl(this.r)}${Kl(this.g)}${Kl(this.b)}${Kl(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Qc,toString:Qc})),cd(Cl,function $d(u,m,T,N){return 1===arguments.length?bu(u):new Cl(u,m,T,N??1)},Rh(Oc,{brighter(u){return u=null==u?ud:Math.pow(ud,u),new Cl(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=null==u?.7:Math.pow(.7,u),new Cl(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+360*(this.h<0),m=isNaN(u)||isNaN(this.s)?0:this.s,T=this.l,N=T+(T<.5?T:1-T)*m,oe=2*T-N;return new Ya(Wd(u>=240?u-240:u+120,oe,N),Wd(u,oe,N),Wd(u<120?u+240:u-120,oe,N),this.opacity)},clamp(){return new Cl(Lp(this.h),hd(this.s),hd(this.l),jd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=jd(this.opacity);return`${1===u?"hsl(":"hsla("}${Lp(this.h)}, ${100*hd(this.s)}%, ${100*hd(this.l)}%${1===u?")":`, ${u})`}`}}));const If=u=>()=>u;function Nf(u,m){return function(T){return u+T*m}}function Fc(u,m){var T=m-u;return T?Nf(u,T):If(isNaN(u)?m:u)}const Cu=function u(m){var T=function wu(u){return 1==(u=+u)?Fc:function(m,T){return T-m?function Zl(u,m,T){return u=Math.pow(u,T),m=Math.pow(m,T)-u,T=1/T,function(N){return Math.pow(u+N*m,T)}}(m,T,u):If(isNaN(m)?T:m)}}(m);function N(oe,ue){var he=T((oe=Zc(oe)).r,(ue=Zc(ue)).r),ve=T(oe.g,ue.g),ze=T(oe.b,ue.b),Be=Fc(oe.opacity,ue.opacity);return function(nt){return oe.r=he(nt),oe.g=ve(nt),oe.b=ze(nt),oe.opacity=Be(nt),oe+""}}return N.gamma=u,N}(1);function Gd(u){return function(m){var he,ve,T=m.length,N=new Array(T),oe=new Array(T),ue=new Array(T);for(he=0;he<T;++he)ve=Zc(m[he]),N[he]=ve.r||0,oe[he]=ve.g||0,ue[he]=ve.b||0;return N=u(N),oe=u(oe),ue=u(ue),ve.opacity=1,function(ze){return ve.r=N(ze),ve.g=oe(ze),ve.b=ue(ze),ve+""}}}Gd(function fd(u){var m=u.length-1;return function(T){var N=T<=0?T=0:T>=1?(T=1,m-1):Math.floor(T*m),oe=u[N],ue=u[N+1];return Tl((T-N/m)*m,N>0?u[N-1]:2*oe-ue,oe,ue,N<m-1?u[N+2]:2*ue-oe)}}),Gd(function pd(u){var m=u.length;return function(T){var N=Math.floor(((T%=1)<0?++T:T)*m);return Tl((T-N/m)*m,u[(N+m-1)%m],u[N%m],u[(N+1)%m],u[(N+2)%m])}});var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rf=new RegExp(uo.source,"g");function Yd(u,m){var N,oe,ue,T=uo.lastIndex=Rf.lastIndex=0,he=-1,ve=[],ze=[];for(u+="",m+="";(N=uo.exec(u))&&(oe=Rf.exec(m));)(ue=oe.index)>T&&(ue=m.slice(T,ue),ve[he]?ve[he]+=ue:ve[++he]=ue),(N=N[0])===(oe=oe[0])?ve[he]?ve[he]+=oe:ve[++he]=oe:(ve[++he]=null,ze.push({i:he,x:la(N,oe)})),T=Rf.lastIndex;return T<m.length&&(ue=m.slice(T),ve[he]?ve[he]+=ue:ve[++he]=ue),ve.length<2?ze[0]?function Ff(u){return function(m){return u(m)+""}}(ze[0].x):function Pf(u){return function(){return u}}(m):(m=ze.length,function(Be){for(var qt,nt=0;nt<m;++nt)ve[(qt=ze[nt]).i]=qt.x(Be);return ve.join("")})}function Lc(u,m){var T;return("number"==typeof m?la:m instanceof Hu?Cu:(T=Hu(m))?(m=T,Cu):Yd)(u,m)}function Xd(u){return function(){this.removeAttribute(u)}}function Bp(u){return function(){this.removeAttributeNS(u.space,u.local)}}function Tu(u,m,T){var N,ue,oe=T+"";return function(){var he=this.getAttribute(u);return he===oe?null:he===N?ue:ue=m(N=he,T)}}function $u(u,m,T){var N,ue,oe=T+"";return function(){var he=this.getAttributeNS(u.space,u.local);return he===oe?null:he===N?ue:ue=m(N=he,T)}}function Vh(u,m,T){var N,oe,ue;return function(){var he,ze,ve=T(this);return null==ve?void this.removeAttribute(u):(he=this.getAttribute(u))===(ze=ve+"")?null:he===N&&ze===oe?ue:(oe=ze,ue=m(N=he,ve))}}function Vp(u,m,T){var N,oe,ue;return function(){var he,ze,ve=T(this);return null==ve?void this.removeAttributeNS(u.space,u.local):(he=this.getAttributeNS(u.space,u.local))===(ze=ve+"")?null:he===N&&ze===oe?ue:(oe=ze,ue=m(N=he,ve))}}function Bf(u,m){var T,N;function oe(){var ue=m.apply(this,arguments);return ue!==N&&(T=(N=ue)&&function Uh(u,m){return function(T){this.setAttributeNS(u.space,u.local,m.call(this,T))}}(u,ue)),T}return oe._value=m,oe}function Up(u,m){var T,N;function oe(){var ue=m.apply(this,arguments);return ue!==N&&(T=(N=ue)&&function Lf(u,m){return function(T){this.setAttribute(u,m.call(this,T))}}(u,ue)),T}return oe._value=m,oe}function Og(u,m){return function(){Go(this,u).delay=+m.apply(this,arguments)}}function Vf(u,m){return m=+m,function(){Go(this,u).delay=m}}function zp(u,m){return function(){Ys(this,u).duration=+m.apply(this,arguments)}}function mc(u,m){return m=+m,function(){Ys(this,u).duration=m}}var Wu=Mo.prototype.constructor;function xu(u){return function(){this.style.removeProperty(u)}}var eu=0;function Ll(u,m,T,N){this._groups=u,this._parents=m,this._name=T,this._id=N}function Yu(){return++eu}var _c=Mo.prototype;Ll.prototype=function Sl(u){return Mo().transition(u)}.prototype={constructor:Ll,select:function zf(u){var m=this._name,T=this._id;"function"!=typeof u&&(u=ie(u));for(var N=this._groups,oe=N.length,ue=new Array(oe),he=0;he<oe;++he)for(var nt,qt,ve=N[he],ze=ve.length,Be=ue[he]=new Array(ze),Ot=0;Ot<ze;++Ot)(nt=ve[Ot])&&(qt=u.call(nt,nt.__data__,Ot,ve))&&("__data__"in nt&&(qt.__data__=nt.__data__),Be[Ot]=qt,As(Be[Ot],m,T,Ot,Be,Xs(nt,T)));return new Ll(ue,this._parents,m,T)},selectAll:function Gi(u){var m=this._name,T=this._id;"function"!=typeof u&&(u=Te(u));for(var N=this._groups,oe=N.length,ue=[],he=[],ve=0;ve<oe;++ve)for(var nt,ze=N[ve],Be=ze.length,qt=0;qt<Be;++qt)if(nt=ze[qt]){for(var sn,Ot=u.call(nt,nt.__data__,qt,ze),Bi=Xs(nt,T),pr=0,Nn=Ot.length;pr<Nn;++pr)(sn=Ot[pr])&&As(sn,m,T,pr,Ot,Bi);ue.push(Ot),he.push(nt)}return new Ll(ue,he,m,T)},selectChild:_c.selectChild,selectChildren:_c.selectChildren,filter:function vi(u){"function"!=typeof u&&(u=Le(u));for(var m=this._groups,T=m.length,N=new Array(T),oe=0;oe<T;++oe)for(var ze,ue=m[oe],he=ue.length,ve=N[oe]=[],Be=0;Be<he;++Be)(ze=ue[Be])&&u.call(ze,ze.__data__,Be,ue)&&ve.push(ze);return new Ll(N,this._parents,this._name,this._id)},merge:function Yo(u){if(u._id!==this._id)throw new Error;for(var m=this._groups,T=u._groups,N=m.length,ue=Math.min(N,T.length),he=new Array(N),ve=0;ve<ue;++ve)for(var Ot,ze=m[ve],Be=T[ve],nt=ze.length,qt=he[ve]=new Array(nt),sn=0;sn<nt;++sn)(Ot=ze[sn]||Be[sn])&&(qt[sn]=Ot);for(;ve<N;++ve)he[ve]=m[ve];return new Ll(he,this._parents,this._name,this._id)},selection:function jp(){return new Wu(this._groups,this._parents)},transition:function _d(){for(var u=this._name,m=this._id,T=Yu(),N=this._groups,oe=N.length,ue=0;ue<oe;++ue)for(var ze,he=N[ue],ve=he.length,Be=0;Be<ve;++Be)if(ze=he[Be]){var nt=Xs(ze,m);As(ze,u,T,Be,he,{time:nt.time+nt.delay+nt.duration,delay:0,duration:nt.duration,ease:nt.ease})}return new Ll(N,this._parents,u,T)},call:_c.call,nodes:_c.nodes,node:_c.node,size:_c.size,empty:_c.empty,each:_c.each,on:function ca(u,m){var T=this._id;return arguments.length<2?Xs(this.node(),T).on.on(u):this.each(function Xo(u,m,T){var N,oe,ue=function Jr(u){return(u+"").trim().split(/^|\s+/).every(function(m){var T=m.indexOf(".");return T>=0&&(m=m.slice(0,T)),!m||"start"===m})}(m)?Go:Ys;return function(){var he=ue(this,u),ve=he.on;ve!==N&&(oe=(N=ve).copy()).on(m,T),he.on=oe}}(T,u,m))},attr:function xl(u,m){var T=nn(u),N="transform"===T?kf:Lc;return this.attrTween(u,"function"==typeof m?(T.local?Vp:Vh)(T,N,Ps(this,"attr."+u,m)):null==m?(T.local?Bp:Xd)(T):(T.local?$u:Tu)(T,N,m))},attrTween:function Ng(u,m){var T="attr."+u;if(arguments.length<2)return(T=this.tween(T))&&T._value;if(null==m)return this.tween(T,null);if("function"!=typeof m)throw new Error;var N=nn(u);return this.tween(T,(N.local?Bf:Up)(N,m))},style:function Gu(u,m,T){var N="transform"==(u+="")?Mg:Lc;return null==m?this.styleTween(u,function Fl(u,m){var T,N,oe;return function(){var ue=Js(this,u),he=(this.style.removeProperty(u),Js(this,u));return ue===he?null:ue===T&&he===N?oe:oe=m(T=ue,N=he)}}(u,N)).on("end.style."+u,xu(u)):"function"==typeof m?this.styleTween(u,function qd(u,m,T){var N,oe,ue;return function(){var he=Js(this,u),ve=T(this),ze=ve+"";return null==ve&&(this.style.removeProperty(u),ze=ve=Js(this,u)),he===ze?null:he===N&&ze===oe?ue:(oe=ze,ue=m(N=he,ve))}}(u,N,Ps(this,"style."+u,m))).each(function qo(u,m){var T,N,oe,ve,ue="style."+m,he="end."+ue;return function(){var ze=Ys(this,u),Be=ze.on,nt=null==ze.value[ue]?ve||(ve=xu(m)):void 0;(Be!==T||oe!==nt)&&(N=(T=Be).copy()).on(he,oe=nt),ze.on=N}}(this._id,u)):this.styleTween(u,function md(u,m,T){var N,ue,oe=T+"";return function(){var he=Js(this,u);return he===oe?null:he===N?ue:ue=m(N=he,T)}}(u,N,m),T).on("end.style."+u,null)},styleTween:function $p(u,m,T){var N="style."+(u+="");if(arguments.length<2)return(N=this.tween(N))&&N._value;if(null==m)return this.tween(N,null);if("function"!=typeof m)throw new Error;return this.tween(N,function ll(u,m,T){var N,oe;function ue(){var he=m.apply(this,arguments);return he!==oe&&(N=(oe=he)&&function zh(u,m,T){return function(N){this.style.setProperty(u,m.call(this,N),T)}}(u,he,T)),N}return ue._value=m,ue}(u,m,T??""))},text:function Hf(u){return this.tween("text","function"==typeof u?function Kd(u){return function(){var m=u(this);this.textContent=m??""}}(Ps(this,"text",u)):function Hh(u){return function(){this.textContent=u}}(null==u?"":u+""))},textTween:function jh(u){var m="text";if(arguments.length<1)return(m=this.tween(m))&&m._value;if(null==u)return this.tween(m,null);if("function"!=typeof u)throw new Error;return this.tween(m,function Rg(u){var m,T;function N(){var oe=u.apply(this,arguments);return oe!==T&&(m=(T=oe)&&function Jc(u){return function(m){this.textContent=u.call(this,m)}}(oe)),m}return N._value=u,N}(u))},remove:function Xa(){return this.on("end.remove",function Pl(u){return function(){var m=this.parentNode;for(var T in this.__transition)if(+T!==u)return;m&&m.removeChild(this)}}(this._id))},tween:function Rp(u,m){var T=this._id;if(u+="",arguments.length<2){for(var he,N=Xs(this.node(),T).tween,oe=0,ue=N.length;oe<ue;++oe)if((he=N[oe]).name===u)return he.value;return null}return this.each((null==m?ks:Oh)(T,u,m))},delay:function Uf(u){var m=this._id;return arguments.length?this.each(("function"==typeof u?Og:Vf)(m,u)):Xs(this.node(),m).delay},duration:function bs(u){var m=this._id;return arguments.length?this.each(("function"==typeof u?zp:mc)(m,u)):Xs(this.node(),m).duration},ease:function gd(u){var m=this._id;return arguments.length?this.each(function El(u,m){if("function"!=typeof m)throw new Error;return function(){Ys(this,u).ease=m}}(m,u)):Xs(this.node(),m).ease},easeVarying:function Hp(u){if("function"!=typeof u)throw new Error;return this.each(function Fs(u,m){return function(){var T=m.apply(this,arguments);if("function"!=typeof T)throw new Error;Ys(this,u).ease=T}}(this._id,u))},end:function Pg(){var u,m,T=this,N=T._id,oe=T.size();return new Promise(function(ue,he){var ve={value:he},ze={value:function(){0==--oe&&ue()}};T.each(function(){var Be=Ys(this,N),nt=Be.on;nt!==u&&((m=(u=nt).copy())._.cancel.push(ve),m._.interrupt.push(ve),m._.end.push(ze)),Be.on=m}),0===oe&&ue()})},[Symbol.iterator]:_c[Symbol.iterator]};var yd={time:null,delay:0,duration:250,ease:function Gp(u){return((u*=2)<=1?u*u*u:(u-=2)*u*u+2)/2}};function Fg(u,m){for(var T;!(T=u.__transition)||!(T=T[m]);)if(!(u=u.parentNode))throw new Error(`transition ${m} not found`);return T}Mo.prototype.interrupt=function wl(u){return this.each(function(){!function zo(u,m){var N,oe,he,T=u.__transition,ue=!0;if(T){for(he in m=null==m?null:m+"",T)(N=T[he]).name===m?(oe=N.state>2&&N.state<5,N.state=6,N.timer.stop(),N.on.call(oe?"interrupt":"cancel",u,u.__data__,N.index,N.group),delete T[he]):ue=!1;ue&&delete u.__transition}}(this,u)})},Mo.prototype.transition=function jf(u){var m,T;u instanceof Ll?(m=u._id,u=u._name):(m=Yu(),(T=yd).time=pc(),u=null==u?null:u+"");for(var N=this._groups,oe=N.length,ue=0;ue<oe;++ue)for(var ze,he=N[ue],ve=he.length,Be=0;Be<ve;++Be)(ze=he[Be])&&As(ze,u,m,Be,he,T||Fg(ze,m));return new Ll(N,this._parents,u,m)};Math;function Or(u){return{type:u}}function io(u){if(!u.ok)throw new Error(u.status+" "+u.statusText);return u.text()}function Bl(u){return(m,T)=>function Za(u,m){return fetch(u,m).then(io)}(m,T).then(N=>(new DOMParser).parseFromString(N,u))}["w","e"].map(Or),["n","s"].map(Or),["n","w","e","s","nw","ne","sw","se"].map(Or),Bl("application/xml"),Bl("text/html");var Yp=Bl("image/svg+xml");const Vl=Math.PI/180,Po=180/Math.PI,Bc=.96422,Sa=1,Ba=.82521,bc=4/29,Ul=6/29,$f=3*Ul*Ul,Jd=Ul*Ul*Ul;function Mr(u){if(u instanceof Fo)return new Fo(u.l,u.a,u.b,u.opacity);if(u instanceof kl)return eh(u);u instanceof Ya||(u=ju(u));var ue,he,m=Ku(u.r),T=Ku(u.g),N=Ku(u.b),oe=Va((.2225045*m+.7168786*T+.0606169*N)/Sa);return m===T&&T===N?ue=he=oe:(ue=Va((.4360747*m+.3850649*T+.1430804*N)/Bc),he=Va((.0139322*m+.0971045*T+.7141733*N)/Ba)),new Fo(116*oe-16,500*(ue-oe),200*(oe-he),u.opacity)}function Fo(u,m,T,N){this.l=+u,this.a=+m,this.b=+T,this.opacity=+N}function Va(u){return u>Jd?Math.pow(u,1/3):u/$f+bc}function qu(u){return u>Ul?u*u*u:$f*(u-bc)}function go(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Ku(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Wf(u,m,T,N){return 1===arguments.length?function Aa(u){if(u instanceof kl)return new kl(u.h,u.c,u.l,u.opacity);if(u instanceof Fo||(u=Mr(u)),0===u.a&&0===u.b)return new kl(NaN,0<u.l&&u.l<100?0:NaN,u.l,u.opacity);var m=Math.atan2(u.b,u.a)*Po;return new kl(m<0?m+360:m,Math.sqrt(u.a*u.a+u.b*u.b),u.l,u.opacity)}(u):new kl(u,m,T,N??1)}function kl(u,m,T,N){this.h=+u,this.c=+m,this.l=+T,this.opacity=+N}function eh(u){if(isNaN(u.h))return new Fo(u.l,0,0,u.opacity);var m=u.h*Vl;return new Fo(u.l,Math.cos(m)*u.c,Math.sin(m)*u.c,u.opacity)}function wc(u){return function(m,T){var N=u((m=Wf(m)).h,(T=Wf(T)).h),oe=Fc(m.c,T.c),ue=Fc(m.l,T.l),he=Fc(m.opacity,T.opacity);return function(ve){return m.h=N(ve),m.c=oe(ve),m.l=ue(ve),m.opacity=he(ve),m+""}}}cd(Fo,function wd(u,m,T,N){return 1===arguments.length?Mr(u):new Fo(u,m,T,N??1)},Rh(Oc,{brighter(u){return new Fo(this.l+18*(u??1),this.a,this.b,this.opacity)},darker(u){return new Fo(this.l-18*(u??1),this.a,this.b,this.opacity)},rgb(){var u=(this.l+16)/116,m=isNaN(this.a)?u:u+this.a/500,T=isNaN(this.b)?u:u-this.b/200;return new Ya(go(3.1338561*(m=Bc*qu(m))-1.6168667*(u=Sa*qu(u))-.4906146*(T=Ba*qu(T))),go(-.9787684*m+1.9161415*u+.033454*T),go(.0719453*m-.2289914*u+1.4052427*T),this.opacity)}})),cd(kl,Wf,Rh(Oc,{brighter(u){return new kl(this.h,this.c,this.l+18*(u??1),this.opacity)},darker(u){return new kl(this.h,this.c,this.l-18*(u??1),this.opacity)},rgb(){return eh(this).rgb()}}));const ut=wc(function zs(u,m){var T=m-u;return T?Nf(u,T>180||T<-180?T-360*Math.round(T/360):T):If(isNaN(u)?m:u)});wc(Fc);const Lg=Math.sqrt(50),th=Math.sqrt(10),Bg=Math.sqrt(2);function nh(u,m,T){const N=(m-u)/Math.max(0,T),oe=Math.floor(Math.log10(N)),ue=N/Math.pow(10,oe),he=ue>=Lg?10:ue>=th?5:ue>=Bg?2:1;let ve,ze,Be;return oe<0?(Be=Math.pow(10,-oe)/he,ve=Math.round(u*Be),ze=Math.round(m*Be),ve/Be<u&&++ve,ze/Be>m&&--ze,Be=-Be):(Be=Math.pow(10,oe)*he,ve=Math.round(u/Be),ze=Math.round(m/Be),ve*Be<u&&++ve,ze*Be>m&&--ze),ze<ve&&.5<=T&&T<2?nh(u,m,2*T):[ve,ze,Be]}function Vg(u,m,T){return nh(u=+u,m=+m,T=+T)[2]}function G0(u,m,T){T=+T;const N=(m=+m)<(u=+u),oe=N?Vg(m,u,T):Vg(u,m,T);return(N?-1:1)*(oe<0?1/-oe:oe)}function Ug(u,m){return null==u||null==m?NaN:u<m?-1:u>m?1:u>=m?0:NaN}function tu(u,m){return null==u||null==m?NaN:m<u?-1:m>u?1:m>=u?0:NaN}function ih(u){let m,T,N;function oe(ve,ze,Be=0,nt=ve.length){if(Be<nt){if(0!==m(ze,ze))return nt;do{const qt=Be+nt>>>1;T(ve[qt],ze)<0?Be=qt+1:nt=qt}while(Be<nt)}return Be}return 2!==u.length?(m=Ug,T=(ve,ze)=>Ug(u(ve),ze),N=(ve,ze)=>u(ve)-ze):(m=u===Ug||u===tu?u:iy,T=u,N=u),{left:oe,center:function he(ve,ze,Be=0,nt=ve.length){const qt=oe(ve,ze,Be,nt-1);return qt>Be&&N(ve[qt-1],ze)>-N(ve[qt],ze)?qt-1:qt},right:function ue(ve,ze,Be=0,nt=ve.length){if(Be<nt){if(0!==m(ze,ze))return nt;do{const qt=Be+nt>>>1;T(ve[qt],ze)<=0?Be=qt+1:nt=qt}while(Be<nt)}return Be}}}function iy(){return 0}const rh=ih(Ug).right,Yf=(ih(function Gf(u){return null===u?NaN:+u}),rh);function Hg(u,m){var he,T=m?m.length:0,N=u?Math.min(T,u.length):0,oe=new Array(N),ue=new Array(T);for(he=0;he<N;++he)oe[he]=$g(u[he],m[he]);for(;he<T;++he)ue[he]=m[he];return function(ve){for(he=0;he<N;++he)ue[he]=oe[he](ve);return ue}}function Y0(u,m){var T=new Date;return u=+u,m=+m,function(N){return T.setTime(u*(1-N)+m*N),T}}function X0(u,m){var oe,T={},N={};for(oe in(null===u||"object"!=typeof u)&&(u={}),(null===m||"object"!=typeof m)&&(m={}),m)oe in u?T[oe]=$g(u[oe],m[oe]):N[oe]=m[oe];return function(ue){for(oe in T)N[oe]=T[oe](ue);return N}}function kb(u,m){m||(m=[]);var oe,T=u?Math.min(m.length,u.length):0,N=m.slice();return function(ue){for(oe=0;oe<T;++oe)N[oe]=u[oe]*(1-ue)+m[oe]*ue;return N}}function $g(u,m){var N,T=typeof m;return null==m||"boolean"===T?If(m):("number"===T?la:"string"===T?(N=Hu(m))?(m=N,Cu):Yd:m instanceof Hu?Cu:m instanceof Date?Y0:function jg(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}(m)?kb:Array.isArray(m)?Hg:"function"!=typeof m.valueOf&&"function"!=typeof m.toString||isNaN(m)?X0:la)(u,m)}function cl(u,m){return u=+u,m=+m,function(T){return Math.round(u*(1-T)+m*T)}}function q0(u){return+u}var y1=[0,1];function nu(u){return u}function qp(u,m){return(m-=u=+u)?function(T){return(T-u)/m}:function _1(u){return function(){return u}}(isNaN(m)?NaN:.5)}function Xf(u,m,T){var N=u[0],oe=u[1],ue=m[0],he=m[1];return oe<N?(N=qp(oe,N),ue=T(he,ue)):(N=qp(N,oe),ue=T(ue,he)),function(ve){return ue(N(ve))}}function Kp(u,m,T){var N=Math.min(u.length,m.length)-1,oe=new Array(N),ue=new Array(N),he=-1;for(u[N]<u[0]&&(u=u.slice().reverse(),m=m.slice().reverse());++he<N;)oe[he]=qp(u[he],u[he+1]),ue[he]=T(m[he],m[he+1]);return function(ve){var ze=Yf(u,ve,1,N)-1;return ue[ze](oe[ze](ve))}}function Hl(u,m){return m.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Gg(){return function Wg(){var N,oe,ue,ve,ze,Be,u=y1,m=y1,T=$g,he=nu;function nt(){var Ot=Math.min(u.length,m.length);return he!==nu&&(he=function K0(u,m){var T;return u>m&&(T=u,u=m,m=T),function(N){return Math.max(u,Math.min(m,N))}}(u[0],u[Ot-1])),ve=Ot>2?Kp:Xf,ze=Be=null,qt}function qt(Ot){return null==Ot||isNaN(Ot=+Ot)?ue:(ze||(ze=ve(u.map(N),m,T)))(N(he(Ot)))}return qt.invert=function(Ot){return he(oe((Be||(Be=ve(m,u.map(N),la)))(Ot)))},qt.domain=function(Ot){return arguments.length?(u=Array.from(Ot,q0),nt()):u.slice()},qt.range=function(Ot){return arguments.length?(m=Array.from(Ot),nt()):m.slice()},qt.rangeRound=function(Ot){return m=Array.from(Ot),T=cl,nt()},qt.clamp=function(Ot){return arguments.length?(he=!!Ot||nu,nt()):he!==nu},qt.interpolate=function(Ot){return arguments.length?(T=Ot,nt()):T},qt.unknown=function(Ot){return arguments.length?(ue=Ot,qt):ue},function(Ot,sn){return N=Ot,oe=sn,nt()}}()(nu,nu)}function da(u,m){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(m).domain(u)}return this}var zn,Y=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function se(u){if(!(m=Y.exec(u)))throw new Error("invalid format: "+u);var m;return new me({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function me(u){this.fill=void 0===u.fill?" ":u.fill+"",this.align=void 0===u.align?">":u.align+"",this.sign=void 0===u.sign?"-":u.sign+"",this.symbol=void 0===u.symbol?"":u.symbol+"",this.zero=!!u.zero,this.width=void 0===u.width?void 0:+u.width,this.comma=!!u.comma,this.precision=void 0===u.precision?void 0:+u.precision,this.trim=!!u.trim,this.type=void 0===u.type?"":u.type+""}function Je(u,m){if((T=(u=m?u.toExponential(m-1):u.toExponential()).indexOf("e"))<0)return null;var T,N=u.slice(0,T);return[N.length>1?N[0]+N.slice(2):N,+u.slice(T+1)]}function pt(u){return(u=Je(Math.abs(u)))?u[1]:NaN}function In(u,m){var T=Je(u,m);if(!T)return u+"";var N=T[0],oe=T[1];return oe<0?"0."+new Array(-oe).join("0")+N:N.length>oe+1?N.slice(0,oe+1)+"."+N.slice(oe+1):N+new Array(oe-N.length+2).join("0")}se.prototype=me.prototype,me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Li={"%":(u,m)=>(100*u).toFixed(m),b:u=>Math.round(u).toString(2),c:u=>u+"",d:function je(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:(u,m)=>u.toExponential(m),f:(u,m)=>u.toFixed(m),g:(u,m)=>u.toPrecision(m),o:u=>Math.round(u).toString(8),p:(u,m)=>In(100*u,m),r:In,s:function Ai(u,m){var T=Je(u,m);if(!T)return u+"";var N=T[0],oe=T[1],ue=oe-(zn=3*Math.max(-8,Math.min(8,Math.floor(oe/3))))+1,he=N.length;return ue===he?N:ue>he?N+new Array(ue-he+1).join("0"):ue>0?N.slice(0,ue)+"."+N.slice(ue):"0."+new Array(1-ue).join("0")+Je(u,Math.max(0,m+ue-1))[0]},X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function ji(u){return u}var Es,na,ha,rs=Array.prototype.map,ls=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function us(u){var m=u.domain;return u.ticks=function(T){var N=m();return function Xp(u,m,T){if(!((T=+T)>0))return[];if((u=+u)==(m=+m))return[u];const N=m<u,[oe,ue,he]=N?nh(m,u,T):nh(u,m,T);if(!(ue>=oe))return[];const ve=ue-oe+1,ze=new Array(ve);if(N)if(he<0)for(let Be=0;Be<ve;++Be)ze[Be]=(ue-Be)/-he;else for(let Be=0;Be<ve;++Be)ze[Be]=(ue-Be)*he;else if(he<0)for(let Be=0;Be<ve;++Be)ze[Be]=(oe+Be)/-he;else for(let Be=0;Be<ve;++Be)ze[Be]=(oe+Be)*he;return ze}(N[0],N[N.length-1],T??10)},u.tickFormat=function(T,N){var oe=m();return function Er(u,m,T,N){var ue,oe=G0(u,m,T);switch((N=se(N??",f")).type){case"s":var he=Math.max(Math.abs(u),Math.abs(m));return null==N.precision&&!isNaN(ue=function et(u,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pt(m)/3)))-pt(Math.abs(u)))}(oe,he))&&(N.precision=ue),ha(N,he);case"":case"e":case"g":case"p":case"r":null==N.precision&&!isNaN(ue=function ri(u,m){return u=Math.abs(u),m=Math.abs(m)-u,Math.max(0,pt(m)-pt(u))+1}(oe,Math.max(Math.abs(u),Math.abs(m))))&&(N.precision=ue-("e"===N.type));break;case"f":case"%":null==N.precision&&!isNaN(ue=function kn(u){return Math.max(0,-pt(Math.abs(u)))}(oe))&&(N.precision=ue-2*("%"===N.type))}return na(N)}(oe[0],oe[oe.length-1],T??10,N)},u.nice=function(T){null==T&&(T=10);var ze,Be,N=m(),oe=0,ue=N.length-1,he=N[oe],ve=N[ue],nt=10;for(ve<he&&(Be=he,he=ve,ve=Be,Be=oe,oe=ue,ue=Be);nt-- >0;){if((Be=Vg(he,ve,T))===ze)return N[oe]=he,N[ue]=ve,m(N);if(Be>0)he=Math.floor(he/Be)*Be,ve=Math.ceil(ve/Be)*Be;else{if(!(Be<0))break;he=Math.ceil(he*Be)/Be,ve=Math.floor(ve*Be)/Be}ze=Be}return u},u}function ds(){var u=Gg();return u.copy=function(){return Hl(u,ds())},da.apply(u,arguments),us(u)}!function Da(u){Es=function cs(u){var m=void 0===u.grouping||void 0===u.thousands?ji:function Mt(u,m){return function(T,N){for(var oe=T.length,ue=[],he=0,ve=u[0],ze=0;oe>0&&ve>0&&(ze+ve+1>N&&(ve=Math.max(1,N-ze)),ue.push(T.substring(oe-=ve,oe+ve)),!((ze+=ve+1)>N));)ve=u[he=(he+1)%u.length];return ue.reverse().join(m)}}(rs.call(u.grouping,Number),u.thousands+""),T=void 0===u.currency?"":u.currency[0]+"",N=void 0===u.currency?"":u.currency[1]+"",oe=void 0===u.decimal?".":u.decimal+"",ue=void 0===u.numerals?ji:function Nt(u){return function(m){return m.replace(/[0-9]/g,function(T){return u[+T]})}}(rs.call(u.numerals,String)),he=void 0===u.percent?"%":u.percent+"",ve=void 0===u.minus?"\u2212":u.minus+"",ze=void 0===u.nan?"NaN":u.nan+"";function Be(qt){var Ot=(qt=se(qt)).fill,sn=qt.align,Bi=qt.sign,pr=qt.symbol,Nn=qt.zero,un=qt.width,pi=qt.comma,$n=qt.precision,gi=qt.trim,di=qt.type;"n"===di?(pi=!0,di="g"):Li[di]||(void 0===$n&&($n=12),gi=!0,di="g"),(Nn||"0"===Ot&&"="===sn)&&(Nn=!0,Ot="0",sn="=");var Zn="$"===pr?T:"#"===pr&&/[boxX]/.test(di)?"0"+di.toLowerCase():"",Vr="$"===pr?N:/[%p]/.test(di)?he:"",os=Li[di],mo=/[defgprs%]/.test(di);function as(Ni){var Dt,Si,xn,ws=Zn,ci=Vr;if("c"===di)ci=os(Ni)+ci,Ni="";else{var ni=(Ni=+Ni)<0||1/Ni<0;if(Ni=isNaN(Ni)?ze:os(Math.abs(Ni),$n),gi&&(Ni=function cn(u){e:for(var oe,m=u.length,T=1,N=-1;T<m;++T)switch(u[T]){case".":N=oe=T;break;case"0":0===N&&(N=T),oe=T;break;default:if(!+u[T])break e;N>0&&(N=0)}return N>0?u.slice(0,N)+u.slice(oe+1):u}(Ni)),ni&&0==+Ni&&"+"!==Bi&&(ni=!1),ws=(ni?"("===Bi?Bi:ve:"-"===Bi||"("===Bi?"":Bi)+ws,ci=("s"===di?ls[8+zn/3]:"")+ci+(ni&&"("===Bi?")":""),mo)for(Dt=-1,Si=Ni.length;++Dt<Si;)if(48>(xn=Ni.charCodeAt(Dt))||xn>57){ci=(46===xn?oe+Ni.slice(Dt+1):Ni.slice(Dt))+ci,Ni=Ni.slice(0,Dt);break}}pi&&!Nn&&(Ni=m(Ni,1/0));var Ji=ws.length+Ni.length+ci.length,Vi=Ji<un?new Array(un-Ji+1).join(Ot):"";switch(pi&&Nn&&(Ni=m(Vi+Ni,Vi.length?un-ci.length:1/0),Vi=""),sn){case"<":Ni=ws+Ni+ci+Vi;break;case"=":Ni=ws+Vi+Ni+ci;break;case"^":Ni=Vi.slice(0,Ji=Vi.length>>1)+ws+Ni+ci+Vi.slice(Ji);break;default:Ni=Vi+ws+Ni+ci}return ue(Ni)}return $n=void 0===$n?6:/[gprs]/.test(di)?Math.max(1,Math.min(21,$n)):Math.max(0,Math.min(20,$n)),as.toString=function(){return qt+""},as}return{format:Be,formatPrefix:function nt(qt,Ot){var sn=Be(((qt=se(qt)).type="f",qt)),Bi=3*Math.max(-8,Math.min(8,Math.floor(pt(Ot)/3))),pr=Math.pow(10,-Bi),Nn=ls[8+Bi/3];return function(un){return sn(pr*un)+Nn}}}}(u),na=Es.format,ha=Es.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});class Qa extends Map{constructor(m,T=qs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:T}}),null!=m)for(const[N,oe]of m)this.set(N,oe)}get(m){return super.get(ss(this,m))}has(m){return super.has(ss(this,m))}set(m,T){return super.set(function Rr({_intern:u,_key:m},T){const N=m(T);return u.has(N)?u.get(N):(u.set(N,T),T)}(this,m),T)}delete(m){return super.delete(function Xr({_intern:u,_key:m},T){const N=m(T);return u.has(N)&&(T=u.get(N),u.delete(N)),T}(this,m))}}function ss({_intern:u,_key:m},T){const N=m(T);return u.has(N)?u.get(N):T}function qs(u){return null!==u&&"object"==typeof u?u.valueOf():u}Set;const ho=Symbol("implicit");function No(){var u=new Qa,m=[],T=[],N=ho;function oe(ue){let he=u.get(ue);if(void 0===he){if(N!==ho)return N;u.set(ue,he=m.push(ue)-1)}return T[he%T.length]}return oe.domain=function(ue){if(!arguments.length)return m.slice();m=[],u=new Qa;for(const he of ue)u.has(he)||u.set(he,m.push(he)-1);return oe},oe.range=function(ue){return arguments.length?(T=Array.from(ue),oe):T.slice()},oe.unknown=function(ue){return arguments.length?(N=ue,oe):N},oe.copy=function(){return No(m,T).unknown(N)},da.apply(oe,arguments),oe}const tn=1e3,ar=6e4,on=60*ar,rn=24*on,Ms=7*rn,sh=30*rn,ec=365*rn,tc=new Date,oh=new Date;function Ua(u,m,T,N){function oe(ue){return u(ue=0===arguments.length?new Date:new Date(+ue)),ue}return oe.floor=ue=>(u(ue=new Date(+ue)),ue),oe.ceil=ue=>(u(ue=new Date(ue-1)),m(ue,1),u(ue),ue),oe.round=ue=>{const he=oe(ue),ve=oe.ceil(ue);return ue-he<ve-ue?he:ve},oe.offset=(ue,he)=>(m(ue=new Date(+ue),null==he?1:Math.floor(he)),ue),oe.range=(ue,he,ve)=>{const ze=[];if(ue=oe.ceil(ue),ve=null==ve?1:Math.floor(ve),!(ue<he&&ve>0))return ze;let Be;do{ze.push(Be=new Date(+ue)),m(ue,ve),u(ue)}while(Be<ue&&ue<he);return ze},oe.filter=ue=>Ua(he=>{if(he>=he)for(;u(he),!ue(he);)he.setTime(he-1)},(he,ve)=>{if(he>=he)if(ve<0)for(;++ve<=0;)for(;m(he,-1),!ue(he););else for(;--ve>=0;)for(;m(he,1),!ue(he););}),T&&(oe.count=(ue,he)=>(tc.setTime(+ue),oh.setTime(+he),u(tc),u(oh),Math.floor(T(tc,oh))),oe.every=ue=>(ue=Math.floor(ue),isFinite(ue)&&ue>0?ue>1?oe.filter(N?he=>N(he)%ue==0:he=>oe.count(0,he)%ue==0):oe:null)),oe}const Q0=Ua(()=>{},(u,m)=>{u.setTime(+u+m)},(u,m)=>m-u);Q0.every=u=>(u=Math.floor(u),isFinite(u)&&u>0?u>1?Ua(m=>{m.setTime(Math.floor(m/u)*u)},(m,T)=>{m.setTime(+m+T*u)},(m,T)=>(T-m)/u):Q0:null);const qf=Ua(u=>{u.setTime(u-u.getMilliseconds())},(u,m)=>{u.setTime(+u+m*tn)},(u,m)=>(m-u)/tn,u=>u.getUTCSeconds()),iu=Ua(u=>{u.setTime(u-u.getMilliseconds()-u.getSeconds()*tn)},(u,m)=>{u.setTime(+u+m*ar)},(u,m)=>(m-u)/ar,u=>u.getMinutes()),Eu=Ua(u=>{u.setUTCSeconds(0,0)},(u,m)=>{u.setTime(+u+m*ar)},(u,m)=>(m-u)/ar,u=>u.getUTCMinutes()),J0=Ua(u=>{u.setTime(u-u.getMilliseconds()-u.getSeconds()*tn-u.getMinutes()*ar)},(u,m)=>{u.setTime(+u+m*on)},(u,m)=>(m-u)/on,u=>u.getHours()),sy=Ua(u=>{u.setUTCMinutes(0,0,0)},(u,m)=>{u.setTime(+u+m*on)},(u,m)=>(m-u)/on,u=>u.getUTCHours()),Wh=Ua(u=>u.setHours(0,0,0,0),(u,m)=>u.setDate(u.getDate()+m),(u,m)=>(m-u-(m.getTimezoneOffset()-u.getTimezoneOffset())*ar)/rn,u=>u.getDate()-1),Yg=Ua(u=>{u.setUTCHours(0,0,0,0)},(u,m)=>{u.setUTCDate(u.getUTCDate()+m)},(u,m)=>(m-u)/rn,u=>u.getUTCDate()-1),ay=Ua(u=>{u.setUTCHours(0,0,0,0)},(u,m)=>{u.setUTCDate(u.getUTCDate()+m)},(u,m)=>(m-u)/rn,u=>Math.floor(u/rn));function za(u){return Ua(m=>{m.setDate(m.getDate()-(m.getDay()+7-u)%7),m.setHours(0,0,0,0)},(m,T)=>{m.setDate(m.getDate()+7*T)},(m,T)=>(T-m-(T.getTimezoneOffset()-m.getTimezoneOffset())*ar)/Ms)}const Su=za(0),Dl=za(1),Zu=(za(2),za(3),za(4));function Gh(u){return Ua(m=>{m.setUTCDate(m.getUTCDate()-(m.getUTCDay()+7-u)%7),m.setUTCHours(0,0,0,0)},(m,T)=>{m.setUTCDate(m.getUTCDate()+7*T)},(m,T)=>(T-m)/Ms)}za(5),za(6);const Zp=Gh(0),ru=Gh(1),ah=(Gh(2),Gh(3),Gh(4)),Qf=(Gh(5),Gh(6),Ua(u=>{u.setDate(1),u.setHours(0,0,0,0)},(u,m)=>{u.setMonth(u.getMonth()+m)},(u,m)=>m.getMonth()-u.getMonth()+12*(m.getFullYear()-u.getFullYear()),u=>u.getMonth())),uy=Ua(u=>{u.setUTCDate(1),u.setUTCHours(0,0,0,0)},(u,m)=>{u.setUTCMonth(u.getUTCMonth()+m)},(u,m)=>m.getUTCMonth()-u.getUTCMonth()+12*(m.getUTCFullYear()-u.getUTCFullYear()),u=>u.getUTCMonth()),Yh=Ua(u=>{u.setMonth(0,1),u.setHours(0,0,0,0)},(u,m)=>{u.setFullYear(u.getFullYear()+m)},(u,m)=>m.getFullYear()-u.getFullYear(),u=>u.getFullYear());Yh.every=u=>isFinite(u=Math.floor(u))&&u>0?Ua(m=>{m.setFullYear(Math.floor(m.getFullYear()/u)*u),m.setMonth(0,1),m.setHours(0,0,0,0)},(m,T)=>{m.setFullYear(m.getFullYear()+T*u)}):null;const Au=Ua(u=>{u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0)},(u,m)=>{u.setUTCFullYear(u.getUTCFullYear()+m)},(u,m)=>m.getUTCFullYear()-u.getUTCFullYear(),u=>u.getUTCFullYear());function Jp(u,m,T,N,oe,ue){const he=[[qf,1,tn],[qf,5,5e3],[qf,15,15e3],[qf,30,3e4],[ue,1,ar],[ue,5,5*ar],[ue,15,15*ar],[ue,30,30*ar],[oe,1,on],[oe,3,3*on],[oe,6,6*on],[oe,12,12*on],[N,1,rn],[N,2,2*rn],[T,1,Ms],[m,1,sh],[m,3,3*sh],[u,1,ec]];function ze(Be,nt,qt){const Ot=Math.abs(nt-Be)/qt,sn=ih(([,,Nn])=>Nn).right(he,Ot);if(sn===he.length)return u.every(G0(Be/ec,nt/ec,qt));if(0===sn)return Q0.every(Math.max(G0(Be,nt,qt),1));const[Bi,pr]=he[Ot/he[sn-1][2]<he[sn][2]/Ot?sn-1:sn];return Bi.every(pr)}return[function ve(Be,nt,qt){const Ot=nt<Be;Ot&&([Be,nt]=[nt,Be]);const sn=qt&&"function"==typeof qt.range?qt:ze(Be,nt,qt),Bi=sn?sn.range(Be,+nt+1):[];return Ot?Bi.reverse():Bi},ze]}Au.every=u=>isFinite(u=Math.floor(u))&&u>0?Ua(m=>{m.setUTCFullYear(Math.floor(m.getUTCFullYear()/u)*u),m.setUTCMonth(0,1),m.setUTCHours(0,0,0,0)},(m,T)=>{m.setUTCFullYear(m.getUTCFullYear()+T*u)}):null;const[hy,v1]=Jp(Au,uy,Zp,ay,sy,Eu),[QC,fy]=Jp(Yh,Qf,Su,Wh,J0,iu);function nm(u){if(0<=u.y&&u.y<100){var m=new Date(-1,u.m,u.d,u.H,u.M,u.S,u.L);return m.setFullYear(u.y),m}return new Date(u.y,u.m,u.d,u.H,u.M,u.S,u.L)}function b1(u){if(0<=u.y&&u.y<100){var m=new Date(Date.UTC(-1,u.m,u.d,u.H,u.M,u.S,u.L));return m.setUTCFullYear(u.y),m}return new Date(Date.UTC(u.y,u.m,u.d,u.H,u.M,u.S,u.L))}function Uc(u,m,T){return{y:u,m,d:T,H:0,M:0,S:0,L:0}}var dh,s0,Qg={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,py=/^%/,Jg=/[\\^$*+?|[\]().{}]/g;function ro(u,m,T){var N=u<0?"-":"",oe=(N?-u:u)+"",ue=oe.length;return N+(ue<T?new Array(T-ue+1).join(m)+oe:oe)}function Rb(u){return u.replace(Jg,"\\$&")}function eg(u){return new RegExp("^(?:"+u.map(Rb).join("|")+")","i")}function tg(u){return new Map(u.map((m,T)=>[m.toLowerCase(),T]))}function gy(u,m,T){var N=Ja.exec(m.slice(T,T+1));return N?(u.w=+N[0],T+N[0].length):-1}function my(u,m,T){var N=Ja.exec(m.slice(T,T+1));return N?(u.u=+N[0],T+N[0].length):-1}function Xh(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.U=+N[0],T+N[0].length):-1}function w1(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.V=+N[0],T+N[0].length):-1}function ng(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.W=+N[0],T+N[0].length):-1}function Pb(u,m,T){var N=Ja.exec(m.slice(T,T+4));return N?(u.y=+N[0],T+N[0].length):-1}function _y(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.y=+N[0]+(+N[0]>68?1900:2e3),T+N[0].length):-1}function Fb(u,m,T){var N=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(m.slice(T,T+6));return N?(u.Z=N[1]?0:-(N[2]+(N[3]||"00")),T+N[0].length):-1}function Jf(u,m,T){var N=Ja.exec(m.slice(T,T+1));return N?(u.q=3*N[0]-3,T+N[0].length):-1}function qh(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.m=N[0]-1,T+N[0].length):-1}function Ha(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.d=+N[0],T+N[0].length):-1}function Lb(u,m,T){var N=Ja.exec(m.slice(T,T+3));return N?(u.m=0,u.d=+N[0],T+N[0].length):-1}function Zo(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.H=+N[0],T+N[0].length):-1}function C1(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.M=+N[0],T+N[0].length):-1}function Bb(u,m,T){var N=Ja.exec(m.slice(T,T+2));return N?(u.S=+N[0],T+N[0].length):-1}function yy(u,m,T){var N=Ja.exec(m.slice(T,T+3));return N?(u.L=+N[0],T+N[0].length):-1}function ep(u,m,T){var N=Ja.exec(m.slice(T,T+6));return N?(u.L=Math.floor(N[0]/1e3),T+N[0].length):-1}function Vb(u,m,T){var N=py.exec(m.slice(T,T+1));return N?T+N[0].length:-1}function vy(u,m,T){var N=Ja.exec(m.slice(T));return N?(u.Q=+N[0],T+N[0].length):-1}function T1(u,m,T){var N=Ja.exec(m.slice(T));return N?(u.s=+N[0],T+N[0].length):-1}function e0(u,m){return ro(u.getDate(),m,2)}function by(u,m){return ro(u.getHours(),m,2)}function wy(u,m){return ro(u.getHours()%12||12,m,2)}function Ub(u,m){return ro(1+Wh.count(Yh(u),u),m,3)}function Td(u,m){return ro(u.getMilliseconds(),m,3)}function Ju(u,m){return Td(u,m)+"000"}function im(u,m){return ro(u.getMonth()+1,m,2)}function t0(u,m){return ro(u.getMinutes(),m,2)}function Cy(u,m){return ro(u.getSeconds(),m,2)}function x1(u){var m=u.getDay();return 0===m?7:m}function fr(u,m){return ro(Su.count(Yh(u)-1,u),m,2)}function rm(u){var m=u.getDay();return m>=4||0===m?Zu(u):Zu.ceil(u)}function sm(u,m){return u=rm(u),ro(Zu.count(Yh(u),u)+(4===Yh(u).getDay()),m,2)}function fa(u){return u.getDay()}function E1(u,m){return ro(Dl.count(Yh(u)-1,u),m,2)}function Ty(u,m){return ro(u.getFullYear()%100,m,2)}function xd(u,m){return ro((u=rm(u)).getFullYear()%100,m,2)}function om(u,m){return ro(u.getFullYear()%1e4,m,4)}function ed(u,m){var T=u.getDay();return ro((u=T>=4||0===T?Zu(u):Zu.ceil(u)).getFullYear()%1e4,m,4)}function su(u){var m=u.getTimezoneOffset();return(m>0?"-":(m*=-1,"+"))+ro(m/60|0,"0",2)+ro(m%60,"0",2)}function ku(u,m){return ro(u.getUTCDate(),m,2)}function zb(u,m){return ro(u.getUTCHours(),m,2)}function Hb(u,m){return ro(u.getUTCHours()%12||12,m,2)}function S1(u,m){return ro(1+Yg.count(Au(u),u),m,3)}function JC(u,m){return ro(u.getUTCMilliseconds(),m,3)}function jb(u,m){return JC(u,m)+"000"}function xy(u,m){return ro(u.getUTCMonth()+1,m,2)}function $b(u,m){return ro(u.getUTCMinutes(),m,2)}function eT(u,m){return ro(u.getUTCSeconds(),m,2)}function Wb(u){var m=u.getUTCDay();return 0===m?7:m}function Kh(u,m){return ro(Zp.count(Au(u)-1,u),m,2)}function Ks(u){var m=u.getUTCDay();return m>=4||0===m?ah(u):ah.ceil(u)}function Ma(u,m){return u=Ks(u),ro(ah.count(Au(u),u)+(4===Au(u).getUTCDay()),m,2)}function am(u){return u.getUTCDay()}function lm(u,m){return ro(ru.count(Au(u)-1,u),m,2)}function mr(u,m){return ro(u.getUTCFullYear()%100,m,2)}function n0(u,m){return ro((u=Ks(u)).getUTCFullYear()%100,m,2)}function A1(u,m){return ro(u.getUTCFullYear()%1e4,m,4)}function uh(u,m){var T=u.getUTCDay();return ro((u=T>=4||0===T?ah(u):ah.ceil(u)).getUTCFullYear()%1e4,m,4)}function k1(){return"+0000"}function cm(){return"%"}function D1(u){return+u}function r0(u){return Math.floor(+u/1e3)}function Kb(u){return new Date(u)}function zc(u){return u instanceof Date?+u:+new Date(+u)}function ig(u,m,T,N,oe,ue,he,ve,ze,Be){var nt=Gg(),qt=nt.invert,Ot=nt.domain,sn=Be(".%L"),Bi=Be(":%S"),pr=Be("%I:%M"),Nn=Be("%I %p"),un=Be("%a %d"),pi=Be("%b %d"),$n=Be("%B"),gi=Be("%Y");function di(Zn){return(ze(Zn)<Zn?sn:ve(Zn)<Zn?Bi:he(Zn)<Zn?pr:ue(Zn)<Zn?Nn:N(Zn)<Zn?oe(Zn)<Zn?un:pi:T(Zn)<Zn?$n:gi)(Zn)}return nt.invert=function(Zn){return new Date(qt(Zn))},nt.domain=function(Zn){return arguments.length?Ot(Array.from(Zn,zc)):Ot().map(Kb)},nt.ticks=function(Zn){var Vr=Ot();return u(Vr[0],Vr[Vr.length-1],Zn??10)},nt.tickFormat=function(Zn,Vr){return null==Vr?di:Be(Vr)},nt.nice=function(Zn){var Vr=Ot();return(!Zn||"function"!=typeof Zn.range)&&(Zn=m(Vr[0],Vr[Vr.length-1],Zn??10)),Zn?Ot(function qb(u,m){var he,T=0,N=(u=u.slice()).length-1,oe=u[T],ue=u[N];return ue<oe&&(he=T,T=N,N=he,he=oe,oe=ue,ue=he),u[T]=m.floor(oe),u[N]=m.ceil(ue),u}(Vr,Zn)):nt},nt.copy=function(){return Hl(nt,ig(u,m,T,N,oe,ue,he,ve,ze,Be))},nt}function Ey(){return da.apply(ig(QC,fy,Yh,Qf,Su,Wh,J0,iu,qf,s0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I1(u){return"string"==typeof u?new ys([[document.querySelector(u)]],[document.documentElement]):new ys([[u]],co)}function ic(u){return"string"==typeof u?new ys([document.querySelectorAll(u)],[document.documentElement]):new ys([we(u)],co)}function Qo(u){return function(){return u}}!function M1(u){dh=function Ob(u){var m=u.dateTime,T=u.date,N=u.time,oe=u.periods,ue=u.days,he=u.shortDays,ve=u.months,ze=u.shortMonths,Be=eg(oe),nt=tg(oe),qt=eg(ue),Ot=tg(ue),sn=eg(he),Bi=tg(he),pr=eg(ve),Nn=tg(ve),un=eg(ze),pi=tg(ze),$n={a:function ni(Oi){return he[Oi.getDay()]},A:function Ji(Oi){return ue[Oi.getDay()]},b:function Vi(Oi){return ze[Oi.getMonth()]},B:function ur(Oi){return ve[Oi.getMonth()]},c:null,d:e0,e:e0,f:Ju,g:xd,G:ed,H:by,I:wy,j:Ub,L:Td,m:im,M:t0,p:function Tr(Oi){return oe[+(Oi.getHours()>=12)]},q:function qr(Oi){return 1+~~(Oi.getMonth()/3)},Q:D1,s:r0,S:Cy,u:x1,U:fr,V:sm,w:fa,W:E1,x:null,X:null,y:Ty,Y:om,Z:su,"%":cm},gi={a:function el(Oi){return he[Oi.getUTCDay()]},A:function Oo(Oi){return ue[Oi.getUTCDay()]},b:function Lo(Oi){return ze[Oi.getUTCMonth()]},B:function dl(Oi){return ve[Oi.getUTCMonth()]},c:null,d:ku,e:ku,f:jb,g:n0,G:uh,H:zb,I:Hb,j:S1,L:JC,m:xy,M:$b,p:function fo(Oi){return oe[+(Oi.getUTCHours()>=12)]},q:function _o(Oi){return 1+~~(Oi.getUTCMonth()/3)},Q:D1,s:r0,S:eT,u:Wb,U:Kh,V:Ma,w:am,W:lm,x:null,X:null,y:mr,Y:A1,Z:k1,"%":cm},di={a:function as(Oi,br,Ls){var vn=sn.exec(br.slice(Ls));return vn?(Oi.w=Bi.get(vn[0].toLowerCase()),Ls+vn[0].length):-1},A:function Ni(Oi,br,Ls){var vn=qt.exec(br.slice(Ls));return vn?(Oi.w=Ot.get(vn[0].toLowerCase()),Ls+vn[0].length):-1},b:function ws(Oi,br,Ls){var vn=un.exec(br.slice(Ls));return vn?(Oi.m=pi.get(vn[0].toLowerCase()),Ls+vn[0].length):-1},B:function ci(Oi,br,Ls){var vn=pr.exec(br.slice(Ls));return vn?(Oi.m=Nn.get(vn[0].toLowerCase()),Ls+vn[0].length):-1},c:function Dt(Oi,br,Ls){return os(Oi,m,br,Ls)},d:Ha,e:Ha,f:ep,g:_y,G:Pb,H:Zo,I:Zo,j:Lb,L:yy,m:qh,M:C1,p:function mo(Oi,br,Ls){var vn=Be.exec(br.slice(Ls));return vn?(Oi.p=nt.get(vn[0].toLowerCase()),Ls+vn[0].length):-1},q:Jf,Q:vy,s:T1,S:Bb,u:my,U:Xh,V:w1,w:gy,W:ng,x:function Si(Oi,br,Ls){return os(Oi,T,br,Ls)},X:function xn(Oi,br,Ls){return os(Oi,N,br,Ls)},y:_y,Y:Pb,Z:Fb,"%":Vb};function Zn(Oi,br){return function(Ls){var sc,jr,ga,vn=[],po=-1,So=0,ra=Oi.length;for(Ls instanceof Date||(Ls=new Date(+Ls));++po<ra;)37===Oi.charCodeAt(po)&&(vn.push(Oi.slice(So,po)),null!=(jr=Qg[sc=Oi.charAt(++po)])?sc=Oi.charAt(++po):jr="e"===sc?" ":"0",(ga=br[sc])&&(sc=ga(Ls,jr)),vn.push(sc),So=po+1);return vn.push(Oi.slice(So,po)),vn.join("")}}function Vr(Oi,br){return function(Ls){var So,ra,vn=Uc(1900,void 0,1);if(os(vn,Oi,Ls+="",0)!=Ls.length)return null;if("Q"in vn)return new Date(vn.Q);if("s"in vn)return new Date(1e3*vn.s+("L"in vn?vn.L:0));if(br&&!("Z"in vn)&&(vn.Z=0),"p"in vn&&(vn.H=vn.H%12+12*vn.p),void 0===vn.m&&(vn.m="q"in vn?vn.q:0),"V"in vn){if(vn.V<1||vn.V>53)return null;"w"in vn||(vn.w=1),"Z"in vn?(ra=(So=b1(Uc(vn.y,0,1))).getUTCDay(),So=ra>4||0===ra?ru.ceil(So):ru(So),So=Yg.offset(So,7*(vn.V-1)),vn.y=So.getUTCFullYear(),vn.m=So.getUTCMonth(),vn.d=So.getUTCDate()+(vn.w+6)%7):(ra=(So=nm(Uc(vn.y,0,1))).getDay(),So=ra>4||0===ra?Dl.ceil(So):Dl(So),So=Wh.offset(So,7*(vn.V-1)),vn.y=So.getFullYear(),vn.m=So.getMonth(),vn.d=So.getDate()+(vn.w+6)%7)}else("W"in vn||"U"in vn)&&("w"in vn||(vn.w="u"in vn?vn.u%7:"W"in vn?1:0),ra="Z"in vn?b1(Uc(vn.y,0,1)).getUTCDay():nm(Uc(vn.y,0,1)).getDay(),vn.m=0,vn.d="W"in vn?(vn.w+6)%7+7*vn.W-(ra+5)%7:vn.w+7*vn.U-(ra+6)%7);return"Z"in vn?(vn.H+=vn.Z/100|0,vn.M+=vn.Z%100,b1(vn)):nm(vn)}}function os(Oi,br,Ls,vn){for(var sc,jr,po=0,So=br.length,ra=Ls.length;po<So;){if(vn>=ra)return-1;if(37===(sc=br.charCodeAt(po++))){if(sc=br.charAt(po++),!(jr=di[sc in Qg?br.charAt(po++):sc])||(vn=jr(Oi,Ls,vn))<0)return-1}else if(sc!=Ls.charCodeAt(vn++))return-1}return vn}return $n.x=Zn(T,$n),$n.X=Zn(N,$n),$n.c=Zn(m,$n),gi.x=Zn(T,gi),gi.X=Zn(N,gi),gi.c=Zn(m,gi),{format:function(Oi){var br=Zn(Oi+="",$n);return br.toString=function(){return Oi},br},parse:function(Oi){var br=Vr(Oi+="",!1);return br.toString=function(){return Oi},br},utcFormat:function(Oi){var br=Zn(Oi+="",gi);return br.toString=function(){return Oi},br},utcParse:function(Oi){var br=Vr(Oi+="",!0);return br.toString=function(){return Oi},br}}}(u),s0=dh.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const N1=Math.abs,jl=Math.atan2,tp=Math.cos,Sy=Math.max,um=Math.min,Du=Math.sin,o0=Math.sqrt,rc=1e-12,Ed=Math.PI,a0=Ed/2,dm=2*Ed;function O1(u){return u>=1?a0:u<=-1?-a0:Math.asin(u)}const np=Math.PI,hm=2*np,Sd=1e-6,Ay=hm-Sd;function fm(u){this._+=u[0];for(let m=1,T=u.length;m<T;++m)this._+=arguments[m]+u[m]}class ip{constructor(m){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==m?fm:function pm(u){let m=Math.floor(u);if(!(m>=0))throw new Error(`invalid digits: ${u}`);if(m>15)return fm;const T=10**m;return function(N){this._+=N[0];for(let oe=1,ue=N.length;oe<ue;++oe)this._+=Math.round(arguments[oe]*T)/T+N[oe]}}(m)}moveTo(m,T){this._append`M${this._x0=this._x1=+m},${this._y0=this._y1=+T}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(m,T){this._append`L${this._x1=+m},${this._y1=+T}`}quadraticCurveTo(m,T,N,oe){this._append`Q${+m},${+T},${this._x1=+N},${this._y1=+oe}`}bezierCurveTo(m,T,N,oe,ue,he){this._append`C${+m},${+T},${+N},${+oe},${this._x1=+ue},${this._y1=+he}`}arcTo(m,T,N,oe,ue){if(m=+m,T=+T,N=+N,oe=+oe,(ue=+ue)<0)throw new Error(`negative radius: ${ue}`);let he=this._x1,ve=this._y1,ze=N-m,Be=oe-T,nt=he-m,qt=ve-T,Ot=nt*nt+qt*qt;if(null===this._x1)this._append`M${this._x1=m},${this._y1=T}`;else if(Ot>Sd)if(Math.abs(qt*ze-Be*nt)>Sd&&ue){let sn=N-he,Bi=oe-ve,pr=ze*ze+Be*Be,Nn=sn*sn+Bi*Bi,un=Math.sqrt(pr),pi=Math.sqrt(Ot),$n=ue*Math.tan((np-Math.acos((pr+Ot-Nn)/(2*un*pi)))/2),gi=$n/pi,di=$n/un;Math.abs(gi-1)>Sd&&this._append`L${m+gi*nt},${T+gi*qt}`,this._append`A${ue},${ue},0,0,${+(qt*sn>nt*Bi)},${this._x1=m+di*ze},${this._y1=T+di*Be}`}else this._append`L${this._x1=m},${this._y1=T}`}arc(m,T,N,oe,ue,he){if(m=+m,T=+T,he=!!he,(N=+N)<0)throw new Error(`negative radius: ${N}`);let ve=N*Math.cos(oe),ze=N*Math.sin(oe),Be=m+ve,nt=T+ze,qt=1^he,Ot=he?oe-ue:ue-oe;null===this._x1?this._append`M${Be},${nt}`:(Math.abs(this._x1-Be)>Sd||Math.abs(this._y1-nt)>Sd)&&this._append`L${Be},${nt}`,N&&(Ot<0&&(Ot=Ot%hm+hm),Ot>Ay?this._append`A${N},${N},0,1,${qt},${m-ve},${T-ze}A${N},${N},0,1,${qt},${this._x1=Be},${this._y1=nt}`:Ot>Sd&&this._append`A${N},${N},0,${+(Ot>=np)},${qt},${this._x1=m+N*Math.cos(ue)},${this._y1=T+N*Math.sin(ue)}`)}rect(m,T,N,oe){this._append`M${this._x0=this._x1=+m},${this._y0=this._y1=+T}h${N=+N}v${+oe}h${-N}Z`}toString(){return this._}}function rg(u){let m=3;return u.digits=function(T){if(!arguments.length)return m;if(null==T)m=null;else{const N=Math.floor(T);if(!(N>=0))throw new RangeError(`invalid digits: ${T}`);m=N}return u},()=>new ip(m)}function Qb(u){return u.innerRadius}function Jb(u){return u.outerRadius}function tT(u){return u.startAngle}function ky(u){return u.endAngle}function nT(u){return u&&u.padAngle}function Dy(u,m,T,N,oe,ue,he){var ve=u-T,ze=m-N,Be=(he?ue:-ue)/o0(ve*ve+ze*ze),nt=Be*ze,qt=-Be*ve,Ot=u+nt,sn=m+qt,Bi=T+nt,pr=N+qt,Nn=(Ot+Bi)/2,un=(sn+pr)/2,pi=Bi-Ot,$n=pr-sn,gi=pi*pi+$n*$n,di=oe-ue,Zn=Ot*pr-Bi*sn,Vr=($n<0?-1:1)*o0(Sy(0,di*di*gi-Zn*Zn)),os=(Zn*$n-pi*Vr)/gi,mo=(-Zn*pi-$n*Vr)/gi,as=(Zn*$n+pi*Vr)/gi,Ni=(-Zn*pi+$n*Vr)/gi,ws=os-Nn,ci=mo-un,Dt=as-Nn,Si=Ni-un;return ws*ws+ci*ci>Dt*Dt+Si*Si&&(os=as,mo=Ni),{cx:os,cy:mo,x01:-nt,y01:-qt,x11:os*(oe/di-1),y11:mo*(oe/di-1)}}function rT(){var u=Qb,m=Jb,T=Qo(0),N=null,oe=tT,ue=ky,he=nT,ve=null,ze=rg(Be);function Be(){var nt,qt,Ot=+u.apply(this,arguments),sn=+m.apply(this,arguments),Bi=oe.apply(this,arguments)-a0,pr=ue.apply(this,arguments)-a0,Nn=N1(pr-Bi),un=pr>Bi;if(ve||(ve=nt=ze()),sn<Ot&&(qt=sn,sn=Ot,Ot=qt),sn>rc)if(Nn>dm-rc)ve.moveTo(sn*tp(Bi),sn*Du(Bi)),ve.arc(0,0,sn,Bi,pr,!un),Ot>rc&&(ve.moveTo(Ot*tp(pr),Ot*Du(pr)),ve.arc(0,0,Ot,pr,Bi,un));else{var ci,Dt,pi=Bi,$n=pr,gi=Bi,di=pr,Zn=Nn,Vr=Nn,os=he.apply(this,arguments)/2,mo=os>rc&&(N?+N.apply(this,arguments):o0(Ot*Ot+sn*sn)),as=um(N1(sn-Ot)/2,+T.apply(this,arguments)),Ni=as,ws=as;if(mo>rc){var Si=O1(mo/Ot*Du(os)),xn=O1(mo/sn*Du(os));(Zn-=2*Si)>rc?(gi+=Si*=un?1:-1,di-=Si):(Zn=0,gi=di=(Bi+pr)/2),(Vr-=2*xn)>rc?(pi+=xn*=un?1:-1,$n-=xn):(Vr=0,pi=$n=(Bi+pr)/2)}var ni=sn*tp(pi),Ji=sn*Du(pi),Vi=Ot*tp(di),ur=Ot*Du(di);if(as>rc){var Lo,Tr=sn*tp($n),qr=sn*Du($n),el=Ot*tp(gi),Oo=Ot*Du(gi);if(Nn<Ed)if(Lo=function iT(u,m,T,N,oe,ue,he,ve){var ze=T-u,Be=N-m,nt=he-oe,qt=ve-ue,Ot=qt*ze-nt*Be;if(!(Ot*Ot<rc))return[u+(Ot=(nt*(m-ue)-qt*(u-oe))/Ot)*ze,m+Ot*Be]}(ni,Ji,el,Oo,Tr,qr,Vi,ur)){var dl=ni-Lo[0],fo=Ji-Lo[1],_o=Tr-Lo[0],Oi=qr-Lo[1],br=1/Du(function Zb(u){return u>1?0:u<-1?Ed:Math.acos(u)}((dl*_o+fo*Oi)/(o0(dl*dl+fo*fo)*o0(_o*_o+Oi*Oi)))/2),Ls=o0(Lo[0]*Lo[0]+Lo[1]*Lo[1]);Ni=um(as,(Ot-Ls)/(br-1)),ws=um(as,(sn-Ls)/(br+1))}else Ni=ws=0}Vr>rc?ws>rc?(ci=Dy(el,Oo,ni,Ji,sn,ws,un),Dt=Dy(Tr,qr,Vi,ur,sn,ws,un),ve.moveTo(ci.cx+ci.x01,ci.cy+ci.y01),ws<as?ve.arc(ci.cx,ci.cy,ws,jl(ci.y01,ci.x01),jl(Dt.y01,Dt.x01),!un):(ve.arc(ci.cx,ci.cy,ws,jl(ci.y01,ci.x01),jl(ci.y11,ci.x11),!un),ve.arc(0,0,sn,jl(ci.cy+ci.y11,ci.cx+ci.x11),jl(Dt.cy+Dt.y11,Dt.cx+Dt.x11),!un),ve.arc(Dt.cx,Dt.cy,ws,jl(Dt.y11,Dt.x11),jl(Dt.y01,Dt.x01),!un))):(ve.moveTo(ni,Ji),ve.arc(0,0,sn,pi,$n,!un)):ve.moveTo(ni,Ji),Ot>rc&&Zn>rc?Ni>rc?(ci=Dy(Vi,ur,Tr,qr,Ot,-Ni,un),Dt=Dy(ni,Ji,el,Oo,Ot,-Ni,un),ve.lineTo(ci.cx+ci.x01,ci.cy+ci.y01),Ni<as?ve.arc(ci.cx,ci.cy,Ni,jl(ci.y01,ci.x01),jl(Dt.y01,Dt.x01),!un):(ve.arc(ci.cx,ci.cy,Ni,jl(ci.y01,ci.x01),jl(ci.y11,ci.x11),!un),ve.arc(0,0,Ot,jl(ci.cy+ci.y11,ci.cx+ci.x11),jl(Dt.cy+Dt.y11,Dt.cx+Dt.x11),un),ve.arc(Dt.cx,Dt.cy,Ni,jl(Dt.y11,Dt.x11),jl(Dt.y01,Dt.x01),!un))):ve.arc(0,0,Ot,di,gi,un):ve.lineTo(Vi,ur)}else ve.moveTo(0,0);if(ve.closePath(),nt)return ve=null,nt+""||null}return Be.centroid=function(){var nt=(+u.apply(this,arguments)+ +m.apply(this,arguments))/2,qt=(+oe.apply(this,arguments)+ +ue.apply(this,arguments))/2-Ed/2;return[tp(qt)*nt,Du(qt)*nt]},Be.innerRadius=function(nt){return arguments.length?(u="function"==typeof nt?nt:Qo(+nt),Be):u},Be.outerRadius=function(nt){return arguments.length?(m="function"==typeof nt?nt:Qo(+nt),Be):m},Be.cornerRadius=function(nt){return arguments.length?(T="function"==typeof nt?nt:Qo(+nt),Be):T},Be.padRadius=function(nt){return arguments.length?(N=null==nt?null:"function"==typeof nt?nt:Qo(+nt),Be):N},Be.startAngle=function(nt){return arguments.length?(oe="function"==typeof nt?nt:Qo(+nt),Be):oe},Be.endAngle=function(nt){return arguments.length?(ue="function"==typeof nt?nt:Qo(+nt),Be):ue},Be.padAngle=function(nt){return arguments.length?(he="function"==typeof nt?nt:Qo(+nt),Be):he},Be.context=function(nt){return arguments.length?(ve=nt??null,Be):ve},Be}function P1(u){return"object"==typeof u&&"length"in u?u:Array.from(u)}function e2(u){this._context=u}function Zh(u){return new e2(u)}function F1(u){return u[0]}function t2(u){return u[1]}function L1(u,m){var T=Qo(!0),N=null,oe=Zh,ue=null,he=rg(ve);function ve(ze){var Be,qt,sn,nt=(ze=P1(ze)).length,Ot=!1;for(null==N&&(ue=oe(sn=he())),Be=0;Be<=nt;++Be)!(Be<nt&&T(qt=ze[Be],Be,ze))===Ot&&((Ot=!Ot)?ue.lineStart():ue.lineEnd()),Ot&&ue.point(+u(qt,Be,ze),+m(qt,Be,ze));if(sn)return ue=null,sn+""||null}return u="function"==typeof u?u:void 0===u?F1:Qo(u),m="function"==typeof m?m:void 0===m?t2:Qo(m),ve.x=function(ze){return arguments.length?(u="function"==typeof ze?ze:Qo(+ze),ve):u},ve.y=function(ze){return arguments.length?(m="function"==typeof ze?ze:Qo(+ze),ve):m},ve.defined=function(ze){return arguments.length?(T="function"==typeof ze?ze:Qo(!!ze),ve):T},ve.curve=function(ze){return arguments.length?(oe=ze,null!=N&&(ue=oe(N)),ve):oe},ve.context=function(ze){return arguments.length?(null==ze?N=ue=null:ue=oe(N=ze),ve):N},ve}function hh(u,m){return m<u?-1:m>u?1:m>=u?0:NaN}function oT(u){return u}function n2(){var u=oT,m=hh,T=null,N=Qo(0),oe=Qo(dm),ue=Qo(0);function he(ve){var ze,nt,qt,un,gi,Be=(ve=P1(ve)).length,Ot=0,sn=new Array(Be),Bi=new Array(Be),pr=+N.apply(this,arguments),Nn=Math.min(dm,Math.max(-dm,oe.apply(this,arguments)-pr)),pi=Math.min(Math.abs(Nn)/Be,ue.apply(this,arguments)),$n=pi*(Nn<0?-1:1);for(ze=0;ze<Be;++ze)(gi=Bi[sn[ze]=ze]=+u(ve[ze],ze,ve))>0&&(Ot+=gi);for(null!=m?sn.sort(function(di,Zn){return m(Bi[di],Bi[Zn])}):null!=T&&sn.sort(function(di,Zn){return T(ve[di],ve[Zn])}),ze=0,qt=Ot?(Nn-Be*$n)/Ot:0;ze<Be;++ze,pr=un)Bi[nt=sn[ze]]={data:ve[nt],index:ze,value:gi=Bi[nt],startAngle:pr,endAngle:un=pr+(gi>0?gi*qt:0)+$n,padAngle:pi};return Bi}return he.value=function(ve){return arguments.length?(u="function"==typeof ve?ve:Qo(+ve),he):u},he.sortValues=function(ve){return arguments.length?(m=ve,T=null,he):m},he.sort=function(ve){return arguments.length?(T=ve,m=null,he):T},he.startAngle=function(ve){return arguments.length?(N="function"==typeof ve?ve:Qo(+ve),he):N},he.endAngle=function(ve){return arguments.length?(oe="function"==typeof ve?ve:Qo(+ve),he):oe},he.padAngle=function(ve){return arguments.length?(ue="function"==typeof ve?ve:Qo(+ve),he):ue},he}function Ia(){}function ul(u,m,T){u._context.bezierCurveTo((2*u._x0+u._x1)/3,(2*u._y0+u._y1)/3,(u._x0+2*u._x1)/3,(u._y0+2*u._y1)/3,(u._x0+4*u._x1+m)/6,(u._y0+4*u._y1+T)/6)}function ia(u){this._context=u}function Qh(u){return new ia(u)}function Hs(u){this._context=u}function Hc(u){return new Hs(u)}function B1(u){this._context=u}function V1(u){return new B1(u)}e2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2;default:this._context.lineTo(u,m)}}},ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ul(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ul(this,u,m)}this._x0=this._x1,this._x1=u,this._y0=this._y1,this._y1=m}},Hs.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._x2=u,this._y2=m;break;case 1:this._point=2,this._x3=u,this._y3=m;break;case 2:this._point=3,this._x4=u,this._y4=m,this._context.moveTo((this._x0+4*this._x1+u)/6,(this._y0+4*this._y1+m)/6);break;default:ul(this,u,m)}this._x0=this._x1,this._x1=u,this._y0=this._y1,this._y1=m}},B1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var T=(this._x0+4*this._x1+u)/6,N=(this._y0+4*this._y1+m)/6;this._line?this._context.lineTo(T,N):this._context.moveTo(T,N);break;case 3:this._point=4;default:ul(this,u,m)}this._x0=this._x1,this._x1=u,this._y0=this._y1,this._y1=m}};class rp{constructor(m,T){this._context=m,this._x=T}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(m,T){switch(m=+m,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(m,T):this._context.moveTo(m,T);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+m)/2,this._y0,this._x0,T,m,T):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+T)/2,m,this._y0,m,T)}this._x0=m,this._y0=T}}function mm(u){return new rp(u,!0)}function _m(u){return new rp(u,!1)}function ef(u,m){this._basis=new ia(u),this._beta=m}ef.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var u=this._x,m=this._y,T=u.length-1;if(T>0)for(var ze,N=u[0],oe=m[0],ue=u[T]-N,he=m[T]-oe,ve=-1;++ve<=T;)this._basis.point(this._beta*u[ve]+(1-this._beta)*(N+(ze=ve/T)*ue),this._beta*m[ve]+(1-this._beta)*(oe+ze*he));this._x=this._y=null,this._basis.lineEnd()},point:function(u,m){this._x.push(+u),this._y.push(+m)}};const og=function u(m){function T(N){return 1===m?new ia(N):new ef(N,m)}return T.beta=function(N){return u(+N)},T}(.85);function sp(u,m,T){u._context.bezierCurveTo(u._x1+u._k*(u._x2-u._x0),u._y1+u._k*(u._y2-u._y0),u._x2+u._k*(u._x1-m),u._y2+u._k*(u._y1-T),u._x2,u._y2)}function ag(u,m){this._context=u,this._k=(1-m)/6}ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:sp(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2,this._x1=u,this._y1=m;break;case 2:this._point=3;default:sp(this,u,m)}this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const ym=function u(m){function T(N){return new ag(N,m)}return T.tension=function(N){return u(+N)},T}(0);function My(u,m){this._context=u,this._k=(1-m)/6}My.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._x3=u,this._y3=m;break;case 1:this._point=2,this._context.moveTo(this._x4=u,this._y4=m);break;case 2:this._point=3,this._x5=u,this._y5=m;break;default:sp(this,u,m)}this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const vm=function u(m){function T(N){return new My(N,m)}return T.tension=function(N){return u(+N)},T}(0);function op(u,m){this._context=u,this._k=(1-m)/6}op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sp(this,u,m)}this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const i2=function u(m){function T(N){return new op(N,m)}return T.tension=function(N){return u(+N)},T}(0);function l0(u,m,T){var N=u._x1,oe=u._y1,ue=u._x2,he=u._y2;if(u._l01_a>rc){var ve=2*u._l01_2a+3*u._l01_a*u._l12_a+u._l12_2a,ze=3*u._l01_a*(u._l01_a+u._l12_a);N=(N*ve-u._x0*u._l12_2a+u._x2*u._l01_2a)/ze,oe=(oe*ve-u._y0*u._l12_2a+u._y2*u._l01_2a)/ze}if(u._l23_a>rc){var Be=2*u._l23_2a+3*u._l23_a*u._l12_a+u._l12_2a,nt=3*u._l23_a*(u._l23_a+u._l12_a);ue=(ue*Be+u._x1*u._l23_2a-m*u._l12_2a)/nt,he=(he*Be+u._y1*u._l23_2a-T*u._l12_2a)/nt}u._context.bezierCurveTo(N,oe,ue,he,u._x2,u._y2)}function Iy(u,m){this._context=u,this._alpha=m}Iy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){if(u=+u,m=+m,this._point){var T=this._x2-u,N=this._y2-m;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(T*T+N*N,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2;break;case 2:this._point=3;default:l0(this,u,m)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const aT=function u(m){function T(N){return m?new Iy(N,m):new ag(N,0)}return T.alpha=function(N){return u(+N)},T}(.5);function tf(u,m){this._context=u,this._alpha=m}tf.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(u,m){if(u=+u,m=+m,this._point){var T=this._x2-u,N=this._y2-m;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(T*T+N*N,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=u,this._y3=m;break;case 1:this._point=2,this._context.moveTo(this._x4=u,this._y4=m);break;case 2:this._point=3,this._x5=u,this._y5=m;break;default:l0(this,u,m)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const pa=function u(m){function T(N){return m?new tf(N,m):new My(N,0)}return T.alpha=function(N){return u(+N)},T}(.5);function r2(u,m){this._context=u,this._alpha=m}r2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){if(u=+u,m=+m,this._point){var T=this._x2-u,N=this._y2-m;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(T*T+N*N,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:l0(this,u,m)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=u,this._y0=this._y1,this._y1=this._y2,this._y2=m}};const s2=function u(m){function T(N){return m?new r2(N,m):new op(N,0)}return T.alpha=function(N){return u(+N)},T}(.5);function ap(u){this._context=u}function Ny(u){return new ap(u)}function bm(u){return u<0?-1:1}function Oy(u,m,T){var N=u._x1-u._x0,oe=m-u._x1,ue=(u._y1-u._y0)/(N||oe<0&&-0),he=(T-u._y1)/(oe||N<0&&-0),ve=(ue*oe+he*N)/(N+oe);return(bm(ue)+bm(he))*Math.min(Math.abs(ue),Math.abs(he),.5*Math.abs(ve))||0}function o2(u,m){var T=u._x1-u._x0;return T?(3*(u._y1-u._y0)/T-m)/2:m}function Ry(u,m,T){var N=u._x0,ue=u._x1,he=u._y1,ve=(ue-N)/3;u._context.bezierCurveTo(N+ve,u._y0+ve*m,ue-ve,he-ve*T,ue,he)}function nf(u){this._context=u}function Py(u){this._context=new c0(u)}function c0(u){this._context=u}function U1(u){return new nf(u)}function a2(u){return new Py(u)}function z1(u){this._context=u}function u0(u){var m,N,T=u.length-1,oe=new Array(T),ue=new Array(T),he=new Array(T);for(oe[0]=0,ue[0]=2,he[0]=u[0]+2*u[1],m=1;m<T-1;++m)oe[m]=1,ue[m]=4,he[m]=4*u[m]+2*u[m+1];for(oe[T-1]=2,ue[T-1]=7,he[T-1]=8*u[T-1]+u[T],m=1;m<T;++m)ue[m]-=N=oe[m]/ue[m-1],he[m]-=N*he[m-1];for(oe[T-1]=he[T-1]/ue[T-1],m=T-2;m>=0;--m)oe[m]=(he[m]-oe[m+1])/ue[m];for(ue[T-1]=(u[T]+oe[T-1])/2,m=0;m<T-1;++m)ue[m]=2*u[m+1]-oe[m+1];return[oe,ue]}function wm(u){return new z1(u)}function lp(u,m){this._context=u,this._t=m}function Fy(u){return new lp(u,.5)}function Ly(u){return new lp(u,0)}function By(u){return new lp(u,1)}function fh(u,m,T){this.k=u,this.x=m,this.y=T}ap.prototype={areaStart:Ia,areaEnd:Ia,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(u,m){u=+u,m=+m,this._point?this._context.lineTo(u,m):(this._point=1,this._context.moveTo(u,m))}},nf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ry(this,this._t0,o2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(u,m){var T=NaN;if(m=+m,(u=+u)!==this._x1||m!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2;break;case 2:this._point=3,Ry(this,o2(this,T=Oy(this,u,m)),T);break;default:Ry(this,this._t0,T=Oy(this,u,m))}this._x0=this._x1,this._x1=u,this._y0=this._y1,this._y1=m,this._t0=T}}},(Py.prototype=Object.create(nf.prototype)).point=function(u,m){nf.prototype.point.call(this,m,u)},c0.prototype={moveTo:function(u,m){this._context.moveTo(m,u)},closePath:function(){this._context.closePath()},lineTo:function(u,m){this._context.lineTo(m,u)},bezierCurveTo:function(u,m,T,N,oe,ue){this._context.bezierCurveTo(m,u,N,T,ue,oe)}},z1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var u=this._x,m=this._y,T=u.length;if(T)if(this._line?this._context.lineTo(u[0],m[0]):this._context.moveTo(u[0],m[0]),2===T)this._context.lineTo(u[1],m[1]);else for(var N=u0(u),oe=u0(m),ue=0,he=1;he<T;++ue,++he)this._context.bezierCurveTo(N[0][ue],oe[0][ue],N[1][ue],oe[1][ue],u[he],m[he]);(this._line||0!==this._line&&1===T)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(u,m){this._x.push(+u),this._y.push(+m)}},lp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(u,m){switch(u=+u,m=+m,this._point){case 0:this._point=1,this._line?this._context.lineTo(u,m):this._context.moveTo(u,m);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,m),this._context.lineTo(u,m);else{var T=this._x*(1-this._t)+u*this._t;this._context.lineTo(T,this._y),this._context.lineTo(T,m)}}this._x=u,this._y=m}},fh.prototype={constructor:fh,scale:function(u){return 1===u?this:new fh(this.k*u,this.x,this.y)},translate:function(u,m){return 0===u&0===m?this:new fh(this.k,this.x+this.k*u,this.y+this.k*m)},apply:function(u){return[u[0]*this.k+this.x,u[1]*this.k+this.y]},applyX:function(u){return u*this.k+this.x},applyY:function(u){return u*this.k+this.y},invert:function(u){return[(u[0]-this.x)/this.k,(u[1]-this.y)/this.k]},invertX:function(u){return(u-this.x)/this.k},invertY:function(u){return(u-this.y)/this.k},rescaleX:function(u){return u.copy().domain(u.range().map(this.invertX,this).map(u.invert,u))},rescaleY:function(u){return u.copy().domain(u.range().map(this.invertY,this).map(u.invert,u))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new fh(1,0,0)},8384:(It,ke,O)=>{"use strict";function R(te,re,A,F){var ne,x,k,I,S,z,ee,Q,Ce,H,G,K,ie;if(H=(ne=re.y-te.y)*F.x+(k=te.x-re.x)*F.y+(S=re.x*te.y-te.x*re.y),!(0!==(Ce=ne*A.x+k*A.y+S)&&0!==H&&U(Ce,H)||(x=F.y-A.y,I=A.x-F.x,z=F.x*A.y-A.x*F.y,ee=x*te.x+I*te.y+z,Q=x*re.x+I*re.y+z,0!==ee&&0!==Q&&U(ee,Q)||(G=ne*I-x*k,0===G))))return K=Math.abs(G/2),{x:(ie=k*z-I*S)<0?(ie-K)/G:(ie+K)/G,y:(ie=x*S-ne*z)<0?(ie-K)/G:(ie+K)/G}}function U(te,re){return te*re>0}function q(te,re,A){var F=te.x,ne=te.y,x=[],k=Number.POSITIVE_INFINITY,I=Number.POSITIVE_INFINITY;re.forEach(function(G){k=Math.min(k,G.x),I=Math.min(I,G.y)});for(var S=F-te.width/2-k,z=ne-te.height/2-I,ee=0;ee<re.length;ee++){var Q=re[ee],Ce=re[ee<re.length-1?ee+1:0],H=R(te,A,{x:S+Q.x,y:z+Q.y},{x:S+Ce.x,y:z+Ce.y});H&&x.push(H)}return x.length?(x.length>1&&x.sort(function(G,K){var ie=G.x-A.x,ge=G.y-A.y,we=Math.sqrt(ie*ie+ge*ge),fe=K.x-A.x,Te=K.y-A.y,tt=Math.sqrt(fe*fe+Te*Te);return we<tt?-1:we===tt?0:1}),x[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",te),te)}O.d(ke,{k:()=>q})},8356:(It,ke,O)=>{"use strict";function R(U,q){var k,I,te=U.x,re=U.y,A=q.x-te,F=q.y-re,ne=U.width/2,x=U.height/2;return Math.abs(F)*ne>Math.abs(A)*x?(F<0&&(x=-x),k=0===F?0:x*A/F,I=x):(A<0&&(ne=-ne),k=ne,I=0===A?0:ne*F/A),{x:te+k,y:re+I}}O.d(ke,{C:()=>R})},9483:(It,ke,O)=>{"use strict";O.d(ke,{H:()=>U});var R=O(6320);function U(q,te){var re=q.append("foreignObject").attr("width","100000"),A=re.append("xhtml:div");A.attr("xmlns","http://www.w3.org/1999/xhtml");var F=te.label;switch(typeof F){case"function":A.insert(F);break;case"object":A.insert(function(){return F});break;default:A.html(F)}R.AV(A,te.labelStyle),A.style("display","inline-block"),A.style("white-space","nowrap");var ne=A.node().getBoundingClientRect();return re.attr("width",ne.width).attr("height",ne.height),re}},6320:(It,ke,O)=>{"use strict";O.d(ke,{AV:()=>F,De:()=>q,c$:()=>x,gh:()=>te,nh:()=>ne});var R=O(4294),U=O(129);function q(k,I){return!!k.children(I).length}function te(k){return A(k.v)+":"+A(k.w)+":"+A(k.name)}var re=/:/g;function A(k){return k?String(k).replace(re,"\\:"):""}function F(k,I){I&&k.attr("style",I)}function ne(k,I,S){I&&k.attr("class",I).attr("class",S+" "+k.attr("class"))}function x(k,I){var S=I.graph();if(R.A(S)){var z=S.transition;if(U.A(z))return z(k)}return k}},5180:(It,ke,O)=>{"use strict";O.d(ke,{Zp:()=>zh});var R=O(9671),U=O(1195),q=O(1981),te=O(1913),re=O(2383),A=O(6327),F=O(3938),ne=O(8802);class x{constructor(){var Z={};Z._next=Z._prev=Z,this._sentinel=Z}dequeue(){var Z=this._sentinel,le=Z._prev;if(le!==Z)return k(le),le}enqueue(Z){var le=this._sentinel;Z._prev&&Z._next&&k(Z),Z._next=le._next,le._next._prev=Z,le._next=Z,Z._prev=le}toString(){for(var Z=[],le=this._sentinel,be=le._prev;be!==le;)Z.push(JSON.stringify(be,I)),be=be._prev;return"["+Z.join(", ")+"]"}}function k(M){M._prev._next=M._next,M._next._prev=M._prev,delete M._next,delete M._prev}function I(M,Z){if("_next"!==M&&"_prev"!==M)return Z}var S=te.A(1);function Q(M,Z,le,be,Se){var Re=Se?[]:void 0;return R.A(M.inEdges(be.v),function(We){var _t=M.edge(We),Rt=M.node(We.v);Se&&Re.push({v:We.v,w:We.w}),Rt.out-=_t,H(Z,le,Rt)}),R.A(M.outEdges(be.v),function(We){var _t=M.edge(We),en=M.node(We.w);en.in-=_t,H(Z,le,en)}),M.removeNode(be.v),Re}function H(M,Z,le){le.out?le.in?M[le.out-le.in+Z].enqueue(le):M[M.length-1].enqueue(le):M[0].enqueue(le)}function G(M){var Z="greedy"===M.graph().acyclicer?function z(M,Z){if(M.nodeCount()<=1)return[];var le=function Ce(M,Z){var le=new ne.T,be=0,Se=0;R.A(M.nodes(),function(_t){le.setNode(_t,{v:_t,in:0,out:0})}),R.A(M.edges(),function(_t){var Rt=le.edge(_t.v,_t.w)||0,en=Z(_t);le.setEdge(_t.v,_t.w,Rt+en),Se=Math.max(Se,le.node(_t.v).out+=en),be=Math.max(be,le.node(_t.w).in+=en)});var Re=F.A(Se+be+3).map(function(){return new x}),We=be+1;return R.A(le.nodes(),function(_t){H(Re,We,le.node(_t))}),{graph:le,buckets:Re,zeroIdx:We}}(M,Z||S),be=function ee(M,Z,le){for(var We,be=[],Se=Z[Z.length-1],Re=Z[0];M.nodeCount();){for(;We=Re.dequeue();)Q(M,Z,le,We);for(;We=Se.dequeue();)Q(M,Z,le,We);if(M.nodeCount())for(var _t=Z.length-2;_t>0;--_t)if(We=Z[_t].dequeue()){be=be.concat(Q(M,Z,le,We,!0));break}}return be}(le.graph,le.buckets,le.zeroIdx);return re.A(A.A(be,function(Se){return M.outEdges(Se.v,Se.w)}))}(M,function le(be){return function(Se){return be.edge(Se).weight}}(M)):function K(M){var Z=[],le={},be={};return R.A(M.nodes(),function Se(Re){q.A(be,Re)||(be[Re]=!0,le[Re]=!0,R.A(M.outEdges(Re),function(We){q.A(le,We.w)?Z.push(We):Se(We.w)}),delete le[Re])}),Z}(M);R.A(Z,function(be){var Se=M.edge(be);M.removeEdge(be),Se.forwardName=be.name,Se.reversed=!0,M.setEdge(be.w,be.v,Se,U.A("rev"))})}var ge=O(5401),we=O(1827),fe=O(1319);const tt=function Te(M,Z,le){(void 0!==le&&!(0,fe.A)(M[Z],le)||void 0===le&&!(Z in M))&&(0,we.A)(M,Z,le)};var Ze=O(2676),Le=O(9933),Fe=O(4314),Xe=O(4528),mt=O(923),ft=O(6513),Zt=O(3744),Tt=O(8388),On=O(9377),_i=O(129),Ti=O(554),Ri=O(4294),Yi=O(8885);const Wn=function vr(M,Z){if(("constructor"!==Z||"function"!=typeof M[Z])&&"__proto__"!=Z)return M[Z]};var Pi=O(9898),ki=O(133);const Qs=function qi(M,Z,le,be,Se,Re,We){var _t=Wn(M,le),Rt=Wn(Z,le),en=We.get(Rt);if(en)tt(M,le,en);else{var dn=Re?Re(_t,Rt,le+"",M,Z,We):void 0,ii=void 0===dn;if(ii){var Qi=(0,Zt.A)(Rt),Or=!Qi&&(0,On.A)(Rt),Ds=!Qi&&!Or&&(0,Yi.A)(Rt);dn=Rt,Qi||Or||Ds?(0,Zt.A)(_t)?dn=_t:(0,Tt.A)(_t)?dn=(0,Xe.A)(_t):Or?(ii=!1,dn=(0,Le.A)(Rt,!0)):Ds?(ii=!1,dn=(0,Fe.A)(Rt,!0)):dn=[]:(0,Ri.A)(Rt)||(0,ft.A)(Rt)?(dn=_t,(0,ft.A)(_t)?dn=function Mi(M){return(0,Pi.A)(M,(0,ki.A)(M))}(_t):(!(0,Ti.A)(_t)||(0,_i.A)(_t))&&(dn=(0,mt.A)(Rt))):ii=!1}ii&&(We.set(Rt,dn),Se(dn,Rt,be,Re,We),We.delete(Rt)),tt(M,le,dn)}},ei=function ko(M,Z,le,be,Se){M!==Z&&(0,Ze.A)(Z,function(Re,We){if(Se||(Se=new ge.A),(0,Ti.A)(Re))Qs(M,Z,We,le,ko,be,Se);else{var _t=be?be(Wn(M,We),Re,We+"",M,Z,Se):void 0;void 0===_t&&(_t=Re),tt(M,We,_t)}},ki.A)};var jt=O(363),pn=O(7357);const xi=function ln(M){return(0,jt.A)(function(Z,le){var be=-1,Se=le.length,Re=Se>1?le[Se-1]:void 0,We=Se>2?le[2]:void 0;for(Re=M.length>3&&"function"==typeof Re?(Se--,Re):void 0,We&&(0,pn.A)(le[0],le[1],We)&&(Re=Se<3?void 0:Re,Se=1),Z=Object(Z);++be<Se;){var _t=le[be];_t&&M(Z,_t,be,Re)}return Z})}(function(M,Z,le){ei(M,Z,le)});var Gt=O(3377),At=O(9311),Bt=O(4077);const Ln=function yn(M,Z,le){for(var be=-1,Se=M.length;++be<Se;){var Re=M[be],We=Z(Re);if(null!=We&&(void 0===_t?We==We&&!(0,Bt.A)(We):le(We,_t)))var _t=We,Rt=Re}return Rt},nn=function zt(M,Z){return M>Z};var mn=O(7003);const ai=function ti(M){return M&&M.length?Ln(M,mn.A,nn):void 0},oo=function ns(M){var Z=null==M?0:M.length;return Z?M[Z-1]:void 0};var ao=O(4620),Co=O(6385);const Rs=function Do(M,Z){var le={};return Z=(0,Co.A)(Z,3),(0,ao.A)(M,function(be,Se,Re){(0,we.A)(le,Se,Z(be,Se,Re))}),le};var Us=O(5113);const jo=function ea(M,Z){return M<Z},$a=function Js(M){return M&&M.length?Ln(M,mn.A,jo):void 0};var Xl=O(1860);const dc=function(){return Xl.A.Date.now()};function Ca(M,Z,le,be){var Se;do{Se=U.A(be)}while(M.hasNode(Se));return le.dummy=Z,M.setNode(Se,le),Se}function yl(M){var Z=new ne.T({multigraph:M.isMultigraph()}).setGraph(M.graph());return R.A(M.nodes(),function(le){M.children(le).length||Z.setNode(le,M.node(le))}),R.A(M.edges(),function(le){Z.setEdge(le,M.edge(le))}),Z}function fc(M,Z){var Rt,en,le=M.x,be=M.y,Se=Z.x-le,Re=Z.y-be,We=M.width/2,_t=M.height/2;if(!Se&&!Re)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Re)*We>Math.abs(Se)*_t?(Re<0&&(_t=-_t),Rt=_t*Se/Re,en=_t):(Se<0&&(We=-We),Rt=We,en=We*Re/Se),{x:le+Rt,y:be+en}}function Ir(M){var Z=A.A(F.A(Ne(M)+1),function(){return[]});return R.A(M.nodes(),function(le){var be=M.node(le),Se=be.rank;Us.A(Se)||(Z[Se][be.order]=le)}),Z}function dr(M,Z,le,be){var Se={width:0,height:0};return arguments.length>=4&&(Se.rank=le,Se.order=be),Ca(M,"border",Se,Z)}function Ne(M){return ai(A.A(M.nodes(),function(Z){var le=M.node(Z).rank;if(!Us.A(le))return le}))}function Ki(M,Z){var le=dc();try{return Z()}finally{console.log(M+" time: "+(dc()-le)+"ms")}}function Xi(M,Z){return Z()}function oi(M,Z,le,be,Se,Re){var _t=Se[Z][Re-1],Rt=Ca(M,"border",{width:0,height:0,rank:Re,borderType:Z},le);Se[Z][Re]=Rt,M.setParent(Rt,be),_t&&M.setEdge(_t,Rt,{weight:1})}function lo(M){R.A(M.nodes(),function(Z){Nr(M.node(Z))}),R.A(M.edges(),function(Z){Nr(M.edge(Z))})}function Nr(M){var Z=M.width;M.width=M.height,M.height=Z}function Zi(M){M.y=-M.y}function Hr(M){var Z=M.x;M.x=M.y,M.y=Z}const Di=function oa(M,Z){return M&&M.length?Ln(M,(0,Co.A)(Z,2),jo):void 0};function $o(M){var Z={};R.A(M.sources(),function le(be){var Se=M.node(be);if(q.A(Z,be))return Se.rank;Z[be]=!0;var Re=$a(A.A(M.outEdges(be),function(We){return le(We.w)-M.edge(We).minlen}));return(Re===Number.POSITIVE_INFINITY||null==Re)&&(Re=0),Se.rank=Re})}function Ga(M,Z){return M.node(Z.w).rank-M.node(Z.v).rank-M.edge(Z).minlen}function Yr(M){var Se,Re,Z=new ne.T({directed:!1}),le=M.nodes()[0],be=M.nodeCount();for(Z.setNode(le,{});Ta(Z,M)<be;)Se=Ol(Z,M),Re=Z.hasNode(Se.v)?Ga(M,Se):-Ga(M,Se),Pr(Z,M,Re);return Z}function Ta(M,Z){return R.A(M.nodes(),function le(be){R.A(Z.nodeEdges(be),function(Se){var Re=Se.v,We=be===Re?Se.w:Re;!M.hasNode(We)&&!Ga(Z,Se)&&(M.setNode(We,{}),M.setEdge(be,We,{}),le(We))})}),M.nodeCount()}function Ol(M,Z){return Di(Z.edges(),function(le){if(M.hasNode(le.v)!==M.hasNode(le.w))return Ga(Z,le)})}function Pr(M,Z,le){R.A(M.nodes(),function(be){Z.node(be).rank+=le})}var gs=O(1287),ms=O(4429);var _s=O(8556),cr=O(5809);var co=Math.max;const Mo=function ql(M){return function(Z,le,be){var Se=Object(Z);if(!(0,gs.A)(Z)){var Re=(0,Co.A)(le,3);Z=(0,ms.A)(Z),le=function(_t){return Re(Se[_t],_t,Se)}}var We=M(Z,le,be);return We>-1?Se[Re?Z[We]:We]:void 0}}(function ys(M,Z,le){var be=null==M?0:M.length;if(!be)return-1;var Se=null==le?0:function Ui(M){var Z=(0,cr.A)(M),le=Z%1;return Z==Z?le?Z-le:Z:0}(le);return Se<0&&(Se=co(be+Se,0)),(0,_s.A)(M,(0,Co.A)(Z,3),Se)});var wt=O(3578);te.A(1),te.A(1),O(3660),O(1938),O(5281),O(2661),(0,O(1392).A)("length"),RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ol="\\ud800-\\udfff",Et="["+ol+"]",Yn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",hi="\\ud83c[\\udffb-\\udfff]",Go="[^"+ol+"]",Ys="(?:\\ud83c[\\udde6-\\uddff]){2}",Xs="[\\ud800-\\udbff][\\udc00-\\udfff]",zo="(?:"+Yn+"|"+hi+")?",wl="[\\ufe0e\\ufe0f]?",Ea=wl+zo+"(?:\\u200d(?:"+[Go,Ys,Xs].join("|")+")"+wl+zo+")*",Dr="(?:"+[Go+Yn+"?",Yn,Ys,Xs,Et].join("|")+")";function Rh(M,Z,le){Zt.A(Z)||(Z=[Z]);var be=(M.isDirected()?M.successors:M.neighbors).bind(M),Se=[],Re={};return R.A(Z,function(We){if(!M.hasNode(We))throw new Error("Graph does not have node: "+We);Oc(M,We,"post"===le,Re,be,Se)}),Se}function Oc(M,Z,le,be,Se,Re){q.A(be,Z)||(be[Z]=!0,le||Re.push(Z),R.A(Se(Z),function(We){Oc(M,We,le,be,Se,Re)}),le&&Re.push(Z))}function La(M){M=function Zr(M){var Z=(new ne.T).setGraph(M.graph());return R.A(M.nodes(),function(le){Z.setNode(le,M.node(le))}),R.A(M.edges(),function(le){var be=Z.edge(le.v,le.w)||{weight:0,minlen:1},Se=M.edge(le);Z.setEdge(le.v,le.w,{weight:be.weight+Se.weight,minlen:Math.max(be.minlen,Se.minlen)})}),Z}(M),$o(M);var le,Z=Yr(M);for(Ud(Z),Df(Z,M);le=Pp(Z);)Fh(Z,M,le,Ii(Z,M,le))}function Df(M,Z){var le=function Kc(M,Z){return Rh(M,Z,"post")}(M,M.nodes());le=le.slice(0,le.length-1),R.A(le,function(be){!function Mf(M,Z,le){var be=M.node(le);M.edge(le,be.parent).cutvalue=Rc(M,Z,le)}(M,Z,be)})}function Rc(M,Z,le){var Se=M.node(le).parent,Re=!0,We=Z.edge(le,Se),_t=0;return We||(Re=!1,We=Z.edge(Se,le)),_t=We.weight,R.A(Z.nodeEdges(le),function(Rt){var en=Rt.v===le,dn=en?Rt.w:Rt.v;if(dn!==Se){var ii=en===Re,Qi=Z.edge(Rt).weight;if(_t+=ii?Qi:-Qi,function Lh(M,Z,le){return M.hasEdge(Z,le)}(M,le,dn)){var Or=M.edge(le,dn).cutvalue;_t+=ii?-Or:Or}}}),_t}function Ud(M,Z){arguments.length<2&&(Z=M.nodes()[0]),Pc(M,{},1,Z)}function Pc(M,Z,le,be,Se){var Re=le,We=M.node(be);return Z[be]=!0,R.A(M.neighbors(be),function(_t){q.A(Z,_t)||(le=Pc(M,Z,le,_t,be))}),We.low=Re,We.lim=le++,Se?We.parent=Se:delete We.parent,le}function Pp(M){return Mo(M.edges(),function(Z){return M.edge(Z).cutvalue<0})}function Ii(M,Z,le){var be=le.v,Se=le.w;Z.hasEdge(be,Se)||(be=le.w,Se=le.v);var Re=M.node(be),We=M.node(Se),_t=Re,Rt=!1;Re.lim>We.lim&&(_t=We,Rt=!0);var en=wt.A(Z.edges(),function(dn){return Rt===vu(0,M.node(dn.v),_t)&&Rt!==vu(0,M.node(dn.w),_t)});return Di(en,function(dn){return Ga(Z,dn)})}function Fh(M,Z,le,be){M.removeEdge(le.v,le.w),M.setEdge(be.v,be.w,{}),Ud(M),Df(M,Z),function $t(M,Z){var le=Mo(M.nodes(),function(Se){return!Z.node(Se).parent}),be=function ud(M,Z){return Rh(M,Z,"pre")}(M,le);be=be.slice(1),R.A(be,function(Se){var Re=M.node(Se).parent,We=Z.edge(Se,Re),_t=!1;We||(We=Z.edge(Re,Se),_t=!0),Z.node(Se).rank=Z.node(Re).rank+(_t?We.minlen:-We.minlen)})}(M,Z)}function vu(M,Z,le){return le.low<=Z.lim&&Z.lim<=le.lim}function dd(M){switch(M.graph().ranker){case"network-simplex":default:!function zd(M){La(M)}(M);break;case"tight-tree":!function Fp(M){$o(M),Yr(M)}(M);break;case"longest-path":Hu(M)}}RegExp(hi+"(?="+hi+")|"+Dr+Ea,"g"),new Error,O(6702),La.initLowLimValues=Ud,La.initCutValues=Df,La.calcCutValue=Rc,La.leaveEdge=Pp,La.enterEdge=Ii,La.exchangeEdges=Fh;var Hu=$o;var ju=O(8456),Zc=O(8209);function Ya(M){var Z=Ca(M,"root",{},"_root"),le=function Ig(M){var Z={};function le(be,Se){var Re=M.children(be);Re&&Re.length&&R.A(Re,function(We){le(We,Se+1)}),Z[be]=Se}return R.A(M.children(),function(be){le(be,1)}),Z}(M),be=ai(ju.A(le))-1,Se=2*be+1;M.graph().nestingRoot=Z,R.A(M.edges(),function(We){M.edge(We).minlen*=Se});var Re=function Qc(M){return Zc.A(M.edges(),function(Z,le){return Z+M.edge(le).weight},0)}(M)+1;R.A(M.children(),function(We){Hd(M,Z,Se,Re,be,le,We)}),M.graph().nodeRankFactor=Se}function Hd(M,Z,le,be,Se,Re,We){var _t=M.children(We);if(_t.length){var Rt=dr(M,"_bt"),en=dr(M,"_bb"),dn=M.node(We);M.setParent(Rt,We),dn.borderTop=Rt,M.setParent(en,We),dn.borderBottom=en,R.A(_t,function(ii){Hd(M,Z,le,be,Se,Re,ii);var Qi=M.node(ii),Or=Qi.borderTop?Qi.borderTop:ii,Ds=Qi.borderBottom?Qi.borderBottom:ii,Eo=Qi.borderTop?be:2*be,no=Or!==Ds?1:Se-Re[We]+1;M.setEdge(Rt,Or,{weight:Eo,minlen:no,nestingEdge:!0}),M.setEdge(Ds,en,{weight:Eo,minlen:no,nestingEdge:!0})}),M.parent(We)||M.setEdge(Z,Rt,{weight:0,minlen:Se+Re[We]})}else We!==Z&&M.setEdge(Z,We,{weight:0,minlen:le})}var ta=O(6854);const $d=function bu(M){return(0,ta.A)(M,5)};var Wd=O(1984);const If=function pd(M,Z){return function Tl(M,Z,le){for(var be=-1,Se=M.length,Re=Z.length,We={};++be<Se;)le(We,M[be],be<Re?Z[be]:void 0);return We}(M||[],Z||[],Wd.A)};var Nf=O(4367),Zl=O(6689),zs=O(4501),wu=O(9103);var Gd=O(778);const Ql=function Of(M,Z){if(M!==Z){var le=void 0!==M,be=null===M,Se=M==M,Re=(0,Bt.A)(M),We=void 0!==Z,_t=null===Z,Rt=Z==Z,en=(0,Bt.A)(Z);if(!_t&&!en&&!Re&&M>Z||Re&&We&&Rt&&!_t&&!en||be&&We&&Rt||!le&&Rt||!Se)return 1;if(!be&&!Re&&!en&&M<Z||en&&le&&Se&&!be&&!Re||_t&&le&&Se||!We&&Se||!Rt)return-1}return 0},Ff=function Pf(M,Z,le){Z=Z.length?(0,Zl.A)(Z,function(Re){return(0,Zt.A)(Re)?function(We){return(0,zs.A)(We,1===Re.length?Re[0]:Re)}:Re}):[mn.A];var be=-1;return Z=(0,Zl.A)(Z,(0,Gd.A)(Co.A)),function Fc(M,Z){var le=M.length;for(M.sort(Z);le--;)M[le]=M[le].value;return M}((0,wu.A)(M,function(Re,We,_t){return{criteria:(0,Zl.A)(Z,function(en){return en(Re)}),index:++be,value:Re}}),function(Re,We){return function uo(M,Z,le){for(var be=-1,Se=M.criteria,Re=Z.criteria,We=Se.length,_t=le.length;++be<We;){var Rt=Ql(Se[be],Re[be]);if(Rt)return be>=_t?Rt:Rt*("desc"==le[be]?-1:1)}return M.index-Z.index}(Re,We,le)})},Lc=(0,jt.A)(function(M,Z){if(null==M)return[];var le=Z.length;return le>1&&(0,pn.A)(M,Z[0],Z[1])?Z=[]:le>2&&(0,pn.A)(Z[0],Z[1],Z[2])&&(Z=[Z[0]]),Ff(M,(0,Nf.A)(Z,1),[])});function Xd(M,Z){for(var le=0,be=1;be<Z.length;++be)le+=Bp(M,Z[be-1],Z[be]);return le}function Bp(M,Z,le){for(var be=If(le,A.A(le,function(en,dn){return dn})),Se=re.A(A.A(Z,function(en){return Lc(A.A(M.outEdges(en),function(dn){return{pos:be[dn.w],weight:M.edge(dn).weight}}),"pos")})),Re=1;Re<le.length;)Re<<=1;var We=2*Re-1;Re-=1;var _t=A.A(new Array(We),function(){return 0}),Rt=0;return R.A(Se.forEach(function(en){var dn=en.pos+Re;_t[dn]+=en.weight;for(var ii=0;dn>0;)dn%2&&(ii+=_t[dn+1]),_t[dn=dn-1>>1]+=en.weight;Rt+=en.weight*ii})),Rt}function Uh(M,Z,le){for(var be;Z.length&&(be=oo(Z)).i<=le;)Z.pop(),M.push(be.vs),le++;return le}function Up(M,Z,le,be){var Se=M.children(Z),Re=M.node(Z),We=Re?Re.borderLeft:void 0,_t=Re?Re.borderRight:void 0,Rt={};We&&(Se=wt.A(Se,function(Ds){return Ds!==We&&Ds!==_t}));var en=function $u(M,Z){return A.A(Z,function(le){var be=M.inEdges(le);if(be.length){var Se=Zc.A(be,function(Re,We){var _t=M.edge(We),Rt=M.node(We.v);return{sum:Re.sum+_t.weight*Rt.order,weight:Re.weight+_t.weight}},{sum:0,weight:0});return{v:le,barycenter:Se.sum/Se.weight,weight:Se.weight}}return{v:le}})}(M,Se);R.A(en,function(Ds){if(M.children(Ds.v).length){var Eo=Up(M,Ds.v,le,be);Rt[Ds.v]=Eo,q.A(Eo,"barycenter")&&function Og(M,Z){Us.A(M.barycenter)?(M.barycenter=Z.barycenter,M.weight=Z.weight):(M.barycenter=(M.barycenter*M.weight+Z.barycenter*Z.weight)/(M.weight+Z.weight),M.weight+=Z.weight)}(Ds,Eo)}});var dn=function Vh(M,Z){var le={};return R.A(M,function(Se,Re){var We=le[Se.v]={indegree:0,in:[],out:[],vs:[Se.v],i:Re};Us.A(Se.barycenter)||(We.barycenter=Se.barycenter,We.weight=Se.weight)}),R.A(Z.edges(),function(Se){var Re=le[Se.v],We=le[Se.w];!Us.A(Re)&&!Us.A(We)&&(We.indegree++,Re.out.push(le[Se.w]))}),function Vp(M){var Z=[];function le(Re){return function(We){We.merged||(Us.A(We.barycenter)||Us.A(Re.barycenter)||We.barycenter>=Re.barycenter)&&function xl(M,Z){var le=0,be=0;M.weight&&(le+=M.barycenter*M.weight,be+=M.weight),Z.weight&&(le+=Z.barycenter*Z.weight,be+=Z.weight),M.vs=Z.vs.concat(M.vs),M.barycenter=le/be,M.weight=be,M.i=Math.min(Z.i,M.i),Z.merged=!0}(Re,We)}}function be(Re){return function(We){We.in.push(Re),0==--We.indegree&&M.push(We)}}for(;M.length;){var Se=M.pop();Z.push(Se),R.A(Se.in.reverse(),le(Se)),R.A(Se.out,be(Se))}return A.A(wt.A(Z,function(Re){return!Re.merged}),function(Re){return Gt.A(Re,["vs","i","barycenter","weight"])})}(wt.A(le,function(Se){return!Se.indegree}))}(en,le);!function Ng(M,Z){R.A(M,function(le){le.vs=re.A(le.vs.map(function(be){return Z[be]?Z[be].vs:be}))})}(dn,Rt);var ii=function Lf(M,Z){var le=function li(M,Z){var le={lhs:[],rhs:[]};return R.A(M,function(be){Z(be)?le.lhs.push(be):le.rhs.push(be)}),le}(M,function(dn){return q.A(dn,"barycenter")}),be=le.lhs,Se=Lc(le.rhs,function(dn){return-dn.i}),Re=[],We=0,_t=0,Rt=0;be.sort(function Bf(M){return function(Z,le){return Z.barycenter<le.barycenter?-1:Z.barycenter>le.barycenter?1:M?le.i-Z.i:Z.i-le.i}}(!!Z)),Rt=Uh(Re,Se,Rt),R.A(be,function(dn){Rt+=dn.vs.length,Re.push(dn.vs),We+=dn.barycenter*dn.weight,_t+=dn.weight,Rt=Uh(Re,Se,Rt)});var en={vs:re.A(Re)};return _t&&(en.barycenter=We/_t,en.weight=_t),en}(dn,be);if(We&&(ii.vs=re.A([We,ii.vs,_t]),M.predecessors(We).length)){var Qi=M.node(M.predecessors(We)[0]),Or=M.node(M.predecessors(_t)[0]);q.A(ii,"barycenter")||(ii.barycenter=0,ii.weight=0),ii.barycenter=(ii.barycenter*ii.weight+Qi.order+Or.order)/(ii.weight+2),ii.weight+=2}return ii}function Uf(M,Z,le){return A.A(Z,function(be){return function Lp(M,Z,le){var be=function hd(M){for(var Z;M.hasNode(Z=U.A("_root")););return Z}(M),Se=new ne.T({compound:!0}).setGraph({root:be}).setDefaultNodeLabel(function(Re){return M.node(Re)});return R.A(M.nodes(),function(Re){var We=M.node(Re),_t=M.parent(Re);(We.rank===Z||We.minRank<=Z&&Z<=We.maxRank)&&(Se.setNode(Re),Se.setParent(Re,_t||be),R.A(M[le](Re),function(Rt){var en=Rt.v===Re?Rt.w:Rt.v,dn=Se.edge(en,Re),ii=Us.A(dn)?0:dn.weight;Se.setEdge(en,Re,{weight:M.edge(Rt).weight+ii})}),q.A(We,"minRank")&&Se.setNode(Re,{borderLeft:We.borderLeft[Z],borderRight:We.borderRight[Z]}))}),Se}(M,be,le)})}function zp(M,Z){var le=new ne.T;R.A(M,function(be){var Se=be.graph().root,Re=Up(be,Se,le,Z);R.A(Re.vs,function(We,_t){be.node(We).order=_t}),function Cl(M,Z,le){var Se,be={};R.A(le,function(Re){for(var _t,Rt,We=M.parent(Re);We;){if((_t=M.parent(We))?(Rt=be[_t],be[_t]=We):(Rt=Se,Se=We),Rt&&Rt!==We)return void Z.setEdge(Rt,We);We=_t}})}(be,le,Re.vs)})}function mc(M,Z){R.A(Z,function(le){R.A(le,function(be,Se){M.node(be).order=Se})})}var Fs=O(9395);const vi=function Hp(M,Z){return null==M?M:(0,Ze.A)(M,(0,Fs.A)(Z),ki.A)};function ca(M,Z,le){if(Z>le){var be=Z;Z=le,le=be}var Se=M[Z];Se||(M[Z]=Se={}),Se[le]=!0}function Pl(M,Z,le){if(Z>le){var be=Z;Z=le,le=be}return q.A(M[Z],le)}function xu(M){var Se,Z=Ir(M),le=xi(function Yo(M,Z){var le={};return Zc.A(Z,function be(Se,Re){var We=0,_t=0,Rt=Se.length,en=oo(Re);return R.A(Re,function(dn,ii){var Qi=function Xo(M,Z){if(M.node(Z).dummy)return Mo(M.predecessors(Z),function(le){return M.node(le).dummy})}(M,dn),Or=Qi?M.node(Qi).order:Rt;(Qi||dn===en)&&(R.A(Re.slice(_t,ii+1),function(Ds){R.A(M.predecessors(Ds),function(Eo){var no=M.node(Eo),Xn=no.order;(Xn<We||Or<Xn)&&(!no.dummy||!M.node(Ds).dummy)&&ca(le,Eo,Ds)})}),_t=ii+1,We=Or)}),Re}),le}(M,Z),function Jr(M,Z){var le={};function be(Re,We,_t,Rt,en){var dn;R.A(F.A(We,_t),function(ii){M.node(dn=Re[ii]).dummy&&R.A(M.predecessors(dn),function(Qi){var Or=M.node(Qi);Or.dummy&&(Or.order<Rt||Or.order>en)&&ca(le,Qi,dn)})})}return Zc.A(Z,function Se(Re,We){var Rt,_t=-1,en=0;return R.A(We,function(dn,ii){if("border"===M.node(dn).dummy){var Qi=M.predecessors(dn);Qi.length&&(Rt=M.node(Qi[0]).order,be(We,en,ii,_t,Rt),en=ii,_t=Rt)}be(We,en,We.length,Rt,Re.length)}),We}),le}(M,Z)),be={};R.A(["u","d"],function(We){Se="u"===We?Z:ju.A(Z).reverse(),R.A(["l","r"],function(_t){"r"===_t&&(Se=A.A(Se,function(ii){return ju.A(ii).reverse()}));var Rt=("u"===We?M.predecessors:M.successors).bind(M),en=function Xa(M,Z,le,be){var Se={},Re={},We={};return R.A(Z,function(_t){R.A(_t,function(Rt,en){Se[Rt]=Rt,Re[Rt]=Rt,We[Rt]=en})}),R.A(Z,function(_t){var Rt=-1;R.A(_t,function(en){var dn=be(en);if(dn.length)for(var ii=((dn=Lc(dn,function(Eo){return We[Eo]})).length-1)/2,Qi=Math.floor(ii),Or=Math.ceil(ii);Qi<=Or;++Qi){var Ds=dn[Qi];Re[en]===en&&Rt<We[Ds]&&!Pl(le,en,Ds)&&(Re[Ds]=en,Re[en]=Se[en]=Se[Ds],Rt=We[Ds])}})}),{root:Se,align:Re}}(0,Se,le,Rt),dn=function zf(M,Z,le,be,Se){var Re={},We=function Gi(M,Z,le,be){var Se=new ne.T,Re=M.graph(),We=function md(M,Z,le){return function(be,Se,Re){var en,We=be.node(Se),_t=be.node(Re),Rt=0;if(Rt+=We.width/2,q.A(We,"labelpos"))switch(We.labelpos.toLowerCase()){case"l":en=-We.width/2;break;case"r":en=We.width/2}if(en&&(Rt+=le?en:-en),en=0,Rt+=(We.dummy?Z:M)/2,Rt+=(_t.dummy?Z:M)/2,Rt+=_t.width/2,q.A(_t,"labelpos"))switch(_t.labelpos.toLowerCase()){case"l":en=_t.width/2;break;case"r":en=-_t.width/2}return en&&(Rt+=le?en:-en),en=0,Rt}}(Re.nodesep,Re.edgesep,be);return R.A(Z,function(_t){var Rt;R.A(_t,function(en){var dn=le[en];if(Se.setNode(dn),Rt){var ii=le[Rt],Qi=Se.edge(ii,dn);Se.setEdge(ii,dn,Math.max(We(M,en,Rt),Qi||0))}Rt=en})}),Se}(M,Z,le,Se),_t=Se?"borderLeft":"borderRight";function Rt(ii,Qi){for(var Or=We.nodes(),Ds=Or.pop(),Eo={};Ds;)Eo[Ds]?ii(Ds):(Eo[Ds]=!0,Or.push(Ds),Or=Or.concat(Qi(Ds))),Ds=Or.pop()}return Rt(function en(ii){Re[ii]=We.inEdges(ii).reduce(function(Qi,Or){return Math.max(Qi,Re[Or.v]+We.edge(Or))},0)},We.predecessors.bind(We)),Rt(function dn(ii){var Qi=We.outEdges(ii).reduce(function(Ds,Eo){return Math.min(Ds,Re[Eo.w]-We.edge(Eo))},Number.POSITIVE_INFINITY),Or=M.node(ii);Qi!==Number.POSITIVE_INFINITY&&Or.borderType!==_t&&(Re[ii]=Math.max(Re[ii],Qi))},We.successors.bind(We)),R.A(be,function(ii){Re[ii]=Re[le[ii]]}),Re}(M,Se,en.root,en.align,"r"===_t);"r"===_t&&(dn=Rs(dn,function(ii){return-ii})),be[We+_t]=dn})});var Re=function Wu(M,Z){return Di(ju.A(Z),function(le){var be=Number.NEGATIVE_INFINITY,Se=Number.POSITIVE_INFINITY;return vi(le,function(Re,We){var _t=function qd(M,Z){return M.node(Z).width}(M,We)/2;be=Math.max(Re+_t,be),Se=Math.min(Re-_t,Se)}),be-Se})}(M,be);return function jp(M,Z){var le=ju.A(Z),be=$a(le),Se=ai(le);R.A(["u","d"],function(Re){R.A(["l","r"],function(We){var en,_t=Re+We,Rt=M[_t];if(Rt!==Z){var dn=ju.A(Rt);(en="l"===We?be-$a(dn):Se-ai(dn))&&(M[_t]=Rs(Rt,function(ii){return ii+en}))}})})}(be,Re),function Fl(M,Z){return Rs(M.ul,function(le,be){if(Z)return M[Z.toLowerCase()][be];var Se=Lc(A.A(M,be));return(Se[1]+Se[2])/2})}(be,M.graph().align)}function zh(M,Z){var le=Z&&Z.debugTiming?Ki:Xi;le("layout",function(){var be=le("  buildLayoutGraph",function(){return function eu(M){var Z=new ne.T({multigraph:!0,compound:!0}),le=Jl(M.graph());return Z.setGraph(xi({},Kd,yc(le,Hh),Gt.A(le,Hf))),R.A(M.nodes(),function(be){var Se=Jl(M.node(be));Z.setNode(be,At.A(yc(Se,Jc),Rg)),Z.setParent(be,M.parent(be))}),R.A(M.edges(),function(be){var Se=Jl(M.edge(be));Z.setEdge(be,xi({},_d,yc(Se,jh),Gt.A(Se,Pg)))}),Z}(M)});le("  runLayout",function(){!function ll(M,Z){Z("    makeSpaceForEdgeLabels",function(){!function Ll(M){var Z=M.graph();Z.ranksep/=2,R.A(M.edges(),function(le){var be=M.edge(le);be.minlen*=2,"c"!==be.labelpos.toLowerCase()&&("TB"===Z.rankdir||"BT"===Z.rankdir?be.width+=be.labeloffset:be.height+=be.labeloffset)})}(M)}),Z("    removeSelfEdges",function(){!function jf(M){R.A(M.edges(),function(Z){if(Z.v===Z.w){var le=M.node(Z.v);le.selfEdges||(le.selfEdges=[]),le.selfEdges.push({e:Z,label:M.edge(Z)}),M.removeEdge(Z)}})}(M)}),Z("    acyclic",function(){G(M)}),Z("    nestingGraph.run",function(){Ya(M)}),Z("    rank",function(){dd(yl(M))}),Z("    injectEdgeLabelProxies",function(){!function Sl(M){R.A(M.edges(),function(Z){var le=M.edge(Z);if(le.width&&le.height){var be=M.node(Z.v),Se=M.node(Z.w);Ca(M,"edge-proxy",{rank:(Se.rank-be.rank)/2+be.rank,e:Z},"_ep")}})}(M)}),Z("    removeEmptyRanks",function(){!function Gn(M){var Z=$a(A.A(M.nodes(),function(Re){return M.node(Re).rank})),le=[];R.A(M.nodes(),function(Re){var We=M.node(Re).rank-Z;le[We]||(le[We]=[]),le[We].push(Re)});var be=0,Se=M.graph().nodeRankFactor;R.A(le,function(Re,We){Us.A(Re)&&We%Se!=0?--be:be&&R.A(Re,function(_t){M.node(_t).rank+=be})})}(M)}),Z("    nestingGraph.cleanup",function(){!function jd(M){var Z=M.graph();M.removeNode(Z.nestingRoot),delete Z.nestingRoot,R.A(M.edges(),function(le){M.edge(le).nestingEdge&&M.removeEdge(le)})}(M)}),Z("    normalizeRanks",function(){!function hn(M){var Z=$a(A.A(M.nodes(),function(le){return M.node(le).rank}));R.A(M.nodes(),function(le){var be=M.node(le);q.A(be,"rank")&&(be.rank-=Z)})}(M)}),Z("    assignRankMinMax",function(){!function Yu(M){var Z=0;R.A(M.nodes(),function(le){var be=M.node(le);be.borderTop&&(be.minRank=M.node(be.borderTop).rank,be.maxRank=M.node(be.borderBottom).rank,Z=ai(Z,be.maxRank))}),M.graph().maxRank=Z}(M)}),Z("    removeEdgeLabelProxies",function(){!function _c(M){R.A(M.nodes(),function(Z){var le=M.node(Z);"edge-proxy"===le.dummy&&(M.edge(le.e).labelRank=le.rank,M.removeNode(Z))})}(M)}),Z("    normalize.run",function(){!function xo(M){M.graph().dummyChains=[],R.A(M.edges(),function(Z){!function Uo(M,Z){var le=Z.v,be=M.node(le).rank,Se=Z.w,Re=M.node(Se).rank,We=Z.name,_t=M.edge(Z),Rt=_t.labelRank;if(Re!==be+1){var en,dn,ii;for(M.removeEdge(Z),ii=0,++be;be<Re;++ii,++be)_t.points=[],en=Ca(M,"edge",dn={width:0,height:0,edgeLabel:_t,edgeObj:Z,rank:be},"_d"),be===Rt&&(dn.width=_t.width,dn.height=_t.height,dn.dummy="edge-label",dn.labelpos=_t.labelpos),M.setEdge(le,en,{weight:_t.weight},We),0===ii&&M.graph().dummyChains.push(en),le=en;M.setEdge(le,Se,{weight:_t.weight},We)}}(M,Z)})}(M)}),Z("    parentDummyChains",function(){!function bs(M){var Z=function gd(M){var Z={},le=0;return R.A(M.children(),function be(Se){var Re=le;R.A(M.children(Se),be),Z[Se]={low:Re,lim:le++}}),Z}(M);R.A(M.graph().dummyChains,function(le){for(var be=M.node(le),Se=be.edgeObj,Re=function El(M,Z,le,be){var Rt,en,Se=[],Re=[],We=Math.min(Z[le].low,Z[be].low),_t=Math.max(Z[le].lim,Z[be].lim);Rt=le;do{Rt=M.parent(Rt),Se.push(Rt)}while(Rt&&(Z[Rt].low>We||_t>Z[Rt].lim));for(en=Rt,Rt=be;(Rt=M.parent(Rt))!==en;)Re.push(Rt);return{path:Se.concat(Re.reverse()),lca:en}}(M,Z,Se.v,Se.w),We=Re.path,_t=Re.lca,Rt=0,en=We[Rt],dn=!0;le!==Se.w;){if(be=M.node(le),dn){for(;(en=We[Rt])!==_t&&M.node(en).maxRank<be.rank;)Rt++;en===_t&&(dn=!1)}if(!dn){for(;Rt<We.length-1&&M.node(en=We[Rt+1]).minRank<=be.rank;)Rt++;en=We[Rt]}M.setParent(le,en),le=M.successors(le)[0]}})}(M)}),Z("    addBorderSegments",function(){!function xr(M){R.A(M.children(),function Z(le){var be=M.children(le),Se=M.node(le);if(be.length&&R.A(be,Z),q.A(Se,"minRank")){Se.borderLeft=[],Se.borderRight=[];for(var Re=Se.minRank,We=Se.maxRank+1;Re<We;++Re)oi(M,"borderLeft","_bl",le,Se,Re),oi(M,"borderRight","_br",le,Se,Re)}})}(M)}),Z("    order",function(){!function Vf(M){var Z=Ne(M),le=Uf(M,F.A(1,Z+1),"inEdges"),be=Uf(M,F.A(Z-1,-1,-1),"outEdges"),Se=function Tu(M){var Z={},le=wt.A(M.nodes(),function(_t){return!M.children(_t).length}),be=ai(A.A(le,function(_t){return M.node(_t).rank})),Se=A.A(F.A(be+1),function(){return[]}),We=Lc(le,function(_t){return M.node(_t).rank});return R.A(We,function Re(_t){if(!q.A(Z,_t)){Z[_t]=!0;var Rt=M.node(_t);Se[Rt.rank].push(_t),R.A(M.successors(_t),Re)}}),Se}(M);mc(M,Se);for(var We,Re=Number.POSITIVE_INFINITY,_t=0,Rt=0;Rt<4;++_t,++Rt){zp(_t%2?le:be,_t%4>=2);var en=Xd(M,Se=Ir(M));en<Re&&(Rt=0,We=$d(Se),Re=en)}mc(M,We)}(M)}),Z("    insertSelfEdges",function(){!function Xu(M){var Z=Ir(M);R.A(Z,function(le){var be=0;R.A(le,function(Se,Re){var We=M.node(Se);We.order=Re+be,R.A(We.selfEdges,function(_t){Ca(M,"selfedge",{width:_t.label.width,height:_t.label.height,rank:We.rank,order:Re+ ++be,e:_t.e,label:_t.label},"_se")}),delete We.selfEdges})})}(M)}),Z("    adjustCoordinateSystem",function(){!function Yt(M){var Z=M.graph().rankdir.toLowerCase();("lr"===Z||"rl"===Z)&&lo(M)}(M)}),Z("    position",function(){!function qo(M){(function Gu(M){var Z=Ir(M),le=M.graph().ranksep,be=0;R.A(Z,function(Se){var Re=ai(A.A(Se,function(We){return M.node(We).height}));R.A(Se,function(We){M.node(We).y=be+Re/2}),be+=Re+le})})(M=yl(M)),R.A(xu(M),function(Z,le){M.node(le).x=Z})}(M)}),Z("    positionSelfEdges",function(){!function Qd(M){R.A(M.nodes(),function(Z){var le=M.node(Z);if("selfedge"===le.dummy){var be=M.node(le.e.v),Se=be.x+be.width/2,Re=be.y,We=le.x-Se,_t=be.height/2;M.setEdge(le.e,le.label),M.removeNode(Z),le.label.points=[{x:Se+2*We/3,y:Re-_t},{x:Se+5*We/6,y:Re-_t},{x:Se+We,y:Re},{x:Se+5*We/6,y:Re+_t},{x:Se+2*We/3,y:Re+_t}],le.label.x=le.x,le.label.y=le.y}})}(M)}),Z("    removeBorderNodes",function(){!function Fg(M){R.A(M.nodes(),function(Z){if(M.children(Z).length){var le=M.node(Z),be=M.node(le.borderTop),Se=M.node(le.borderBottom),Re=M.node(oo(le.borderLeft)),We=M.node(oo(le.borderRight));le.width=Math.abs(We.x-Re.x),le.height=Math.abs(Se.y-be.y),le.x=Re.x+le.width/2,le.y=be.y+le.height/2}}),R.A(M.nodes(),function(Z){"border"===M.node(Z).dummy&&M.removeNode(Z)})}(M)}),Z("    normalize.undo",function(){!function Fa(M){R.A(M.graph().dummyChains,function(Z){var Se,le=M.node(Z),be=le.edgeLabel;for(M.setEdge(le.edgeObj,be);le.dummy;)Se=M.successors(Z)[0],M.removeNode(Z),be.points.push({x:le.x,y:le.y}),"edge-label"===le.dummy&&(be.x=le.x,be.y=le.y,be.width=le.width,be.height=le.height),le=M.node(Z=Se)})}(M)}),Z("    fixupEdgeLabelCoords",function(){!function Gp(M){R.A(M.edges(),function(Z){var le=M.edge(Z);if(q.A(le,"x"))switch(("l"===le.labelpos||"r"===le.labelpos)&&(le.width-=le.labeloffset),le.labelpos){case"l":le.x-=le.width/2+le.labeloffset;break;case"r":le.x+=le.width/2+le.labeloffset}})}(M)}),Z("    undoCoordinateSystem",function(){!function To(M){var Z=M.graph().rankdir.toLowerCase();("bt"===Z||"rl"===Z)&&function Wa(M){R.A(M.nodes(),function(Z){Zi(M.node(Z))}),R.A(M.edges(),function(Z){var le=M.edge(Z);R.A(le.points,Zi),q.A(le,"y")&&Zi(le)})}(M),("lr"===Z||"rl"===Z)&&(function eo(M){R.A(M.nodes(),function(Z){Hr(M.node(Z))}),R.A(M.edges(),function(Z){var le=M.edge(Z);R.A(le.points,Hr),q.A(le,"x")&&Hr(le)})}(M),lo(M))}(M)}),Z("    translateGraph",function(){!function Wp(M){var Z=Number.POSITIVE_INFINITY,le=0,be=Number.POSITIVE_INFINITY,Se=0,Re=M.graph(),We=Re.marginx||0,_t=Re.marginy||0;function Rt(en){var dn=en.x,ii=en.y,Qi=en.width,Or=en.height;Z=Math.min(Z,dn-Qi/2),le=Math.max(le,dn+Qi/2),be=Math.min(be,ii-Or/2),Se=Math.max(Se,ii+Or/2)}R.A(M.nodes(),function(en){Rt(M.node(en))}),R.A(M.edges(),function(en){var dn=M.edge(en);q.A(dn,"x")&&Rt(dn)}),Z-=We,be-=_t,R.A(M.nodes(),function(en){var dn=M.node(en);dn.x-=Z,dn.y-=be}),R.A(M.edges(),function(en){var dn=M.edge(en);R.A(dn.points,function(ii){ii.x-=Z,ii.y-=be}),q.A(dn,"x")&&(dn.x-=Z),q.A(dn,"y")&&(dn.y-=be)}),Re.width=le-Z+We,Re.height=Se-be+_t}(M)}),Z("    assignNodeIntersects",function(){!function Zd(M){R.A(M.edges(),function(Z){var Re,We,le=M.edge(Z),be=M.node(Z.v),Se=M.node(Z.w);le.points?(Re=le.points[0],We=le.points[le.points.length-1]):(le.points=[],Re=Se,We=be),le.points.unshift(fc(be,Re)),le.points.push(fc(Se,We))})}(M)}),Z("    reversePoints",function(){!function yd(M){R.A(M.edges(),function(Z){var le=M.edge(Z);le.reversed&&le.points.reverse()})}(M)}),Z("    acyclic.undo",function(){!function ie(M){R.A(M.edges(),function(Z){var le=M.edge(Z);if(le.reversed){M.removeEdge(Z);var be=le.forwardName;delete le.reversed,delete le.forwardName,M.setEdge(Z.w,Z.v,le,be)}})}(M)})}(be,le)}),le("  updateInputGraph",function(){!function $p(M,Z){R.A(M.nodes(),function(le){var be=M.node(le),Se=Z.node(le);be&&(be.x=Se.x,be.y=Se.y,Z.children(le).length&&(be.width=Se.width,be.height=Se.height))}),R.A(M.edges(),function(le){var be=M.edge(le),Se=Z.edge(le);be.points=Se.points,q.A(Se,"x")&&(be.x=Se.x,be.y=Se.y)}),M.graph().width=Z.graph().width,M.graph().height=Z.graph().height}(M,be)})})}var Hh=["nodesep","edgesep","ranksep","marginx","marginy"],Kd={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Hf=["acyclicer","ranker","rankdir","align"],Jc=["width","height"],Rg={width:0,height:0},jh=["minlen","weight","width","height","labeloffset"],_d={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Pg=["labelpos"];function yc(M,Z){return Rs(Gt.A(M,Z),Number)}function Jl(M){var Z={};return R.A(M,function(le,be){Z[be.toLowerCase()]=le}),Z}},6702:(It,ke,O)=>{"use strict";O.d(ke,{T:()=>ki});var R=O(1981),U=O(1913),q=O(129),te=O(4429),re=O(3578),A=O(2036),F=O(9671),ne=O(5113),x=O(4367),k=O(363),I=O(8587),S=O(8556);const ee=function z(ei){return ei!=ei},ie=function K(ei,jt){return!(null==ei||!ei.length)&&function H(ei,jt,pn){return jt==jt?function Q(ei,jt,pn){for(var ln=pn-1,Fn=ei.length;++ln<Fn;)if(ei[ln]===jt)return ln;return-1}(ei,jt,pn):(0,S.A)(ei,ee,pn)}(ei,jt,0)>-1},we=function ge(ei,jt,pn){for(var ln=-1,Fn=null==ei?0:ei.length;++ln<Fn;)if(pn(jt,ei[ln]))return!0;return!1};var fe=O(5934),Te=O(4226);var Le=O(3998);const mt=Te.A&&1/(0,Le.A)(new Te.A([,-0]))[1]==1/0?function(ei){return new Te.A(ei)}:function tt(){};var On=O(8388);const Ti=(0,k.A)(function(ei){return function Zt(ei,jt,pn){var ln=-1,Fn=ie,Ci=ei.length,xi=!0,Gt=[],At=Gt;if(pn)xi=!1,Fn=we;else if(Ci>=200){var Bt=jt?null:mt(ei);if(Bt)return(0,Le.A)(Bt);xi=!1,Fn=fe.A,At=new I.A}else At=jt?[]:Gt;e:for(;++ln<Ci;){var yn=ei[ln],Ln=jt?jt(yn):yn;if(yn=pn||0!==yn?yn:0,xi&&Ln==Ln){for(var zt=At.length;zt--;)if(At[zt]===Ln)continue e;jt&&At.push(Ln),Gt.push(yn)}else Fn(At,Ln,pn)||(At!==Gt&&At.push(Ln),Gt.push(yn))}return Gt}((0,x.A)(ei,1,On.A,!0))});var Ri=O(8456),Yi=O(8209),vr="\0",Pi="\x01";class ki{constructor(jt={}){this._isDirected=!R.A(jt,"directed")||jt.directed,this._isMultigraph=!!R.A(jt,"multigraph")&&jt.multigraph,this._isCompound=!!R.A(jt,"compound")&&jt.compound,this._label=void 0,this._defaultNodeLabelFn=U.A(void 0),this._defaultEdgeLabelFn=U.A(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(jt){return this._label=jt,this}graph(){return this._label}setDefaultNodeLabel(jt){return q.A(jt)||(jt=U.A(jt)),this._defaultNodeLabelFn=jt,this}nodeCount(){return this._nodeCount}nodes(){return te.A(this._nodes)}sources(){var jt=this;return re.A(this.nodes(),function(pn){return A.A(jt._in[pn])})}sinks(){var jt=this;return re.A(this.nodes(),function(pn){return A.A(jt._out[pn])})}setNodes(jt,pn){var ln=arguments,Fn=this;return F.A(jt,function(Ci){ln.length>1?Fn.setNode(Ci,pn):Fn.setNode(Ci)}),this}setNode(jt,pn){return R.A(this._nodes,jt)?(arguments.length>1&&(this._nodes[jt]=pn),this):(this._nodes[jt]=arguments.length>1?pn:this._defaultNodeLabelFn(jt),this._isCompound&&(this._parent[jt]="\0",this._children[jt]={},this._children["\0"][jt]=!0),this._in[jt]={},this._preds[jt]={},this._out[jt]={},this._sucs[jt]={},++this._nodeCount,this)}node(jt){return this._nodes[jt]}hasNode(jt){return R.A(this._nodes,jt)}removeNode(jt){var pn=this;if(R.A(this._nodes,jt)){var ln=function(Fn){pn.removeEdge(pn._edgeObjs[Fn])};delete this._nodes[jt],this._isCompound&&(this._removeFromParentsChildList(jt),delete this._parent[jt],F.A(this.children(jt),function(Fn){pn.setParent(Fn)}),delete this._children[jt]),F.A(te.A(this._in[jt]),ln),delete this._in[jt],delete this._preds[jt],F.A(te.A(this._out[jt]),ln),delete this._out[jt],delete this._sucs[jt],--this._nodeCount}return this}setParent(jt,pn){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ne.A(pn))pn="\0";else{for(var ln=pn+="";!ne.A(ln);ln=this.parent(ln))if(ln===jt)throw new Error("Setting "+pn+" as parent of "+jt+" would create a cycle");this.setNode(pn)}return this.setNode(jt),this._removeFromParentsChildList(jt),this._parent[jt]=pn,this._children[pn][jt]=!0,this}_removeFromParentsChildList(jt){delete this._children[this._parent[jt]][jt]}parent(jt){if(this._isCompound){var pn=this._parent[jt];if("\0"!==pn)return pn}}children(jt){if(ne.A(jt)&&(jt="\0"),this._isCompound){var pn=this._children[jt];if(pn)return te.A(pn)}else{if("\0"===jt)return this.nodes();if(this.hasNode(jt))return[]}}predecessors(jt){var pn=this._preds[jt];if(pn)return te.A(pn)}successors(jt){var pn=this._sucs[jt];if(pn)return te.A(pn)}neighbors(jt){var pn=this.predecessors(jt);if(pn)return Ti(pn,this.successors(jt))}isLeaf(jt){return 0===(this.isDirected()?this.successors(jt):this.neighbors(jt)).length}filterNodes(jt){var pn=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});pn.setGraph(this.graph());var ln=this;F.A(this._nodes,function(xi,Gt){jt(Gt)&&pn.setNode(Gt,xi)}),F.A(this._edgeObjs,function(xi){pn.hasNode(xi.v)&&pn.hasNode(xi.w)&&pn.setEdge(xi,ln.edge(xi))});var Fn={};function Ci(xi){var Gt=ln.parent(xi);return void 0===Gt||pn.hasNode(Gt)?(Fn[xi]=Gt,Gt):Gt in Fn?Fn[Gt]:Ci(Gt)}return this._isCompound&&F.A(pn.nodes(),function(xi){pn.setParent(xi,Ci(xi))}),pn}setDefaultEdgeLabel(jt){return q.A(jt)||(jt=U.A(jt)),this._defaultEdgeLabelFn=jt,this}edgeCount(){return this._edgeCount}edges(){return Ri.A(this._edgeObjs)}setPath(jt,pn){var ln=this,Fn=arguments;return Yi.A(jt,function(Ci,xi){return Fn.length>1?ln.setEdge(Ci,xi,pn):ln.setEdge(Ci,xi),xi}),this}setEdge(){var jt,pn,ln,Fn,Ci=!1,xi=arguments[0];"object"==typeof xi&&null!==xi&&"v"in xi?(jt=xi.v,pn=xi.w,ln=xi.name,2===arguments.length&&(Fn=arguments[1],Ci=!0)):(jt=xi,pn=arguments[1],ln=arguments[3],arguments.length>2&&(Fn=arguments[2],Ci=!0)),jt=""+jt,pn=""+pn,ne.A(ln)||(ln=""+ln);var Gt=qi(this._isDirected,jt,pn,ln);if(R.A(this._edgeLabels,Gt))return Ci&&(this._edgeLabels[Gt]=Fn),this;if(!ne.A(ln)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(jt),this.setNode(pn),this._edgeLabels[Gt]=Ci?Fn:this._defaultEdgeLabelFn(jt,pn,ln);var At=function Qs(ei,jt,pn,ln){var Fn=""+jt,Ci=""+pn;if(!ei&&Fn>Ci){var xi=Fn;Fn=Ci,Ci=xi}var Gt={v:Fn,w:Ci};return ln&&(Gt.name=ln),Gt}(this._isDirected,jt,pn,ln);return jt=At.v,pn=At.w,Object.freeze(At),this._edgeObjs[Gt]=At,Mi(this._preds[pn],jt),Mi(this._sucs[jt],pn),this._in[pn][Gt]=At,this._out[jt][Gt]=At,this._edgeCount++,this}edge(jt,pn,ln){var Fn=1===arguments.length?ko(this._isDirected,arguments[0]):qi(this._isDirected,jt,pn,ln);return this._edgeLabels[Fn]}hasEdge(jt,pn,ln){var Fn=1===arguments.length?ko(this._isDirected,arguments[0]):qi(this._isDirected,jt,pn,ln);return R.A(this._edgeLabels,Fn)}removeEdge(jt,pn,ln){var Fn=1===arguments.length?ko(this._isDirected,arguments[0]):qi(this._isDirected,jt,pn,ln),Ci=this._edgeObjs[Fn];return Ci&&(jt=Ci.v,pn=Ci.w,delete this._edgeLabels[Fn],delete this._edgeObjs[Fn],or(this._preds[pn],jt),or(this._sucs[jt],pn),delete this._in[pn][Fn],delete this._out[jt][Fn],this._edgeCount--),this}inEdges(jt,pn){var ln=this._in[jt];if(ln){var Fn=Ri.A(ln);return pn?re.A(Fn,function(Ci){return Ci.v===pn}):Fn}}outEdges(jt,pn){var ln=this._out[jt];if(ln){var Fn=Ri.A(ln);return pn?re.A(Fn,function(Ci){return Ci.w===pn}):Fn}}nodeEdges(jt,pn){var ln=this.inEdges(jt,pn);if(ln)return ln.concat(this.outEdges(jt,pn))}}function Mi(ei,jt){ei[jt]?ei[jt]++:ei[jt]=1}function or(ei,jt){--ei[jt]||delete ei[jt]}function qi(ei,jt,pn,ln){var Fn=""+jt,Ci=""+pn;if(!ei&&Fn>Ci){var xi=Fn;Fn=Ci,Ci=xi}return Fn+Pi+Ci+Pi+(ne.A(ln)?vr:ln)}function ko(ei,jt){return qi(ei,jt.v,jt.w,jt.name)}ki.prototype._nodeCount=0,ki.prototype._edgeCount=0},8802:(It,ke,O)=>{"use strict";O.d(ke,{T:()=>R.T});var R=O(6702)},8807:(It,ke,O)=>{"use strict";O.d(ke,{M:()=>ne});var R=O(5113),U=O(6854);const re=function te(S){return(0,U.A)(S,4)};var A=O(6327);function ne(S){var z={options:{directed:S.isDirected(),multigraph:S.isMultigraph(),compound:S.isCompound()},nodes:x(S),edges:k(S)};return R.A(S.graph())||(z.value=re(S.graph())),z}function x(S){return A.A(S.nodes(),function(z){var ee=S.node(z),Q=S.parent(z),Ce={v:z};return R.A(ee)||(Ce.value=ee),R.A(Q)||(Ce.parent=Q),Ce})}function k(S){return A.A(S.edges(),function(z){var ee=S.edge(z),Q={v:z.v,w:z.w};return R.A(z.name)||(Q.name=z.name),R.A(ee)||(Q.value=ee),Q})}O(6702)},338:(It,ke,O)=>{"use strict";O.d(ke,{XX:()=>ei});var R=O(1975),U=O(1981),q=O(9311),te=O(9671),re=O(5180),A=O(6320),F={normal:function x(Gt,At,Bt,yn){var zt=Gt.append("marker").attr("id",At).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");A.AV(zt,Bt[yn+"Style"]),Bt[yn+"Class"]&&zt.attr("class",Bt[yn+"Class"])},vee:function k(Gt,At,Bt,yn){var zt=Gt.append("marker").attr("id",At).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");A.AV(zt,Bt[yn+"Style"]),Bt[yn+"Class"]&&zt.attr("class",Bt[yn+"Class"])},undirected:function I(Gt,At,Bt,yn){var zt=Gt.append("marker").attr("id",At).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");A.AV(zt,Bt[yn+"Style"]),Bt[yn+"Class"]&&zt.attr("class",Bt[yn+"Class"])}},S=O(9483);function Ce(Gt,At,Bt){var yn=At.label,Ln=Gt.append("g");"svg"===At.labelType?function z(Gt,At){var Bt=Gt;Bt.node().appendChild(At.label),A.AV(Bt,At.labelStyle)}(Ln,At):"string"!=typeof yn||"html"===At.labelType?(0,S.H)(Ln,At):function ee(Gt,At){for(var Bt=Gt.append("text"),yn=function Q(Gt){for(var yn,At="",Bt=!1,Ln=0;Ln<Gt.length;++Ln)yn=Gt[Ln],Bt?(At+="n"===yn?"\n":yn,Bt=!1):"\\"===yn?Bt=!0:At+=yn;return At}(At.label).split("\n"),Ln=0;Ln<yn.length;Ln++)Bt.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(yn[Ln]);A.AV(Bt,At.labelStyle)}(Ln,At);var nn,zt=Ln.node().getBBox();switch(Bt){case"top":nn=-At.height/2;break;case"bottom":nn=At.height/2-zt.height;break;default:nn=-zt.height/2}return Ln.attr("transform","translate("+-zt.width/2+","+nn+")"),Ln}var H=function(Gt,At){var Bt=At.nodes().filter(function(zt){return A.De(At,zt)}),yn=Gt.selectAll("g.cluster").data(Bt,function(zt){return zt});A.c$(yn.exit(),At).style("opacity",0).remove();var Ln=yn.enter().append("g").attr("class","cluster").attr("id",function(zt){return At.node(zt).id}).style("opacity",0).each(function(zt){var nn=At.node(zt),mn=R.Ltv(this);R.Ltv(this).append("rect"),Ce(mn.append("g").attr("class","label"),nn,nn.clusterLabelPos)});return yn=yn.merge(Ln),(yn=A.c$(yn,At).style("opacity",1)).selectAll("rect").each(function(zt){var nn=At.node(zt),mn=R.Ltv(this);A.AV(mn,nn.style)}),yn};let K=function(Gt,At){var yn,Bt=Gt.selectAll("g.edgeLabel").data(At.edges(),function(Ln){return A.gh(Ln)}).classed("update",!0);return Bt.exit().remove(),Bt.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(Bt=Gt.selectAll("g.edgeLabel")).each(function(Ln){var zt=R.Ltv(this);zt.select(".label").remove();var nn=At.edge(Ln),mn=Ce(zt,At.edge(Ln),0).classed("label",!0),ti=mn.node().getBBox();nn.labelId&&mn.attr("id",nn.labelId),U.A(nn,"width")||(nn.width=ti.width),U.A(nn,"height")||(nn.height=ti.height)}),yn=Bt.exit?Bt.exit():Bt.selectAll(null),A.c$(yn,At).style("opacity",0).remove(),Bt};var ge=O(1195),we=O(3938);function fe(Gt,At){return Gt.intersect(At)}var Te=function(Gt,At,Bt){var yn=Gt.selectAll("g.edgePath").data(At.edges(),function(nn){return A.gh(nn)}).classed("update",!0),Ln=function mt(Gt,At){var Bt=Gt.enter().append("g").attr("class","edgePath").style("opacity",0);return Bt.append("path").attr("class","path").attr("d",function(yn){var Ln=At.edge(yn),zt=At.node(yn.v).elem,nn=we.A(Ln.points.length).map(function(){return function Xe(Gt){var At=Gt.getBBox(),Bt=Gt.ownerSVGElement.getScreenCTM().inverse().multiply(Gt.getScreenCTM()).translate(At.width/2,At.height/2);return{x:Bt.e,y:Bt.f}}(zt)});return Fe(Ln,nn)}),Bt.append("defs"),Bt}(yn,At);!function ft(Gt,At){var Bt=Gt.exit();A.c$(Bt,At).style("opacity",0).remove()}(yn,At);var zt=void 0!==yn.merge?yn.merge(Ln):yn;return A.c$(zt,At).style("opacity",1),zt.each(function(nn){var mn=R.Ltv(this),ti=At.edge(nn);ti.elem=this,ti.id&&mn.attr("id",ti.id),A.nh(mn,ti.class,(mn.classed("update")?"update ":"")+"edgePath")}),zt.selectAll("path.path").each(function(nn){var mn=At.edge(nn);mn.arrowheadId=ge.A("arrowhead");var ti=R.Ltv(this).attr("marker-end",function(){return"url("+function Ze(Gt,At){return Gt.split("#")[0]+"#"+At}(location.href,mn.arrowheadId)+")"}).style("fill","none");A.c$(ti,At).attr("d",function(ai){return function Le(Gt,At){var Bt=Gt.edge(At),yn=Gt.node(At.v),Ln=Gt.node(At.w),zt=Bt.points.slice(1,Bt.points.length-1);return zt.unshift(fe(yn,zt[0])),zt.push(fe(Ln,zt[zt.length-1])),Fe(Bt,zt)}(At,ai)}),A.AV(ti,mn.style)}),zt.selectAll("defs *").remove(),zt.selectAll("defs").each(function(nn){var mn=At.edge(nn);(0,Bt[mn.arrowhead])(R.Ltv(this),mn.arrowheadId,mn,"arrowhead")}),zt};function Fe(Gt,At){var Bt=(R.n8j||R.JWy.line)().x(function(yn){return yn.x}).y(function(yn){return yn.y});return(Bt.curve||Bt.interpolate)(Gt.curve),Bt(At)}var Zt=O(3377),Tt=function(Gt,At,Bt){var zt,yn=At.nodes().filter(function(nn){return!A.De(At,nn)}),Ln=Gt.selectAll("g.node").data(yn,function(nn){return nn}).classed("update",!0);return Ln.exit().remove(),Ln.enter().append("g").attr("class","node").style("opacity",0),(Ln=Gt.selectAll("g.node")).each(function(nn){var mn=At.node(nn),ti=R.Ltv(this);A.nh(ti,mn.class,(ti.classed("update")?"update ":"")+"node"),ti.select("g.label").remove();var ai=ti.append("g").attr("class","label"),ns=Ce(ai,mn),oo=Bt[mn.shape],ao=Zt.A(ns.node().getBBox(),"width","height");mn.elem=this,mn.id&&ti.attr("id",mn.id),mn.labelId&&ai.attr("id",mn.labelId),U.A(mn,"width")&&(ao.width=mn.width),U.A(mn,"height")&&(ao.height=mn.height),ao.width+=mn.paddingLeft+mn.paddingRight,ao.height+=mn.paddingTop+mn.paddingBottom,ai.attr("transform","translate("+(mn.paddingLeft-mn.paddingRight)/2+","+(mn.paddingTop-mn.paddingBottom)/2+")");var Co=R.Ltv(this);Co.select(".label-container").remove();var Do=oo(Co,ao,mn).classed("label-container",!0);A.AV(Do,mn.style);var Rs=Do.node().getBBox();mn.width=Rs.width,mn.height=Rs.height}),zt=Ln.exit?Ln.exit():Ln.selectAll(null),A.c$(zt,At).style("opacity",0).remove(),Ln};function Yi(Gt,At,Bt,yn){var Ln=Gt.x,zt=Gt.y,nn=Ln-yn.x,mn=zt-yn.y,ti=Math.sqrt(At*At*mn*mn+Bt*Bt*nn*nn),ai=Math.abs(At*Bt*nn/ti);yn.x<Ln&&(ai=-ai);var ns=Math.abs(At*Bt*mn/ti);return yn.y<zt&&(ns=-ns),{x:Ln+ai,y:zt+ns}}var Wn=O(8384),Pi=O(8356),ki={rect:function or(Gt,At,Bt){var yn=Gt.insert("rect",":first-child").attr("rx",Bt.rx).attr("ry",Bt.ry).attr("x",-At.width/2).attr("y",-At.height/2).attr("width",At.width).attr("height",At.height);return Bt.intersect=function(Ln){return(0,Pi.C)(Bt,Ln)},yn},ellipse:function qi(Gt,At,Bt){var yn=At.width/2,Ln=At.height/2,zt=Gt.insert("ellipse",":first-child").attr("x",-At.width/2).attr("y",-At.height/2).attr("rx",yn).attr("ry",Ln);return Bt.intersect=function(nn){return Yi(Bt,yn,Ln,nn)},zt},circle:function Qs(Gt,At,Bt){var yn=Math.max(At.width,At.height)/2,Ln=Gt.insert("circle",":first-child").attr("x",-At.width/2).attr("y",-At.height/2).attr("r",yn);return Bt.intersect=function(zt){return function vr(Gt,At,Bt){return Yi(Gt,At,At,Bt)}(Bt,yn,zt)},Ln},diamond:function ko(Gt,At,Bt){var yn=At.width*Math.SQRT2/2,Ln=At.height*Math.SQRT2/2,zt=[{x:0,y:-Ln},{x:-yn,y:0},{x:0,y:Ln},{x:yn,y:0}],nn=Gt.insert("polygon",":first-child").attr("points",zt.map(function(mn){return mn.x+","+mn.y}).join(" "));return Bt.intersect=function(mn){return(0,Wn.k)(Bt,zt,mn)},nn}};function ei(){var Gt=function(At,Bt){!function ln(Gt){Gt.nodes().forEach(function(At){var Bt=Gt.node(At);!U.A(Bt,"label")&&!Gt.children(At).length&&(Bt.label=At),U.A(Bt,"paddingX")&&q.A(Bt,{paddingLeft:Bt.paddingX,paddingRight:Bt.paddingX}),U.A(Bt,"paddingY")&&q.A(Bt,{paddingTop:Bt.paddingY,paddingBottom:Bt.paddingY}),U.A(Bt,"padding")&&q.A(Bt,{paddingLeft:Bt.padding,paddingRight:Bt.padding,paddingTop:Bt.padding,paddingBottom:Bt.padding}),q.A(Bt,jt),te.A(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(yn){Bt[yn]=Number(Bt[yn])}),U.A(Bt,"width")&&(Bt._prevWidth=Bt.width),U.A(Bt,"height")&&(Bt._prevHeight=Bt.height)}),Gt.edges().forEach(function(At){var Bt=Gt.edge(At);U.A(Bt,"label")||(Bt.label=""),q.A(Bt,pn)})}(Bt);var yn=Ci(At,"output"),Ln=Ci(yn,"clusters"),zt=Ci(yn,"edgePaths"),nn=K(Ci(yn,"edgeLabels"),Bt),mn=Tt(Ci(yn,"nodes"),Bt,ki);(0,re.Zp)(Bt),function Ri(Gt,At){function yn(Ln){var zt=At.node(Ln);return"translate("+zt.x+","+zt.y+")"}Gt.filter(function(){return!R.Ltv(this).classed("update")}).attr("transform",yn),A.c$(Gt,At).style("opacity",1).attr("transform",yn)}(mn,Bt),function Ti(Gt,At){function yn(Ln){var zt=At.edge(Ln);return U.A(zt,"x")?"translate("+zt.x+","+zt.y+")":""}Gt.filter(function(){return!R.Ltv(this).classed("update")}).attr("transform",yn),A.c$(Gt,At).style("opacity",1).attr("transform",yn)}(nn,Bt),Te(zt,Bt,F),function _i(Gt,At){var Bt=Gt.filter(function(){return!R.Ltv(this).classed("update")});function yn(Ln){var zt=At.node(Ln);return"translate("+zt.x+","+zt.y+")"}Bt.attr("transform",yn),A.c$(Gt,At).style("opacity",1).attr("transform",yn),A.c$(Bt.selectAll("rect"),At).attr("width",function(Ln){return At.node(Ln).width}).attr("height",function(Ln){return At.node(Ln).height}).attr("x",function(Ln){return-At.node(Ln).width/2}).attr("y",function(Ln){return-At.node(Ln).height/2})}(H(Ln,Bt),Bt),function Fn(Gt){te.A(Gt.nodes(),function(At){var Bt=Gt.node(At);U.A(Bt,"_prevWidth")?Bt.width=Bt._prevWidth:delete Bt.width,U.A(Bt,"_prevHeight")?Bt.height=Bt._prevHeight:delete Bt.height,delete Bt._prevWidth,delete Bt._prevHeight})}(Bt)};return Gt.createNodes=function(At){return arguments.length?(function On(Gt){Tt=Gt}(At),Gt):Tt},Gt.createClusters=function(At){return arguments.length?(function G(Gt){H=Gt}(At),Gt):H},Gt.createEdgeLabels=function(At){return arguments.length?(function ie(Gt){K=Gt}(At),Gt):K},Gt.createEdgePaths=function(At){return arguments.length?(function tt(Gt){Te=Gt}(At),Gt):Te},Gt.shapes=function(At){return arguments.length?(function Mi(Gt){ki=Gt}(At),Gt):ki},Gt.arrows=function(At){return arguments.length?(function ne(Gt){F=Gt}(At),Gt):F},Gt}var jt={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},pn={arrowhead:"normal",curve:R.lUB};function Ci(Gt,At){var Bt=Gt.select("g."+At);return Bt.empty()&&(Bt=Gt.append("g").attr("class",At)),Bt}O(8802)},7394:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(8844),U=O(107);const te=class q{constructor(){this.type=U.Z.ALL}get(){return this.type}set(k){if(this.type&&this.type!==k)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=k}reset(){this.type=U.Z.ALL}is(k){return this.type===k}},ne=new class re{constructor(k,I){this.color=I,this.changed=!1,this.data=k,this.type=new te}set(k,I){return this.color=I,this.changed=!1,this.data=k,this.type.type=U.Z.ALL,this}_ensureHSL(){const k=this.data,{h:I,s:S,l:z}=k;void 0===I&&(k.h=R.A.channel.rgb2hsl(k,"h")),void 0===S&&(k.s=R.A.channel.rgb2hsl(k,"s")),void 0===z&&(k.l=R.A.channel.rgb2hsl(k,"l"))}_ensureRGB(){const k=this.data,{r:I,g:S,b:z}=k;void 0===I&&(k.r=R.A.channel.hsl2rgb(k,"r")),void 0===S&&(k.g=R.A.channel.hsl2rgb(k,"g")),void 0===z&&(k.b=R.A.channel.hsl2rgb(k,"b"))}get r(){const k=this.data,I=k.r;return this.type.is(U.Z.HSL)||void 0===I?(this._ensureHSL(),R.A.channel.hsl2rgb(k,"r")):I}get g(){const k=this.data,I=k.g;return this.type.is(U.Z.HSL)||void 0===I?(this._ensureHSL(),R.A.channel.hsl2rgb(k,"g")):I}get b(){const k=this.data,I=k.b;return this.type.is(U.Z.HSL)||void 0===I?(this._ensureHSL(),R.A.channel.hsl2rgb(k,"b")):I}get h(){const k=this.data,I=k.h;return this.type.is(U.Z.RGB)||void 0===I?(this._ensureRGB(),R.A.channel.rgb2hsl(k,"h")):I}get s(){const k=this.data,I=k.s;return this.type.is(U.Z.RGB)||void 0===I?(this._ensureRGB(),R.A.channel.rgb2hsl(k,"s")):I}get l(){const k=this.data,I=k.l;return this.type.is(U.Z.RGB)||void 0===I?(this._ensureRGB(),R.A.channel.rgb2hsl(k,"l")):I}get a(){return this.data.a}set r(k){this.type.set(U.Z.RGB),this.changed=!0,this.data.r=k}set g(k){this.type.set(U.Z.RGB),this.changed=!0,this.data.g=k}set b(k){this.type.set(U.Z.RGB),this.changed=!0,this.data.b=k}set h(k){this.type.set(U.Z.HSL),this.changed=!0,this.data.h=k}set s(k){this.type.set(U.Z.HSL),this.changed=!0,this.data.s=k}set l(k){this.type.set(U.Z.HSL),this.changed=!0,this.data.l=k}set a(k){this.changed=!0,this.data.a=k}}({r:0,g:0,b:0,a:0},"transparent")},7501:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>z});var R=O(7394),U=O(107);const q={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:ee=>{if(35!==ee.charCodeAt(0))return;const Q=ee.match(q.re);if(!Q)return;const Ce=Q[1],H=parseInt(Ce,16),G=Ce.length,K=G%4==0,ie=G>4,ge=ie?1:17,we=ie?8:4,fe=K?0:-1,Te=ie?255:15;return R.A.set({r:(H>>we*(fe+3)&Te)*ge,g:(H>>we*(fe+2)&Te)*ge,b:(H>>we*(fe+1)&Te)*ge,a:K?(H&Te)*ge/255:1},ee)},stringify:ee=>{const{r:Q,g:Ce,b:H,a:G}=ee;return G<1?`#${U.Y[Math.round(Q)]}${U.Y[Math.round(Ce)]}${U.Y[Math.round(H)]}${U.Y[Math.round(255*G)]}`:`#${U.Y[Math.round(Q)]}${U.Y[Math.round(Ce)]}${U.Y[Math.round(H)]}`}},te=q;var re=O(8844);const A={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:ee=>{const Q=ee.match(A.hueRe);if(Q){const[,Ce,H]=Q;switch(H){case"grad":return re.A.channel.clamp.h(.9*parseFloat(Ce));case"rad":return re.A.channel.clamp.h(180*parseFloat(Ce)/Math.PI);case"turn":return re.A.channel.clamp.h(360*parseFloat(Ce))}}return re.A.channel.clamp.h(parseFloat(ee))},parse:ee=>{const Q=ee.charCodeAt(0);if(104!==Q&&72!==Q)return;const Ce=ee.match(A.re);if(!Ce)return;const[,H,G,K,ie,ge]=Ce;return R.A.set({h:A._hue2deg(H),s:re.A.channel.clamp.s(parseFloat(G)),l:re.A.channel.clamp.l(parseFloat(K)),a:ie?re.A.channel.clamp.a(ge?parseFloat(ie)/100:parseFloat(ie)):1},ee)},stringify:ee=>{const{h:Q,s:Ce,l:H,a:G}=ee;return G<1?`hsla(${re.A.lang.round(Q)}, ${re.A.lang.round(Ce)}%, ${re.A.lang.round(H)}%, ${G})`:`hsl(${re.A.lang.round(Q)}, ${re.A.lang.round(Ce)}%, ${re.A.lang.round(H)}%)`}},F=A,ne={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:ee=>{ee=ee.toLowerCase();const Q=ne.colors[ee];if(Q)return te.parse(Q)},stringify:ee=>{const Q=te.stringify(ee);for(const Ce in ne.colors)if(ne.colors[Ce]===Q)return Ce}},x=ne,k={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:ee=>{const Q=ee.charCodeAt(0);if(114!==Q&&82!==Q)return;const Ce=ee.match(k.re);if(!Ce)return;const[,H,G,K,ie,ge,we,fe,Te]=Ce;return R.A.set({r:re.A.channel.clamp.r(G?2.55*parseFloat(H):parseFloat(H)),g:re.A.channel.clamp.g(ie?2.55*parseFloat(K):parseFloat(K)),b:re.A.channel.clamp.b(we?2.55*parseFloat(ge):parseFloat(ge)),a:fe?re.A.channel.clamp.a(Te?parseFloat(fe)/100:parseFloat(fe)):1},ee)},stringify:ee=>{const{r:Q,g:Ce,b:H,a:G}=ee;return G<1?`rgba(${re.A.lang.round(Q)}, ${re.A.lang.round(Ce)}, ${re.A.lang.round(H)}, ${re.A.lang.round(G)})`:`rgb(${re.A.lang.round(Q)}, ${re.A.lang.round(Ce)}, ${re.A.lang.round(H)})`}},I=k,z={format:{keyword:ne,hex:te,rgb:k,rgba:k,hsl:A,hsla:A},parse:ee=>{if("string"!=typeof ee)return ee;const Q=te.parse(ee)||I.parse(ee)||F.parse(ee)||x.parse(ee);if(Q)return Q;throw new Error(`Unsupported color format: "${ee}"`)},stringify:ee=>!ee.changed&&ee.color?ee.color:ee.type.is(U.Z.HSL)||void 0===ee.data.r?F.stringify(ee):ee.a<1||!Number.isInteger(ee.r)||!Number.isInteger(ee.g)||!Number.isInteger(ee.b)?I.stringify(ee):te.stringify(ee)}},107:(It,ke,O)=>{"use strict";O.d(ke,{Y:()=>U,Z:()=>q});var R=O(8844);const U={};for(let te=0;te<=255;te++)U[te]=R.A.unit.dec2hex(te);const q={ALL:0,RGB:1,HSL:2}},7012:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(8844),U=O(7501);const te=(re,A,F)=>{const ne=U.A.parse(re),x=ne[A],k=R.A.channel.clamp[A](x+F);return x!==k&&(ne[A]=k),U.A.stringify(ne)}},7376:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(7012);const q=(te,re)=>(0,R.A)(te,"l",-re)},4328:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(7012);const q=(te,re)=>(0,R.A)(te,"l",re)},8844:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});const R={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:x=>x>=255?255:x<0?0:x,g:x=>x>=255?255:x<0?0:x,b:x=>x>=255?255:x<0?0:x,h:x=>x%360,s:x=>x>=100?100:x<0?0:x,l:x=>x>=100?100:x<0?0:x,a:x=>x>=1?1:x<0?0:x},toLinear:x=>{const k=x/255;return x>.03928?Math.pow((k+.055)/1.055,2.4):k/12.92},hue2rgb:(x,k,I)=>(I<0&&(I+=1),I>1&&(I-=1),I<1/6?x+6*(k-x)*I:I<.5?k:I<2/3?x+(k-x)*(2/3-I)*6:x),hsl2rgb:({h:x,s:k,l:I},S)=>{if(!k)return 2.55*I;x/=360,k/=100;const z=(I/=100)<.5?I*(1+k):I+k-I*k,ee=2*I-z;switch(S){case"r":return 255*R.hue2rgb(ee,z,x+1/3);case"g":return 255*R.hue2rgb(ee,z,x);case"b":return 255*R.hue2rgb(ee,z,x-1/3)}},rgb2hsl:({r:x,g:k,b:I},S)=>{x/=255,k/=255,I/=255;const z=Math.max(x,k,I),ee=Math.min(x,k,I),Q=(z+ee)/2;if("l"===S)return 100*Q;if(z===ee)return 0;const Ce=z-ee;if("s"===S)return 100*(Q>.5?Ce/(2-z-ee):Ce/(z+ee));switch(z){case x:return 60*((k-I)/Ce+(k<I?6:0));case k:return 60*((I-x)/Ce+2);case I:return 60*((x-k)/Ce+4);default:return-1}}},ne={channel:R,lang:{clamp:(x,k,I)=>k>I?Math.min(k,Math.max(I,x)):Math.min(I,Math.max(k,x)),round:x=>Math.round(1e10*x)/1e10},unit:{dec2hex:x=>{const k=Math.round(x).toString(16);return k.length>1?k:`0${k}`}}}},7015:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>H});var q=O(1319);const re=function te(G,K){for(var ie=G.length;ie--;)if((0,q.A)(G[ie][0],K))return ie;return-1};var F=Array.prototype.splice;function Ce(G){var K=-1,ie=null==G?0:G.length;for(this.clear();++K<ie;){var ge=G[K];this.set(ge[0],ge[1])}}Ce.prototype.clear=function R(){this.__data__=[],this.size=0},Ce.prototype.delete=function ne(G){var K=this.__data__,ie=re(K,G);return!(ie<0||(ie==K.length-1?K.pop():F.call(K,ie,1),--this.size,0))},Ce.prototype.get=function k(G){var K=this.__data__,ie=re(K,G);return ie<0?void 0:K[ie][1]},Ce.prototype.has=function S(G){return re(this.__data__,G)>-1},Ce.prototype.set=function ee(G,K){var ie=this.__data__,ge=re(ie,G);return ge<0?(++this.size,ie.push([G,K])):ie[ge][1]=K,this};const H=Ce},6568:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(4713),U=O(1860);const te=(0,R.A)(U.A,"Map")},2291:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>vr});const q=(0,O(4713).A)(Object,"create");var k=Object.prototype.hasOwnProperty;var ee=Object.prototype.hasOwnProperty;function ie(Wn){var Pi=-1,ki=null==Wn?0:Wn.length;for(this.clear();++Pi<ki;){var Mi=Wn[Pi];this.set(Mi[0],Mi[1])}}ie.prototype.clear=function te(){this.__data__=q?q(null):{},this.size=0},ie.prototype.delete=function A(Wn){var Pi=this.has(Wn)&&delete this.__data__[Wn];return this.size-=Pi?1:0,Pi},ie.prototype.get=function I(Wn){var Pi=this.__data__;if(q){var ki=Pi[Wn];return"__lodash_hash_undefined__"===ki?void 0:ki}return k.call(Pi,Wn)?Pi[Wn]:void 0},ie.prototype.has=function Q(Wn){var Pi=this.__data__;return q?void 0!==Pi[Wn]:ee.call(Pi,Wn)},ie.prototype.set=function G(Wn,Pi){var ki=this.__data__;return this.size+=this.has(Wn)?0:1,ki[Wn]=q&&void 0===Pi?"__lodash_hash_undefined__":Pi,this};const ge=ie;var we=O(7015),fe=O(6568);const Xe=function Fe(Wn,Pi){var ki=Wn.__data__;return function Ze(Wn){var Pi=typeof Wn;return"string"==Pi||"number"==Pi||"symbol"==Pi||"boolean"==Pi?"__proto__"!==Wn:null===Wn}(Pi)?ki["string"==typeof Pi?"string":"hash"]:ki.map};function Yi(Wn){var Pi=-1,ki=null==Wn?0:Wn.length;for(this.clear();++Pi<ki;){var Mi=Wn[Pi];this.set(Mi[0],Mi[1])}}Yi.prototype.clear=function Te(){this.size=0,this.__data__={hash:new ge,map:new(fe.A||we.A),string:new ge}},Yi.prototype.delete=function mt(Wn){var Pi=Xe(this,Wn).delete(Wn);return this.size-=Pi?1:0,Pi},Yi.prototype.get=function Zt(Wn){return Xe(this,Wn).get(Wn)},Yi.prototype.has=function On(Wn){return Xe(this,Wn).has(Wn)},Yi.prototype.set=function Ti(Wn,Pi){var ki=Xe(this,Wn),Mi=ki.size;return ki.set(Wn,Pi),this.size+=ki.size==Mi?0:1,this};const vr=Yi},4226:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(4713),U=O(1860);const te=(0,R.A)(U.A,"Set")},8587:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(2291);function F(x){var k=-1,I=null==x?0:x.length;for(this.__data__=new R.A;++k<I;)this.add(x[k])}F.prototype.add=F.prototype.push=function q(x){return this.__data__.set(x,"__lodash_hash_undefined__"),this},F.prototype.has=function re(x){return this.__data__.has(x)};const ne=F},5401:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>Ce});var R=O(7015);var k=O(6568),I=O(2291);function Q(H){var G=this.__data__=new R.A(H);this.size=G.size}Q.prototype.clear=function U(){this.__data__=new R.A,this.size=0},Q.prototype.delete=function te(H){var G=this.__data__,K=G.delete(H);return this.size=G.size,K},Q.prototype.get=function A(H){return this.__data__.get(H)},Q.prototype.has=function ne(H){return this.__data__.has(H)},Q.prototype.set=function z(H,G){var K=this.__data__;if(K instanceof R.A){var ie=K.__data__;if(!k.A||ie.length<199)return ie.push([H,G]),this.size=++K.size,this;K=this.__data__=new I.A(ie)}return K.set(H,G),this.size=K.size,this};const Ce=Q},6944:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});const q=O(1860).A.Symbol},6509:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});const q=O(1860).A.Uint8Array},9162:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){for(var re=-1,A=null==q?0:q.length;++re<A&&!1!==te(q[re],re,q););return q}},1861:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){for(var re=-1,A=null==q?0:q.length,F=0,ne=[];++re<A;){var x=q[re];te(x,re,q)&&(ne[F++]=x)}return ne}},6726:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>I});var q=O(6513),te=O(3744),re=O(9377),A=O(8606),F=O(8885),x=Object.prototype.hasOwnProperty;const I=function k(S,z){var ee=(0,te.A)(S),Q=!ee&&(0,q.A)(S),Ce=!ee&&!Q&&(0,re.A)(S),H=!ee&&!Q&&!Ce&&(0,F.A)(S),G=ee||Q||Ce||H,K=G?function R(S,z){for(var ee=-1,Q=Array(S);++ee<S;)Q[ee]=z(ee);return Q}(S.length,String):[],ie=K.length;for(var ge in S)(z||x.call(S,ge))&&(!G||!("length"==ge||Ce&&("offset"==ge||"parent"==ge)||H&&("buffer"==ge||"byteLength"==ge||"byteOffset"==ge)||(0,A.A)(ge,ie)))&&K.push(ge);return K}},6689:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){for(var re=-1,A=null==q?0:q.length,F=Array(A);++re<A;)F[re]=te(q[re],re,q);return F}},563:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){for(var re=-1,A=te.length,F=q.length;++re<A;)q[F+re]=te[re];return q}},1984:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(1827),U=O(1319),te=Object.prototype.hasOwnProperty;const A=function re(F,ne,x){var k=F[ne];(!te.call(F,ne)||!(0,U.A)(k,x)||void 0===x&&!(ne in F))&&(0,R.A)(F,ne,x)}},1827:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(4746);const q=function U(te,re,A){"__proto__"==re&&R.A?(0,R.A)(te,re,{configurable:!0,enumerable:!0,value:A,writable:!0}):te[re]=A}},6854:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ql});var R=O(5401),U=O(9162),q=O(1984),te=O(9898),re=O(4429);var ne=O(133);var I=O(9933),S=O(4528),z=O(2697);var Ce=O(563),H=O(8010),G=O(6032);const ge=Object.getOwnPropertySymbols?function(Kn){for(var _s=[];Kn;)(0,Ce.A)(_s,(0,z.A)(Kn)),Kn=(0,H.A)(Kn);return _s}:G.A;var Te=O(7895),tt=O(6658);const Le=function Ze(Kn){return(0,tt.A)(Kn,ne.A,ge)};var Fe=O(1938),mt=Object.prototype.hasOwnProperty;var Tt=O(5152);var Ti=/\w*$/;var vr=O(6944),Wn=vr.A?vr.A.prototype:void 0,Pi=Wn?Wn.valueOf:void 0;var or=O(4314);const ns=function ai(Kn,_s,cr){var Ui=Kn.constructor;switch(_s){case"[object ArrayBuffer]":return(0,Tt.A)(Kn);case"[object Boolean]":case"[object Date]":return new Ui(+Kn);case"[object DataView]":return function On(Kn,_s){var cr=_s?(0,Tt.A)(Kn.buffer):Kn.buffer;return new Kn.constructor(cr,Kn.byteOffset,Kn.byteLength)}(Kn,cr);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,or.A)(Kn,cr);case"[object Map]":case"[object Set]":return new Ui;case"[object Number]":case"[object String]":return new Ui(Kn);case"[object RegExp]":return function Ri(Kn){var _s=new Kn.constructor(Kn.source,Ti.exec(Kn));return _s.lastIndex=Kn.lastIndex,_s}(Kn);case"[object Symbol]":return function ki(Kn){return Pi?Object(Pi.call(Kn)):{}}(Kn)}};var oo=O(923),ao=O(3744),Co=O(9377),Do=O(2661);var jo=O(778),Js=O(3340),$a=Js.A&&Js.A.isMap;const wa=$a?(0,jo.A)($a):function Us(Kn){return(0,Do.A)(Kn)&&"[object Map]"==(0,Fe.A)(Kn)};var dc=O(554);var sl=Js.A&&Js.A.isSet;const fc=sl?(0,jo.A)(sl):function Zr(Kn){return(0,Do.A)(Kn)&&"[object Set]"==(0,Fe.A)(Kn)};var dr="[object Arguments]",xr="[object Function]",lo="[object Object]",gs={};gs[dr]=gs["[object Array]"]=gs["[object ArrayBuffer]"]=gs["[object DataView]"]=gs["[object Boolean]"]=gs["[object Date]"]=gs["[object Float32Array]"]=gs["[object Float64Array]"]=gs["[object Int8Array]"]=gs["[object Int16Array]"]=gs["[object Int32Array]"]=gs["[object Map]"]=gs["[object Number]"]=gs[lo]=gs["[object RegExp]"]=gs["[object Set]"]=gs["[object String]"]=gs["[object Symbol]"]=gs["[object Uint8Array]"]=gs["[object Uint8ClampedArray]"]=gs["[object Uint16Array]"]=gs["[object Uint32Array]"]=!0,gs["[object Error]"]=gs[xr]=gs["[object WeakMap]"]=!1;const ql=function ms(Kn,_s,cr,Ui,xa,co){var ys,aa=1&_s,Me=2&_s,Mo=4&_s;if(cr&&(ys=xa?cr(Kn,Ui,xa,co):cr(Kn)),void 0!==ys)return ys;if(!(0,dc.A)(Kn))return Kn;var wt=(0,ao.A)(Kn);if(wt){if(ys=function ft(Kn){var _s=Kn.length,cr=new Kn.constructor(_s);return _s&&"string"==typeof Kn[0]&&mt.call(Kn,"index")&&(cr.index=Kn.index,cr.input=Kn.input),cr}(Kn),!aa)return(0,S.A)(Kn,ys)}else{var Ge=(0,Fe.A)(Kn),fn=Ge==xr||"[object GeneratorFunction]"==Ge;if((0,Co.A)(Kn))return(0,I.A)(Kn,aa);if(Ge==lo||Ge==dr||fn&&!xa){if(ys=Me||fn?{}:(0,oo.A)(Kn),!aa)return Me?function we(Kn,_s){return(0,te.A)(Kn,ge(Kn),_s)}(Kn,function x(Kn,_s){return Kn&&(0,te.A)(_s,(0,ne.A)(_s),Kn)}(ys,Kn)):function ee(Kn,_s){return(0,te.A)(Kn,(0,z.A)(Kn),_s)}(Kn,function A(Kn,_s){return Kn&&(0,te.A)(_s,(0,re.A)(_s),Kn)}(ys,Kn))}else{if(!gs[Ge])return xa?Kn:{};ys=ns(Kn,Ge,aa)}}co||(co=new R.A);var Lt=co.get(Kn);if(Lt)return Lt;co.set(Kn,ys),fc(Kn)?Kn.forEach(function($i){ys.add(ms($i,_s,cr,$i,Kn,co))}):wa(Kn)&&Kn.forEach(function($i,is){ys.set(is,ms($i,_s,cr,is,Kn,co))});var fi=wt?void 0:(Mo?Me?Le:Te.A:Me?ne.A:re.A)(Kn);return(0,U.A)(fi||Kn,function($i,is){fi&&($i=Kn[is=$i]),(0,q.A)(ys,is,ms($i,_s,cr,is,Kn,co))}),ys}},9617:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(4620),U=O(1287);const A=function q(F,ne){return function(x,k){if(null==x)return x;if(!(0,U.A)(x))return F(x,k);for(var I=x.length,S=ne?I:-1,z=Object(x);(ne?S--:++S<I)&&!1!==k(z[S],S,z););return x}}(R.A)},8556:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te,re,A){for(var F=q.length,ne=re+(A?1:-1);A?ne--:++ne<F;)if(te(q[ne],ne,q))return ne;return-1}},4367:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>x});var R=O(563),U=O(6944),q=O(6513),te=O(3744),re=U.A?U.A.isConcatSpreadable:void 0;const F=function A(k){return(0,te.A)(k)||(0,q.A)(k)||!!(re&&k&&k[re])},x=function ne(k,I,S,z,ee){var Q=-1,Ce=k.length;for(S||(S=F),ee||(ee=[]);++Q<Ce;){var H=k[Q];I>0&&S(H)?I>1?ne(H,I-1,S,z,ee):(0,R.A)(ee,H):z||(ee[ee.length]=H)}return ee}},2676:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});const te=function R(re){return function(A,F,ne){for(var x=-1,k=Object(A),I=ne(A),S=I.length;S--;){var z=I[re?S:++x];if(!1===F(k[z],z,k))break}return A}}()},4620:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(2676),U=O(4429);const te=function q(re,A){return re&&(0,R.A)(re,A,U.A)}},4501:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(9697),U=O(4662);const te=function q(re,A){for(var F=0,ne=(A=(0,R.A)(A,re)).length;null!=re&&F<ne;)re=re[(0,U.A)(A[F++])];return F&&F==ne?re:void 0}},6658:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(563),U=O(3744);const te=function q(re,A,F){var ne=A(re);return(0,U.A)(re)?ne:(0,R.A)(ne,F(re))}},5281:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>Ce});var R=O(6944),U=Object.prototype,q=U.hasOwnProperty,te=U.toString,re=R.A?R.A.toStringTag:void 0;var x=Object.prototype.toString;var ee=R.A?R.A.toStringTag:void 0;const Ce=function Q(H){return null==H?void 0===H?"[object Undefined]":"[object Null]":ee&&ee in Object(H)?function A(H){var G=q.call(H,re),K=H[re];try{H[re]=void 0;var ie=!0}catch{}var ge=te.call(H);return ie&&(G?H[re]=K:delete H[re]),ge}(H):function k(H){return x.call(H)}(H)}},6385:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>Ir});var R=O(5401),U=O(8587);const te=function q(hn,Gn){for(var dr=-1,Ne=null==hn?0:hn.length;++dr<Ne;)if(Gn(hn[dr],dr,hn))return!0;return!1};var re=O(5934);const x=function ne(hn,Gn,dr,Ne,li,Ki){var Xi=1&dr,xr=hn.length,oi=Gn.length;if(xr!=oi&&!(Xi&&oi>xr))return!1;var Yt=Ki.get(hn),To=Ki.get(Gn);if(Yt&&To)return Yt==Gn&&To==hn;var lo=-1,Nr=!0,Wa=2&dr?new U.A:void 0;for(Ki.set(hn,Gn),Ki.set(Gn,hn);++lo<xr;){var Zi=hn[lo],eo=Gn[lo];if(Ne)var Hr=Xi?Ne(eo,Zi,lo,Gn,hn,Ki):Ne(Zi,eo,lo,hn,Gn,Ki);if(void 0!==Hr){if(Hr)continue;Nr=!1;break}if(Wa){if(!te(Gn,function(xo,Uo){if(!(0,re.A)(Wa,Uo)&&(Zi===xo||li(Zi,xo,dr,Ne,Ki)))return Wa.push(Uo)})){Nr=!1;break}}else if(Zi!==eo&&!li(Zi,eo,dr,Ne,Ki)){Nr=!1;break}}return Ki.delete(hn),Ki.delete(Gn),Nr};var k=O(6944),I=O(6509),S=O(1319);const ee=function z(hn){var Gn=-1,dr=Array(hn.size);return hn.forEach(function(Ne,li){dr[++Gn]=[li,Ne]}),dr};var Q=O(3998),Xe=k.A?k.A.prototype:void 0,mt=Xe?Xe.valueOf:void 0;var Tt=O(7895),Ti=Object.prototype.hasOwnProperty;var vr=O(1938),Wn=O(3744),Pi=O(9377),ki=O(8885),or="[object Arguments]",qi="[object Array]",Qs="[object Object]",ei=Object.prototype.hasOwnProperty;const pn=function jt(hn,Gn,dr,Ne,li,Ki){var Xi=(0,Wn.A)(hn),xr=(0,Wn.A)(Gn),oi=Xi?qi:(0,vr.A)(hn),Yt=xr?qi:(0,vr.A)(Gn),To=(oi=oi==or?Qs:oi)==Qs,lo=(Yt=Yt==or?Qs:Yt)==Qs,Nr=oi==Yt;if(Nr&&(0,Pi.A)(hn)){if(!(0,Pi.A)(Gn))return!1;Xi=!0,To=!1}if(Nr&&!To)return Ki||(Ki=new R.A),Xi||(0,ki.A)(hn)?x(hn,Gn,dr,Ne,li,Ki):function ft(hn,Gn,dr,Ne,li,Ki,Xi){switch(dr){case"[object DataView]":if(hn.byteLength!=Gn.byteLength||hn.byteOffset!=Gn.byteOffset)return!1;hn=hn.buffer,Gn=Gn.buffer;case"[object ArrayBuffer]":return!(hn.byteLength!=Gn.byteLength||!Ki(new I.A(hn),new I.A(Gn)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,S.A)(+hn,+Gn);case"[object Error]":return hn.name==Gn.name&&hn.message==Gn.message;case"[object RegExp]":case"[object String]":return hn==Gn+"";case"[object Map]":var xr=ee;case"[object Set]":if(xr||(xr=Q.A),hn.size!=Gn.size&&!(1&Ne))return!1;var Yt=Xi.get(hn);if(Yt)return Yt==Gn;Ne|=2,Xi.set(hn,Gn);var To=x(xr(hn),xr(Gn),Ne,li,Ki,Xi);return Xi.delete(hn),To;case"[object Symbol]":if(mt)return mt.call(hn)==mt.call(Gn)}return!1}(hn,Gn,oi,dr,Ne,li,Ki);if(!(1&dr)){var Wa=To&&ei.call(hn,"__wrapped__"),Zi=lo&&ei.call(Gn,"__wrapped__");if(Wa||Zi){var eo=Wa?hn.value():hn,Hr=Zi?Gn.value():Gn;return Ki||(Ki=new R.A),li(eo,Hr,dr,Ne,Ki)}}return!!Nr&&(Ki||(Ki=new R.A),function Ri(hn,Gn,dr,Ne,li,Ki){var Xi=1&dr,xr=(0,Tt.A)(hn),oi=xr.length;if(oi!=(0,Tt.A)(Gn).length&&!Xi)return!1;for(var lo=oi;lo--;){var Nr=xr[lo];if(!(Xi?Nr in Gn:Ti.call(Gn,Nr)))return!1}var Wa=Ki.get(hn),Zi=Ki.get(Gn);if(Wa&&Zi)return Wa==Gn&&Zi==hn;var eo=!0;Ki.set(hn,Gn),Ki.set(Gn,hn);for(var Hr=Xi;++lo<oi;){var xo=hn[Nr=xr[lo]],Uo=Gn[Nr];if(Ne)var Fa=Xi?Ne(Uo,xo,Nr,Gn,hn,Ki):Ne(xo,Uo,Nr,hn,Gn,Ki);if(!(void 0===Fa?xo===Uo||li(xo,Uo,dr,Ne,Ki):Fa)){eo=!1;break}Hr||(Hr="constructor"==Nr)}if(eo&&!Hr){var oa=hn.constructor,Di=Gn.constructor;oa!=Di&&"constructor"in hn&&"constructor"in Gn&&!("function"==typeof oa&&oa instanceof oa&&"function"==typeof Di&&Di instanceof Di)&&(eo=!1)}return Ki.delete(hn),Ki.delete(Gn),eo}(hn,Gn,dr,Ne,li,Ki))};var ln=O(2661);const Ci=function Fn(hn,Gn,dr,Ne,li){return hn===Gn||(null==hn||null==Gn||!(0,ln.A)(hn)&&!(0,ln.A)(Gn)?hn!=hn&&Gn!=Gn:pn(hn,Gn,dr,Ne,Fn,li))};var yn=O(554);const zt=function Ln(hn){return hn==hn&&!(0,yn.A)(hn)};var nn=O(4429);const ns=function ai(hn,Gn){return function(dr){return null!=dr&&dr[hn]===Gn&&(void 0!==Gn||hn in Object(dr))}},ao=function oo(hn){var Gn=function mn(hn){for(var Gn=(0,nn.A)(hn),dr=Gn.length;dr--;){var Ne=Gn[dr],li=hn[Ne];Gn[dr]=[Ne,li,zt(li)]}return Gn}(hn);return 1==Gn.length&&Gn[0][2]?ns(Gn[0][0],Gn[0][1]):function(dr){return dr===hn||function At(hn,Gn,dr,Ne){var li=dr.length,Ki=li,Xi=!Ne;if(null==hn)return!Ki;for(hn=Object(hn);li--;){var xr=dr[li];if(Xi&&xr[2]?xr[1]!==hn[xr[0]]:!(xr[0]in hn))return!1}for(;++li<Ki;){var oi=(xr=dr[li])[0],Yt=hn[oi],To=xr[1];if(Xi&&xr[2]){if(void 0===Yt&&!(oi in hn))return!1}else{var lo=new R.A;if(Ne)var Nr=Ne(Yt,To,oi,hn,Gn,lo);if(!(void 0===Nr?Ci(To,Yt,3,Ne,lo):Nr))return!1}}return!0}(dr,hn,Gn)}};var Co=O(4501);var Us=O(4029),ea=O(3097),jo=O(4662);const wa=function Xl(hn,Gn){return(0,ea.A)(hn)&&zt(Gn)?ns((0,jo.A)(hn),Gn):function(dr){var Ne=function Do(hn,Gn,dr){var Ne=null==hn?void 0:(0,Co.A)(hn,Gn);return void 0===Ne?dr:Ne}(dr,hn);return void 0===Ne&&Ne===Gn?(0,Us.A)(dr,hn):Ci(Gn,Ne,3)}};var dc=O(7003),Ca=O(1392);const hc=function sl(hn){return(0,ea.A)(hn)?(0,Ca.A)((0,jo.A)(hn)):function Zr(hn){return function(Gn){return(0,Co.A)(Gn,hn)}}(hn)},Ir=function fc(hn){return"function"==typeof hn?hn:null==hn?dc.A:"object"==typeof hn?(0,Wn.A)(hn)?wa(hn[0],hn[1]):ao(hn):hc(hn)}},3660:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(5776);const te=(0,O(8992).A)(Object.keys,Object);var A=Object.prototype.hasOwnProperty;const ne=function F(x){if(!(0,R.A)(x))return te(x);var k=[];for(var I in Object(x))A.call(x,I)&&"constructor"!=I&&k.push(I);return k}},9103:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(9617),U=O(1287);const te=function q(re,A){var F=-1,ne=(0,U.A)(re)?Array(re.length):[];return(0,R.A)(re,function(x,k,I){ne[++F]=A(x,k,I)}),ne}},1392:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return function(te){return te?.[q]}}},363:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});var R=O(7003),U=O(178),q=O(359);const re=function te(A,F){return(0,q.A)((0,U.A)(A,F,R.A),A+"")}},778:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return function(te){return q(te)}}},5934:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){return q.has(te)}},9395:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(7003);const q=function U(te){return"function"==typeof te?te:R.A}},9697:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>z});var R=O(3744),U=O(3097),q=O(4569),F=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/\\(\\)?/g;const k=function re(ee){var Q=(0,q.A)(ee,function(H){return 500===Ce.size&&Ce.clear(),H}),Ce=Q.cache;return Q}(function(ee){var Q=[];return 46===ee.charCodeAt(0)&&Q.push(""),ee.replace(F,function(Ce,H,G,K){Q.push(G?K.replace(ne,"$1"):H||Ce)}),Q});var I=O(591);const z=function S(ee,Q){return(0,R.A)(ee)?ee:(0,U.A)(ee,Q)?[ee]:k((0,I.A)(ee))}},5152:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(6509);const q=function U(te){var re=new te.constructor(te.byteLength);return new R.A(re).set(new R.A(te)),re}},9933:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(1860),U="object"==typeof exports&&exports&&!exports.nodeType&&exports,q=U&&"object"==typeof module&&module&&!module.nodeType&&module,re=q&&q.exports===U?R.A.Buffer:void 0,A=re?re.allocUnsafe:void 0;const ne=function F(x,k){if(k)return x.slice();var I=x.length,S=A?A(I):new x.constructor(I);return x.copy(S),S}},4314:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(5152);const q=function U(te,re){var A=re?(0,R.A)(te.buffer):te.buffer;return new te.constructor(A,te.byteOffset,te.length)}},4528:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){var re=-1,A=q.length;for(te||(te=Array(A));++re<A;)te[re]=q[re];return te}},9898:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(1984),U=O(1827);const te=function q(re,A,F,ne){var x=!F;F||(F={});for(var k=-1,I=A.length;++k<I;){var S=A[k],z=ne?ne(F[S],re[S],S,F,re):void 0;void 0===z&&(z=re[S]),x?(0,U.A)(F,S,z):(0,R.A)(F,S,z)}return F}},4746:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(4713);const q=function(){try{var te=(0,R.A)(Object,"defineProperty");return te({},"",{}),te}catch{}}()},7133:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U="object"==typeof global&&global&&global.Object===Object&&global},7895:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});var R=O(6658),U=O(2697),q=O(4429);const re=function te(A){return(0,R.A)(A,q.A,U.A)}},4713:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>we});var fe,R=O(129),q=O(1860).A["__core-js_shared__"],re=(fe=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+fe:"";var ne=O(554),x=O(8736),I=/^\[object .+?Constructor\]$/,Ce=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const G=function H(fe){return!(!(0,ne.A)(fe)||function A(fe){return!!re&&re in fe}(fe))&&((0,R.A)(fe)?Ce:I).test((0,x.A)(fe))},we=function ge(fe,Te){var tt=function K(fe,Te){return fe?.[Te]}(fe,Te);return G(tt)?tt:void 0}},8010:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});const q=(0,O(8992).A)(Object.getPrototypeOf,Object)},2697:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>F});var R=O(1861),U=O(6032),te=Object.prototype.propertyIsEnumerable,re=Object.getOwnPropertySymbols;const F=re?function(ne){return null==ne?[]:(ne=Object(ne),(0,R.A)(re(ne),function(x){return te.call(ne,x)}))}:U.A},1938:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>tt});var R=O(4713),U=O(1860);const te=(0,R.A)(U.A,"DataView");var re=O(6568);const F=(0,R.A)(U.A,"Promise");var ne=O(4226);const k=(0,R.A)(U.A,"WeakMap");var I=O(5281),S=O(8736),z="[object Map]",Q="[object Promise]",Ce="[object Set]",H="[object WeakMap]",G="[object DataView]",K=(0,S.A)(te),ie=(0,S.A)(re.A),ge=(0,S.A)(F),we=(0,S.A)(ne.A),fe=(0,S.A)(k),Te=I.A;(te&&Te(new te(new ArrayBuffer(1)))!=G||re.A&&Te(new re.A)!=z||F&&Te(F.resolve())!=Q||ne.A&&Te(new ne.A)!=Ce||k&&Te(new k)!=H)&&(Te=function(Ze){var Le=(0,I.A)(Ze),Fe="[object Object]"==Le?Ze.constructor:void 0,Xe=Fe?(0,S.A)(Fe):"";if(Xe)switch(Xe){case K:return G;case ie:return z;case ge:return Q;case we:return Ce;case fe:return H}return Le});const tt=Te},4549:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(9697),U=O(6513),q=O(3744),te=O(8606),re=O(5481),A=O(4662);const ne=function F(x,k,I){for(var S=-1,z=(k=(0,R.A)(k,x)).length,ee=!1;++S<z;){var Q=(0,A.A)(k[S]);if(!(ee=null!=x&&I(x,Q)))break;x=x[Q]}return ee||++S!=z?ee:!!(z=null==x?0:x.length)&&(0,re.A)(z)&&(0,te.A)(Q,z)&&((0,q.A)(x)||(0,U.A)(x))}},923:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(554),U=Object.create;const te=function(){function x(){}return function(k){if(!(0,R.A)(k))return{};if(U)return U(k);x.prototype=k;var I=new x;return x.prototype=void 0,I}}();var re=O(8010),A=O(5776);const ne=function F(x){return"function"!=typeof x.constructor||(0,A.A)(x)?{}:te((0,re.A)(x))}},8606:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var U=/^(?:0|[1-9]\d*)$/;const te=function q(re,A){var F=typeof re;return!!(A=A??9007199254740991)&&("number"==F||"symbol"!=F&&U.test(re))&&re>-1&&re%1==0&&re<A}},7357:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(1319),U=O(1287),q=O(8606),te=O(554);const A=function re(F,ne,x){if(!(0,te.A)(x))return!1;var k=typeof ne;return!!("number"==k?(0,U.A)(x)&&(0,q.A)(ne,x.length):"string"==k&&ne in x)&&(0,R.A)(x[ne],F)}},3097:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(3744),U=O(4077),q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/;const A=function re(F,ne){if((0,R.A)(F))return!1;var x=typeof F;return!("number"!=x&&"symbol"!=x&&"boolean"!=x&&null!=F&&!(0,U.A)(F))||te.test(F)||!q.test(F)||null!=ne&&F in Object(ne)}},5776:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=Object.prototype;const q=function U(te){var re=te&&te.constructor;return te===("function"==typeof re&&re.prototype||R)}},3340:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>F});var R=O(7133),U="object"==typeof exports&&exports&&!exports.nodeType&&exports,q=U&&"object"==typeof module&&module&&!module.nodeType&&module,re=q&&q.exports===U&&R.A.process;const F=function(){try{return q&&q.require&&q.require("util").types||re&&re.binding&&re.binding("util")}catch{}}()},8992:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){return function(re){return q(te(re))}}},178:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});var q=Math.max;const re=function te(A,F,ne){return F=q(void 0===F?A.length-1:F,0),function(){for(var x=arguments,k=-1,I=q(x.length-F,0),S=Array(I);++k<I;)S[k]=x[F+k];k=-1;for(var z=Array(F+1);++k<F;)z[k]=x[k];return z[F]=ne(S),function R(A,F,ne){switch(ne.length){case 0:return A.call(F);case 1:return A.call(F,ne[0]);case 2:return A.call(F,ne[0],ne[1]);case 3:return A.call(F,ne[0],ne[1],ne[2])}return A.apply(F,ne)}(A,this,z)}}},1860:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(7133),U="object"==typeof self&&self&&self.Object===Object&&self;const te=R.A||U||Function("return this")()},3998:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){var te=-1,re=Array(q.size);return q.forEach(function(A){re[++te]=A}),re}},359:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>S});var R=O(1913),U=O(4746),q=O(7003),ne=Date.now;const S=function x(z){var ee=0,Q=0;return function(){var Ce=ne(),H=16-(Ce-Q);if(Q=Ce,H>0){if(++ee>=800)return arguments[0]}else ee=0;return z.apply(void 0,arguments)}}(U.A?function(z,ee){return(0,U.A)(z,"toString",{configurable:!0,enumerable:!1,value:(0,R.A)(ee),writable:!0})}:q.A)},4662:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(4077);const te=function q(re){if("string"==typeof re||(0,R.A)(re))return re;var A=re+"";return"0"==A&&1/re==-1/0?"-0":A}},8736:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var U=Function.prototype.toString;const te=function q(re){if(null!=re){try{return U.call(re)}catch{}try{return re+""}catch{}}return""}},1913:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return function(){return q}}},9311:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(363),U=O(1319),q=O(7357),te=O(133),re=Object.prototype,A=re.hasOwnProperty;const ne=(0,R.A)(function(x,k){x=Object(x);var I=-1,S=k.length,z=S>2?k[2]:void 0;for(z&&(0,q.A)(k[0],k[1],z)&&(S=1);++I<S;)for(var ee=k[I],Q=(0,te.A)(ee),Ce=-1,H=Q.length;++Ce<H;){var G=Q[Ce],K=x[G];(void 0===K||(0,U.A)(K,re[G])&&!A.call(x,G))&&(x[G]=ee[G])}return x})},1319:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q,te){return q===te||q!=q&&te!=te}},3578:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(1861),U=O(9617);const te=function q(x,k){var I=[];return(0,U.A)(x,function(S,z,ee){k(S,z,ee)&&I.push(S)}),I};var re=O(6385),A=O(3744);const ne=function F(x,k){return((0,A.A)(x)?R.A:te)(x,(0,re.A)(k,3))}},2383:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});var R=O(4367);const q=function U(te){return null!=te&&te.length?(0,R.A)(te,1):[]}},9671:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(9162),U=O(9617),q=O(9395),te=O(3744);const A=function re(F,ne){return((0,te.A)(F)?R.A:U.A)(F,(0,q.A)(ne))}},1981:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>F});var U=Object.prototype.hasOwnProperty;const te=function q(ne,x){return null!=ne&&U.call(ne,x)};var re=O(4549);const F=function A(ne,x){return null!=ne&&(0,re.A)(ne,x,te)}},4029:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});const U=function R(A,F){return null!=A&&F in Object(A)};var q=O(4549);const re=function te(A,F){return null!=A&&(0,q.A)(A,F,U)}},7003:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return q}},6513:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>k});var R=O(5281),U=O(2661);const re=function te(I){return(0,U.A)(I)&&"[object Arguments]"==(0,R.A)(I)};var A=Object.prototype,F=A.hasOwnProperty,ne=A.propertyIsEnumerable;const k=re(function(){return arguments}())?re:function(I){return(0,U.A)(I)&&F.call(I,"callee")&&!ne.call(I,"callee")}},3744:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=Array.isArray},1287:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(129),U=O(5481);const te=function q(re){return null!=re&&(0,U.A)(re.length)&&!(0,R.A)(re)}},8388:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(1287),U=O(2661);const te=function q(re){return(0,U.A)(re)&&(0,R.A)(re)}},9377:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>k});var R=O(1860),te="object"==typeof exports&&exports&&!exports.nodeType&&exports,re=te&&"object"==typeof module&&module&&!module.nodeType&&module,F=re&&re.exports===te?R.A.Buffer:void 0;const k=(F?F.isBuffer:void 0)||function U(){return!1}},2036:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ee});var R=O(3660),U=O(1938),q=O(6513),te=O(3744),re=O(1287),A=O(9377),F=O(5776),ne=O(8885),S=Object.prototype.hasOwnProperty;const ee=function z(Q){if(null==Q)return!0;if((0,re.A)(Q)&&((0,te.A)(Q)||"string"==typeof Q||"function"==typeof Q.splice||(0,A.A)(Q)||(0,ne.A)(Q)||(0,q.A)(Q)))return!Q.length;var Ce=(0,U.A)(Q);if("[object Map]"==Ce||"[object Set]"==Ce)return!Q.size;if((0,F.A)(Q))return!(0,R.A)(Q).length;for(var H in Q)if(S.call(Q,H))return!1;return!0}},129:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ne});var R=O(5281),U=O(554);const ne=function F(x){if(!(0,U.A)(x))return!1;var k=(0,R.A)(x);return"[object Function]"==k||"[object GeneratorFunction]"==k||"[object AsyncFunction]"==k||"[object Proxy]"==k}},5481:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>q});const q=function U(te){return"number"==typeof te&&te>-1&&te%1==0&&te<=9007199254740991}},554:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){var te=typeof q;return null!=q&&("object"==te||"function"==te)}},2661:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return null!=q&&"object"==typeof q}},4294:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>I});var R=O(5281),U=O(8010),q=O(2661),F=Function.prototype.toString,ne=Object.prototype.hasOwnProperty,x=F.call(Object);const I=function k(S){if(!(0,q.A)(S)||"[object Object]"!=(0,R.A)(S))return!1;var z=(0,U.A)(S);if(null===z)return!0;var ee=ne.call(z,"constructor")&&z.constructor;return"function"==typeof ee&&ee instanceof ee&&F.call(ee)==x}},4077:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});var R=O(5281),U=O(2661);const re=function te(A){return"symbol"==typeof A||(0,U.A)(A)&&"[object Symbol]"==(0,R.A)(A)}},8885:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>_i});var R=O(5281),U=O(5481),q=O(2661),Fe={};Fe["[object Float32Array]"]=Fe["[object Float64Array]"]=Fe["[object Int8Array]"]=Fe["[object Int16Array]"]=Fe["[object Int32Array]"]=Fe["[object Uint8Array]"]=Fe["[object Uint8ClampedArray]"]=Fe["[object Uint16Array]"]=Fe["[object Uint32Array]"]=!0,Fe["[object Arguments]"]=Fe["[object Array]"]=Fe["[object ArrayBuffer]"]=Fe["[object Boolean]"]=Fe["[object DataView]"]=Fe["[object Date]"]=Fe["[object Error]"]=Fe["[object Function]"]=Fe["[object Map]"]=Fe["[object Number]"]=Fe["[object Object]"]=Fe["[object RegExp]"]=Fe["[object Set]"]=Fe["[object String]"]=Fe["[object WeakMap]"]=!1;var ft=O(778),Zt=O(3340),Tt=Zt.A&&Zt.A.isTypedArray;const _i=Tt?(0,ft.A)(Tt):function Xe(Ti){return(0,q.A)(Ti)&&(0,U.A)(Ti.length)&&!!Fe[(0,R.A)(Ti)]}},5113:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(q){return void 0===q}},4429:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>re});var R=O(6726),U=O(3660),q=O(1287);const re=function te(A){return(0,q.A)(A)?(0,R.A)(A):(0,U.A)(A)}},133:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>S});var R=O(6726),U=O(554),q=O(5776);var F=Object.prototype.hasOwnProperty;const x=function ne(z){if(!(0,U.A)(z))return function te(z){var ee=[];if(null!=z)for(var Q in Object(z))ee.push(Q);return ee}(z);var ee=(0,q.A)(z),Q=[];for(var Ce in z)"constructor"==Ce&&(ee||!F.call(z,Ce))||Q.push(Ce);return Q};var k=O(1287);const S=function I(z){return(0,k.A)(z)?(0,R.A)(z,!0):x(z)}},6327:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(6689),U=O(6385),q=O(9103),te=O(3744);const A=function re(F,ne){return((0,te.A)(F)?R.A:q.A)(F,(0,U.A)(ne,3))}},4569:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(2291);function q(re,A){if("function"!=typeof re||null!=A&&"function"!=typeof A)throw new TypeError("Expected a function");var F=function(){var ne=arguments,x=A?A.apply(this,ne):ne[0],k=F.cache;if(k.has(x))return k.get(x);var I=re.apply(this,ne);return F.cache=k.set(x,I)||k,I};return F.cache=new(q.Cache||R.A),F}q.Cache=R.A;const te=q},3377:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>ie});var R=O(4501),U=O(1984),q=O(9697),te=O(8606),re=O(554),A=O(4662);const ne=function F(ge,we,fe,Te){if(!(0,re.A)(ge))return ge;for(var tt=-1,Ze=(we=(0,q.A)(we,ge)).length,Le=Ze-1,Fe=ge;null!=Fe&&++tt<Ze;){var Xe=(0,A.A)(we[tt]),mt=fe;if("__proto__"===Xe||"constructor"===Xe||"prototype"===Xe)return ge;if(tt!=Le){var ft=Fe[Xe];void 0===(mt=Te?Te(ft,Xe,Fe):void 0)&&(mt=(0,re.A)(ft)?ft:(0,te.A)(we[tt+1])?[]:{})}(0,U.A)(Fe,Xe,mt),Fe=Fe[Xe]}return ge};var I=O(4029);const z=function S(ge,we){return function x(ge,we,fe){for(var Te=-1,tt=we.length,Ze={};++Te<tt;){var Le=we[Te],Fe=(0,R.A)(ge,Le);fe(Fe,Le)&&ne(Ze,(0,q.A)(Le,ge),Fe)}return Ze}(ge,we,function(fe,Te){return(0,I.A)(ge,Te)})};var ee=O(2383),Q=O(178),Ce=O(359);const ie=function H(ge){return(0,Ce.A)((0,Q.A)(ge,void 0,ee.A),ge+"")}(function(ge,we){return null==ge?{}:z(ge,we)})},3938:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>k});var R=Math.ceil,U=Math.max;var re=O(7357),A=O(5809);const k=function F(I){return function(S,z,ee){return ee&&"number"!=typeof ee&&(0,re.A)(S,z,ee)&&(z=ee=void 0),S=(0,A.A)(S),void 0===z?(z=S,S=0):z=(0,A.A)(z),function q(I,S,z,ee){for(var Q=-1,Ce=U(R((S-I)/(z||1)),0),H=Array(Ce);Ce--;)H[ee?Ce:++Q]=I,I+=z;return H}(S,z,ee=void 0===ee?S<z?1:-1:(0,A.A)(ee),I)}}()},8209:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>x});const U=function R(k,I,S,z){var ee=-1,Q=null==k?0:k.length;for(z&&Q&&(S=k[++ee]);++ee<Q;)S=I(S,k[ee],ee,k);return S};var q=O(9617),te=O(6385);const A=function re(k,I,S,z,ee){return ee(k,function(Q,Ce,H){S=z?(z=!1,Q):I(S,Q,Ce,H)}),S};var F=O(3744);const x=function ne(k,I,S){var z=(0,F.A)(k)?U:A,ee=arguments.length<3;return z(k,(0,te.A)(I,4),S,ee,q.A)}},6032:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>U});const U=function R(){return[]}},5809:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>K});var R=/\s/;var te=/^\s+/;const A=function re(ie){return ie&&ie.slice(0,function U(ie){for(var ge=ie.length;ge--&&R.test(ie.charAt(ge)););return ge}(ie)+1).replace(te,"")};var F=O(554),ne=O(4077),k=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,S=/^0o[0-7]+$/i,z=parseInt;const K=function G(ie){return ie?1/0===(ie=function ee(ie){if("number"==typeof ie)return ie;if((0,ne.A)(ie))return NaN;if((0,F.A)(ie)){var ge="function"==typeof ie.valueOf?ie.valueOf():ie;ie=(0,F.A)(ge)?ge+"":ge}if("string"!=typeof ie)return 0===ie?ie:+ie;ie=A(ie);var we=I.test(ie);return we||S.test(ie)?z(ie.slice(2),we?2:8):k.test(ie)?NaN:+ie}(ie))||-1/0===ie?17976931348623157e292*(ie<0?-1:1):ie==ie?ie:0:0===ie?ie:0}},591:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>I});var R=O(6944),U=O(6689),q=O(3744),te=O(4077),A=R.A?R.A.prototype:void 0,F=A?A.toString:void 0;const x=function ne(S){if("string"==typeof S)return S;if((0,q.A)(S))return(0,U.A)(S,ne)+"";if((0,te.A)(S))return F?F.call(S):"";var z=S+"";return"0"==z&&1/S==-1/0?"-0":z},I=function k(S){return null==S?"":x(S)}},1195:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>te});var R=O(591),U=0;const te=function q(re){var A=++U;return(0,R.A)(re)+A}},8456:(It,ke,O)=>{"use strict";O.d(ke,{A:()=>A});var R=O(6689);var te=O(4429);const A=function re(F){return null==F?[]:function U(F,ne){return(0,R.A)(ne,function(x){return F[x]})}(F,(0,te.A)(F))}},467:(It,ke,O)=>{"use strict";function R(q,te,re,A,F,ne,x){try{var k=q[ne](x),I=k.value}catch(S){return void re(S)}k.done?te(I):Promise.resolve(I).then(A,F)}function U(q){return function(){var te=this,re=arguments;return new Promise(function(A,F){var ne=q.apply(te,re);function x(I){R(ne,A,F,x,k,"next",I)}function k(I){R(ne,A,F,x,k,"throw",I)}x(void 0)})}}O.d(ke,{A:()=>U})}},It=>{It(It.s=5752)}]);